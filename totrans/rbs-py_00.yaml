- en: Preface
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Noted software engineer and entrepreneur Marc Andreesen famously declared that
    [“software is eating the world”](https://oreil.ly/tYaNz). This was back in 2011,
    and has only become more true over time. Software systems continue to grow in
    complexity and can be found in all facets of modern life. Standing in the middle
    of this ravenous beast is the Python language. Programmers often cite Python as
    a favorite [language](https://oreil.ly/RUNNh), and it can be found everywhere:
    from web applications, to machine learning, to developer tools, and more.'
  prefs: []
  type: TYPE_NORMAL
- en: Not all that glitters is gold, though. As our software systems become more complex,
    it becomes harder to understand how our mental models map onto the real world.
    If left unchecked, software systems bloat and become brittle, earning the frightening
    moniker “legacy code.” These codebases often come with warnings such as, “Do not
    touch these files; we don’t know why, but it breaks when you do,” and, “Oh, only
    So-and-So knows that code, and they left for a high-paying Silicon Valley job
    two years ago.” Software development is a young field, but these sort of statements
    should be terrifying to developers and businesspeople alike.
  prefs: []
  type: TYPE_NORMAL
- en: The truth is, to write systems that last, you need to be deliberate in the choices
    you make. As stated by Titus Winters, Tom Manshreck, and Hyrum Wright, “Software
    engineering is programming integrated over time.”^([1](part0002_split_007.html#idm45644759598552))
    Your code might last a long time—I’ve stepped into projects whose code was written
    while I was in elementary school. How long will your code last? Will it last longer
    than your tenure at your current job (or when you finish maintaining that project)?
    How do you want your code to be received in a few years when someone is building
    core components from it? Do you want your successors to thank you for your foresight,
    or curse your name for the complexities you bore into this world?
  prefs: []
  type: TYPE_NORMAL
- en: Python is a wonderful language, but it occasionally makes building for the future
    tricky. Some proponents of other programming languages have decried Python as
    “not production-grade” or “useful for prototyping only,” but the truth is that
    many developers only scratch the surface, rather than learning all the tools and
    tricks for writing robust Python. Throughout this book, you’ll learn how to do
    better. You’ll journey through numerous ways to make Python clean and maintainable.
    Your future maintainers will enjoy working with your code, as it was designed
    up front to make things easy. So go, read this book, look toward the future, and
    build awesome software that will last.
  prefs: []
  type: TYPE_NORMAL
- en: Who Should Read This Book
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: This book is for any Python developer who is looking to grow the code they work
    on in a sustainable and maintainable fashion. This is not intended to be your
    first Python text; I expect that you have written Python before. You should be
    comfortable with Python control flow, and have worked with classes before. If
    you are looking for a more introductory text, I suggest reading [*Learning Python*](https://oreil.ly/iIl2K)
    by Mark Lutz (O’Reilly) first.
  prefs: []
  type: TYPE_NORMAL
- en: While I will be covering many advanced Python topics, the goal of this book
    is not to be a how-to for using all of Python’s features. Instead, the features
    are a backdrop for a larger conversation about robustness and how your choices
    impact maintainability. At times I will discuss strategies that you should rarely
    use, if at all. That is because I want to illustrate first principles of robustness;
    the journey of understanding why and how we make decisions in code is more important
    than knowing what tools to use in an optimal scenario. In practice, the optimal
    scenario is a rare occurence. Use the principles in this book to draw your own
    conclusions from your codebase.
  prefs: []
  type: TYPE_NORMAL
- en: This book is not a reference book. You might call it a discussion book. Each
    chapter should be a starting point for developers in your organization to discuss,
    together, how best to apply these principles. Start a book club, discussion group,
    or lunch and learn to foster communication. I have proposed discussion topics
    in each chapter to get the converstation started. When you come across these topics,
    I encourage you to stop and reflect on your current codebase. Talk among your
    peers and use these topics as a springboard for discussing the state of your code,
    processes, and workflows. If you are interested in a reference book about the
    Python language, I heartily recommend [*Fluent Python*](https://oreil.ly/PVbON)
    by Luciano Ramalho (O’Reilly; a second edition is forthcoming in late 2021).
  prefs: []
  type: TYPE_NORMAL
- en: A system can be robust in many different ways. It can be security hardened,
    scalable, fault-tolerant, or less likely to introduce new errors. Each one of
    these facets of robustness warrants a full book; this book is focused on preventing
    the developers who inherit your code from creating new faults in your system.
    I will show you how to communicate to future developers, how to make their lives
    easier through architectural patterns, and how to catch errors in your codebase
    before they make it into production. This book zeroes in on the robustness of
    your Python codebase, not the robustness of your system as a whole.
  prefs: []
  type: TYPE_NORMAL
- en: I will be covering a wealth of information, from many different areas of software,
    including software engineering, computer science, testing, functional programming,
    and object-oriented programming (OOP). I do not expect you to have a background
    in these fields. There are sections where I explain things at a beginner level;
    this is often to deconstruct how we think about core fundamentals of the language.
    This is, for the most part, an intermediate-level text.
  prefs: []
  type: TYPE_NORMAL
- en: 'Ideal readers include:'
  prefs: []
  type: TYPE_NORMAL
- en: Developers currently working in a large codebase, looking to find better ways
    to communicate with their colleagues
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Primary codebase maintainers, looking for ways to help lessen the burden of
    future maintainers
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Self-taught developers who can write Python really well but need to better understand
    why we do the things we do
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Software engineering graduates who need a reminder of practical advice for development
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Senior developers looking for a way to tie their design rationale to first principles
    of robustness
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: This book focuses on writing software over time. If a lot of your code is a
    prototype, throwaway, or disposable in any other fashion, the advice in this book
    will end up creating more work than is necessary for your project. Likewise if
    your project is small—say, under one hundred lines of Python. Making code maintainable
    does add complexity; there’s no doubt about that. However, I’ll guide you through
    minimizing that complexity. If your code lives longer than a few weeks or grows
    to a considerable size, you need to consider the sustainability of your codebase.
  prefs: []
  type: TYPE_NORMAL
- en: About This Book
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'This book covers a wide swath of knowledge, across many chapters. It is broken
    up into four parts:'
  prefs: []
  type: TYPE_NORMAL
- en: '[Part I, *Annotating Your Code with Types*](part0004.html#part_1)'
  prefs: []
  type: TYPE_NORMAL
- en: We’ll start with types in Python. Types are fundamental to the language, but
    are not often examined in great detail. The types you choose matter, as they convey
    a very specific intent. We’ll examine type annotations and what specific annotations
    communicate to the developer. We’ll also go over typecheckers and how those help
    catch bugs early.
  prefs: []
  type: TYPE_NORMAL
- en: '[Part II, *Defining Your Own Types*](part0011.html#part_2)'
  prefs: []
  type: TYPE_NORMAL
- en: After covering how to think about Python’s types, we’ll focus on how to create
    your own types. We’ll walk through enumerations, data classes, and classes in
    depth. We’ll explore how making certain design choices in designing a type can
    increase or decrease the robustness of your code.
  prefs: []
  type: TYPE_NORMAL
- en: '[Part III, *Extensible Python*](part0019.html#part_3)'
  prefs: []
  type: TYPE_NORMAL
- en: After learning how to better express your intentions, we’ll focus on how to
    enable developers to change your code effortlessly, building with confidence on
    your strong foundation. We’ll cover extensibility, dependencies, and architectural
    patterns that allow you to modify your system with minimal impact.
  prefs: []
  type: TYPE_NORMAL
- en: '[Part IV, *Building a Safety Net*](part0025.html#part_4)'
  prefs: []
  type: TYPE_NORMAL
- en: Lastly, we’ll explore how to build a safety net, so that you can gently catch
    your future collaborators when they do fall. Their confidence will increase, knowing
    that they have a strong, robust system that they can fearlessly adapt to their
    use case. Finally, we’ll cover a variety of static analysis and testing tools
    that will help you catch rogue behavior.
  prefs: []
  type: TYPE_NORMAL
- en: Each chapter is mostly self-contained, with references to other chapters where
    applicable. You can read this book from cover to cover, or bounce around to chapters
    that suit your fancy. Chapters grouped in each part will be related to one another,
    but there will be fewer relations between book parts.
  prefs: []
  type: TYPE_NORMAL
- en: All code examples were run using Python 3.9.0, and I’ll try to call out when
    you need a specific Python version or later to run examples (such as Python 3.7
    for the use of data classes).
  prefs: []
  type: TYPE_NORMAL
- en: Throughout this book, I will be doing most of my work on the command line. I
    ran all of these commands from an Ubuntu operating system, but most tools should
    work just as well on Mac or Windows systems. In some cases, I will show how certain
    tools interact with integrated development environments (IDEs), such as Visual
    Studio Code (VS Code). Most IDEs use the command-line options underneath the hood;
    most of what you learn on the command line will translate directly to IDE options.
  prefs: []
  type: TYPE_NORMAL
- en: This book will be presenting many different techniques that can improve the
    robustness of your code. However, there are no silver bullets in software development.
    Trade-offs are the heart of solid engineering, and there is no exception in the
    methods that I present. I will be transparent about benefits and drawbacks as
    I discuss these topics. You will know more about your systems than I will, and
    you are best suited to choose which tool is appropriate for which job. All I am
    doing is stocking your toolbox.
  prefs: []
  type: TYPE_NORMAL
- en: Conventions Used in This Book
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'The following typographical conventions are used in this book:'
  prefs: []
  type: TYPE_NORMAL
- en: '*Italic*'
  prefs: []
  type: TYPE_NORMAL
- en: Indicates new terms, URLs, email addresses, filenames, and file extensions.
  prefs: []
  type: TYPE_NORMAL
- en: '`Constant width`'
  prefs: []
  type: TYPE_NORMAL
- en: Used for program listings, as well as within paragraphs to refer to program
    elements such as variable or function names, databases, data types, environment
    variables, statements, and keywords.
  prefs: []
  type: TYPE_NORMAL
- en: '**`Constant width bold`**'
  prefs: []
  type: TYPE_NORMAL
- en: Shows commands or other text that should be typed literally by the user.
  prefs: []
  type: TYPE_NORMAL
- en: '*`Constant width italic`*'
  prefs: []
  type: TYPE_NORMAL
- en: Shows text that should be replaced with user-supplied values or by values determined
    by context.
  prefs: []
  type: TYPE_NORMAL
- en: Tip
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: This element signifies a tip or suggestion.
  prefs: []
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: This element signifies a general note.
  prefs: []
  type: TYPE_NORMAL
- en: Warning
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: This element indicates a warning or caution.
  prefs: []
  type: TYPE_NORMAL
- en: Using Code Examples
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Supplemental material (code examples, exercises, etc.) is available for download
    at [*https://github.com/pviafore/RobustPython*](https://github.com/pviafore/RobustPython).
  prefs: []
  type: TYPE_NORMAL
- en: If you have a technical question or a problem using the code examples, please
    send email to [*bookquestions@oreilly.com*](mailto:bookquestions@oreilly.com).
  prefs: []
  type: TYPE_NORMAL
- en: This book is here to help you get your job done. In general, if example code
    is offered with this book, you may use it in your programs and documentation.
    You do not need to contact us for permission unless you’re reproducing a significant
    portion of the code. For example, writing a program that uses several chunks of
    code from this book does not require permission. Selling or distributing examples
    from O’Reilly books does require permission. Answering a question by citing this
    book and quoting example code does not require permission. Incorporating a significant
    amount of example code from this book into your product’s documentation does require
    permission.
  prefs: []
  type: TYPE_NORMAL
- en: 'We appreciate, but generally do not require, attribution. An attribution usually
    includes the title, author, publisher, and ISBN. For example: “*Robust Python*
    by Patrick Viafore (O’Reilly). Copyright 2021 Kudzera, LLC, 978-1-098-10066-7.”'
  prefs: []
  type: TYPE_NORMAL
- en: If you feel your use of code examples falls outside fair use or the permission
    given above, feel free to contact us at [*permissions@oreilly.com*](mailto:permissions@oreilly.com).
  prefs: []
  type: TYPE_NORMAL
- en: O’Reilly Online Learning
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Note
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
- en: For more than 40 years, [*O’Reilly Media*](http://oreilly.com) has provided
    technology and business training, knowledge, and insight to help companies succeed.
  prefs: []
  type: TYPE_NORMAL
- en: Our unique network of experts and innovators share their knowledge and expertise
    through books, articles, and our online learning platform. O’Reilly’s online learning
    platform gives you on-demand access to live training courses, in-depth learning
    paths, interactive coding environments, and a vast collection of text and video
    from O’Reilly and over two hundred other publishers. For more information, visit
    [*http://oreilly.com*](http://oreilly.com).
  prefs: []
  type: TYPE_NORMAL
- en: How to Contact Us
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Please address comments and questions concerning this book to the publisher:'
  prefs: []
  type: TYPE_NORMAL
- en: O’Reilly Media, Inc.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1005 Gravenstein Highway North
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Sebastopol, CA 95472
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 800-998-9938 (in the United States or Canada)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 707-829-0515 (international or local)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 707-829-0104 (fax)
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: We have a web page for this book, where we list errata, examples, and any additional
    information. You can access this page at [*https://oreil.ly/robust-python*](https://oreil.ly/robust-python).
  prefs: []
  type: TYPE_NORMAL
- en: Email [*bookquestions@oreilly.com*](mailto:bookquestions@oreilly.com) to comment
    or ask technical questions about this book.
  prefs: []
  type: TYPE_NORMAL
- en: For news and information about our books and courses, visit [*http://oreilly.com*](http://oreilly.com).
  prefs: []
  type: TYPE_NORMAL
- en: 'Find us on Facebook: [*http://facebook.com/oreilly*](http://facebook.com/oreilly)'
  prefs: []
  type: TYPE_NORMAL
- en: 'Follow us on Twitter: [*http://twitter.com/oreillymedia*](http://twitter.com/oreillymedia)'
  prefs: []
  type: TYPE_NORMAL
- en: 'Watch us on YouTube: [*http://youtube.com/oreillymedia*](http://youtube.com/oreillymedia)'
  prefs: []
  type: TYPE_NORMAL
- en: Acknowledgments
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: I would like to acknowledge my incredible wife, Kendall. She is my support and
    sounding board, and I appreciate everything she did to make sure that I had the
    time and space to write this book.
  prefs: []
  type: TYPE_NORMAL
- en: No book is written in isolation, and this book is no exception. I stand on the
    shoulders of giants in the software industry, and I appreciate all who came before
    me.
  prefs: []
  type: TYPE_NORMAL
- en: I also would like to thank everyone who was involved in reviewing this book
    to make sure that my messaging was consistent and that my examples were clear.
    Thank you to Bruce G., David K., David P., and Don P. for providing early feedback
    and helping me decide on a direction for this book. Thank you to my tech reviewers
    Charles Givre, Drew Winstel, Jennifer Wilcox, Jordan Goldmeier, Nathan Stocks,
    and Jess Males for their invaluable feedback, especially where things really only
    made sense in my head but not on paper. Lastly, thank you to anyone who read the
    early release draft and was kind enough to email me their thoughts, especially
    Daniel C. and Francesco.
  prefs: []
  type: TYPE_NORMAL
- en: I’d like to thank everyone who helped transform my final draft into something
    production-worthy. Thank you to Justin Billing for diving deep as a copyeditor
    and helping refine the presentation of my ideas. Thank you to Shannon Turlington
    for proofreading; the book is much more polished because of you. A big thank you
    goes to Ellen Troutman-Zaig, who produced a fantastic index that I was blown away
    by.
  prefs: []
  type: TYPE_NORMAL
- en: Lastly, I could not do this without the fabulous team at O’Reilly. Thank you
    to Amanda Quinn for helping me through the proposal process and helping me develop
    focus for the book. Thank you to Kristen Brown for making the production stage
    incredibly easy for me. Thank you to Kate Dullea, who converted my MS Paint-quality
    sketches into clean, crisp illustrations. Also, I would like to give a tremendous
    thank you to my developmental editor, Sarah Grey. I looked forward to our weekly
    meetings, and she was fantastic in helping me craft a book for a broad audience,
    while still letting me dive deep into technical details.
  prefs: []
  type: TYPE_NORMAL
- en: '^([1](part0002_split_000.html#idm45644759598552-marker)) Titus Winters, Tom
    Manshreck, and Hyrum Wright. *Software Engineering at Google: Lessons Learned
    from Programming over Time*. Sebastopol, CA: O’Reilly Media, Inc., 2020.'
  prefs: []
  type: TYPE_NORMAL
