- en: Prerequisites and Assumptions
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 先决条件和假设
- en: Here’s an outline of what I’m assuming about you and what you already know,
    as well as what software you’ll need ready and installed on your computer.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 这是我对你的假设以及你已经知道的内容的概述，以及你需要在你的电脑上准备并安装哪些软件。
- en: Python 3 and Programming
  id: totrans-2
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Python 3 和编程
- en: I’ve tried to write this book with beginners in mind, but if you’re new to programming,
    I’m assuming that you’ve already learned the basics of Python. So if you haven’t
    already, do run through a Python beginner’s tutorial or get an introductory book
    like [*The Quick Python Book*](https://www.manning.com/books/the-quick-python-book-third-edition)
    or [*Think Python*](https://greenteapress.com/thinkpython/html/index.xhtml), or,
    just for fun, [*Invent Your Own Computer Games with Python*](https://inventwithpython.com/#invent),
    all of which are excellent introductions.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 我尽量以初学者为考虑对象来写这本书，但是如果你是新手程序员，我假设你已经学会了 Python 的基础知识。所以如果你还没有，先跑一遍 Python 初学者教程或者获取一本介绍性的书籍，比如[*The
    Quick Python Book*](https://www.manning.com/books/the-quick-python-book-third-edition)
    或 [*Think Python*](https://greenteapress.com/thinkpython/html/index.xhtml)，又或者，只是为了好玩，[*Invent
    Your Own Computer Games with Python*](https://inventwithpython.com/#invent)，它们都是很好的入门材料。
- en: If you’re an experienced programmer but new to Python, you should get along
    just fine. Python is joyously simple to understand.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你是一位有经验的程序员，但是对 Python 还很陌生，你应该能够顺利进行。Python 简单易懂。
- en: You should be able to follow this book on Mac, Windows, or Linux. Detailed installation
    instructions for each OS follow.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该能够在 Mac、Windows 或 Linux 上跟着这本书。每个操作系统的详细安装说明如下。
- en: Tip
  id: totrans-6
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 提示
- en: This book was tested against Python 3.11. If you’re on an earlier version, you
    will find minor differences in the way things look in my command output listings
    (tracebacks won’t have the `^^^^^^` carets marking error locations for example)
    so you’re best off upgrading, ideally, if you can.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 这本书是在 Python 3.11 上测试的。如果你使用的是早期版本，你会发现我的命令输出列表中的东西看起来有轻微的差异（例如，追踪不会有 `^^^^^^`
    标记错误位置），所以最好是升级，如果可能的话。
- en: If you are thinking of using [PythonAnywhere](http://www.pythonanywhere.com)
    rather than a locally installed Python, you should go and take a quick look at
    [Link to Come] before you get started.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你考虑使用 [PythonAnywhere](http://www.pythonanywhere.com) 而不是本地安装的 Python，则在开始之前你应该去快速看一下
    [Link to Come]。
- en: In any case, I expect you to have access to Python, to know how to launch it
    from a command line, and to know how to edit a Python file and run it. Again,
    have a look at the three books I recommended previously if you’re in any doubt.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 无论如何，我希望你能够访问 Python，并知道如何从命令行启动它，以及如何编辑一个 Python 文件并运行它。如果你有任何疑问，再次查看我之前推荐的三本书籍。
- en: How HTML Works
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: HTML 的工作原理
- en: I’m also assuming you have a basic grasp of how the web works—​what HTML is,
    what a POST request is, and so on. If you’re not sure about those, you’ll need
    to find a basic HTML tutorial; there are a few at [*http://www.webplatform.org/*](http://www.webplatform.org/).
    If you can figure out how to create an HTML page on your PC and look at it in
    your browser, and understand what a form is and how it might work, then you’re
    probably OK.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 我还假设你对网络的工作原理有基本的了解 —— HTML 是什么，什么是 POST 请求等等。如果你对这些不确定，你需要找一些基本的 HTML 教程；在[*http://www.webplatform.org/*](http://www.webplatform.org/)上有几个。如果你能够弄清楚如何在你的电脑上创建一个
    HTML 页面并在浏览器中查看它，并理解表单是什么以及它可能是如何工作的，那么你可能已经没问题了。
- en: Django
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Django
- en: The book uses the Django framework, which is (probably) the most well-established
    web framework in the Python world. I’ve written the book assuming that the reader
    has no prior knowledge of Django, but if you’re new to Python *and* new to web
    development *and* new to testing, you may occasionally find that there’s just
    one too many topics and sets of concepts to try and take on board. If that’s the
    case, I recommend taking a break from the book, and taking a look at a Django
    tutorial. [DjangoGirls](https://tutorial.djangogirls.org/) is the best, most beginner-friendly
    tutorial I know of. The [official tutorial](https://docs.djangoproject.com/en/4.2/intro/tutorial01/)
    is also excellent for more experienced programmers.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 本书使用 Django 框架，这可能是 Python 世界中最成熟的 Web 框架。我写这本书的时候假设读者对 Django 没有任何先前的了解，但是如果你是
    Python 和 Web 开发的新手，并且对测试也不熟悉，你可能会偶尔发现有一些主题和概念太多了，难以掌握。如果是这样的话，我建议你暂时离开这本书，去看一看
    Django 的教程。[DjangoGirls](https://tutorial.djangogirls.org/) 是我知道的最好的、最适合初学者的教程。官方教程也非常适合有经验的程序员。
- en: JavaScript
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: JavaScript
- en: There’s a little bit of JavaScript in the second half of the book. If you don’t
    know JavaScript, don’t worry about it until then, and if you find yourself a little
    confused, I’ll recommend a couple of guides at that point.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 本书的后半部分有一点 JavaScript。如果您不了解 JavaScript，请直到那时不要担心，如果您发现自己有些困惑，我会在那时推荐一些指南。
- en: Read on for installation instructions.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 继续阅读安装说明。
- en: Required Software Installations
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 必要的软件安装
- en: 'Aside from Python, you’ll need:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 除了 Python，您还需要：
- en: The Firefox web browser
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: Firefox 网页浏览器
- en: Selenium can actually drive any of the major browsers, but I chose Firefox because
    it’s the least in hock to corporate interests.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: Selenium 实际上可以驱动任何主流浏览器，但我选择了 Firefox，因为它受企业利益的控制最少。
- en: The Git version control system
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: Git 版本控制系统
- en: This is available for any platform, at [*http://git-scm.com/*](http://git-scm.com/).
    On Windows, it comes with the *Bash* command line, which is needed for the book.
    See [“Windows Notes”](#windows-notes).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 这适用于任何平台，地址为[*http://git-scm.com/*](http://git-scm.com/)。在 Windows 上，它附带了 *Bash*
    命令行，这是本书所需的。请参阅 [“Windows 注”](#windows-notes)。
- en: A virtualenv with Python 3.11, Django 4.2, and Selenium 4 in it
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 一个包含 Python 3.11、Django 4.2 和 Selenium 4 的虚拟环境
- en: Python’s virtualenv and pip tools now come bundled with Python (they didn’t
    always used to, so this is a big hooray). Detailed instructions for preparing
    your virtualenv follow.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: Python 的 virtualenv 和 pip 工具现在与 Python 捆绑在一起（它们以前并不总是如此，所以这是一个大好消息）。接下来是准备虚拟环境的详细说明。
- en: Installing Firefox
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 Firefox
- en: Firefox is available as a download for Windows and MacOS from [*https://www.mozilla.org/firefox/*](https://www.mozilla.org/firefox/).
    On Linux, you probably already have it installed, but otherwise your package manager
    will have it.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: Firefox 可在 Windows 和 MacOS 上下载安装，地址为[*https://www.mozilla.org/firefox/*](https://www.mozilla.org/firefox/)。在
    Linux 上，你可能已经安装了它，但如果没有的话，你可以通过包管理器安装。
- en: Make sure you have the latest version, so that the “geckodriver” browser automation
    module is available.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 确保您拥有最新版本，以便“geckodriver”浏览器自动化模块可用。
- en: Setting Up Your Virtualenv
  id: totrans-28
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置您的虚拟环境
- en: A Python virtualenv (short for virtual environment) is how you set up your environment
    for different Python projects. It allows you to use different packages (e.g.,
    different versions of Django, and even different versions of Python) in each project.
    And because you’re not installing things system-wide, it means you don’t need
    root permissions.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: Python 虚拟环境（简称虚拟环境）是您为不同 Python 项目设置环境的方式。它允许您在每个项目中使用不同的软件包（例如，不同版本的 Django，甚至不同版本的
    Python）。由于您不是系统范围内安装软件，因此意味着您不需要 root 权限。
- en: Let’s create a virtualenv. I’m assuming you’re working in a folder called *goat-book*,
    but you can name your work folder whatever you like. Stick to the name “.venv”
    for the virtualenv, though.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们创建一个虚拟环境。我假设您在一个名为 *goat-book* 的文件夹中工作，但您可以根据喜好命名您的工作文件夹。但请确保虚拟环境的名称为 “.venv”。
- en: '[PRE0]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'On Windows, the `py` executable is a shortcut for different Python versions.
    On Mac or Linux, we use `python3.11`:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Windows 上，`py` 可执行文件是不同 Python 版本的快捷方式。在 Mac 或 Linux 上，我们使用 `python3.11`：
- en: '[PRE1]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Activating and Deactivating the Virtualenv
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 激活和停用虚拟环境
- en: Whenever you’re working through the book, you’ll want to make sure your virtualenv
    has been “activated”. You can always tell when your virtualenv is active because
    you’ll see `(.venv)` in parentheses, in your prompt. But you can also check by
    running `which python` to check whether Python is currently the system-installed
    one, or the virtualenv one.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 每当您阅读本书时，都应确保您的虚拟环境已“激活”。您可以根据提示符中是否显示 `(.venv)` 来确定您的虚拟环境是否处于活动状态。但您也可以通过运行
    `which python` 检查当前是否为系统安装的 Python，还是虚拟环境的 Python。
- en: The command to activate the virtualenv is `source .venv/Scripts/activate` on
    Windows and `source .venv/bin/activate` on Mac/Linux. The command to deactivate
    is just `deactivate`.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 激活虚拟环境的命令是在 Windows 上执行 `source .venv/Scripts/activate`，在 Mac/Linux 上执行 `source
    .venv/bin/activate`。停用的命令只是 `deactivate`。
- en: 'Try it out like this:'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 这样尝试一下：
- en: '[PRE2]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '[PRE3]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Tip
  id: totrans-40
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 提示
- en: Always make sure your virtualenv is active when working on the book. Look out
    for the `(.venv)` in your prompt, or run `which python` to check.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在编写本书时，请始终确保您的虚拟环境处于活动状态。请注意您的提示符中是否有 `(.venv)`，或者运行 `which python` 进行检查。
- en: Installing Django and Selenium
  id: totrans-42
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 Django 和 Selenium
- en: We’ll install Django 4.2 and the latest Selenium^([2](preface02.xhtml#id189)).
    Remember to make sure your virtualenv is active first!
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将安装 Django 4.2 和最新的 Selenium^([2](preface02.xhtml#id189))。请确保你的虚拟环境已激活！
- en: '[PRE4]'
  id: totrans-44
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Checking it works:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 检查是否正常工作：
- en: '[PRE5]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: this should pop open a Firefox web browser, which you’ll then need to close.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 这应该会弹出一个 Firefox 网页浏览器，你需要关闭它。
- en: Tip
  id: totrans-48
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 小提示
- en: If you see an error, you’ll need to debug it before you go further. On Linux/Ubuntu,
    I ran into [this bug](https://github.com/mozilla/geckodriver/issues/2010) which
    you need to fix by setting an environment variable called `TMPDIR`.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你看到一个错误，你需要在继续之前进行调试。在 Linux/Ubuntu 上，我遇到了 [这个 bug](https://github.com/mozilla/geckodriver/issues/2010)，你需要通过设置一个名为
    `TMPDIR` 的环境变量来修复它。
- en: Some Error Messages You’re Likely to See When You *Inevitably* Fail to Activate
    Your Virtualenv
  id: totrans-50
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 当你 *不可避免* 地无法激活你的虚拟环境时，你可能会看到一些错误信息。
- en: 'If you’re new to virtualenvs—​or even if you’re not, to be honest—​at some
    point you’re *guaranteed* to forget to activate it, and then you’ll be staring
    at an error message. Happens to me all the time. Here are some of the things to
    look out for:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你是虚拟环境的新手——或者坦白说，即使你不是——在某个时候你肯定会忘记激活它，然后你会盯着一个错误信息。这时我经常遇到。这里是一些需要注意的事项：
- en: '[PRE6]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Or:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 或者：
- en: '[PRE7]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: As always, look out for that `(.venv)` in your command prompt, and a quick `source
    .venv/Scripts/activate` or `source .venv/bin/activate` is probably what you need
    to get it working again.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 一如既往，留意命令提示符中的 `(.venv)`，只需快速输入 `source .venv/Scripts/activate` 或 `source .venv/bin/activate`，就可能是你重新运行它所需要的。
- en: 'Here’s a couple more, for good measure:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 这里还有更多的错误信息，作为参考：
- en: '[PRE8]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: This means you’re not currently in the right directory for working on the project.
    Try a `cd goat-book`, or similar.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着你当前不在项目的正确目录中。尝试 `cd goat-book` 或类似的命令。
- en: Alternatively, if you’re sure you’re in the right place, you may have run into
    a bug from an older version of Python, where it wouldn’t install an activate script
    that was compatible with Git-Bash. Reinstall Python 3, and make sure you have
    version 3.6.3 or later, and then delete and re-create your virtualenv.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，如果你确定自己在正确的位置，可能遇到了一个旧版 Python 的 bug，导致无法安装与 Git-Bash 兼容的激活脚本。重新安装 Python
    3，确保你有 3.6.3 及以上版本，然后删除并重新创建你的虚拟环境。
- en: 'If you see something like this, it’s probably the same issue, you need to upgrade
    Python:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你看到类似的情况，那很可能是同一个问题，你需要升级 Python：
- en: '[PRE9]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'Final one! If you see this:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一个！如果你看到这个：
- en: '[PRE10]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: It’s because you’ve launched the default Windows command prompt, `cmd`, instead
    of Git-Bash. Close it and open the latter.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 这是因为你启动了默认的 Windows 命令提示符 `cmd`，而不是 Git-Bash。关闭它并打开后者。
- en: Happy coding!
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '编码愉快！ '
- en: Note
  id: totrans-66
  prefs:
  - PREF_H6
  type: TYPE_NORMAL
  zh: 注意
- en: 'Did these instructions not work for you? Or have you got better ones? Get in
    touch: [obeythetestinggoat@gmail.com](mailto:obeythetestinggoat@gmail.com)!'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 这些说明对你不起作用吗？或者你有更好的建议？请联系：[obeythetestinggoat@gmail.com](mailto:obeythetestinggoat@gmail.com)!
- en: '^([1](preface02.xhtml#id179-marker)) I wouldn’t recommend installing Firefox
    via Homebrew though: `brew` puts the Firefox binary in a strange location, and
    it confuses Selenium. You can work around it, but it’s simpler to just install
    Firefox in the normal way.'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: ^([1](preface02.xhtml#id179-marker)) 不过我不会推荐通过 Homebrew 安装 Firefox：`brew` 会将
    Firefox 二进制文件放在一个奇怪的位置，这会让 Selenium 感到困惑。你可以绕过这个问题，但直接以正常方式安装 Firefox 更简单。
- en: ^([2](preface02.xhtml#id189-marker)) You might be wondering why I’m not mentioning
    a specific version of Selenium. It’s because Selenium is constantly being updated
    to keep up with changes in web browsers, and since we can’t really pin our browser
    to a specific version, we’re best off using the latest Selenium. It was version
    4.9 at the time of writing.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: ^([2](preface02.xhtml#id189-marker)) 你可能会想知道为什么我没有提到 Selenium 的特定版本。这是因为 Selenium
    不断更新，以跟上网页浏览器的变化，并且由于我们无法将浏览器固定在特定版本，我们最好使用最新的 Selenium。写作时是版本 4.9。
