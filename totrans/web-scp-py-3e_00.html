<html><head></head><body><section data-pdf-bookmark="Preface" data-type="preface" epub:type="preface"><div class="preface" id="preface00">&#13;
<h1>Preface</h1>&#13;
&#13;
<p>To those who have not developed the skill, computer programming can seem like a kind of magic. If programming is magic, <em>web scraping</em> is wizardry: the application of magic for particularly impressive and useful—yet surprisingly effortless—feats.</p>&#13;
&#13;
<p>In my years as a software engineer, I’ve found that few programming practices capture the excitement of both programmers and laypeople alike quite like web scraping. The ability to write a simple bot that collects data and streams it down a terminal or stores it in a database, while not difficult, never fails to provide a certain thrill and sense of possibility, no matter how many times you might have done it before.</p>&#13;
&#13;
<p>Unfortunately, when I speak to other programmers about web scraping, there’s a lot of misunderstanding and confusion about the practice. Some people aren’t sure it’s legal (it is), or how to handle problems like JavaScript-heavy pages or required logins. Many are confused about how to start a large web scraping project, or even where to find the data they’re looking for. This book seeks to put an end to many of these common questions and misconceptions about web scraping, while providing a comprehensive guide to most common web scraping tasks.</p>&#13;
&#13;
<p>Web scraping is a diverse and fast-changing field, and I’ve tried to provide both high-level concepts and concrete examples to cover just about any data collection project you’re likely to encounter. Throughout the book, code samples are provided to demonstrate these concepts and allow you to try them out. The code samples themselves can be used and modified with or without attribution (although acknowledgment is always appreciated). All code samples are available on <a href="https://github.com/REMitchell/python-scraping">GitHub</a> for viewing and downloading.</p>&#13;
&#13;
<section data-pdf-bookmark="What Is Web Scraping?" data-type="sect1"><div class="sect1" id="id234">&#13;
<h1>What Is Web Scraping?</h1>&#13;
&#13;
<p>The automated gathering of data from the internet is nearly as old as the internet itself. Although <em>web scraping</em> is not a new term, in years past the practice has been more commonly known as <em>screen scraping</em>, <em>data mining</em>, <em>web harvesting</em>, or similar variations. General consensus today seems to favor <em>web scraping</em>, so that is the term I use throughout the book, although I also refer to programs that specifically traverse multiple pages as <em>web crawlers</em> or refer to the web scraping programs themselves as <em>bots</em>.</p>&#13;
&#13;
<p>In theory, web scraping is the practice of gathering data through any means other than a program interacting with an API (or, obviously, through a human using a web browser). This is most commonly accomplished by writing an automated program that queries a web server, requests data (usually in the form of HTML and other files that compose web pages), and then parses that data to extract needed information.</p>&#13;
&#13;
<p>In practice, web scraping encompasses a wide variety of programming techniques and technologies, such as data analysis, natural language parsing, and information security. Because the scope of the field is so broad, this book covers the fundamental basics of web scraping and crawling in <a data-type="xref" href="part01.html#part-1">Part I</a> and delves into advanced topics in <a data-type="xref" href="part02.html#part-2">Part II</a>. I suggest that all readers carefully study the first part and delve into the more specific in the second part as needed.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Why Web Scraping?" data-type="sect1"><div class="sect1" id="id235">&#13;
<h1>Why Web Scraping?</h1>&#13;
&#13;
<p>If the only way you access the internet is through a browser, you’re missing out on a huge range of possibilities. Although browsers are handy for executing JavaScript, displaying images, and arranging objects in a more human-readable format (among other things), web scrapers are excellent at gathering and processing large amounts of data quickly. Rather than viewing one page at a time through the narrow window of a monitor, you can view databases spanning thousands or even millions of pages at once.</p>&#13;
&#13;
<p>In addition, web scrapers can go places that traditional search engines cannot. A Google search for “cheapest flights to Boston” will result in a slew of advertisements and popular flight search sites. Google knows only what these websites say on their content pages, not the exact results of various queries entered into a flight search application. However, a well-developed web scraper can chart the cost of a flight to Boston over time, across a variety of websites, and tell you the best time to buy your ticket.</p>&#13;
&#13;
<p>You might be asking: “Isn’t data gathering what APIs are for?” (If you’re unfamiliar with APIs, see <a data-type="xref" href="ch15.html#c-15">Chapter 15</a>.) Well, APIs can be fantastic, if you find one that suits your purposes. They are designed to provide a convenient stream of well-formatted data from one computer program to another. You can find an API for many types of data you might want to use, such as Twitter posts or Wikipedia pages. In general, it is preferable to use an API (if one exists), rather than build a bot to get the same data. However, an API might not exist or be useful for your purposes for several reasons:</p>&#13;
&#13;
<ul>&#13;
	<li>&#13;
	<p>You are gathering relatively small, finite sets of data across a large collection of websites without a cohesive API.</p>&#13;
	</li>&#13;
	<li>&#13;
	<p>The data you want is fairly small or uncommon, and the creator did not think it warranted an API.</p>&#13;
	</li>&#13;
	<li>&#13;
	<p>The source does not have the infrastructure or technical ability to create an API.</p>&#13;
	</li>&#13;
	<li>&#13;
	<p>The data is valuable and/or protected and not intended to be spread widely.</p>&#13;
	</li>&#13;
</ul>&#13;
&#13;
<p>Even when an API <em>does</em> exist, the request volume and rate limits, the types of data, or the format of data that it provides might be insufficient for your purposes.</p>&#13;
&#13;
<p>This is where web scraping steps in. With few exceptions, if you can view data in your browser, you can access it via a Python script. If you can access it in a script, you can store it in a database. And if you can store it in a database, you can do virtually anything with that data.</p>&#13;
&#13;
<p>There are obviously many extremely practical applications of having access to nearly unlimited data: market forecasting, machine-language translation, and even medical diagnostics have benefited tremendously from the ability to retrieve and analyze data from news sites, translated texts, and health forums, respectively.</p>&#13;
&#13;
<p>Even in the art world, web scraping has opened up new frontiers for creation. The 2006 project <a href="http://wefeelfine.org/">“We Feel Fine”</a> by Jonathan Harris and Sep Kamvar scraped a variety of English-language blog sites for phrases starting with “I feel” or “I am feeling.” This led to a popular data visualization, describing how the world was feeling day by day and minute by minute.</p>&#13;
&#13;
<p>Regardless of your field, web scraping almost always provides a way to guide business practices more effectively, improve productivity, or even branch off into a brand-new field entirely.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="About This Book" data-type="sect1"><div class="sect1" id="id236">&#13;
<h1>About This Book</h1>&#13;
&#13;
<p>This book is designed to serve not only as an introduction to web scraping but also as a comprehensive guide to collecting, transforming, and using data from uncooperative sources. Although it uses the Python programming language and covers many Python basics, it should not be used as an introduction to the language.</p>&#13;
&#13;
<p>If you don’t know any Python at all, this book might be a bit of a challenge. Please do not use it as an introductory Python text. With that said, I’ve tried to keep all concepts and code samples at a beginning-to-intermediate Python programming level in order to make the content accessible to a wide range of readers. To this end, there are occasional explanations of more advanced Python programming and general computer science topics where appropriate. If you are a more advanced reader, feel free to skim these parts!</p>&#13;
&#13;
<p>If you’re looking for a more comprehensive Python resource, <a class="orm:hideurl" href="http://bit.ly/1CbHTcE"><em>Introducing Python</em></a> by Bill Lubanovic (O’Reilly) is a good, if lengthy, guide. For those with shorter attention spans, the video series <a class="orm:hideurl" href="http://oreil.ly/2HOqSNM"><em>Introduction to Python</em></a> by Jessica McKellar (O’Reilly) is an excellent resource. I’ve also enjoyed <em><a class="orm:hideurl" href="http://oreil.ly/2fjbT2F">Think Python</a></em> by a former professor of mine, Allen Downey (O’Reilly). This last book in particular is ideal for those new to programming, and teaches computer science and software engineering concepts along with the Python language.</p>&#13;
&#13;
<p>Technical books often focus on a single language or technology, but web scraping is a relatively disparate subject, with practices that require the use of databases, web servers, HTTP, HTML, internet security, image processing, data science, and other tools. This book attempts to cover all of these, and other topics, from the perspective of “data gathering.” It should not be used as a complete treatment of any of these subjects, but I believe they are covered in enough detail to get you started writing web scrapers!</p>&#13;
&#13;
<p><a data-type="xref" href="part01.html#part-1">Part I</a> covers the subject of web scraping and web crawling in depth, with a strong focus on a small handful of libraries used throughout the book. <a data-type="xref" href="part01.html#part-1">Part I</a> can easily be used as a comprehensive reference for these libraries and techniques (with certain exceptions, where additional references will be provided). The skills taught in the first part will likely be useful for everyone writing a web scraper, regardless of their particular target or application.</p>&#13;
&#13;
<p><a data-type="xref" href="part02.html#part-2">Part II</a> covers additional subjects that the reader might find useful when writing web scrapers, but that might not be useful for all scrapers all the time. These subjects are, unfortunately, too broad to be neatly wrapped up in a single chapter.  Because of this, frequent references are made to other resources for additional information.</p>&#13;
&#13;
<p>The structure of this book enables you to easily jump around among chapters to find only the web scraping technique or information that you are looking for. When a concept or piece of code builds on another mentioned in a previous chapter, I explicitly reference the section that it was addressed in.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Conventions Used in This Book" data-type="sect1"><div class="sect1" id="_conventions_used_in_this_book">&#13;
<h1>Conventions Used in This Book</h1>&#13;
&#13;
<p>The following typographical conventions are used in this book:</p>&#13;
&#13;
<dl>&#13;
	<dt><em>Italic</em></dt>&#13;
	<dd>&#13;
	<p>Indicates new terms, URLs, email addresses, filenames, and file extensions.</p>&#13;
	</dd>&#13;
	<dt><code>Constant width</code></dt>&#13;
	<dd>&#13;
	<p>Used for program listings, as well as within paragraphs to refer to program elements such as variable or function names, databases, data types, environment variables, statements, and keywords.</p>&#13;
	</dd>&#13;
	<dt><strong><code>Constant width bold</code></strong></dt>&#13;
	<dd>&#13;
	<p>Shows commands or other text that should be typed by the user.</p>&#13;
	</dd>&#13;
	<dt><em><code>Constant width italic</code></em></dt>&#13;
	<dd>&#13;
	<p>Shows text that should be replaced with user-supplied values or by values determined by context.</p>&#13;
	</dd>&#13;
</dl>&#13;
&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>This element signifies a tip or suggestion.</p>&#13;
</div>&#13;
&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>This element signifies a general note.</p>&#13;
</div>&#13;
&#13;
<div data-type="warning" epub:type="warning"><h6>Warning</h6>&#13;
<p>This element indicates a warning or caution.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Using Code Examples" data-type="sect1"><div class="sect1" id="_using_code_examples">&#13;
<h1>Using Code Examples</h1>&#13;
&#13;
<p>Supplemental material (code examples, exercises, etc.) is available for download at <a href="https://github.com/REMitchell/python-scraping"><em>https://github.com/REMitchell/python-scraping</em></a>.</p>&#13;
&#13;
<p>This book is here to help you get your job done. If the example code in this book is useful to you, you may use it in your programs and documentation. You do not need to contact us for permission unless you’re reproducing a significant portion of the code. For example, writing a program that uses several chunks of code from this book does not require permission. Selling or distributing a CD-ROM of examples from O’Reilly books does require permission. Answering a question by citing this book and quoting example code does not require permission. Incorporating a significant amount of example code from this book into your product’s documentation does require permission.</p>&#13;
&#13;
<p>We appreciate, but do not require, attribution. An attribution usually includes the title, author, publisher, and ISBN. For example: “<em>Web Scraping with Python</em>, Third Edition, by Ryan Mitchell (O’Reilly). Copyright 2024 Ryan Mitchell, 978-1-098-14535-4.”</p>&#13;
&#13;
<p>If you feel your use of code examples falls outside fair use or the permission given here, feel free to contact us at <a class="email" href="mailto:permissions@oreilly.com"><em>permissions@oreilly.com</em></a>.</p>&#13;
&#13;
<p>Unfortunately, printed books are difficult to keep up-to-date. With web scraping, this provides an added challenge, as the many libraries and websites that the book references and that the code often depends on may occasionally be modified, and code samples may fail or produce unexpected results. If you choose to run the code samples, please run them from the GitHub repository rather than copying from the book directly. I, and readers of this book who choose to contribute (including, perhaps, you!), will strive to keep the repository up-to-date with required modifications.</p>&#13;
&#13;
<p>In addition to code samples, terminal commands are often provided to illustrate how to install and run software. In general, these commands are geared toward Linux-based operating systems but will usually be applicable for Windows users with a properly configured Python environment and pip installation. When this is not the case, I have provided instructions for all major operating systems, or external references for Windows users to accomplish the task.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="O’Reilly Online Learning" data-type="sect1"><div class="sect1" id="_safari_books_online">&#13;
<h1>O’Reilly Online Learning</h1>&#13;
&#13;
<div class="ormenabled" data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>For more than 40 years, <a class="orm:hideurl" href="https://oreilly.com"><em class="hyperlink">O’Reilly Media</em></a> has provided technology and business training, knowledge, and insight to help companies succeed.</p>&#13;
</div>&#13;
&#13;
<p>Our unique network of experts and innovators share their knowledge and expertise through books, articles, and our online learning platform. O’Reilly’s online learning platform gives you on-demand access to live training courses, in-depth learning paths, interactive coding environments, and a vast collection of text and video from O’Reilly and 200+ other publishers. For more information, visit <a class="orm:hideurl" href="https://oreilly.com"><em>https://oreilly.com</em></a>.</p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="How to Contact Us" data-type="sect1"><div class="sect1" id="_how_to_contact_us">&#13;
<h1>How to Contact Us</h1>&#13;
&#13;
<p>Please address comments and questions concerning this book to the publisher:</p>&#13;
&#13;
<ul class="simplelist">&#13;
	<li>O’Reilly Media, Inc.</li>&#13;
	<li>1005 Gravenstein Highway North</li>&#13;
	<li>Sebastopol, CA 95472</li>&#13;
	<li>800-889-8969 (in the United States or Canada)</li>&#13;
	<li>707-829-7019 (international or local)</li>&#13;
	<li>707-829-0104 (fax)</li>&#13;
	<li><a class="email" href="mailto:support@oreilly.com"><em>support@oreilly.com</em></a></li>&#13;
	<li><a href="https://www.oreilly.com/about/contact.html"><em>https://www.oreilly.com/about/contact.html</em></a></li>&#13;
</ul>&#13;
&#13;
<p>We have a web page for this book, where we list errata, examples, and any additional information. You can access this page at <a href="https://oreil.ly/web_scraping_with_python"><em>https://oreil.ly/web_scraping_with_python</em></a>.</p>&#13;
<!--Don't forget to update the link above.-->&#13;
&#13;
<p>For news and information about our books and courses, visit <a href="https://oreilly.com"><em>https://oreilly.com</em></a>.</p>&#13;
&#13;
<p>Find us on LinkedIn: <a href="https://linkedin.com/company/oreilly-media"><em>https://linkedin.com/company/oreilly-media</em></a></p>&#13;
&#13;
<p>Follow us on Twitter: <a href="https://twitter.com/oreillymedia"><em>https://twitter.com/oreillymedia</em></a></p>&#13;
&#13;
<p>Watch us on YouTube: <a href="https://youtube.com/oreillymedia"><em>https://youtube.com/oreillymedia</em></a></p>&#13;
</div></section>&#13;
&#13;
<section data-pdf-bookmark="Acknowledgments" data-type="sect1"><div class="sect1" id="_acknowledgments">&#13;
<h1>Acknowledgments</h1>&#13;
&#13;
<p>Just as some of the best products arise out of a sea of user feedback, this book never could have existed in any useful form without the help of many collaborators, cheerleaders, and editors. Thank you to the O’Reilly staff and their amazing support for this somewhat unconventional subject; to my friends and family who have offered advice and put up with impromptu readings; and to my coworkers at the Gerson Lehrman Group, whom I now likely owe many hours of work.</p>&#13;
&#13;
<p>Thank you to my editors: Sara Hunter, John Obelenus, and Tracey Larvenz. Their feedback, guidance, and occasional tough love were invaluable. Quite a few sections and code samples were written as a direct result of their suggestions.</p>&#13;
&#13;
<p>The inspiration for the first two chapters, as well as many new inclusions throughout the third edition, are thanks to Bryan Specht. The legacy he left is more broad and vast than even he knew, but the hole he left to be filled by that legacy is even bigger.</p>&#13;
&#13;
<p>Finally, thanks to Jim Waldo, who started this whole project many years ago when he mailed a Linux box and <em>The Art and Science of C</em> by Eric Roberts (Addison-Wesley) to a young, impressionable teenager.</p>&#13;
</div></section>&#13;
</div></section></body></html>