<html><head></head><body><div id="sbo-rt-content" class="calibre2"><section data-type="preface" epub:type="preface" data-pdf-bookmark="Preface" class="calibre3"><div class="preface" id="idm46122443312632">
<h1 class="calibre23">Preface</h1>


<p class="author1">Python is easy to learn. You’re probably here because now that your code runs
correctly, you need it to run faster. You like the fact that your code is easy
to modify and you can iterate with ideas quickly. The trade-off between <em class="hyperlink">easy to
develop</em> and <em class="hyperlink">runs as quickly as I need</em> is a well-understood and often-bemoaned
phenomenon. There are solutions.</p>

<p class="author1">Some people have serial processes that have to run faster. Others have problems
that could take advantage of multicore architectures, clusters, or graphics processing units. Some
need scalable systems that can process more or less as expediency and funds
allow, without losing reliability. Others will realize that their coding
techniques, often borrowed from other languages, perhaps aren’t as natural as
examples they see from others.</p>

<p class="author1">In this book we will cover all of these topics, giving practical guidance for
understanding bottlenecks and producing faster and more scalable solutions.
We also include some war stories from those who went ahead of you, who took the
knocks so you don’t <span class="publishername">have to.</span></p>

<p class="author1">Python is well suited for rapid development, production deployments, and scalable
systems. The ecosystem is full of people who are working to make it scale on
your behalf, leaving you more time to focus on the more challenging tasks around
you.</p>






<section data-type="sect1" data-pdf-bookmark="Who This Book Is For" class="calibre3"><div class="preface" id="idm46122409359208">
<div class="calibre24" id="calibre_pb_0"/>
</div></section>













</div></section></div>



  

<div id="sbo-rt-content" class="calibre2">
<section data-type="preface" epub:type="preface" data-pdf-bookmark="Preface" class="calibre3">
<div class="preface" id="idm46122443312632">
<section data-type="sect1" data-pdf-bookmark="Who This Book Is For" class="calibre3">
<div class="preface" id="idm46122409359208">
<h1 class="calibre25">Who This Book Is For</h1>

<p class="author1">You’ve used Python for long enough to have an idea about why certain things are
slow and to have seen technologies like Cython, <code class="calibre26">numpy</code>, and PyPy being discussed
as possible solutions. You might also have programmed with other languages and
so know that there’s more than one way to solve a performance problem.</p>

<p class="author1">While this book is primarily aimed at people with CPU-bound problems, we also
look at data transfer and memory-bound solutions. Typically, these problems are
faced by scientists, engineers, quants, and academics.</p>

<p class="author1">We also look at problems that a web developer might face, including the movement
of data and the use of just-in-time (JIT) compilers like PyPy and asynchronous
I/O for easy-win performance gains.</p>

<p class="author1">It might help if you have a background in C (or C++, or maybe Java), but it isn’t
a prerequisite. Python’s most common interpreter (CPython—the standard you
normally get if you type <code class="calibre26">python</code> at the command line) is written in C, and so
the hooks and libraries all expose the gory inner C machinery. There are lots of
other <span class="publishername">techniques</span> that we cover that don’t assume any knowledge of C.</p>

<p class="author1">You might also have a lower-level knowledge of the CPU, memory architecture, and
data buses, but again, that’s not strictly necessary.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Who This Book Is Not For" class="calibre3"><div class="preface" id="idm46122449349032">
<div class="calibre24" id="calibre_pb_1"/>
</div></section>













</div></section></div>



  

<div id="sbo-rt-content" class="calibre2">
<section data-type="preface" epub:type="preface" data-pdf-bookmark="Preface" class="calibre3">
<div class="preface" id="idm46122443312632">
<section data-type="sect1" data-pdf-bookmark="Who This Book Is Not For" class="calibre3">
<div class="preface" id="idm46122449349032">
<h1 class="calibre25">Who This Book Is Not For</h1>

<p class="author1">This book is meant for intermediate to advanced Python programmers. Motivated
novice Python programmers may be able to follow along as well, but we recommend
having a solid Python foundation.</p>

<p class="author1">We don’t cover storage-system optimization. If you have a SQL or NoSQL
bottleneck, then this book probably won’t help you.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="What You’ll Learn" class="calibre3"><div class="preface" id="idm46122449346824">
<h1 class="calibre25">What You’ll Learn</h1>

<p class="author1">Your authors have been working with large volumes of data, a requirement for <em class="hyperlink">I
want the answers faster!</em> and a need for scalable architectures, for many years
in both industry and academia. We’ll try to impart our hard-won experience to
save you from making the mistakes that we’ve made.</p>

<p class="author1">At the start of each chapter, we’ll list questions that the following text should
answer. (If it doesn’t, tell us and we’ll fix it in the next revision!)</p>

<p class="author1">We cover the following topics:</p>

<ul class="printings">
<li class="calibre21">
<p class="calibre27">Background on the machinery of a computer so you know what’s happening behind the scenes</p>
</li>
<li class="calibre21">
<p class="calibre27">Lists and tuples—the subtle semantic and speed differences in these fundamental data structures</p>
</li>
<li class="calibre21">
<p class="calibre27">Dictionaries and sets—memory allocation strategies and access algorithms in these important data structures</p>
</li>
<li class="calibre21">
<p class="calibre27">Iterators—how to write in a more Pythonic way and open the door to infinite data streams using iteration</p>
</li>
<li class="calibre21">
<p class="calibre27">Pure Python approaches—how to use Python and its modules effectively</p>
</li>
<li class="calibre21">
<p class="calibre27">Matrices with <code class="calibre26">numpy</code>—how to use the beloved <code class="calibre26">numpy</code> library like a beast</p>
</li>
<li class="calibre21">
<p class="calibre27">Compilation and just-in-time computing—processing faster by compiling down to machine code, making sure you’re guided by the results of profiling</p>
</li>
<li class="calibre21">
<p class="calibre27">Concurrency—ways to move data efficiently</p>
</li>
<li class="calibre21">
<p class="calibre27"><code class="calibre26">multiprocessing</code>—various ways to use the built-in <code class="calibre26">multiprocessing</code> library for parallel computing and to efficiently share <code class="calibre26">numpy</code> matrices, and some costs and benefits of interprocess communication (IPC)</p>
</li>
<li class="calibre21">
<p class="calibre27">Cluster computing—convert your <code class="calibre26">multiprocessing</code> code to run on a local or remote cluster for both research and production systems</p>
</li>
<li class="calibre21">
<p class="calibre27">Using less RAM—approaches to solving large problems without buying a humungous computer</p>
</li>
<li class="calibre21">
<p class="calibre27">Lessons from the field—lessons encoded in war stories from those who took the blows so you don’t have to</p>
</li>
</ul>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Python 3" class="calibre3"><div class="preface" id="idm46122449346552">
<h1 class="calibre25">Python 3</h1>

<p class="author1"><a data-type="indexterm" data-primary="versions" id="idm46122428644344" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/><a data-type="indexterm" data-primary="Python" data-secondary="versions of" id="idm46122428641704" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/><a data-type="indexterm" data-primary="Python 3" id="idm46122428640760" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/>Python 3 is the standard version of Python as of 2020, with Python 2.7 deprecated after a 10-year migration process. If you’re still on Python 2.7, you’re doing it wrong—many libraries are no longer supported for your line of Python, and support will become more expensive over time. Please do the community a favor and migrate to Python 3, and make sure that all new projects use Python 3.</p>

<p class="author1"><a data-type="indexterm" data-primary="32-bit Python" id="idm46122428639288" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/><a data-type="indexterm" data-primary="64-bit Python" id="idm46122428638584" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/><a data-type="indexterm" data-primary="32-bit Python" data-primary-sortas="thirty" id="idm46122428637912" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/><a data-type="indexterm" data-primary="64-bit Python" data-primary-sortas="sixty" id="idm46122428636968" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/>In this book, we use 64-bit Python. Whilst 32-bit Python is supported, it is far less common for scientific work. We’d expect all the libraries to work as usual, but numeric precision, which depends on the number of bits available for counting, is likely to change. 64-bit is dominant in this field, along with *nix environments (often
Linux or Mac). 64-bit lets you address larger amounts of RAM. *nix lets you
build applications that can be deployed and configured in well-understood ways
with well-understood behaviors.</p>

<p class="author1">If you’re a Windows user, you’ll have to buckle up. Most of what we show
will work just fine, but some things are OS-specific, and you’ll have to research a
Windows solution. The biggest difficulty a Windows user might face is the
installation of modules: research in sites like Stack Overflow should give you
the solutions you need. If you’re on Windows, having a virtual machine (e.g.,
using VirtualBox) with a running Linux installation might help you to experiment
more freely.</p>

<p class="author1">Windows users should definitely look at a packaged solution like those available through Anaconda, Canopy, Python(x,y), or Sage. These same distributions will make the lives of Linux and Mac users far simpler too.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Changes from Python 2.7" class="calibre3"><div class="preface" id="idm46122435872056">
<h1 class="calibre25">Changes from Python 2.7</h1>

<p class="author1"><a data-type="indexterm" data-primary="Python 2.7" id="idm46122435870968" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/>If you’ve upgraded from Python 2.7, you might not be aware of a few relevant changes:<a data-type="indexterm" data-primary="str type" id="idm46122435870136" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/><a data-type="indexterm" data-primary="unicode type" id="idm46122443308232" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/><a data-type="indexterm" data-primary="bytes type" id="idm46122443307560" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/><a data-type="indexterm" data-primary="integer division" id="idm46122443306888" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/><a data-type="indexterm" data-primary="float division" id="idm46122443306216" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/><a data-type="indexterm" data-primary="/ (integer division/float division)" id="idm46122443305544" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/></p>

<ul class="printings">
<li class="calibre21">
<p class="calibre27"><code class="calibre26">/</code> meant <em class="hyperlink">integer</em> division in Python 2.7, whereas it performs <em class="hyperlink">float</em> division in Python 3.</p>
</li>
<li class="calibre21">
<p class="calibre27"><code class="calibre26">str</code> and <code class="calibre26">unicode</code> were used to represent text data in Python 2.7; in Python 3, everything is a <code class="calibre26">str</code>, and these are always Unicode. For clarity, a <code class="calibre26">bytes</code> type is used if we’re using unencoded byte sequences.</p>
</li>
</ul>

<p class="author1">If you’re in the process of upgrading your code, two good guides are <a href="http://bit.ly/pyporting" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6">“Porting Python 2 Code to Python 3”</a> and <a href="http://python3porting.com" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6">“Supporting Python 3: An in-depth guide”</a>. With a distribution like Anaconda or Canopy, you can run both Python 2 and Python 3 simultaneously—this will simplify your porting.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="License" class="calibre3"><div class="preface" id="idm46122428624616">
<h1 class="calibre25">License</h1>

<p class="author1">This book is licensed under <a href="http://bit.ly/CC_A-NC-ND3" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6">Creative Commons Attribution-NonCommercial-NoDerivs 3.0</a>.</p>

<p class="author1">You’re welcome to use this book for noncommercial purposes, including for
<span class="publishername">noncommercial</span> teaching. The license allows only for complete reproductions; for
partial reproductions, please contact O’Reilly (see <a data-type="xref" href="preface01_split_002.xhtml#how_to_contact_us" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6">“How to Contact Us”</a>). Please attribute the book as
noted in the following section.</p>

<p class="author1">We negotiated that the book should have a Creative Commons license so the
contents could spread further around the world. We’d be quite happy to receive a
beer if this decision has helped you. We suspect that the O’Reilly staff would
feel similarly about the beer.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="How to Make an Attribution" class="calibre3"><div class="preface" id="idm46122428787448">
<h1 class="calibre25">How to Make an Attribution</h1>

<p class="author1">The <a data-type="indexterm" data-primary="Creative Commons license" id="idm46122428786152" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/>Creative Commons license requires that you attribute your use of a part of
this book. Attribution just means that you should write something that someone
else can follow to find this book. The following would be sensible: “<em class="hyperlink">High Performance Python</em>, 2nd ed., by Micha Gorelick and Ian Ozsvald (O’Reilly). Copyright 2020 Micha
Gorelick and Ian Ozsvald, 978-1-492-05502-0.”</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Errata and Feedback" class="calibre3"><div class="preface" id="idm46122428730296">
<h1 class="calibre25">Errata and Feedback</h1>

<p class="author1">We encourage you to review this book on public sites like Amazon—please help
others understand if they would benefit from this book! You can also email us at
<span class="publishername"><a class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6" href="mailto:feedback@highperformancepython.com">feedback@highperformancepython.com</a></span>.</p>

<p class="author1">We’re particularly keen to hear about errors in the book, successful use cases where the book has helped you, and high performance techniques that we should cover in the next edition. You can access the web page for this book at <a href="https://oreil.ly/high-performance-python-2e" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"><em class="hyperlink">https://oreil.ly/high-performance-python-2e</em></a>.</p>

<p class="author1">Complaints are welcomed through the <a data-type="indexterm" data-primary="instant-complaint-transmission-service" id="idm46122428725256" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"/>instant-complaint-transmission-service <code class="calibre26">&gt;
/dev/null</code>.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Conventions Used in This Book" class="calibre3"><div class="preface" id="idm46122428798040">
<h1 class="calibre25">Conventions Used in This Book</h1>

<p class="author1">The following typographical conventions are used in this book:</p>
<dl class="calibre28">
<dt class="calibre29"><em class="hyperlink">Italic</em></dt>
<dd class="calibre30">
<p class="calibre31">Indicates new terms, URLs, email addresses, filenames, and file extensions.</p>
</dd>
<dt class="calibre29"><code class="calibre26">Constant width</code></dt>
<dd class="calibre30">
<p class="calibre31">Used for program listings, as well as within paragraphs to refer to program elements such as variable or function names, databases, datatypes, environment variables, statements, and keywords.</p>
</dd>
<dt class="calibre29"><strong class="calibre32"><code class="calibre33">Constant width bold</code></strong></dt>
<dd class="calibre30">
<p class="calibre31">Shows commands or other text that should be typed literally by the user.</p>
</dd>
<dt class="calibre29"><em class="hyperlink"><code class="calibre34">Constant width italic</code></em></dt>
<dd class="calibre30">
<p class="calibre31">Shows text that should be replaced with user-supplied values or by values determined by context.</p>
</dd>
</dl>
<div data-type="tip" class="calibre35"><h6 class="calibre36">Tip</h6>
<p class="author1">This element signifies a tip, suggestion, or critical thinking question.</p>
</div>
<div data-type="note" epub:type="note" class="calibre35"><h6 class="calibre36">Note</h6>
<p class="author1">This element signifies a general note.</p>
</div>
<div data-type="warning" epub:type="warning" class="calibre37"><h6 class="calibre38">Warning</h6>
<p class="author1">This element indicates a warning or caution.</p>
</div>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Using Code Examples" class="calibre3"><div class="preface" id="idm46122435849352">
<h1 class="calibre25">Using Code Examples</h1>
<!--PROD: Please reach out to author to find out if they will be uploading code examples to oreilly.com or their own site (e.g., GitHub). If there is no code download, delete this whole section. If there is, when you email digidist with the link, let them know what you filled in for title_title (should be as close to book title as possible, i.e., learning_python_2e). This info will determine where digidist loads the files.-->

<p class="author1">Supplemental material (code examples, exercises, etc.) is available for download at <a href="https://github.com/mynameisfiber/high_performance_python_2e" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"><em class="hyperlink">https://github.com/mynameisfiber/high_performance_python_2e</em></a>.</p>

<p class="author1">If you have a technical question or a problem using the code examples, please send email to <a class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6" href="mailto:bookquestions@oreilly.com"><em class="hyperlink">bookquestions@oreilly.com</em></a>.</p>

<p class="author1">This book is here to help you get your job done. In general, if example code is offered with this book, you may use it in your programs and documentation. You do not need to contact us for permission unless you’re reproducing a significant portion of the code. For example, writing a program that uses several chunks of code from this book does not require permission. Selling or distributing examples from O’Reilly books does require permission. Answering a question by citing this book and quoting example code does not require permission. Incorporating a significant amount of example code from this book into your product’s documentation does require 
<span class="publishername">permission</span>.</p>

<p class="author1">If you feel your use of code examples falls outside fair use or the permission given above, feel free to contact us at <a class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6" href="mailto:permissions@oreilly.com"><em class="hyperlink">permissions@oreilly.com</em></a>.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="O’Reilly Online Learning" class="calibre3"><div class="preface" id="idm46122428848280">
<h1 class="calibre25">O’Reilly Online Learning</h1>
<div data-type="note" epub:type="note" class="calibre35"><h6 class="calibre36">Note</h6>
<p class="author1">For more than 40 years, <a href="http://oreilly.com" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"><em class="hyperlink">O’Reilly Media</em></a> has provided technology and business training, knowledge, and insight to help companies succeed.</p>
</div>

<p class="author1">Our unique network of experts and innovators share their knowledge and expertise through books, articles, and our online learning platform. O’Reilly’s online learning platform gives you on-demand access to live training courses, in-depth learning paths, interactive coding environments, and a vast collection of text and video from O’Reilly and 200+ other publishers. For more information, visit <a href="http://oreilly.com" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"><em class="hyperlink">http://oreilly.com</em></a>.</p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="How to Contact Us" class="calibre3"><div class="preface" id="how_to_contact_us">
<h1 class="calibre25">How to Contact Us</h1>

<p class="author1">Please address comments and questions concerning this book to the publisher:</p>
<ul class="simplelist">
  <li class="calibre39">O’Reilly Media, Inc.</li>
  <li class="calibre39">1005 Gravenstein Highway North</li>
  <li class="calibre39">Sebastopol, CA 95472</li>
  <li class="calibre39">800-998-9938 (in the United States or Canada)</li>
  <li class="calibre39">707-829-0515 (international or local)</li>
  <li class="calibre39">707-829-0104 (fax)</li>
</ul>

<p class="author1">Email <a class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6" href="mailto:bookquestions@oreilly.com"><em class="hyperlink">bookquestions@oreilly.com</em></a> to comment or ask technical questions about this book.</p>

<p class="author1">For news and more information about our books and courses, see our website at <a href="http://oreilly.com" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"><em class="hyperlink">http://oreilly.com</em></a>.</p>

<p class="author1">Find us on Facebook: <a href="http://facebook.com/oreilly" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"><em class="hyperlink">http://facebook.com/oreilly</em></a></p>

<p class="author1">Follow us on Twitter: <a href="http://twitter.com/oreillymedia" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"><em class="hyperlink">http://twitter.com/oreillymedia</em></a></p>

<p class="author1">Watch us on YouTube: <a href="http://youtube.com/oreillymedia" class="pcalibre2 pcalibre pcalibre3 pcalibre1 calibre6"><em class="hyperlink">http://youtube.com/oreillymedia</em></a></p>
</div></section>













<section data-type="sect1" data-pdf-bookmark="Acknowledgments" class="calibre3"><div class="preface" id="idm46122435864536">
<h1 class="calibre25">Acknowledgments</h1>

<p class="author1">Hilary Mason wrote our foreword—thanks for composing such a wonderful opening narrative for our book. Giles Weaver and Dimitri Denisjonok provided invaluable technical feedback on this edition; great work, chaps.</p>

<p class="author1">Thanks to Patrick Cooper, Kyran Dale, Dan Foreman-Mackey, Calvin Giles, Brian Granger, Jamie Matthews, John Montgomery, Christian Schou Oxvig, Matt “snakes” Reiferson, Balthazar Rouberol, Michael Skirpan, Luke Underwood, Jake Vanderplas, and William Winter for invaluable feedback and contributions.</p>

<p class="author1">Ian thanks his wife, Emily, for letting him disappear for another eight months to write this second edition (thankfully, she’s terribly understanding). Ian apologizes to his dog for sitting and writing rather than walking in the woods quite as much as she’d have liked.</p>

<p class="author1">Micha thanks Marion and the rest of his friends and family for being so patient while he learned to write.</p>

<p class="author1">O’Reilly editors are rather lovely to work with; do strongly consider talking
to them if you want to write your own book.</p>

<p class="author1">Our contributors to the “Lessons from the Field” chapter very kindly shared their time and hard-won lessons. We give thanks to Soledad Galli, Linda Uruchurtu, Vanentin Haenel, and Vincent D. Warmerdam for this edition and to Ben Jackson, Radim Řehůřek, <span class="publishername">Sebastjan</span> Trepca, Alex Kelly, Marko Tasic, and Andrew Godwin for their time and effort during the previous edition.</p>
</div></section>







</div></section></div>



  </body></html>