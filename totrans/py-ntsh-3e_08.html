<html><head></head><body>
<div id="sbo-rt-content"><section data-nutshell-tab="Core Built-ins and Modules" data-pdf-bookmark="Chapter 8. Core Built-ins and Standard Library Modules" data-type="chapter" epub:type="chapter"><div class="chapter" id="core_built_ins_and_standard_library_mod">
<h1><span class="label">Chapter 8. </span>Core Built-ins and Standard Library Modules</h1>
<p>The<a contenteditable="false" data-primary="built-ins" data-secondary="definition of built-in" data-type="indexterm" id="idm44924529555696"/> term <em>built-in</em> has more than one meaning in Python. In many contexts, <em>built-in</em> means an object directly accessible to Python code without an <span class="code"><strong>import</strong></span> statement. The section <a data-type="xref" href="ch07.xhtml#python_built_ins">“Python built-ins”</a> shows Python’s mechanism to allow this direct access. Built-in types in Python include numbers, sequences, dictionaries, sets, functions (all covered in <a data-type="xref" href="ch03.xhtml#the_python_language">Chapter 3</a>), classes (covered in <a data-type="xref" href="ch04.xhtml#python_classes">“Python Classes”</a>), standard exception classes (covered in <a data-type="xref" href="ch06.xhtml#exception_objects">“Exception Objects”</a>), and modules (covered in <a data-type="xref" href="ch07.xhtml#module_objects">“Module Objects”</a>). <a data-type="xref" href="ch11.xhtml#the_io_module">“The io Module”</a> covers the <span class="code">file</span> type, and <a data-type="xref" href="ch14.xhtml#internal_types">“Internal Types”</a> some other built-in types intrinsic to Python’s internal operation. This chapter provides additional coverage of built-in core types in the opening section and covers built-in functions available in the module <span class="code">builtins</span> in <a data-type="xref" href="#built_in_functions">“Built-in Functions”</a>.</p>
<p>Some<a contenteditable="false" data-primary="modules" data-secondary="built-in versus extension" data-type="indexterm" id="idm44924529542496"/><a contenteditable="false" data-primary="extension modules" data-secondary="versus built-in modules" data-secondary-sortas="built-in modules" data-type="indexterm" id="idm44924529541120"/> modules are called “built-in” because they’re in the Python standard library (though it takes an <span class="code"><strong>import</strong></span> statement to use them), as opposed to add-on modules, also known as Python <em>extensions</em>.</p>
<p>This chapter covers several built-in core modules: namely, the standard library modules <span class="code">sys</span>, <span class="code">copy</span>, <span class="code">collections</span>, <span class="code">functools</span>, <span class="code">heapq</span>, <span class="code">argparse</span>, and <span class="code">itertools</span>. You’ll find a discussion of each module <em>x</em> in the respective section “The <em>x</em> Module.”</p>
<p><a data-type="xref" href="ch09.xhtml#strings_and_things">Chapter 9</a> covers some string-related built-in core modules (<span class="code">string</span>, <span class="code">codecs</span>, and <span class="code">unicodedata</span>) with the same section-name convention. <a data-type="xref" href="ch10.xhtml#regular_expressions">Chapter 10</a> covers <span class="code">re</span> in <a data-type="xref" href="ch10.xhtml#regular_expressions_and_the_re_module">“Regular Expressions and the re Module”</a>.</p>
<section data-pdf-bookmark="Built-in Types" data-type="sect1"><div class="sect1" id="built_in_types">
<h1>Built-in Types</h1>
<p><a data-type="xref" href="#pythonapostrophes_core_built_in_types">Table 8-1</a> provides<a contenteditable="false" data-primary="built-ins" data-secondary="core built-ins" data-type="indexterm" id="BIOTcore08"/> a brief overview of Python’s core built-in types. More details about many of these types, and about operations on their instances, are found throughout <a data-type="xref" href="ch03.xhtml#the_python_language">Chapter 3</a>. In this section, by “any number” we mean, specifically, “any noncomplex number.” Also, many built-ins accept at least some of their parameters in a positional-only way; we use the <span class="version">3.8+</span> positional-only marker <span class="code">/</span>, covered in <a data-type="xref" href="ch03.xhtml#positional_only_marker">“Positional-only marker”</a>, to indicate this.</p>
<table class="border" id="pythonapostrophes_core_built_in_types">
<caption><span class="label">Table 8-1. </span>Python’s core built-in types</caption>
<tbody>
<tr>
<td class="width-15"><span class="code">bool</span></td>
<td><span class="code">bool(<em>x</em>=<strong>False</strong>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="bool (built-in type)" data-type="indexterm" id="idm44924529510320"/> <span class="code"><strong>False</strong></span> when <span class="code"><em>x</em></span> evaluates as<a contenteditable="false" data-primary="falsy" data-secondary="evaluation in Boolean contexts" data-type="indexterm" id="idm44924529507360"/><a contenteditable="false" data-primary="True" data-type="indexterm" id="idm44924529505968"/> falsy; returns <span class="code"><strong>True</strong></span> when <span class="code"><em>x</em></span> evaluates as truthy (see <a data-type="xref" href="ch03.xhtml#boolean_values">“Boolean Values”</a>). <span class="code">bool</span> extends <span class="code">int</span>: the built-in names <span class="code"><strong>False</strong></span> and <span class="code"><strong>True</strong></span> refer to the only two instances of <span class="code">bool</span>. These instances are also <span class="code">int</span>s equal to <span class="code">0</span> and <span class="code">1</span>, respectively, but <span class="code">str(<strong>True</strong>)</span> is <span class="code">'True'</span> and <span class="code">str(<strong>False</strong>)</span> is <span class="code">'False'</span>.</td>
</tr>
<tr>
<td><span class="code">bytearray</span></td>
<td><span class="code">bytearray(<em>x</em>=b'', /[, codec[, errors]])</span><br/>
			Returns<a contenteditable="false" data-primary="bytearray (built-in type)" data-type="indexterm" id="idm44924529489296"/> a mutable sequence of bytes (<span class="code">int</span>s with values from <span class="code">0</span> to <span class="code">255</span>), supporting the usual methods of mutable sequences, plus the methods of <span class="code">str</span>. When <span class="code"><em>x</em></span> is a <span class="code">str</span>, you must also pass <span class="code">codec</span> and may pass <span class="code">errors</span>; the result is just like calling <span class="code">bytearray(<em>x</em>.encode(codec, errors))</span>. When <span class="code"><em>x</em></span> is an <span class="code">int</span>, it must be <span class="code">&gt;=0</span>: the resulting instance has a length of <span class="code"><em>x</em></span>, and each item is initialized to <span class="code">0</span>. When <span class="code"><em>x</em></span> conforms to the <a href="https://oreil.ly/HlOmv">buffer protocol</a>, the read-only buffer of bytes from <span class="code"><em>x</em></span> initializes the instance. Otherwise, <span class="code"><em>x</em></span> must be an iterable yielding <span class="code">int</span>s <span class="code">&gt;=0</span> and <span class="code">&lt;256</span>; e.g., <span class="code">bytearray([1,2,3,4]) == bytearray(b'\x01\x02\x03\x04')</span>.</td>
</tr>
<tr>
<td><span class="code">bytes</span></td>
<td><span class="code">bytes(<em>x</em>=b'', /[, codec[, errors]])</span><br/>
			Returns<a contenteditable="false" data-primary="bytes (built-in type)" data-type="indexterm" id="idm44924529468432"/> an immutable sequence of bytes, with the same nonmutating methods and the same initialization behavior as <span class="code">bytearray</span>.</td>
</tr>
<tr>
<td><span class="code">complex</span></td>
<td><span class="code">complex(real=0, imag=0)</span><br/>
			Converts<a contenteditable="false" data-primary="complex (built-in type)" data-type="indexterm" id="idm44924529463696"/> any number, or a suitable string, to a complex number. <span class="code">imag</span> may be present only when <span class="code">real</span> is a number, and in that case <span class="code">imag</span> is also a number: the imaginary part of the resulting complex number. See also <a data-type="xref" href="ch03.xhtml#complex_numbers">“Complex numbers”</a>.</td>
</tr>
<tr>
<td><span class="code">dict</span></td>
<td><span class="code">dict(<em>x</em>={}, /)</span><br/>
			Returns<a contenteditable="false" data-primary="dict (built-in type)" data-type="indexterm" id="idm44924529455904"/> a new dictionary with the same items as <span class="code"><em>x</em></span>. (We cover dictionaries in <a data-type="xref" href="ch03.xhtml#dictionaries">“Dictionaries”</a>.) When <span class="code"><em>x</em></span> is a <span class="code">dict</span>, <span class="code">dict(<em>x</em>)</span> returns a shallow copy of <span class="code"><em>x</em></span>, like <span class="code"><em>x</em></span><span class="code">.copy()</span>. Alternatively, <span class="code"><em>x</em></span> can be an iterable whose items are pairs (iterables with two items each). In this case, <span class="code">dict(<em>x</em>)</span> returns a dictionary whose keys are the first items of each pair in <span class="code"><em>x</em></span>, and whose values are the corresponding second items. When a key appears more than once in <span class="code"><em>x</em></span>, Python uses the value corresponding to the last occurrence of the key. In other words, when <span class="code"><em>x</em></span> is any iterable yielding pairs, <span class="code"><em>c</em></span> <span class="code">= dict(<em>x</em>)</span> is exactly equivalent to:
			<pre data-code-language="python" data-type="programlisting">
<code class="n">c</code><code> </code><code class="o">=</code><code> </code><code class="p">{</code><code class="p">}</code><code>
</code><strong><code class="k">for</code></strong><code> </code><code class="n">key</code><code class="p">,</code><code> </code><code class="n">value</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">x</code><code class="p">:</code><code>
</code><code>    </code><code class="n">c</code><code class="p">[</code><code class="n">key</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="n">value</code></pre>
			You can also call <span class="code">dict</span> with named arguments, in addition to, or instead of, positional argument <span class="code"><em>x</em></span>. Each named argument becomes an item in the dictionary, with the name as the key: each such extra item might “overwrite” an item from <span class="code"><em>x</em></span>.</td>
</tr>
<tr>
<td><span class="code">float</span></td>
<td><span class="code">float(<em>x</em>=0.0, /)</span><br/>
			Converts<a contenteditable="false" data-primary="float (built-in type)" data-type="indexterm" id="idm44924529411184"/> any number, or a suitable string, to a floating-point number. See <a data-type="xref" href="ch03.xhtml#floating_point_numbers">“Floating-point numbers”</a>.</td>
</tr>
<tr>
<td><span class="code">frozenset</span></td>
<td><span class="code">frozenset(<em>seq</em>=(), /)</span><br/>
			Returns<a contenteditable="false" data-primary="frozenset (built-in type)" data-type="indexterm" id="idm44924529382720"/> a new frozen (i.e., immutable) set object with the same items as iterable <span class="code"><em>seq</em></span>. When <span class="code"><em>seq</em></span> is a frozenset, <span class="code">frozenset(<em>seq</em>)</span> returns <span class="code"><em>seq</em></span> itself, just like <span class="code"><em>seq</em></span><span class="code">.copy()</span> does. See <a data-type="xref" href="ch03.xhtml#set_operation">“Set Operations”</a>.</td>
</tr>
<tr>
<td><span class="code">int</span></td>
<td><span class="code">int(<em>x</em>=0, /, base=10)</span><br/>
			Converts<a contenteditable="false" data-primary="int (built-in type)" data-type="indexterm" id="idm44924529372032"/> any number, or a suitable string, to an <span class="code">int</span>. When <span class="code"><em>x</em></span> is a number, <span class="code">int</span> truncates toward <span class="code">0</span>, “dropping” any fractional part. <span class="code">base</span> may be present only when <span class="code"><em>x</em></span> is a string: then, <span class="code">base</span> is the conversion base, between <span class="code">2</span> and <span class="code">36</span>, with <span class="code">10</span> as the default. You can explicitly pass <span class="code">base</span> as <span class="code">0</span>: the base is then <span class="code">2</span>, <span class="code">8</span>, <span class="code">10</span>, or <span class="code">16</span>, depending on the form of string <span class="code"><em>x</em></span>, just like for integer literals, as covered in <a data-type="xref" href="ch03.xhtml#integer_numbers">“Integer numbers”</a>.</td>
</tr>
<tr>
<td><span class="code">list</span></td>
<td><span class="code">list(<em>seq</em>=(), /)</span><br/>
			Returns<a contenteditable="false" data-primary="list (built-in type)" data-type="indexterm" id="idm44924529354848"/> a new list object with the same items as iterable <span class="code"><em>seq</em></span>, in the same order. When <span class="code"><em>seq</em></span> is a list, <span class="code">list(<em>seq</em>)</span> returns a shallow copy of <span class="code"><em>seq</em></span>, like <span class="code"><em>seq</em></span><span class="code">[:]</span>. See <a data-type="xref" href="ch03.xhtml#list">“Lists”</a>.</td>
</tr>
<tr>
<td><span class="code">memoryview</span></td>
<td><span class="code">memoryview(<em>x</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="memoryview (built-in type)" data-type="indexterm" id="idm44924529344128"/> an object <span class="code"><em>m</em></span> “viewing” exactly the same underlying memory as <span class="code"><em>x</em></span>, which must be an object supporting the <a href="https://oreil.ly/HlOmv">buffer protocol</a> (for example, an instance of <span class="code">bytes</span>, <span class="code">bytearray</span>, or <span class="code">array.array</span>), with items of <span class="code"><em>m</em></span><span class="code">.</span><span class="code">itemsize</span> bytes each. In the normal case in which <span class="code"><em>m</em></span> is “one-dimensional” (we don’t cover the complicated case of “multidimensional” <span class="code">memoryview</span> instances in this book), <span class="code">len(<em>m</em>)</span> is the number of items. You can index <span class="code"><em>m</em></span> (returning <span class="code">int</span>) or slice it (returning an instance of <span class="code">memoryview</span> “viewing” the appropriate subset of the same underlying memory). <span class="code"><em>m</em></span> is mutable when <span class="code"><em>x</em></span> is (but you can’t change <span class="code"><em>m</em></span>’s size, so, when you assign to a slice, it must be from an iterable of the same length as the slice). <span class="code"><em>m</em></span> is a sequence, thus iterable, and is hashable when <span class="code"><em>x</em></span> is hashable and when <span class="code"><em>m</em></span><span class="code">.</span><span class="code">itemsize</span> is one byte.<br/>
<span class="code"><em>m</em></span> supplies several read-only attributes and methods; see the <a href="https://oreil.ly/SIsvF">online docs</a> for details. Two particularly useful methods are <span class="code"><em>m</em></span><span class="code">.tobytes</span> (returns <span class="code"><em>m</em></span>’s data as an instance of <span class="code">bytes</span>) and <span class="code"><em>m</em></span><span class="code">.tolist</span> (returns <span class="code"><em>m</em></span>’s data as a list of <span class="code">int</span>s).</td>
</tr>
<tr>
<td><span class="code">object</span></td>
<td><span class="code">object()</span><br/>
			Returns<a contenteditable="false" data-primary="object (built-in type)" data-type="indexterm" id="idm44924529314896"/> a new instance of <span class="code">object</span>, the most fundamental type in Python. Instances of type <span class="code">object</span> have no functionality: the only use of such instances is as “sentinels”—i.e., objects not equal to any distinct object. For instance, when a function takes an optional argument where <span class="code"><strong>None</strong></span> is a legitimate value, you can use a sentinel for the argument’s default value to indicate that the argument was omitted:
			<pre data-code-language="python" data-type="programlisting">
<code class="n">MISSING</code><code> </code><code class="o">=</code><code> </code><code class="nb">object</code><code class="p">(</code><code class="p">)</code><code>
</code><strong><code class="k">def</code></strong><code> </code><code class="nf">check_for_none</code><code class="p">(</code><code class="n">obj</code><code class="o">=</code><code class="n">MISSING</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">if</code></strong><code> </code><code class="n">obj</code><code> </code><strong><code class="ow">is</code></strong><code> </code><code class="n">MISSING</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">return</code></strong><code> </code><code class="o">-</code><code class="mi">1</code><code>
</code><code>    </code><strong><code class="k">return</code></strong><code> </code><code class="mi">0</code><code> </code><strong><code class="k">if</code></strong><code> </code><code class="n">obj</code><code> </code><strong><code class="ow">is</code></strong><code> </code><strong><code class="kc">None</code></strong><code> </code><strong><code class="k">else</code></strong><code> </code><code class="mi">1</code></pre>
</td>
</tr>
<tr>
<td><span class="code">set</span></td>
<td><span class="code">set(<em>seq</em>=(), /)</span><br/>
			Returns<a contenteditable="false" data-primary="set (built-in type)" data-type="indexterm" id="idm44924529270432"/> a new mutable set object with the same items as iterable <span class="code"><em>seq</em></span>. When <span class="code"><em>seq</em></span> is a set, <span class="code">set(<em>seq</em>)</span> returns a shallow copy of <span class="code"><em>seq</em></span>, like <span class="code"><em>seq</em></span><span class="code">.copy()</span>. See <a data-type="xref" href="ch03.xhtml#sets">“Sets”</a>.</td>
</tr>
<tr>
<td><span class="code">slice</span></td>
<td><span class="code">slice([start, ]stop[, step], /)</span><br/>
			Returns<a contenteditable="false" data-primary="slice (built-in type)" data-type="indexterm" id="idm44924529233776"/> a slice object with the read-only attributes <span class="code">start</span>, <span class="code">stop</span>, and <span class="code">step</span> bound to the respective argument values, each defaulting to <span class="code"><strong>None</strong></span> when missing. For positive indices, such a slice signifies the same indices as <span class="code">range(start</span>, <span class="code">stop</span>, <span class="code">step)</span>. Slicing syntax, <span class="code"><em>obj</em></span><span class="code">[start:stop:step]</span>, passes a slice object as the argument to the <span class="code">__getitem__</span>, <span class="code">__setitem__</span>, or <span class="code">__delitem__</span> method of object <span class="code"><em>obj</em></span>. It is up to <span class="code"><em>obj</em></span>’s class to interpret the slices that its methods receive. See also <a data-type="xref" href="ch04.xhtml#container_slicing">“Container slicing”</a>.</td>
</tr>
<tr>
<td><span class="code">str</span></td>
<td><span class="code">str(<em>obj</em>='', /)</span><br/>
			Returns<a contenteditable="false" data-primary="str (built-in type)" data-type="indexterm" id="idm44924529218512"/> a concise, readable string representation of <span class="code"><em>obj</em></span>. If <span class="code"><em>obj</em></span> is a string, <span class="code">str</span> returns <span class="code"><em>obj</em></span>. See also <span class="code">repr</span> in <a data-type="xref" href="#pythonapostrophes_core_built_in_functio">Table 8-2</a> and <span class="code">__str__</span> in <a data-type="xref" href="ch04.xhtml#general_purpose_special_methods">Table 4-1</a>.</td>
</tr>
<tr>
<td><span class="code">super</span></td>
<td><span class="code">super()</span>,<span class="code"> super(<em>cls</em>,</span> <span class="code"><em>obj</em></span><span class="code">, /)</span><br/>
			Returns<a contenteditable="false" data-primary="super (built-in type)" data-type="indexterm" id="idm44924529205600"/> a superobject of object <span class="code"><em>obj</em></span> (which must be an instance of class <span class="code"><em>cls</em></span> or of any subclass of <span class="code"><em>cls</em></span>), suitable for calling superclass methods. Instantiate this built-in type only within a method’s code. The <span class="code"> super(<em>cls</em>,</span> <span class="code"><em>obj</em></span><span class="code">)</span> syntax is a legacy form from Python 2 that has been retained for compatibility. In new code, you usually call <span class="code">super()</span> without arguments, within a method, and Python determines the <span class="code"><em>cls</em></span> and <span class="code"><em>obj</em></span> by introspection (as <span class="code">type(self)</span> and <span class="code">self</span>, respectively). See <a data-type="xref" href="ch04.xhtml#cooperative_superclass_method_calling">“Cooperative superclass method calling”</a>.</td>
</tr>
<tr>
<td><span class="code">tuple</span></td>
<td><span class="code">tuple(<em>seq</em>=(), /)</span><br/>
			Returns<a contenteditable="false" data-primary="tuple (built-in type)" data-type="indexterm" id="idm44924529191520"/> a tuple with the same items as iterable <span class="code"><em>seq</em></span>, in order. When <span class="code"><em>seq</em></span> is a tuple, <span class="code">tuple</span> returns <span class="code"><em>seq</em></span> itself, like <span class="code"><em>seq</em></span><span class="code">[:]</span>. See <a data-type="xref" href="ch03.xhtml#tuple">“Tuples”</a>.</td>
</tr>
<tr>
<td><span class="code">type</span></td>
<td><span class="code">type(<em>obj</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="type (built-in type)" data-type="indexterm" id="idm44924529181504"/> the type object that is the type of <span class="code"><em>obj</em></span> (i.e., the most-derived, aka <em>leafmost</em>, type of which <span class="code"><em>obj</em></span> is an instance). <span class="code">type(<em>x</em>)</span> is the same as <span class="code"><em>x</em></span><span class="code">.__class__</span> for any <span class="code"><em>x</em></span>. Avoid checking equality or identity of types (see the following warning for details). This function is commonly used for debugging; for example, when value <span class="code"><em>x</em></span> does not behave as expected, inserting <span class="code">print(type(<em>x</em>),</span> <span class="code"><em>x</em></span><span class="code">)</span>. It can also be used to dynamically create classes at runtime, as described in <a data-type="xref" href="ch04.xhtml#object_oriented_python">Chapter 4</a>.</td>
</tr>
</tbody>
</table>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm44924529170384">
<h5>Type Equality Checking: Avoid It!</h5>
<p>Use<a contenteditable="false" data-primary="type equality checking" data-type="indexterm" id="idm44924529169152"/><a contenteditable="false" data-primary="equality checking" data-type="indexterm" id="idm44924529167632"/><a contenteditable="false" data-primary="isinstance (built-in function)" data-type="indexterm" id="idm44924529166528"/> <span class="code">isinstance</span> (covered in <a data-type="xref" href="#pythonapostrophes_core_built_in_functio">Table 8-2</a>), <em>not</em> equality comparison of types, to check whether an instance belongs to a particular class in order to support<a contenteditable="false" data-primary="inheritance" data-secondary="checking instances to support" data-type="indexterm" id="idm44924529162976"/> inheritance properly.<sup><a data-type="noteref" href="ch08.xhtml#ch01fn84" id="ch01fn84-marker">1</a></sup> Using <span class="code">type(<em>x</em>)</span> to check for equality or identity to some other type object is known as <em>type equality checking</em>. Type equality checking is inappropriate in production Python code, as it interferes with polymorphism. Typically, you just try to use <span class="code"><em>x</em></span> <em>as if</em> it were of the type you expect, handling any problems with a <span class="code"><strong>try</strong></span><span class="code">/</span><span class="code"><strong>except</strong></span> statement, as discussed in <a data-type="xref" href="ch06.xhtml#error_checking_strategies">“Error-Checking Strategies”</a>; this is known as<a contenteditable="false" data-primary="duck typing" data-type="indexterm" id="idm44924529153600"/> <a href="https://oreil.ly/ez2v9"><em>duck typing</em></a> (one of this book’s authors is often credited with an early use of this colorful phrase).</p>
<p>When you just <em>have</em> to<a contenteditable="false" data-primary="type checking" data-secondary="with isinstance" data-secondary-sortas="isinstance" data-type="indexterm" id="idm44924529150064"/> type-check, usually for debugging purposes, use <span class="code">isinstance</span> instead. In a broader sense, <span class="code">isinstance(<em>x</em>,</span> <span class="code"><em>atype</em></span><span class="code">)</span> is also a form of type checking, but<a contenteditable="false" data-primary="is keyword" data-type="indexterm" id="idm44924529145008"/> it is a lesser evil than <span class="code">type(<em>x</em>)</span> <span class="code"><strong>is</strong></span> <span class="code"><em>atype</em></span>. <span class="code">isinstance</span> accepts an <span class="code"><em>x</em></span> that is an instance of any subclass of <span class="code"><em>atype</em></span>, or an object that implements protocol <span class="code"><em>atype</em></span>, not just a <em>direct</em> instance of <span class="code"><em>atype</em></span> itself. In particular, <span class="code">isinstance</span> is fine when you’re checking for an abstract base class (see <a data-type="xref" href="ch04.xhtml#abstract_base_classe">“Abstract Base Classes”</a>) or protocol (see <a data-type="xref" href="ch05.xhtml#protocols">“Protocols”</a>); this newer idiom is also sometimes known as <a href="https://oreil.ly/P5Hym"><em>goose typing</em></a> (again, this phrase is credited to one of this book’s authors).<a contenteditable="false" data-primary="" data-startref="BIOTcore08" data-type="indexterm" id="idm44924529132592"/></p>
</div></aside>
</div></section>
<section data-pdf-bookmark="Built-in Functions" data-type="sect1"><div class="sect1" id="built_in_functions">
<h1>Built-in Functions</h1>
<p><a data-type="xref" href="#pythonapostrophes_core_built_in_functio">Table 8-2</a> covers Python<a contenteditable="false" data-primary="built-ins" data-secondary="functions" data-type="indexterm" id="BIfunct08"/><a contenteditable="false" data-primary="functions" data-secondary="built-in functions" data-type="indexterm" id="Fbuiltin08"/> functions (and some types that, in practice, are only used <em>as if</em> they were functions) in the module <span class="code">builtins</span>, in alphabetical order. Built-ins’ names are <em>not</em> keywords. This means you <em>can</em> bind, in local or global scope, an identifier that’s a built-in name, although we recommend avoiding it (see the following warning!). Names bound in local or global scope override names bound in built-in scope, so local and global names <em>hide</em> built-in ones. You can also rebind names in built-in scope, as covered in <a data-type="xref" href="ch07.xhtml#python_built_ins">“Python built-ins”</a>.</p>
<div data-type="warning" epub:type="warning">
<h1>Don’t Hide Built-ins</h1>
<p>Avoid accidentally hiding<a contenteditable="false" data-primary="built-ins" data-secondary="hiding" data-type="indexterm" id="idm44924529120000"/><a contenteditable="false" data-primary="names and naming" data-secondary="avoiding reuse of built-in names" data-type="indexterm" id="idm44924529118624"/> built-ins: your code might need them later. It’s often tempting to use natural names such as <span class="code">input</span>, <span class="code">list</span>, or <span class="code">filter</span> for your own variables, but <em>don’t do it</em>: these are names of built-in Python types or functions, and reusing them for your own purposes makes those built-in types and functions inaccessible. Unless you get into the habit of <em>never</em> hiding built-ins’ names with your own, sooner or later you’ll get mysterious bugs in your code caused by just such hiding occurring accidentally.</p>
</div>
<p>Many built-in functions cannot be called with named arguments, only with positional ones. In <a data-type="xref" href="#pythonapostrophes_core_built_in_functio">Table 8-2</a>, we mention cases in which this limitation does not hold; when it does, we also use the <span class="version">3.8+</span> positional-only marker <span class="code">/</span>, covered in <a data-type="xref" href="ch03.xhtml#positional_only_marker">“Positional-only marker”</a>.</p>
<table class="border" id="pythonapostrophes_core_built_in_functio">
<caption><span class="label">Table 8-2. </span>Python’s core built-in functions</caption>
<tbody>
<tr>
<td><span class="code">__import__</span></td>
<td><span class="code">__import__(<em>module_name</em>[,</span> <span class="code"><em>globals</em></span><span class="code">[,</span> <span class="code"><em>locals</em></span><span class="code">[,</span> <span class="code"><em>fromlist</em></span><span class="code">]]], /)</span><br/>
			Deprecated<a contenteditable="false" data-primary="import" data-secondary="__import__ function" data-type="indexterm" id="idm44924529099264"/> in modern Python; use <span class="code">importlib.import_module</span>, covered in <a data-type="xref" href="ch07.xhtml#module_loading">“Module Loading”</a>.</td>
</tr>
<tr>
<td><span class="code">abs</span></td>
<td><span class="code">abs(<em>x</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="abs (built-in function)" data-type="indexterm" id="idm44924529092640"/> the absolute value of number <span class="code"><em>x</em></span>. When <span class="code"><em>x</em></span> is complex, <span class="code">abs</span> returns the square root of <span class="code"><em>x</em></span><span class="code">.imag ** 2 +</span> <span class="code"><em>x</em></span><span class="code">.real ** 2</span> (also known as the magnitude of the complex number). Otherwise, <span class="code">abs</span> returns <span class="code"><em>-x</em></span> when <span class="code"><em>x</em></span> <span class="code">&lt; 0</span>, or <span class="code"><em>x</em></span> when <span class="code"><em>x</em></span> <span class="code">&gt;= 0</span>. See also <span class="code">__abs__</span>, <span class="code">__invert__</span>, <span class="code">__neg__</span>, and <span class="code">__pos__</span> in <a data-type="xref" href="ch04.xhtml#abcs_with_additional_methods">Table 4-4</a>.</td>
</tr>
<tr>
<td><span class="code">all</span></td>
<td><span class="code">all(<em>seq</em>, /)</span><br/>
<span class="code"><em>seq</em></span> is<a contenteditable="false" data-primary="all (built-in function)" data-type="indexterm" id="idm44924529072848"/> an iterable. <span class="code">all</span> returns <span class="code"><strong>False</strong></span> when any item of <span class="code"><em>seq</em></span> is falsy; otherwise, <span class="code">all</span> returns <span class="code"><strong>True</strong></span>. Like the operators <span class="code"><strong>and</strong></span> and <span class="code"><strong>or</strong></span>, covered in <a data-type="xref" href="ch03.xhtml#short_circuiting_operators">“Short-Circuiting Operators”</a>, <span class="code">all</span> stops evaluating and returns a result as soon as it knows the answer; in the case of <span class="code">all</span>, this means it stops as soon as a falsy item is reached, but proceeds throughout <span class="code"><em>seq</em></span> if all of <span class="code"><em>seq</em></span>’s items are truthy. Here is a typical toy example of the use of <span class="code">all</span>:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">if</code></strong><code> </code><code class="nb">all</code><code class="p">(</code><code class="n">x</code><code class="o">&gt;</code><code class="mi">0</code><code> </code><strong><code class="k">for</code></strong><code> </code><code class="n">x</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">the_numbers</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="nb">print</code><code class="p">(</code><code class="s1">'</code><code class="s1">all of the numbers are positive</code><code class="s1">'</code><code class="p">)</code><code>
</code><strong><code class="k">else</code></strong><code class="p">:</code><code>
</code><code>    </code><code class="nb">print</code><code class="p">(</code><code class="s1">'</code><code class="s1">some of the numbers are not positive</code><code class="s1">'</code><code class="p">)</code></pre>
			When <span class="code"><em>seq</em></span> is empty, <span class="code">all</span> returns <span class="code"><strong>True</strong></span>.</td>
</tr>
<tr>
<td><span class="code">any</span></td>
<td><span class="code">any(<em>seq</em>, /)</span><br/>
<span class="code"><em>seq</em></span> is an iterable. <span class="code">any</span><a contenteditable="false" data-primary="any (built-in function)" data-type="indexterm" id="idm44924529026592"/> returns <span class="code"><strong>True</strong></span> if any item of <span class="code"><em>seq</em></span> is truthy; otherwise, <span class="code">any</span> returns <span class="code"><strong>False</strong></span>. Like the operators <span class="code"><strong>and</strong></span> and <span class="code"><strong>or</strong></span>, covered in <a data-type="xref" href="ch03.xhtml#short_circuiting_operators">“Short-Circuiting Operators”</a>, <span class="code">any</span> stops evaluating and returns a result as soon as it knows the answer; in the case of <span class="code">any</span>, this means it stops as soon as a truthy item is reached, but proceeds throughout <span class="code"><em>seq</em></span> if all of <span class="code"><em>seq</em></span>’s items are falsy. Here is a typical toy example of the use of <span class="code">any</span>:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">if</code></strong><code> </code><code class="nb">any</code><code class="p">(</code><code class="n">x</code><code class="o">&lt;</code><code class="mi">0</code><code> </code><strong><code class="k">for</code></strong><code> </code><code class="n">x</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">the_numbers</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="nb">print</code><code class="p">(</code><code class="s1">'</code><code class="s1">some of the numbers are negative</code><code class="s1">'</code><code class="p">)</code><code>
</code><strong><code class="k">else</code></strong><code class="p">:</code><code>
</code><code>    </code><code class="nb">print</code><code class="p">(</code><code class="s1">'</code><code class="s1">none of the numbers are negative</code><code class="s1">'</code><code class="p">)</code></pre>
			When <span class="code"><em>seq</em></span> is empty, <span class="code">any</span> returns <span class="code"><strong>False</strong></span>.</td>
</tr>
<tr>
<td><span class="code">ascii</span></td>
<td><span class="code">ascii(<em>x</em>, /)</span><br/>
			Like <span class="code">repr</span>, but<a contenteditable="false" data-primary="ascii (built-in function)" data-type="indexterm" id="idm44924528955712"/> escapes non-ASCII characters in the string it returns; the result is usually similar to that of <span class="code">repr</span>.</td>
</tr>
<tr>
<td><span class="code">bin</span></td>
<td><span class="code">bin(<em>x</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="bin function (built-in)" data-type="indexterm" id="idm44924528924304"/> a binary string representation of integer <span class="code"><em>x</em></span>. E.g., <span class="code">bin(23)==</span>'<span class="code">0b10111</span>‘.</td>
</tr>
<tr>
<td><span class="code">breakpoint</span></td>
<td><span class="code">breakpoint()</span><br/>
			Invokes<a contenteditable="false" data-primary="breakpoint (built-in function)" data-type="indexterm" id="idm44924528918384"/> the <span class="code">pdb</span> Python debugger. Set <span class="code">sys.breakpointhook</span> to a callable function if you want <span class="code">breakpoint</span> to invoke an alternate debugger.</td>
</tr>
<tr>
<td><span class="code">callable</span></td>
<td><span class="code">callable(<em>obj</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="callable (built-in function)" data-type="indexterm" id="idm44924528912080"/> <span class="code"><strong>True</strong></span> when <span class="code"><em>obj</em></span> can be called; otherwise, returns <span class="code"><strong>False</strong></span>. An object can be called if it is a function, method, class, or type, or an instance of a class with a <span class="code">__call__</span> method. See also <span class="code">__call__</span> in <a data-type="xref" href="ch04.xhtml#general_purpose_special_methods">Table 4-1</a>.</td>
</tr>
<tr>
<td><span class="code">chr</span></td>
<td><span class="code">chr(<em>code</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="chr (built-in function)" data-type="indexterm" id="idm44924528902896"/> a string of length <span class="code">1</span>, a single character corresponding to the integer <span class="code"><em>code</em></span> in Unicode. See also <span class="code">ord</span> later in this table.</td>
</tr>
<tr>
<td><span class="code">compile</span></td>
<td><span class="code">compile(<em>source</em>,</span> <span class="code"><em>filename</em></span><span class="code">,</span> <span class="code"><em>mode</em></span><span class="code">)</span><br/>
			Compiles<a contenteditable="false" data-primary="compile (built-in function)" data-type="indexterm" id="idm44924528893088"/> a string and returns a code object usable by <span class="code">exec</span> or <span class="code">eval</span>. <span class="code">compile</span> raises <span class="code">SyntaxError</span> when <span class="code"><em>source</em></span> is not syntactically valid Python. When <span class="code"><em>source</em></span> is a multiline compound statement, the last character must be <span class="code">'\n'</span>. <span class="code"><em>mode</em></span> must be <span class="code">'eval'</span> when <span class="code"><em>source</em></span> is an expression and the result is meant for <span class="code">eval</span>; otherwise, <span class="code"><em>mode</em></span> must be <span class="code">'exec'</span> (for a single or multiple-statement string) or <span class="code">'single'</span> (for a string containing a single statement) when the string is meant for <span class="code">exec</span>. <span class="code"><em>filename</em></span> must be a string, used only in error messages (if an error occurs). See also <span class="code">eval</span> later in this table, and <a data-type="xref" href="ch14.xhtml#compile_and_code_objects">“compile and Code Objects”</a>. (<span class="code">compile</span> also takes the optional arguments <span class="code">flags</span>, <span class="code">dont_inherit</span>, <span class="code">optimize</span>, and <strong><span class="version">3.11+</span></strong> <span class="code">_feature_version</span>, though these are rarely used; see the <a href="https://oreil.ly/oYj2U">online documentation</a> for more information on these arguments.)</td>
</tr>
<tr>
<td><span class="code">delattr</span></td>
<td><span class="code">delattr(<em>obj</em>,</span> <span class="code"><em>name</em></span><span class="code">, /)</span><br/>
			Removes<a contenteditable="false" data-primary="delattr (built-in function)" data-type="indexterm" id="idm44924528868608"/> the attribute <span class="code"><em>name</em></span> from <span class="code"><em>obj</em></span>. <span class="code">delattr(<em>obj</em>, '<em>ident</em>')</span> is like <span class="code">del</span> <span class="code"><em>obj.ident</em></span><em>.</em> If <span class="code"><em>obj</em></span> has an attribute named <span class="code"><em>name</em></span> just because its class has it (as is normally the case, for example, for <em>methods</em> of <span class="code"><em>obj</em></span>), you cannot delete that attribute from <span class="code"><em>obj</em></span> itself. You may be able to delete that attribute from the <em>class</em>, if the metaclass lets you. If you can delete the class attribute, <span class="code"><em>obj</em></span> ceases to have the attribute, and so does every other instance of that class.</td>
</tr>
<tr>
<td><span class="code">dir</span></td>
<td><span class="code">dir([<em>obj</em>, ]/)</span><br/>
			Called<a contenteditable="false" data-primary="dir (built-in function)" data-type="indexterm" id="idm44924528854144"/> without arguments, <span class="code">dir</span> returns a sorted list of all variable names that are bound in the current scope. <span class="code">dir(<em>obj</em>)</span> returns a sorted list of names of attributes of <span class="code"><em>obj</em></span>, including ones coming from <span class="code"><em>obj</em></span>’s type or by inheritance. See also <span class="code">vars</span> later in this table.</td>
</tr>
<tr>
<td><span class="code">divmod</span></td>
<td><span class="code">divmod(<em>dividend</em>,</span> <span class="code"><em>divisor</em></span><span class="code">, /)</span><br/>
			Divides<a contenteditable="false" data-primary="divmod (built-in function)" data-type="indexterm" id="idm44924528844192"/> two numbers and returns a pair whose items are the quotient and remainder. See also <span class="code">__divmod__</span> in <a data-type="xref" href="ch04.xhtml#abcs_with_additional_methods">Table 4-4</a>.</td>
</tr>
<tr>
<td><span class="code">enumerate</span></td>
<td><span class="code">enumerate(iterable, start=0)</span><br/>
			Returns<a contenteditable="false" data-primary="enumerate (built-in function)" data-type="indexterm" id="idm44924528838656"/> a new iterator whose items are pairs. For each such pair, the second item is the corresponding item in <span class="code">iterable</span>, while the first item is an integer: <span class="code">start, start+1, start+2...</span>. For example, the following snippet loops on a list <span class="code">L</span> of integers, changing <span class="code">L</span> in place by halving every even value:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">for</code></strong><code> </code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">num</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="nb">enumerate</code><code class="p">(</code><code class="n">L</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">if</code></strong><code> </code><code class="n">num</code><code> </code><code class="o">%</code><code> </code><code class="mi">2</code><code> </code><code class="o">==</code><code> </code><code class="mi">0</code><code class="p">:</code><code>
</code><code>        </code><code class="n">L</code><code class="p">[</code><code class="n">i</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="n">num</code><code> </code><code class="o">/</code><code class="o">/</code><code> </code><code class="mi">2</code></pre>
<span class="code">enumerate</span> is one of the few built-ins callable with named arguments.</td>
</tr>
<tr>
<td><span class="code">eval</span></td>
<td><span class="code">eval(<em>expr</em>[,</span> <span class="code"><em>globals</em></span><span class="code">[,</span> <span class="code"><em>locals</em></span><span class="code">]]<em>,</em></span> <span class="code">/)</span><br/>
			Returns<a contenteditable="false" data-primary="eval (built-in function)" data-type="indexterm" id="idm44924528794464"/> the result of an expression. <span class="code"><em>expr</em></span> may be a code object ready for evaluation, or a string; if a string, <span class="code">eval</span> gets a code object by internally calling <span class="code">compile(</span><span class="code"><em>expr</em>, '&lt;string&gt;', 'eval')</span>. <span class="code">eval</span> evaluates the code object as an expression, using the <span class="code"><em>globals</em></span> and <span class="code"><em>locals</em></span> dictionaries as namespaces (when they’re missing, <span class="code">eval</span> uses the current namespace). <span class="code">eval</span> doesn’t execute statements: it only evaluates expressions. Nevertheless, <span class="code">eval</span> is dangerous; avoid it unless you know and trust that <span class="code"><em>expr</em></span> comes from a source that you are certain is safe. See also <span class="code">ast.literal_eval</span> (covered in <a data-type="xref" href="ch11.xhtml#standard_input">“Standard Input”</a>), and <a data-type="xref" href="ch14.xhtml#dynamic_execution_and_exec">“Dynamic Execution and exec”</a>.</td>
</tr>
<tr>
<td><span class="code">exec</span></td>
<td><span class="code">exec(<em>statement</em>[,</span> <span class="code"><em>globals</em></span><span class="code">[,</span> <span class="code"><em>locals</em></span><span class="code">]]<em>, /</em>)</span><br/>
			Like<a contenteditable="false" data-primary="exec (built-in function)" data-type="indexterm" id="idm44924528749824"/> <span class="code">eval</span>, but applies to any statement and returns <span class="code"><strong>None</strong></span>. <span class="code">exec</span> is very dangerous, unless you know and trust that <span class="code"><em>statement</em></span> comes from a source that you are certain is safe. See also <a data-type="xref" href="ch03.xhtml#statements">“Statements”</a> and <a data-type="xref" href="ch14.xhtml#dynamic_execution_and_exec">“Dynamic Execution and exec”</a>.</td>
</tr>
<tr>
<td><span class="code">filter</span></td>
<td><span class="code">filter(<em>func</em>,</span> <span class="code"><em>seq</em></span><span class="code">, /)</span><br/>
			Returns<a contenteditable="false" data-primary="filter (built-in function)" data-type="indexterm" id="idm44924528739168"/> an iterator of those items of <span class="code"><em>seq</em></span> for which <span class="code"><em>func</em></span> is true. <span class="code"><em>func</em></span> can be any callable object accepting a single argument, or <span class="code"><strong>None</strong></span>. <span class="code"><em>seq</em></span> can be any iterable. When <span class="code"><em>func</em></span> is callable, <span class="code">filter</span> calls <span class="code"><em>func</em></span> on each item of <span class="code"><em>seq</em></span>, just like the following generator expression:
			<pre data-code-language="python" data-type="programlisting">
<code class="p">(</code><em><code class="n">item</code></em><code> </code><strong><code class="k">for</code></strong><code> </code><em><code class="n">item</code></em><code> </code><strong><code class="ow">in</code></strong><code> </code><em><code class="n">seq</code></em><code> </code><strong><code class="k">if</code></strong><code> </code><em><code class="n">func</code></em><code class="p">(</code><em><code class="n">item</code></em><code class="p">)</code></pre>
			When <span class="code"><em>func</em></span> is <span class="code"><strong>None</strong></span>, <span class="code">filter</span> tests for truthy items, just like:

			<pre data-code-language="python" data-type="programlisting">
<code class="p">(</code><em><code class="n">item</code></em><code> </code><strong><code class="k">for</code></strong><code> </code><em><code class="n">item</code></em><code> </code><strong><code class="ow">in</code></strong><code> </code><em><code class="n">seq</code></em><code> </code><strong><code class="k">if</code></strong><code> </code><em><code class="n">item</code></em><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">format</span></td>
<td><span class="code">format(<em>x</em>,</span> <span class="code"><em>format_spec</em></span><span class="code">='', /)</span><br/>
			Returns<a contenteditable="false" data-primary="format (built-in function)" data-type="indexterm" id="idm44924528674368"/> <span class="code"><em>x</em></span><span class="code">.__format__(<em>format_spec</em>)</span>. See <a data-type="xref" href="ch04.xhtml#general_purpose_special_methods">Table 4-1</a>.</td>
</tr>
<tr>
<td><span class="code">getattr</span></td>
<td><span class="code">getattr(<em>obj</em>,</span> <span class="code"><em>name</em></span><span class="code">[,</span> <span class="code"><em>default</em></span><span class="code">], /)</span><br/>
			Returns<a contenteditable="false" data-primary="getattr (built-in function)" data-type="indexterm" id="idm44924528643888"/> <span class="code"><em>obj</em></span>’s attribute named by string <span class="code"><em>name</em></span><em>.</em> <span class="code">getattr(<em>obj</em>, '<em>ident</em>')</span> is like <span class="code"><em>obj.ident</em></span>. When <span class="code"><em>default</em></span> is present and <span class="code"><em>name</em></span> is not found in <span class="code"><em>obj</em></span>, <span class="code">getattr</span> returns <span class="code"><em>default</em></span> instead of raising <span class="code">AttributeError</span>. See also <a data-type="xref" href="ch03.xhtml#object_attributes_and_items">“Object attributes and items”</a> and <a data-type="xref" href="ch04.xhtml#attribute_reference_basics">“Attribute Reference Basics”</a>.</td>
</tr>
<tr>
<td><span class="code">globals</span></td>
<td><span class="code">globals()</span><br/>
			Returns<a contenteditable="false" data-primary="globals (built-in function)" data-type="indexterm" id="idm44924528629632"/> the <span class="code">__dict__</span> of the calling module (i.e., the dictionary used as the global namespace at the point of call). See also <span class="code">locals</span> later in this table. (Unlike <span class="code">locals()</span>, the <span class="code">dict</span> returned by <span class="code">globals()</span> is read/write, and updates to that <span class="code">dict</span> are equivalent to ordinary name definitions.)</td>
</tr>
<tr>
<td><span class="code">hasattr</span></td>
<td><span class="code">hasattr(<em>obj</em>,</span> <span class="code"><em>name</em></span><span class="code">, /)</span><br/>
			Returns<a contenteditable="false" data-primary="hasattr (built-in function)" data-type="indexterm" id="idm44924528619584"/> <span class="code"><strong>False</strong></span> when <span class="code"><em>obj</em></span> has no attribute <span class="code"><em>name</em></span> (i.e., when <span class="code">getattr(<em>obj, name</em>)</span> would raise <span class="code">AttributeError</span>); otherwise, returns <span class="code">True</span>. See also <a data-type="xref" href="ch04.xhtml#attribute_reference_basics">“Attribute Reference Basics”</a>.</td>
</tr>
<tr>
<td><span class="code">hash</span></td>
<td><span class="code">hash(<em>obj,</em></span> <span class="code">/)</span><br/>
			Returns<a contenteditable="false" data-primary="hash (built-in function)" data-type="indexterm" id="idm44924528608784"/> the hash value for <span class="code"><em>obj</em></span><em>.</em> <span class="code"><em>obj</em></span> can be a dictionary key, or an item in a set, only if <span class="code"><em>obj</em></span> can be hashed. All objects that compare equal must have the same hash value, even if they are of different types. If the type of <span class="code"><em>obj</em></span> does not define equality comparison, <span class="code">hash(</span><span class="code"><em>obj</em>)</span> normally returns <span class="code">id(<em>obj</em>)</span> (see <span class="code">id</span> in this table and <span class="code">__hash__</span> in <a data-type="xref" href="ch04.xhtml#general_purpose_special_methods">Table 4-1</a>).</td>
</tr>
<tr>
<td><span class="code">help</span></td>
<td><span class="code">help([<em>obj</em>, /])</span><br/>
			When<a contenteditable="false" data-primary="help (built-in function)" data-type="indexterm" id="idm44924528596000"/> called without an <span class="code"><em>obj</em></span> argument, begins an interactive help session, which you exit by entering <span class="code"><strong>quit</strong></span>. When <span class="code"><em>obj</em></span> is given, <span class="code">help</span> prints the documentation for <span class="code"><em>obj</em></span> and its attributes, and returns <span class="code"><strong>None</strong></span>. <span class="code">help</span> is useful in interactive Python sessions to get a quick reference to an object’s functionality.</td>
</tr>
<tr>
<td><span class="code">hex</span></td>
<td><span class="code">hex(<em>x</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="hex (built-in function)" data-type="indexterm" id="idm44924528586080"/> a hex string representation of <span class="code">int</span> <span class="code"><em>x</em></span>. See also <span class="code">__hex__</span> in <a data-type="xref" href="ch04.xhtml#abcs_with_additional_methods">Table 4-4</a>.</td>
</tr>
<tr>
<td><span class="code">id</span></td>
<td><span class="code">id(<em>obj</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="id (built-in function)" data-type="indexterm" id="idm44924528578496"/> the integer value that is the identity of <span class="code"><em>obj</em></span>. The <span class="code">id</span> of <span class="code"><em>obj</em></span> is unique and constant during <span class="code"><em>obj</em></span>’s lifetime<sup><a data-type="noteref" href="ch08.xhtml#ch01fn85" id="ch01fn85-marker">a</a></sup> (but may be reused at any later time after <span class="code"><em>obj</em></span> is garbage-collected, so don’t rely on storing or checking <span class="code">id</span> values). When a type or class does not define equality comparison, Python uses <span class="code">id</span> to compare and hash instances. For any objects <span class="code"><em>x</em></span> and <span class="code"><em>y</em></span>, identity check <span class="code"><em>x</em></span> <span class="code"><strong>is</strong></span> <span class="code"><em>y</em></span> is the same as <span class="code">id(<em>x</em>)==id(<em>y</em>)</span>, but more readable and better performing.</td>
</tr>
<tr>
<td><span class="code">input</span></td>
<td><span class="code">input(<em>prompt</em>='', /)</span><br/>
			Writes<a contenteditable="false" data-primary="input (built-in function)" data-type="indexterm" id="idm44924528561168"/> <span class="code"><em>prompt</em></span> to standard output, reads a line from standard input, and returns the line (without <span class="code">\n</span>) as a <span class="code">str</span>. At end-of-file, <span class="code">input</span> raises <span class="code">EOFError</span>.</td>
</tr>
<tr>
<td><span class="code">isinstance</span></td>
<td><span class="code">isinstance(<em>obj, cls</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="isinstance (built-in function)" data-type="indexterm" id="idm44924528553184"/> <span class="code"><strong>True</strong></span> when <span class="code"><em>obj</em></span> is an instance of class <span class="code"><em>cls</em></span> (or any subclass of <span class="code"><em>cls</em></span>, or implements protocol or ABC <span class="code"><em>cls</em></span>); otherwise, returns <span class="code"><strong>False</strong></span>. <span class="code"><em>cls</em></span> can be a tuple whose items are classes (or <span class="version">3.10+</span> multiple types joined using the <span class="code">|</span> operator): in this case, <span class="code">isinstance</span> returns <span class="code"><strong>True</strong></span> when <span class="code"><em>obj</em></span> is an instance of any of the items of <span class="code"><em>cls</em></span>; otherwise, it returns <span class="code"><strong>False</strong></span>. See also <a data-type="xref" href="ch04.xhtml#abstract_base_classe">“Abstract Base Classes”</a> and <a data-type="xref" href="ch05.xhtml#protocols">“Protocols”</a>.</td>
</tr>
<tr>
<td><span class="code">issubclass</span></td>
<td><span class="code">issubclass(<em>cls1</em>,</span> <span class="code"><em>cls2</em></span><span class="code">, /)</span><br/>
			Returns<a contenteditable="false" data-primary="issubclass (built-in function)" data-type="indexterm" id="idm44924528533696"/> <span class="code"><strong>True</strong></span> when <span class="code"><em>cls1</em></span> is a direct or indirect subclass of <span class="code"><em>cls2</em></span>, or defines all the elements of protocol or ABC <span class="code"><em>cls2</em></span>; otherwise, returns <span class="code"><strong>False</strong></span>. <span class="code"><em>cls1</em></span> and <span class="code"><em>cls2</em></span> must be classes. <span class="code"><em>cls2</em></span> can also be a tuple whose items are classes. In this case, <span class="code">issubclass</span> returns <span class="code"><strong>True</strong></span> when <span class="code"><em>cls1</em></span> is a direct or indirect subclass of any of the items of <span class="code"><em>cls2</em></span>; otherwise, it returns <span class="code"><strong>False</strong></span>. For any class <span class="code"><em>C</em></span>, <span class="code">issubclass(<em>C</em>,</span> <span class="code"><em>C</em></span><span class="code">)</span> returns <span class="code"><strong>True</strong></span>.</td>
</tr>
<tr>
<td><span class="code">iter</span></td>
<td><span class="code">iter(<em>obj</em>, /)</span>,<br/>
<span class="code">iter(<em>func</em>,</span> <span class="code"><em>sentinel, /</em></span><span class="code">)</span><br/>
			Creates<a contenteditable="false" data-primary="iter (built-in function)" data-type="indexterm" id="idm44924528511792"/> and returns an iterator (an object that you can repeatedly pass to the <span class="code">next</span> built-in function to get one item at a time; see <a data-type="xref" href="ch03.xhtml#iterators">“Iterators”</a>). When called with one argument, <span class="code">iter(<em>obj</em>)</span> normally returns <span class="code"><em>obj</em></span><span class="code">.__iter__()</span>. When <span class="code"><em>obj</em></span> is a sequence without a special method <span class="code">__iter__</span>, <span class="code">iter(<em>obj</em>)</span> is equivalent to the generator:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">iter_sequence</code><code class="p">(</code><code class="n">obj</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="n">i</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code>
</code><code>    </code><strong><code class="k">while</code><code> </code><code class="kc">True</code></strong><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">try</code></strong><code class="p">:</code><code>
</code><strong><code>            </code><code class="k">yield</code></strong><code> </code><code class="n">obj</code><code class="p">[</code><code class="n">i</code><code class="p">]</code><code>
</code><strong><code>        </code><code class="k">except</code></strong><code> </code><code class="ne">IndexError</code><code class="p">:</code><code>
</code><strong><code>            </code><code class="k">raise</code></strong><code> </code><code class="ne">StopIteration</code><code>
</code><code>        </code><code class="n">i</code><code> </code><code class="o">+</code><code class="o">=</code><code> </code><code class="mi">1</code></pre>
			See also <a data-type="xref" href="ch03.xhtml#sequence">“Sequences”</a> and <span class="code">__iter__</span> in <a data-type="xref" href="ch04.xhtml#container_methods">Table 4-2</a>.</td>
</tr>
<tr>
<td><span class="code">iter</span><br/>
<em>(cont.)</em>
</td>
<td>
			When called with two arguments, the first argument must be callable without arguments, and <span class="code">iter(<em>func</em>,</span> <span class="code"><em>sentinel</em></span><span class="code">)</span> is equivalent to the generator:

			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">iter_sentinel</code><code class="p">(</code><code class="n">func</code><code class="p">,</code><code> </code><code class="n">sentinel</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">while</code><code> </code><code class="kc">True</code></strong><code class="p">:</code><code>
</code><code>        </code><code class="n">item</code><code> </code><code class="o">=</code><code> </code><code class="n">func</code><code class="p">(</code><code class="p">)</code><code>
</code><code>        </code><strong><code class="k">if</code></strong><code> </code><code class="n">item</code><code> </code><code class="o">==</code><code> </code><code class="n">sentinel</code><code class="p">:</code><code>
</code><code>            </code><strong><code class="k">raise</code></strong><code> </code><code class="ne">StopIteration</code><code>
</code><code>        </code><strong><code class="k">yield</code></strong><code> </code><code class="n">item</code></pre>
<div data-type="note" epub:type="note">
<h1>Don’t Call iter in a for Clause</h1>
<p>As discussed in <a data-type="xref" href="ch03.xhtml#the_for_statement">“The for Statement”</a>, the statement <span class="code"><strong>for</strong></span> <span class="code"><em>x</em></span> <span class="code"><strong>in</strong></span> <span class="code"><em>obj</em></span> is exactly equivalent to <span class="code"><strong>for</strong></span> <span class="code"><em>x</em></span> <span class="code"><strong>in</strong></span> <span class="code">iter(<em>obj</em>)</span>; therefore, do <em>not</em> explicitly call <span class="code">iter</span> in such a <span class="code"><strong>for</strong></span> statement. That would be redundant and, therefore, bad Python style, slower, and less readable.</p>
</div>
<span class="code">iter</span> is <em>idempotent</em>. In other words, when <span class="code"><em>x</em></span> is an iterator, <span class="code">iter(<em>x</em>)</span> is <span class="code"><em>x</em></span>, as long as <span class="code"><em>x</em></span>’s class supplies an <span class="code">__iter__</span> method whose body is just <span class="code"><strong>return</strong></span> <span class="code">self</span>, as an iterator’s class should.</td>
</tr>
<tr>
<td><span class="code">len</span></td>
<td><span class="code">len(<em>container</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="len (built-in function)" data-type="indexterm" id="idm44924528350944"/> the number of items in <span class="code"><em>container</em></span>, which may be a sequence, a mapping, or a set. See also <span class="code">__len__</span> in <a data-type="xref" href="ch04.xhtml#container_method">“Container methods”</a>.</td>
</tr>
<tr>
<td><span class="code">locals</span></td>
<td><span class="code">locals()</span><br/>
			Returns<a contenteditable="false" data-primary="locals (built-in function)" data-type="indexterm" id="idm44924528344912"/> a dictionary that represents the current local namespace. Treat the returned dictionary as read-only; trying to modify it may or may not affect the values of local variables, and might raise an exception. See also <span class="code">globals</span> and <span class="code">vars</span> in this table.</td>
</tr>
<tr>
<td><span class="code">map</span></td>
<td><span class="code">map(<em>func, seq</em>, /)</span>,<br/>
<span class="code">map(<em>func</em>, /, *<em>seqs</em>)</span><br/>
<span class="code">map</span><a contenteditable="false" data-primary="map (built-in function)" data-type="indexterm" id="idm44924528336240"/> calls <span class="code"><em>func</em></span> on every item of iterable <span class="code"><em>seq</em></span> and returns an iterator of the results. When you call <span class="code">map</span> with multiple <span class="code"><em>seqs</em></span> iterables, <span class="code"><em>func</em></span> must be a callable object that accepts <span class="code"><em>n</em></span> arguments (where <span class="code"><em>n</em></span> is the number of <span class="code"><em>seqs</em></span> arguments,). <span class="code">map</span> repeatedly calls <span class="code"><em>func</em></span> with <span class="code"><em>n</em></span> arguments, one corresponding item from each iterable.<br/>
			For example, <span class="code">map(<em>func</em>,</span> <span class="code"><em>seq</em></span><span class="code">)</span> is just like the generator expression:
			<pre data-code-language="python" data-type="programlisting">
<code class="p">(</code><em><code class="n">func</code></em><code class="p">(</code><em><code class="n">item</code></em><code class="p">)</code><code> </code><strong><code class="k">for</code></strong><code> </code><em><code class="n">item</code></em><code> </code><strong><code class="ow">in</code></strong><code> </code><em><code class="n">seq</code></em><code class="p">)</code><code class="o">.</code><code class="n">map</code><code class="p">(</code><em><code class="n">func</code></em><code class="p">,</code><code> </code><em><code class="n">seq1</code></em><code class="p">,</code><code> </code><em><code class="n">seq2</code></em><code class="p">)</code></pre>
			is just like the generator expression:

			<pre data-code-language="python" data-type="programlisting">
<code class="p">(</code><em><code class="n">func</code></em><code class="p">(</code><em><code class="n">a</code><code class="p">,</code><code> </code><code class="n">b</code></em><code class="p">)</code><code> </code><strong><code class="k">for</code></strong><code> </code><em><code class="n">a</code></em><code class="p">,</code><code> </code><em><code class="n">b</code></em><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="nb">zip</code><code class="p">(</code><em><code class="n">seq1</code></em><code class="p">,</code><code> </code><em><code class="n">seq2</code></em><code class="p">)</code><code class="p">)</code></pre>
			When <span class="code">map</span>’s iterable arguments have different lengths, <span class="code">map</span> acts as if the longer ones were truncated (just as <span class="code">zip</span> itself does).</td>
</tr>
<tr>
<td><span class="code">max</span></td>
<td><span class="code">max(<em>seq</em>, /, *, key=<strong>None</strong>[, default=...])</span>,<br/>
<span class="code">max(*<em>args</em>, key=<strong>None</strong>[, default=...])</span><br/>
			Returns<a contenteditable="false" data-primary="max (built-in function)" data-type="indexterm" id="idm44924528248384"/> the largest item in the iterable argument <span class="code"><em>seq</em></span>, or the largest one of multiple positional arguments <span class="code"><em>args</em></span>. You can pass a <span class="code">key</span> argument, with the same semantics covered in <a data-type="xref" href="ch03.xhtml#sorting_a_list">“Sorting a list”</a>. You can also pass a <span class="code">default</span> argument, the value to return if <span class="code"><em>seq</em></span> is empty; when you don’t pass <span class="code">default</span>, and <span class="code"><em>seq</em></span> is empty, <span class="code">max</span> raises <span class="code">ValueError</span>. (When you pass <span class="code">key</span> and/or <span class="code">default</span>, you must pass either or both as named arguments.)</td>
</tr>
<tr>
<td><span class="code">min</span></td>
<td><span class="code">min(<em>seq,</em></span> <span class="code">/, *, key</span><span class="code"><em>=</em><strong>None</strong></span><span class="code">[, default=...])</span>,<br/>
<span class="code">min(<em>*args</em>, key<em>=</em><strong>None</strong></span><span class="code">[, default=...])</span><br/>
			Returns<a contenteditable="false" data-primary="min (built-in function)" data-type="indexterm" id="idm44924528207696"/> the smallest item in the iterable argument <span class="code"><em>seq</em></span>, or the smallest one of multiple positional arguments <span class="code"><em>args</em></span>. You can pass a <span class="code">key</span> argument, with the same semantics covered in <a data-type="xref" href="ch03.xhtml#sorting_a_list">“Sorting a list”</a>. You can also pass a <span class="code">default</span> argument, the value to return if <span class="code"><em>seq</em></span> is empty; when you don’t pass <span class="code">default</span>, and <span class="code"><em>seq</em></span> is empty, <span class="code">min</span> raises <span class="code">ValueError</span>. (When you pass <span class="code">key</span> and/or <span class="code">default</span>, you must pass either or both as named arguments.)</td>
</tr>
<tr>
<td><span class="code">next</span></td>
<td><span class="code">next(<em>it</em>[,</span> <span class="code"><em>default</em></span><span class="code">], /)</span><br/>
			Returns<a contenteditable="false" data-primary="next (built-in function)" data-type="indexterm" id="idm44924528192720"/> the next item from iterator <span class="code"><em>it</em></span>, which advances to the next item. When <span class="code"><em>it</em></span> has no more items, <span class="code">next</span> returns <span class="code"><em>default</em></span>, or, when you don’t pass <span class="code"><em>default</em></span>, raises <span class="code">StopIteration</span>.</td>
</tr>
<tr>
<td><span class="code">oct</span></td>
<td><span class="code">oct(<em>x</em>, /)</span><br/>
			Converts<a contenteditable="false" data-primary="oct (built-in function)" data-type="indexterm" id="idm44924528183744"/> <span class="code">int</span> <span class="code"><em>x</em></span> to an octal string. See also <span class="code">__oct__</span> in <a data-type="xref" href="ch04.xhtml#abcs_with_additional_methods">Table 4-4</a>.</td>
</tr>
<tr>
<td><span class="code">open</span></td>
<td><span class="code">open(file, mode='r', buffering=-1)</span><br/>
			Opens<a contenteditable="false" data-primary="open (built-in function)" data-type="indexterm" id="idm44924528176800"/> or creates a file and returns a new file object. <span class="code">open</span> accepts many, many more optional parameters; see <a data-type="xref" href="ch11.xhtml#the_io_module">“The io Module”</a> for details.<br/>
<span class="code">open</span> is one of the few built-ins callable with named arguments.</td>
</tr>
<tr>
<td><span class="code">ord</span></td>
<td><span class="code">ord(<em>ch</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="ord (built-in function)" data-type="indexterm" id="idm44924528169840"/> an <span class="code">int</span> between <span class="code">0</span> and <span class="code">sys.maxunicode</span> (inclusive), corresponding to the single-character <span class="code">str</span> argument <span class="code"><em>ch</em></span>. See also <span class="code">chr</span> earlier in this table.</td>
</tr>
<tr>
<td><span class="code">pow</span></td>
<td><span class="code">pow(<em>x</em>,</span> <span class="code"><em>y</em></span><span class="code">[,</span> <span class="code"><em>z</em></span><span class="code">], /)</span><br/>
			When<a contenteditable="false" data-primary="pow (built-in function)" data-type="indexterm" id="idm44924528157232"/> <span class="code"><em>z</em></span> is present, <span class="code">pow(<em>x</em>,</span> <span class="code"><em>y</em></span><span class="code">,</span> <span class="code"><em>z</em></span><span class="code">)</span> returns <span class="code">(<em>x</em></span> <span class="code">**</span> <span class="code"><em>y</em>) %</span> <span class="code"><em>z</em></span>. When <span class="code"><em>z</em></span> is missing, <span class="code">pow(<em>x</em>,</span> <span class="code"><em>y</em></span><span class="code">)</span> returns <span class="code"><em>x</em></span> <span class="code">**</span> <span class="code"><em>y</em></span>. See also <span class="code">__pow__</span> in <a data-type="xref" href="ch04.xhtml#abcs_with_additional_methods">Table 4-4</a>. When <span class="code"><em>x</em></span> is an <span class="code">int</span> and <span class="code"><em>y</em></span> is a nonnegative <span class="code">int</span>, <span class="code">pow</span> returns an <span class="code">int</span> and uses Python’s full value range for <span class="code">int</span> (though evaluating <span class="code">pow</span> for large <span class="code"><em>x</em></span> and <span class="code"><em>y</em></span> integer values may take some time). When either <span class="code"><em>x</em></span> or <span class="code"><em>y</em></span> is a <span class="code">float</span>, or <span class="code"><em>y</em></span> is <span class="code">&lt; 0</span>, <span class="code">pow</span> returns a <span class="code">float</span> (or a <span class="code">complex</span>, when <span class="code">x &lt; 0</span> and <span class="code">y != int(y)</span>); in this case, <span class="code">pow</span> raises <span class="code">OverflowError</span> if <span class="code"><em>x</em></span> or <span class="code"><em>y</em></span> is too large.</td>
</tr>
<tr>
<td><span class="code">print</span></td>
<td><span class="code">print(/,</span> <span class="code">*<em>args</em>, sep=' ', end='\n', file=sys.stdout, flush=<strong>False</strong>)</span><br/>
			Formats<a contenteditable="false" data-primary="print (built-in function)" data-type="indexterm" id="idm44924528118448"/> with <span class="code">str</span>, and emits to stream <span class="code">file</span>, each item of <span class="code"><em>args</em></span> (if any), separated by <span class="code">sep</span>, with <span class="code">end</span> after all of them; then, <span class="code">print</span> flushes the stream if <span class="code">flush</span> is truthy.</td>
</tr>
<tr>
<td><span class="code">range</span></td>
<td><span class="code">range([start=0, ]stop[, step=1], /)</span><br/>
			Returns<a contenteditable="false" data-primary="range (built-in function)" data-type="indexterm" id="idm44924528109248"/> an iterator of <span class="code">int</span>s in arithmetic progression:
			<pre data-code-language="python" data-type="programlisting">
<code class="n">start</code><code class="p">,</code> <code class="n">start</code><code class="o">+</code><code class="n">step</code><code class="p">,</code> <code class="n">start</code><code class="o">+</code><code class="p">(</code><code class="mi">2</code><code class="o">*</code><code class="n">step</code><code class="p">),</code> <code class="o">...</code></pre>
			When <span class="code">start</span> is missing, it defaults to <span class="code">0</span>. When <span class="code">step</span> is missing, it defaults to <span class="code">1</span>. When <span class="code">step</span> is <span class="code">0</span>, <span class="code">range</span> raises <span class="code">ValueError</span>. When <span class="code">step</span> is <span class="code">&gt; 0</span>, the last item is the largest <span class="code">start+(<em>i*</em>step)</span> strictly less than <span class="code">stop</span>. When <span class="code">step</span> is <span class="code">&lt; 0</span>, the last item is the smallest <span class="code">start+(<em>i</em>*step</span><span class="code"><em>)</em></span> strictly greater than <span class="code">stop</span>. The iterator is empty when <span class="code">start</span> is greater than or equal to <span class="code">stop</span> and <span class="code">step</span> is greater than <span class="code">0</span>, or when <span class="code">start</span> is less than or equal to <span class="code">stop</span> and <span class="code">step</span> is less than <span class="code">0</span>. Otherwise, the first item of the iterator is always <span class="code">start</span>.<br/>
			When what you need is a <span class="code">list</span> of <span class="code">int</span>s in arithmetic progression, call <span class="code">list(range(...))</span>.</td>
</tr>
<tr>
<td><span class="code">repr</span></td>
<td><span class="code">repr(<em>obj</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="repr (built-in function)" data-type="indexterm" id="idm44924528044272"/> a complete and unambiguous string representation of <span class="code"><em>obj</em></span>. When feasible, <span class="code">repr</span> returns a string that you could pass to <span class="code">eval</span> in order to create a new object with the same value as <span class="code"><em>obj</em></span>. See also <span class="code">str</span> in <a data-type="xref" href="#pythonapostrophes_core_built_in_types">Table 8-1</a> and <span class="code">__repr__</span> in <a data-type="xref" href="ch04.xhtml#general_purpose_special_methods">Table 4-1</a>.</td>
</tr>
<tr>
<td><span class="code">reversed</span></td>
<td><span class="code">reversed(<em>seq</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="reversed (built-in function)" data-type="indexterm" id="idm44924528033904"/> a new iterator object that yields the items of <span class="code"><em>seq</em></span> (which must be specifically a sequence, not just any iterable) in reverse order.</td>
</tr>
<tr>
<td><span class="code">round</span></td>
<td><span class="code">round(number, ndigits=0)</span><br/>
			Returns<a contenteditable="false" data-primary="round (built-in function)" data-type="indexterm" id="idm44924528029008"/> a <span class="code">float</span> whose value is <span class="code">int</span> or <span class="code">float</span> <span class="code">number</span> rounded to <span class="code">ndigits</span> digits after the decimal point (i.e., the multiple of <span class="code">10**-ndigits</span> that is closest to <span class="code">number</span>). When two such multiples are equally close to <span class="code">number</span>, <span class="code">round</span> returns the <em>even</em> multiple. Since today’s computers represent floating-point numbers in binary, not in decimal, most of <span class="code">round</span>’s results are not exact, as the <a href="https://oreil.ly/qHMNz">tutorial</a> in the docs explains in detail. See also <a data-type="xref" href="ch16.xhtml#the_decimal_module">“The decimal Module”</a> and David Goldberg’s famous language-independent <a href="https://oreil.ly/TVFMb">article</a> on floating-point arithmetic.</td>
</tr>
<tr>
<td><span class="code">setattr</span></td>
<td><span class="code">setattr(<em>obj</em>,</span> <span class="code"><em>name</em></span><span class="code">,</span> <span class="code"><em>value</em></span><span class="code">, /)</span><br/>
			Binds<a contenteditable="false" data-primary="setattr (built-in function)" data-type="indexterm" id="idm44924528011680"/> <span class="code"><em>obj</em></span>’s attribute <span class="code"><em>name</em></span> to <span class="code"><em>value</em></span>. <span class="code">setattr(<em>obj</em>, '<em>ident</em>',</span> <span class="code"><em>val</em></span><span class="code">)</span> is like <span class="code"><em>obj</em></span><span class="code">.<em>ident</em>=</span><span class="code"><em>val</em></span>. See also <span class="code">getattr</span> earlier in this table, <a data-type="xref" href="ch03.xhtml#object_attributes_and_items">“Object attributes and items”</a>, and <a data-type="xref" href="ch04.xhtml#setting_an_attribute">“Setting an attribute”</a>.</td>
</tr>
<tr>
<td><span class="code">sorted</span></td>
<td><span class="code">sorted(<em>seq</em>, /, *, key=<strong>None</strong>, reverse=<strong>False</strong>)</span><br/>
			Returns<a contenteditable="false" data-primary="sorted (built-in function)" data-type="indexterm" id="idm44924527995872"/> a list with the same items as iterable <span class="code"><em>seq</em></span>, in sorted order. Same as:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">sorted</code><code class="p">(</code><em><code class="n">seq</code></em><code class="p">,</code><code> </code><code class="o">/</code><code class="p">,</code><code> </code><code class="o">*</code><code class="p">,</code><code> </code><code class="n">key</code><code class="o">=</code><strong><code class="kc">None</code></strong><code class="p">,</code><code> </code><code class="n">reverse</code><code class="o">=</code><strong><code class="kc">False</code></strong><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="n">result</code><code> </code><code class="o">=</code><code> </code><code class="nb">list</code><code class="p">(</code><em><code class="n">seq</code></em><code class="p">)</code><code>
</code><code>    </code><code class="n">result</code><code class="o">.</code><code class="n">sort</code><code class="p">(</code><code class="n">key</code><code class="p">,</code><code> </code><code class="n">reverse</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">return</code></strong><code> </code><code class="n">result</code></pre>
			See <a data-type="xref" href="ch03.xhtml#sorting_a_list">“Sorting a list”</a> for the meaning of the arguments. If you want to pass <span class="code">key</span> and/or <span class="code">reverse</span>, you <em>must</em> pass them by name.</td>
</tr>
<tr>
<td><span class="code">sum</span></td>
<td><span class="code">sum(<em>seq</em>, /, start=0)</span><br/>
			Returns<a contenteditable="false" data-primary="sum (built-in function)" data-type="indexterm" id="idm44924527954304"/> the sum of the items of iterable <span class="code"><em>seq</em></span> (which should be numbers, and, in particular, cannot be strings) plus the value of <span class="code">start</span>. When <span class="code"><em>seq</em></span> is empty, returns <span class="code">start</span>. To “sum” (concatenate) an iterable of strings, in order, use <span class="code">''.join(<em>iterofstrs</em>)</span>, as covered in <a data-type="xref" href="#pythonapostrophes_core_built_in_types">Table 8-1</a> and <a data-type="xref" href="ch17.xhtml#building_up_a_string_from_pieces">“Building up a string from pieces”</a>.</td>
</tr>
<tr>
<td><span class="code">vars</span></td>
<td><span class="code">vars([<em>obj</em>, ]<em>/</em>)</span><br/>
			When<a contenteditable="false" data-primary="vars (built-in function)" data-type="indexterm" id="idm44924527915232"/> called with no argument, <span class="code">vars</span> returns a dictionary with all variables that are bound in the current scope (like <span class="code">locals</span>, covered earlier in this table). Treat this dictionary as read-only. <span class="code">vars(<em>obj</em>)</span> returns a dictionary with all attributes currently bound in <span class="code"><em>obj</em></span>, similar to <span class="code">dir</span>, covered earlier in this table. This dictionary may be modifiable or not, depending on the type of <span class="code"><em>obj</em></span>.</td>
</tr>
<tr>
<td><span class="code">zip</span></td>
<td><span class="code">zip(<em>seq</em>, /, *<em>seqs</em>, strict<em>=</em><strong>False</strong></span><span class="code">)</span><br/>
			Returns<a contenteditable="false" data-primary="zip (built-in function)" data-type="indexterm" id="idm44924527904352"/> an iterator of tuples, where the <span class="code"><em>n</em></span>th tuple contains the <span class="code"><em>n</em></span>th item from each of the argument iterables. You must call <span class="code">zip</span> with at least one (positional) argument, and all positional arguments must be iterable. <span class="code">zip</span> returns an iterator with as many items as the shortest iterable, ignoring trailing items in the other iterable objects. <strong><span class="version">3.10+</span></strong> When the iterables have different lengths and <span class="code">strict</span> is <span class="code"><strong>True</strong></span>, <span class="code">zip</span> raises <span class="code">ValueError</span> once it reaches the end of the shortest iterable. See also <span class="code">map</span> earlier in this table and <span class="code">zip_longest</span> in <a data-type="xref" href="#functions_and_attributes_of_the_itertoo">Table 8-10</a>.<a contenteditable="false" data-primary="" data-startref="BIfunct08" data-type="indexterm" id="idm44924527893712"/><a contenteditable="false" data-primary="" data-startref="Fbuiltin08" data-type="indexterm" id="idm44924527892336"/></td>
</tr>
</tbody>
<tbody><tr class="footnotes"><td colspan="2"><p data-type="footnote" id="ch01fn85"><sup><a href="ch08.xhtml#ch01fn85-marker">a</a></sup> Otherwise arbitrary; often, an implementation detail, <span class="code"><em>obj</em></span>’s address in memory.</p></td></tr></tbody></table>
</div></section>
<section data-pdf-bookmark="The sys Module" data-type="sect1"><div class="sect1" id="the_sys_module">
<h1>The sys Module</h1>
<p>The<a contenteditable="false" data-primary="sys module" data-type="indexterm" id="sysmod08"/><a contenteditable="false" data-primary="standard library modules" data-secondary="sys" data-type="indexterm" id="SLsys08"/> attributes of the <span class="code">sys</span> module are bound to data and functions that provide information on the state of the Python interpreter or affect the interpreter directly. <a data-type="xref" href="#functions_and_attributes_of_the_sys_mod">Table 8-3</a> covers the most frequently used attributes of <span class="code">sys</span>. Most <span class="code">sys</span> attributes we don’t cover are meant specifically for use in debuggers, profilers, and integrated development environments; see the <a href="https://oreil.ly/2KBRg">online docs</a> for more information.</p>
<p>Platform-specific information is best accessed using the <span class="code">platform</span> module, which we do not cover in this book; see the <a href="https://oreil.ly/YJKQD">online docs</a> for details on this module.</p>
<table class="border" id="functions_and_attributes_of_the_sys_mod">
<caption><span class="label">Table 8-3. </span>Functions and attributes of the <span class="code">sys</span> module</caption>
<tbody>
<tr>
<td class="width-20"><span class="code">argv</span></td>
<td>The<a contenteditable="false" data-primary="argv (sys module)" data-type="indexterm" id="idm44924527875936"/> list of command-line arguments passed to the main script. <span class="code">argv[0]</span> is the name of the main script,<sup><a data-type="noteref" href="ch08.xhtml#ch01fn86" id="ch01fn86-marker">a</a></sup> or <span class="code">'-c'</span> if the command line used the <span class="code"><strong>-c</strong></span> option. See <a data-type="xref" href="#the_argparse_module">“The argparse Module”</a> for one good way to use <span class="code">sys.argv</span>.</td>
</tr>
<tr>
<td><span class="code">audit</span></td>
<td><span class="code">audit(<em>event</em>, /, *<em>args</em>)</span><br/>
			Raises<a contenteditable="false" data-primary="audit (sys module)" data-type="indexterm" id="idm44924527866096"/> an <em>audit event</em> whose name is <span class="code">str</span> <span class="code"><em>event</em></span> and whose arguments are <span class="code"><em>args</em></span>. The rationale for Python’s audit system is laid out in exhaustive detail in <a href="https://oreil.ly/pMcEY">PEP 578</a>; Python itself raises the large variety of events listed in the <a href="https://oreil.ly/SjLW1">online docs</a>. To <em>listen</em> for events, call <span class="code">sys.addaudithook(<em>hook</em>)</span>, where <span class="code"><em>hook</em></span> is a callable whose arguments are a <span class="code">str</span>, the event’s name, followed by arbitrary positional arguments. For more details, see the <a href="https://oreil.ly/4os3i">docs</a>.</td>
</tr>
<tr>
<td><span class="code">buil⁠t⁠i⁠n⁠_​m⁠o⁠d⁠ule_names</span></td>
<td>A tuple of <span class="code">str</span>s: the names of all the modules compiled into this Python interpreter.</td>
</tr>
<tr>
<td><span class="code">displayhook</span></td>
<td><span class="code">displayhook(<em>value</em>, /)</span><br/>
			In<a contenteditable="false" data-primary="displayhook (sys module)" data-type="indexterm" id="idm44924527850992"/> interactive sessions, the Python interpreter calls <span class="code">displayhook</span>, passing it the result of each expression statement you enter. The default <span class="code">displayhook</span> does nothing when <span class="code"><em>value</em></span> is <span class="code"><strong>None</strong></span>; otherwise, it saves <span class="code"><em>value</em></span> in the built-in variable whose name is <span class="code">_</span> (an underscore) and displays it via <span class="code">repr</span>:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">_default_sys_displayhook</code><code class="p">(</code><code class="n">value</code><code class="p">,</code><code> </code><code class="o">/</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">if</code></strong><code> </code><code class="n">value</code><code> </code><strong><code class="ow">is</code><code> </code><code class="ow">not</code><code> </code><code class="kc">None</code></strong><code class="p">:</code><code>
</code><code>        </code><code class="n">__builtins__</code><code class="o">.</code><code class="n">_</code><code> </code><code class="o">=</code><code> </code><code class="n">value</code><code>
</code><code>        </code><code class="nb">print</code><code class="p">(</code><code class="nb">repr</code><code class="p">(</code><code class="n">value</code><code class="p">)</code><code class="p">)</code></pre>
			You can rebind <span class="code">sys.displayhook</span> in order to change interactive behavior. The original value is available as <span class="code">sys.__displayhook__</span>.</td>
</tr>
<tr>
<td><span class="code">dont_wri⁠t⁠e⁠_​b⁠y⁠t⁠ecode</span></td>
<td>When <span class="code"><strong>True</strong></span>, Python does not write a bytecode file (with extension <em>.pyc</em>) to disk when it imports a source file (with extension <em>.py</em>).</td>
</tr>
<tr>
<td><span class="code">excepthook</span></td>
<td><span class="code">excepthook(<em>type</em>,</span> <span class="code"><em>value</em></span><span class="code">,</span> <span class="code"><em>traceback</em></span><span class="code">, /)</span><br/>
			When<a contenteditable="false" data-primary="excepthook (sys module)" data-type="indexterm" id="idm44924527776544"/> an exception is not caught by any handler, propagating all the way up the call stack, Python calls <span class="code">excepthook</span>, passing it the exception class, object, and traceback, as covered in <a data-type="xref" href="ch06.xhtml#exception_propagation">“Exception Propagation”</a>. The default <span class="code">excepthook</span> displays the error and traceback. You can rebind <span class="code">sys.excepthook</span> to change how uncaught exceptions (just before Python returns to the interactive loop or terminates) get displayed and/or logged. The original value is available as <span class="code">sys.__excepthook__</span>.</td>
</tr>
<tr>
<td><span class="code">exception</span></td>
<td><span class="code">exception()</span><br/>
<span class="version">3.11+</span> When<a contenteditable="false" data-primary="exception (sys module)" data-type="indexterm" id="idm44924527768688"/> called within an <span class="code"><strong>except</strong></span> clause, returns the current exception instance (equivalent to <span class="code">sys.exc_info()[1]</span>).</td>
</tr>
<tr>
<td><span class="code">exc_info</span></td>
<td><span class="code">exc_info()</span><br/>
			When<a contenteditable="false" data-primary="exc_info (sys module)" data-type="indexterm" id="idm44924527763248"/> the current thread is handling an exception, <span class="code">exc_info</span> returns a tuple with three items: the class, object, and traceback for the exception. When the thread is not handling an exception, <span class="code">exc_info</span> returns <span class="code">(<strong>None</strong>,</span> <span class="code"><strong>None</strong></span><span class="code">,</span> <span class="code"><strong>None</strong></span><span class="code">)</span>. To display information from a traceback, see <a data-type="xref" href="ch17.xhtml#the_traceback_module">“The traceback Module”</a>.
			<div data-type="note" epub:type="note">
<h1>Holding On to a Traceback Object Can Make Some Garbage Uncollectable</h1>
<p>A traceback object indirectly holds references to all variables on the call stack; if you hold a reference to the traceback (e.g., indirectly, by binding a variable to the tuple that <span class="code">exc_info</span> returns), Python must keep in memory data that might otherwise be garbage-collected. Make sure that any binding to the traceback object is of short duration, for example with a <span class="code"><strong>try</strong></span><span class="code">/</span><span class="code"><strong>finally</strong></span> statement (discussed in <a data-type="xref" href="ch06.xhtml#trysolidusfinally">“try/finally”</a>). If you must hold a reference to an exception <span class="code"><em>e</em></span>, clear <span class="code"><em>e</em></span>’s traceback: <span class="code"><em>e</em></span><span class="code">.__traceback__=</span><span class="code"><strong>None</strong></span>.<sup><a data-type="noteref" href="ch08.xhtml#ch01fn87" id="ch01fn87-marker">b</a></sup></p>
</div>
</td>
</tr>
<tr>
<td><span class="code">exit</span></td>
<td><span class="code">exit(<em>arg</em>=0, /)</span><br/>
			Raises<a contenteditable="false" data-primary="exit (sys module)" data-type="indexterm" id="idm44924527741744"/> a <span class="code">SystemExit</span> exception, which normally terminates execution after executing cleanup handlers installed by <span class="code"><strong>try</strong></span><span class="code">/</span><span class="code"><strong>finally</strong></span> statements, <span class="code"><strong>with</strong></span> statements, and the <span class="code">atexit</span> module. When <span class="code"><em>arg</em></span> is an <span class="code">int</span>, Python uses <span class="code"><em>arg</em></span> as the program’s exit code: <span class="code">0</span> indicates successful termination; any other value indicates unsuccessful termination of the program. Most platforms require exit codes to be between <span class="code">0</span> and <span class="code">127</span>. When <span class="code"><em>arg</em></span> is not an <span class="code">int</span>, Python prints <span class="code"><em>arg</em></span> to <span class="code">sys.stderr</span>, and the exit code of the program is <span class="code">1</span> (a generic “unsuccessful termination” code).</td>
</tr>
<tr>
<td><span class="code">float_info</span></td>
<td>A read-only object whose attributes hold low-level details about the implementation of the <span class="code">float</span> type in this Python interpreter. See the <a href="https://oreil.ly/9vMpw">online docs</a> for details.</td>
</tr>
<tr>
<td><span class="code">g⁠e⁠t⁠r⁠e⁠c⁠u⁠r⁠s⁠i⁠o⁠n​l⁠i⁠m⁠i⁠t</span></td>
<td><span class="code">getrecursionlimit()</span><br/>
			Returns<a contenteditable="false" data-primary="getrecursion limit (sys module)" data-type="indexterm" id="idm44924527722000"/> the current limit on the depth of Python’s call stack. See also <a data-type="xref" href="ch03.xhtml#recursion">“Recursion”</a> and <span class="code">setrecursionlimit</span> later in this table.</td>
</tr>
<tr>
<td><span class="code">getrefcount</span></td>
<td><span class="code">getrefcount(<em>obj</em>, /)</span><br/>
			Returns<a contenteditable="false" data-primary="getrefcount (sys module)" data-type="indexterm" id="idm44924527716128"/> the reference count of <span class="code"><em>obj</em></span>. Reference counts are covered in <a data-type="xref" href="ch14.xhtml#garbage_collection">“Garbage Collection”</a>.</td>
</tr>
<tr>
<td><span class="code">getsizeof</span></td>
<td><span class="code">getsizeof(<em>obj</em>[,</span> <span class="code"><em>default</em></span><span class="code">], /)</span><br/>
			Returns<a contenteditable="false" data-primary="getsizeof (sys module)" data-type="indexterm" id="idm44924527708496"/> the size, in bytes, of <span class="code"><em>obj</em></span> (not counting any items or attributes <span class="code"><em>obj</em></span> may refer to), or <span class="code"><em>default</em></span> when <span class="code"><em>obj</em></span> does not provide a way to retrieve its size (in the latter case, when <span class="code"><em>default</em></span> is absent, <span class="code">getsizeof</span> raises <span class="code">TypeError</span>).</td>
</tr>
<tr>
<td><span class="code">maxsize</span></td>
<td>The maximum number of bytes in an object in this version of Python (at least <span class="code">2 ** 31 - 1</span>, that is, <span class="code">2147483647</span>).</td>
</tr>
<tr>
<td><span class="code">maxunicode</span></td>
<td>The largest codepoint for a Unicode character in this version of Python; currently, always <span class="code">1114111</span> (<span class="code">0x10FFFF</span>). The version of the Unicode database used by Python is in <span class="code">unicodedata.unidata_version</span>.</td>
</tr>
<tr>
<td><span class="code">modules</span></td>
<td>A dictionary whose items are the names and module objects for all loaded modules. See <a data-type="xref" href="ch07.xhtml#module_loading">“Module Loading”</a> for more information on <span class="code">sys.modules</span>.</td>
</tr>
<tr>
<td><span class="code">path</span></td>
<td>A<a contenteditable="false" data-primary="path (sys module)" data-type="indexterm" id="idm44924527689504"/> list of strings that specifies the directories and ZIP files that Python searches when looking for a module to load. See <a data-type="xref" href="ch07.xhtml#searching_the_filesystem_for_a_module">“Searching the Filesystem for a Module”</a> for more information on <span class="code">sys.path</span>.</td>
</tr>
<tr>
<td><span class="code">platform</span></td>
<td>A<a contenteditable="false" data-primary="platform (sys module)" data-type="indexterm" id="idm44924527684688"/> string that names the platform on which this program is running. Typical values are brief operating system names, such as <span class="code">'darwin'</span>, <span class="code">'linux2'</span>, and <span class="code">'win32'</span>. For Linux, check <span class="code">sys.platform.startswith('linux')</span>, for portability among Linux versions. See also the online docs for the module <a href="https://oreil.ly/LH4IP"><span class="code">platform</span></a>, which we don’t cover in this book.</td>
</tr>
<tr>
<td><span class="code">ps1</span>, <span class="code">ps2</span></td>
<td><span class="code">ps1</span> and <span class="code">ps2</span> specify the primary and secondary interpreter prompt strings, initially <span class="code">&gt;&gt;&gt;</span> and <span class="code">...</span>, respectively. These<a contenteditable="false" data-primary="modules" data-secondary="attribute (sys module)" data-type="indexterm" id="idm44924527674096"/> <span class="code">sys</span> attributes exist only in interactive interpreter sessions. If you bind either attribute to a non-<span class="code">str</span> object <span class="code"><em>x</em></span>, Python prompts by calling <span class="code">str(<em>x</em>)</span> on the object each time a prompt is output. This feature allows dynamic prompting: code a class that defines <span class="code">__str__</span>, then assign an instance of that class to <span class="code">sys.ps1</span> and/or <span class="code">sys.ps2</span>. For example, to get numbered prompts:
			<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="kn">import</code><code> </code><code class="nn">sys</code></strong><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="k">class</code></strong><code> </code><code class="nc">Ps1</code><code class="p">(</code><code class="nb">object</code><code class="p">)</code><code class="p">:</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>     </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">)</code><code class="p">:</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>         </code><code class="bp">self</code><code class="o">.</code><code class="n">p</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>     </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__str__</code><code class="p">(</code><code class="bp">self</code><code class="p">)</code><code class="p">:</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>         </code><code class="bp">self</code><code class="o">.</code><code class="n">p</code><code> </code><code class="o">+</code><code class="o">=</code><code> </code><code class="mi">1</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>         </code><strong><code class="k">return</code></strong><code> </code><code class="sa">f</code><code class="s1">'</code><code class="s1">[</code><code class="si">{</code><code class="bp">self</code><code class="o">.</code><code class="n">p</code><code class="si">}</code><code class="s1">]&gt;&gt;&gt; </code><code class="s1">'</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="k">class</code></strong><code> </code><code class="nc">Ps2</code><code class="p">(</code><code class="nb">object</code><code class="p">)</code><code class="p">:</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>     </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__str__</code><code class="p">(</code><code class="bp">self</code><code class="p">)</code><code class="p">:</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>         </code><strong><code class="k">return</code></strong><code> </code><code class="sa">f</code><code class="s1">'</code><code class="s1">[</code><code class="si">{</code><code class="n">sys</code><code class="o">.</code><code class="n">ps1</code><code class="o">.</code><code class="n">p</code><code class="si">}</code><code class="s1">]... </code><code class="s1">'</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">sys</code><code class="o">.</code><code class="n">ps1</code><code class="p">,</code><code> </code><code class="n">sys</code><code class="o">.</code><code class="n">ps2</code><code> </code><code class="o">=</code><code> </code><code class="n">Ps1</code><code class="p">(</code><code class="p">)</code><code class="p">,</code><code> </code><code class="n">Ps2</code><code class="p">(</code><code class="p">)</code><code>
</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="p">(</code><code class="mi">2</code><code> </code><code class="o">+</code><code>
</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code> </code><code class="mi">2</code><code class="p">)</code></pre>
<pre data-type="programlisting"><strong>4</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="p">[</code><code class="mi">2</code><code class="p">]</code><code class="o">&gt;&gt;&gt;</code></pre>
</td>
</tr>
<tr>
<td><span class="code">s⁠e⁠t⁠r⁠e⁠c⁠u⁠r⁠s⁠i⁠o⁠n​l⁠i⁠m⁠i⁠t</span></td>
<td><span class="code">setrecursionlimit(<em>limit</em>, /)</span><br/>
			Sets<a contenteditable="false" data-primary="setrecursionlimit (sys module)" data-type="indexterm" id="idm44924527457232"/> the limit on the depth of Python’s call stack (the default is <span class="code">1000</span>). The limit prevents runaway recursion from crashing Python. Raising the limit may be necessary for programs that rely on deep recursion, but most platforms cannot support very large limits on call stack depth. More usefully, <em>lowering</em> the limit helps you check, during testing and debugging, that your program degrades gracefully, rather than abruptly crashing with a <span class="code">RecursionError</span>, under situations of almost runaway recursion. See also <a data-type="xref" href="ch03.xhtml#recursion">“Recursion”</a> and <span class="code">getrecursionlimit</span> earlier in this table.</td>
</tr>
<tr>
<td><span class="code">stdin</span>,<br/>
<span class="code">stdout</span>,<br/>
<span class="code">stderr</span></td>
<td><span class="code">stdin</span>, <span class="code">stdout</span>, and <span class="code">stderr</span><a contenteditable="false" data-primary="stdin (sys module)" data-type="indexterm" id="idm44924527450800"/><a contenteditable="false" data-primary="stdout (sys module)" data-type="indexterm" id="idm44924527449696"/><a contenteditable="false" data-primary="stderr (sys module)" data-type="indexterm" id="idm44924527448592"/> are predefined file-like objects that correspond to Python’s standard input, output, and error streams. You can rebind <span class="code">stdout</span> and <span class="code">stderr</span> to file-like objects open for writing (objects that supply a <span class="code">write</span> method accepting a string argument) to redirect the destination of output and error messages. You can rebind <span class="code">stdin</span> to a file-like object open for reading (one that supplies a <span class="code">readline</span> method returning a string) to redirect the source from which built-in function <span class="code">input</span> reads. The original values are available as <span class="code">__stdin__</span>, <span class="code">__stdout__</span>, and <span class="code">__stderr__</span>. We cover file objects in <a data-type="xref" href="ch11.xhtml#the_io_module">“The io Module”</a>.</td>
</tr>
<tr>
<td><span class="code">tracebacklimit</span></td>
<td>The maximum number of levels of traceback displayed for unhandled exceptions. By default, this attribute is not defined (i.e., there is no limit). When <span class="code">sys.tracebacklimit</span> is <span class="code">&lt;= 0</span>, Python prints only the exception type and value, without a traceback.</td>
</tr>
<tr>
<td><span class="code">version</span></td>
<td>A<a contenteditable="false" data-primary="version (sys module)" data-type="indexterm" id="idm44924527423968"/> string that describes the Python version, build number and date, and C compiler used. Use <span class="code">sys.version</span> only for logging or interactive output; to perform version comparisons, use <span class="code">sys.version_info</span>.</td>
</tr>
<tr>
<td><span class="code">version_info</span></td>
<td>A<a contenteditable="false" data-primary="version_info (sys module)" data-type="indexterm" id="idm44924527419472"/> <span class="code">namedtuple</span> of the <span class="code">major</span>, <span class="code">minor</span>, <span class="code">micro</span>, <span class="code">releaselevel</span>, and <span class="code">serial</span> fields of the running Python version. For example, in the first post-beta release of Python 3.10, <span class="code">sys.version_info</span> was <span class="code">sys.version_info(major=3, minor=10, micro=0, releaselevel='final', serial=0)</span>, equivalent to the tuple <span class="code">(3, 10, 0, 'final', 0)</span>. This form is defined to be directly comparable between versions; to see if the current version running is greater than or equal to, say, 3.8, you can test <span class="code">sys.version_info[:3] &gt;= (3, 8, 0)</span>. (Do <em>not</em> do string comparisons of the <em>string</em> <span class="code">sys.version</span>, since the string <span class="code">"3.10"</span> would compare as less than <span class="code">"3.9"</span>!)<a contenteditable="false" data-primary="" data-startref="sysmod08" data-type="indexterm" id="idm44924527407744"/><a contenteditable="false" data-primary="" data-startref="SLsys08" data-type="indexterm" id="idm44924527406336"/></td>
</tr>
</tbody>
<tbody><tr class="footnotes"><td colspan="2"><p data-type="footnote" id="ch01fn86"><sup><a href="ch08.xhtml#ch01fn86-marker">a</a></sup> It could, of course, also be a path to the script, and/or a symbolic link to it, if that’s what you gave Python.</p><p data-type="footnote" id="ch01fn87"><sup><a href="ch08.xhtml#ch01fn87-marker">b</a></sup> One of the book’s authors had this very problem when memoizing return values and exceptions raised in <span class="code">pyparsing</span>: the cached exception tracebacks held many object references and interfered with garbage collection. The solution was to clear the tracebacks of the exceptions before putting them in the cache.</p></td></tr></tbody></table>
</div></section>
<section data-pdf-bookmark="The copy Module" data-type="sect1"><div class="sect1" id="the_copy_module">
<h1>The copy Module</h1>
<p>As<a contenteditable="false" data-primary="copy module" data-type="indexterm" id="idm44924527403616"/><a contenteditable="false" data-primary="variables and other references" data-secondary="assignment statement" data-type="indexterm" id="idm44924527401856"/><a contenteditable="false" data-primary="assignment statements" data-type="indexterm" id="idm44924527400640"/><a contenteditable="false" data-primary="standard library modules" data-secondary="copy" data-type="indexterm" id="SLcopy08"/> discussed in <a data-type="xref" href="ch03.xhtml#assignment_statements">“Assignment Statements”</a>, assignments in Python do not <em>copy</em> the righthand-side object being assigned. Rather, assignments <em>add references</em> to the RHS object. When you want a <em>copy</em> of object <span class="code"><em>x</em></span>, ask <span class="code"><em>x</em></span> for a copy of itself, or ask <span class="code"><em>x</em></span>’s type to make a new instance copied from <span class="code"><em>x</em></span>. If <span class="code"><em>x</em></span> is a list, <span class="code">list(<em>x</em>)</span> returns a copy of <span class="code"><em>x</em></span>, as does <span class="code"><em>x</em></span><span class="code">[:]</span>. If <span class="code"><em>x</em></span> is a dictionary, <span class="code">dict(<em>x</em>)</span> and <span class="code"><em>x</em></span><span class="code">.copy()</span> return a copy of <span class="code"><em>x</em></span>. If <span class="code"><em>x</em></span> is a set, <span class="code">set(<em>x</em>)</span> and <span class="code"><em>x</em></span><span class="code">.copy()</span> return a copy of <span class="code"><em>x</em></span>. In each case, this book’s authors prefer the uniform and readable idiom of calling the type, but there is no consensus on this style issue in the Python community.</p>
<p>The <span class="code">copy</span> module supplies a <span class="code">copy</span> function to create and return a copy of many types of objects. Normal copies, such as those returned by <span class="code">list(<em>x</em>)</span> for a list <span class="code"><em>x</em></span> and <span class="code">copy.copy(<em>x</em>)</span> for any <span class="code"><em>x</em></span>, are known as<a contenteditable="false" data-primary="shallow copies" data-type="indexterm" id="idm44924527373632"/> <em>shallow</em> copies: when <span class="code"><em>x</em></span> has references to other objects (either as items or as attributes), a normal (shallow) copy of <span class="code"><em>x</em></span> has distinct references to the <em>same</em> objects. Sometimes, however, you need a <em>deep</em> copy, where referenced objects are deep-copied recursively (fortunately, this need is rare, since a deep copy can take a lot of memory and time); for these cases, the <span class="code">copy</span> module also supplies a <span class="code">deepcopy</span> function. These functions are discussed further in <a data-type="xref" href="#copy_module_functions">Table 8-4</a>.</p>
<table class="border" id="copy_module_functions">
<caption><span class="label">Table 8-4. </span><span class="code">copy</span> module functions</caption>
<tbody>
<tr>
<td class="width-15"><span class="code">copy</span></td>
<td><span class="code">copy(<em>x</em>)</span><br/>
			Creates<a contenteditable="false" data-primary="copy function" data-secondary="copy module" data-type="indexterm" id="idm44924527361568"/> and returns a shallow copy of <span class="code"><em>x</em></span>, for <span class="code"><em>x</em></span> of many types (modules, files, frames, and other internal types, however, are not supported). When <span class="code"><em>x</em></span> is immutable, <span class="code">copy.copy(<em>x</em>)</span> may return <span class="code"><em>x</em></span> itself as an optimization. A class can customize the way <span class="code">copy.copy</span> copies its instances by having a special method <span class="code">__copy__(self)</span> that returns a new object, a shallow copy of <span class="code">self</span>.</td>
</tr>
<tr>
<td><span class="code">deepcopy</span></td>
<td><span class="code">deepcopy(<em>x</em>,[memo])</span><br/>
			Makes<a contenteditable="false" data-primary="deepcopy (copy module)" data-type="indexterm" id="idm44924527349392"/> a deep copy of <span class="code"><em>x</em></span> and returns it. Deep copying implies a <a href="https://oreil.ly/8Sf4q">recursive walk</a> over a directed (but not necessarily <a href="https://oreil.ly/RivIZ">acyclic</a>) graph of references. Be aware that to reproduce the graph’s exact shape, when references to the same object are met more than once during the walk, you must <em>not</em> make distinct copies; rather, you must use <em>references</em> to the same copied object. Consider the following simple example:
			<pre data-code-language="python" data-type="programlisting">
<code class="n">sublist</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code><code class="mi">2</code><code class="p">]</code>
<code class="n">original</code> <code class="o">=</code> <code class="p">[</code><code class="n">sublist</code><code class="p">,</code> <code class="n">sublist</code><code class="p">]</code>
<code class="n">thecopy</code> <code class="o">=</code> <code class="n">copy</code><code class="o">.</code><code class="n">deepcopy</code><code class="p">(</code><code class="n">original</code><code class="p">)</code></pre>
<span class="code">original[0]</span> <span class="code"><strong>is</strong></span> <span class="code">original[1]</span> is <span class="code"><strong>True</strong></span> (i.e., the two items of <span class="code">original</span> refer to the same object). This is an important property of <span class="code">original</span>, and anything claiming to be “a copy” must preserve it. The semantics of <span class="code">copy.deepcopy</span> ensure that <span class="code">thecopy[0]</span> <span class="code"><strong>is</strong></span> <span class="code">thecopy[1]</span> is also <span class="code"><strong>True</strong></span>: the graphs of references of <span class="code">original</span> and <span class="code">thecopy</span> have the same shape. Avoiding repeated copying has an important beneficial side effect: it prevents infinite loops that would otherwise occur when the graph of references has cycles.<br/>
<span class="code">copy.deepcopy</span> accepts a second, optional argument: <span class="code">memo</span>, a <span class="code">dict</span> that maps the <span class="code">id</span> of each object already copied to the new object that is its copy. <span class="code">memo</span> is passed by all recursive calls of <span class="code">deepcopy</span> to itself; you may also explicitly pass it (normally as an originally empty <span class="code">dict</span>) if you also need to obtain a correspondence map between the identities of originals and copies (the final state of <span class="code">memo</span> will then be just such a mapping).<br/>
			A class can customize the way <span class="code">copy.deepcopy</span> copies its instances by having a special method <span class="code">__deepcopy__(self,</span> <span class="code">memo)</span> that returns a new object, a deep copy of <span class="code">self</span>. When <span class="code">__deepcopy__</span> needs to deep-copy some referenced object <span class="code"><em>subobject</em></span>, it must do so by calling <span class="code">copy.deepcopy(<em>subobject</em>, memo)</span>. When a class has no special method <span class="code">__deepcopy__</span>, <span class="code">copy.deepcopy</span> on an instance of that class also tries calling the special methods <span class="code">__getinitargs__</span>, <span class="code">__getnewargs__</span>, <span class="code">__getstate__</span>, and <span class="code">__setstate__</span>, covered in<a contenteditable="false" data-primary="" data-startref="SLcopy08" data-type="indexterm" id="idm44924527269888"/> <a data-type="xref" href="ch12.xhtml#pickling_instances">“Pickling instances”</a>.</td>
</tr>
</tbody>
</table>
</div></section>
<section data-pdf-bookmark="The collections Module" data-type="sect1"><div class="sect1" id="the_collections_module">
<h1>The collections Module</h1>
<p>The<a contenteditable="false" data-primary="collections module" data-type="indexterm" id="colmod08"/><a contenteditable="false" data-primary="standard library modules" data-secondary="collections" data-type="indexterm" id="SLcollect08"/> <span class="code">collections</span> module supplies useful types that are collections (i.e., containers), as well as the ABCs covered in <a data-type="xref" href="ch04.xhtml#abstract_base_classe">“Abstract Base Classes”</a>. Since Python 3.4, the ABCs have been in <span class="code">collections.abc</span>; for backward compatibility they could still be accessed directly in <span class="code">collections</span> itself until Python 3.9, but this functionality was removed in 3.10.</p>
<section data-pdf-bookmark="ChainMap" data-type="sect2"><div class="sect2" id="chainmap">
<h2>ChainMap</h2>
<p><span class="code">ChainMap</span><a contenteditable="false" data-primary="ChainMap class (collections module)" data-type="indexterm" id="idm44924527257664"/> “chains” multiple mappings together; given a <span class="code">ChainMap</span> instance <span class="code"><em>c</em></span>, accessing <span class="code"><em>c</em></span><span class="code">[<em>key</em>]</span> returns the value in the first of the mappings that has that key, while <em>all</em> changes to <span class="code"><em>c</em></span> affect only the very first mapping in <span class="code"><em>c</em></span>. To further explain, you could approximate this as follows:</p>
<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">class</code></strong><code> </code><code class="nc">ChainMap</code><code class="p">(</code><code class="n">collections</code><code class="o">.</code><code class="n">abc</code><code class="o">.</code><code class="n">MutableMapping</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code><code> </code><code class="o">*</code><code class="n">maps</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><code class="bp">self</code><code class="o">.</code><code class="n">maps</code><code> </code><code class="o">=</code><code> </code><code class="nb">list</code><code class="p">(</code><code class="n">maps</code><code class="p">)</code><code>
</code><code>        </code><code class="bp">self</code><code class="o">.</code><code class="n">_keys</code><code> </code><code class="o">=</code><code> </code><code class="nb">set</code><code class="p">(</code><code class="p">)</code><code>
</code><code>        </code><strong><code class="k">for</code></strong><code> </code><code class="n">m</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">maps</code><code class="p">:</code><code>
</code><code>            </code><code class="bp">self</code><code class="o">.</code><code class="n">_keys</code><code class="o">.</code><code class="n">update</code><code class="p">(</code><code class="n">m</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__len__</code><code class="p">(</code><code class="bp">self</code><code class="p">)</code><code class="p">:</code><code> </code><strong><code class="k">return</code></strong><code> </code><code class="nb">len</code><code class="p">(</code><code class="bp">self</code><code class="o">.</code><code class="n">_keys</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__iter__</code><code class="p">(</code><code class="bp">self</code><code class="p">)</code><code class="p">:</code><code> </code><strong><code class="k">return</code></strong><code> </code><code class="nb">iter</code><code class="p">(</code><code class="bp">self</code><code class="o">.</code><code class="n">_keys</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__getitem__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code><code> </code><code class="n">key</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">if</code></strong><code> </code><code class="n">key</code><code> </code><strong><code class="ow">not</code><code> </code><code class="ow">in</code></strong><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">_keys</code><code class="p">:</code><code> </code><strong><code class="k">raise</code></strong><code> </code><code class="ne">KeyError</code><code class="p">(</code><code class="n">key</code><code class="p">)</code><code>
</code><code>        </code><strong><code class="k">for</code></strong><code> </code><code class="n">m</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">maps</code><code class="p">:</code><code>
</code><code>            </code><strong><code class="k">try</code></strong><code class="p">:</code><code> </code><strong><code class="k">return</code></strong><code> </code><code class="n">m</code><code class="p">[</code><code class="n">key</code><code class="p">]</code><code>
</code><code>            </code><strong><code class="k">except</code></strong><code> </code><code class="ne">KeyError</code><code class="p">:</code><code> </code><strong><code class="k">pass</code></strong><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__setitem__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code><code> </code><code class="n">key</code><code class="p">,</code><code> </code><code class="n">value</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><code class="bp">self</code><code class="o">.</code><code class="n">maps</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="p">[</code><code class="n">key</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="n">value</code><code>
</code><code>        </code><code class="bp">self</code><code class="o">.</code><code class="n">_keys</code><code class="o">.</code><code class="n">add</code><code class="p">(</code><code class="n">key</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__delitem__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code><code> </code><code class="n">key</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">del</code></strong><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">maps</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="p">[</code><code class="n">key</code><code class="p">]</code><code>
</code><code>        </code><code class="bp">self</code><code class="o">.</code><code class="n">_keys</code><code> </code><code class="o">=</code><code> </code><code class="nb">set</code><code class="p">(</code><code class="p">)</code><code>
</code><code>        </code><strong><code class="k">for</code></strong><code> </code><code class="n">m</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">maps</code><code class="p">:</code><code>
</code><code>            </code><code class="bp">self</code><code class="o">.</code><code class="n">_keys</code><code class="o">.</code><code class="n">update</code><code class="p">(</code><code class="n">m</code><code class="p">)</code></pre>
<p>Other methods could be defined for efficiency, but this is the minimum set that a <span class="code">MutableMapping</span> requires. See the <a href="https://oreil.ly/WgfFo">online docs</a> for more details and a collection of recipes on how to use <span class="code">ChainMap</span>.</p>
</div></section>
<section data-pdf-bookmark="Counter" data-type="sect2"><div class="sect2" id="counter">
<h2>Counter</h2>
<p><span class="code">Counter</span><a contenteditable="false" data-primary="Counter class (collections module)" data-type="indexterm" id="idm44924527014848"/> is a subclass of <span class="code">dict</span> with <span class="code">int</span> values that are meant to <em>count</em> how many times a key has been seen (although values are allowed to be <span class="code">&lt;= 0</span>); it’s roughly equivalent to types that other languages call “bag” or “multiset” types. A <span class="code">Counter</span> instance is normally built from an iterable whose items are hashable: <span class="code"><em>c</em></span> <span class="code">= collections.Counter(<em>iterable</em>)</span>. Then, you can index <span class="code"><em>c</em></span> with any of <span class="code"><em>iterable</em></span>’s items to get the number of times that item appeared. When you index <span class="code"><em>c</em></span> with any missing key, the result is <span class="code">0</span> (to <em>remove</em> an entry in <span class="code"><em>c</em></span>, use <span class="code"><strong>del</strong></span> <span class="code"><em>c</em></span><span class="code">[<em>entry</em>]</span>; setting <span class="code"><em>c</em></span><span class="code">[<em>entry</em>]=0</span> leaves <span class="code"><em>entry</em></span> in <span class="code"><em>c</em></span>, with a value of <span class="code">0</span>).</p>
<p><span class="code"><em>c</em></span> supports all methods of <span class="code">dict</span>; in particular, <span class="code"><em>c</em></span><span class="code">.update(<em>otheriterable</em>)</span> updates all the counts, incrementing them according to occurrences in <span class="code"><em>otheriterable</em></span>. So, for example:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">c</code> <code class="o">=</code> <code class="n">collections</code><code class="o">.</code><code class="n">Counter</code><code class="p">(</code><code class="s1">'moo'</code><code class="p">)</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">c</code><code class="o">.</code><code class="n">update</code><code class="p">(</code><code class="s1">'foo'</code><code class="p">)</code></pre>
<p>leaves <span class="code"><em>c</em></span><span class="code">['o']</span> giving <span class="code">4</span>, and <span class="code"><em>c</em></span><span class="code">['f']</span> and <span class="code"><em>c</em></span><span class="code">['m']</span> each giving <span class="code">1</span>. Note that removing an entry from <span class="code"><em>c</em></span> (with <span class="code"><strong>del</strong></span>) may <em>not</em> decrement the counter, but <span class="code">subtract</span> (described in the following table) does:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="k">del</code></strong><code> </code><code class="n">c</code><code class="p">[</code><code class="s1">'</code><code class="s1">foo</code><code class="s1">'</code><code class="p">]</code><code>    </code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">c</code><code class="p">[</code><code class="s1">'</code><code class="s1">o</code><code class="s1">'</code><code class="p">]</code></pre>
<pre data-type="programlisting">
<strong>4</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">c</code><code class="o">.</code><code class="n">subtract</code><code class="p">(</code><code class="s1">'foo'</code><code class="p">)</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">c</code><code class="p">[</code><code class="s1">'o'</code><code class="p">]</code></pre>
<pre data-type="programlisting">
<strong>2</strong></pre>
<p>In addition to <span class="code">dict</span> methods, <span class="code"><em>c</em></span> supports the extra methods detailed in <a data-type="xref" href="#methods_of_a_counter_instance_c">Table 8-5</a>.</p>
<table class="border" id="methods_of_a_counter_instance_c">
<caption><span class="label">Table 8-5. </span>Methods of a <span class="code">Counter</span> instance <span class="code">c</span></caption>
<tbody>
<tr>
<td class="width-15"><span class="code">elements</span></td>
<td><span class="code"><em>c</em></span><span class="code">.elements()</span><br/>
			Yields, in<a contenteditable="false" data-primary="elements (collections.Counter class)" data-type="indexterm" id="idm44924526846368"/> arbitrary order, keys in <span class="code"><em>c</em></span> with <span class="code"><em>c</em></span><span class="code">[<em>key</em>]&gt;0</span>, yielding each key as many times as its count.</td>
</tr>
<tr>
<td><span class="code">mo⁠s⁠t⁠_​c⁠o⁠m⁠mon</span></td>
<td><span class="code"><em>c</em></span><span class="code">.most_common([<em>n</em>, /])</span><br/>
			Returns<a contenteditable="false" data-primary="most_common (collections.Counter class)" data-type="indexterm" id="idm44924526815136"/> a list of pairs for the <span class="code"><em>n</em></span> keys in <span class="code"><em>c</em></span> with the highest counts (all of them, if you omit <span class="code"><em>n</em></span>), in order of decreasing count (“ties” between keys with the same count are resolved arbitrarily); each pair is of the form <span class="code">(<em>k</em>,</span> <span class="code"><em>c</em></span><span class="code">[<em>k</em>])</span>, where <span class="code"><em>k</em></span> is one of the <span class="code"><em>n</em></span> most common keys in <span class="code"><em>c</em></span>.</td>
</tr>
<tr>
<td><span class="code">subtract</span></td>
<td><span class="code"><em>c</em></span><span class="code">.subtract(<em>iterable=</em><strong>None</strong></span><span class="code">, /, **<em>kwds</em>)</span><br/>
			Like<a contenteditable="false" data-primary="subtract (collections.Counter class)" data-type="indexterm" id="idm44924526801248"/> <span class="code"><em>c</em></span><span class="code">.update(<em>iterable</em>)</span> “in reverse”—that is, <em>subtracting</em> counts rather than <em>adding</em> them. Resulting counts in <span class="code"><em>c</em></span> can be <span class="code">&lt;= 0</span>.</td>
</tr>
<tr>
<td><span class="code">total</span></td>
<td><span class="code"><em>c.</em></span><span class="code">total()</span><br/>
<strong><span class="version">3.10+</span></strong> Returns<a contenteditable="false" data-primary="total (collections.Counter class)" data-type="indexterm" id="idm44924526791856"/> the sum of all the individual counts. Equivalent to <span class="code">sum(<em>c</em>.values())</span>.</td>
</tr>
</tbody>
</table>
<p><span class="code">Counter</span> objects support common arithmetic operators, such as <span class="code">+</span>, <span class="code">-</span>, <span class="code">&amp;,</span> and <span class="code">|</span> for addition, subtraction, union, and intersection. See the <a href="https://oreil.ly/MylAp">online docs</a> for more details and a collection of useful recipes on how to use <span class="code">Counter</span>.</p>
</div></section>
<section data-pdf-bookmark="OrderedDict" data-type="sect2"><div class="sect2" id="ordereddict">
<h2>OrderedDict</h2>
<p><span class="code">OrderedDict</span><a contenteditable="false" data-primary="OrderedDict class (collections module)" data-type="indexterm" id="idm44924526780992"/> is a subclass of <span class="code">dict</span> with additional methods to access and manipulate items with respect to their insertion order. <span class="code"><em>o</em></span><span class="code">.popitem()</span> removes and returns the item at the most recently inserted key; <span class="code"><em>o</em></span><span class="code">.move_to_end(<em>key</em>,</span> <span class="code">last=<strong>True</strong>)</span> moves the item with key <span class="code"><em>key</em></span> to the end (when <span class="code">last</span> is <span class="code"><strong>True</strong></span>, the default) or to the start (when <span class="code">last</span> is <span class="code"><strong>False</strong></span>). Equality tests between two instances of <span class="code">OrderedDict</span> are order sensitive; equality tests between an instance of <span class="code">OrderedDict</span> and a <span class="code">dict</span> or other mapping are not. Since Python 3.7, <span class="code">dict</span> insertion order is guaranteed to be maintained: many uses that previously required <span class="code">OrderedDict</span> can now just use ordinary Python dicts. A significant difference remaining between the two is that <span class="code">OrderedDict</span>’s test for equality with other <span class="code">OrderedDict</span>s is order sensitive, while <span class="code">dict</span>’s equality test is not. See the <a href="https://oreil.ly/JSvPS">online docs</a> for more details and a collection of recipes on how to use <span class="code">OrderedDict</span>.</p>
</div></section>
<section data-pdf-bookmark="defaultdict" data-type="sect2"><div class="sect2" id="defaultdict">
<h2>defaultdict</h2>
<p><span class="code">defaultdict</span><a contenteditable="false" data-primary="defaultdict class (collections module)" data-type="indexterm" id="idm44924526760992"/> extends <span class="code">dict</span> and adds one per instance attribute, named <span class="code">default_factory</span>. When an instance <span class="code"><em>d</em></span> of <span class="code">defaultdict</span> has <span class="code"><strong>None</strong></span> as the value of <span class="code"><em>d</em></span><span class="code">.default_factory</span>, <span class="code"><em>d</em></span> behaves exactly like a <span class="code">dict</span>. Otherwise, <span class="code"><em>d</em></span><span class="code">.default_factory</span> must be callable without arguments, and <span class="code"><em>d</em></span> behaves just like a <span class="code">dict</span> except when you access <span class="code"><em>d</em></span> with a key <span class="code"><em>k</em></span> that is not in <span class="code"><em>d</em></span>. In this specific case, the indexing <span class="code"><em>d</em></span><span class="code">[<em>k</em>]</span> calls <span class="code"><em>d</em></span><span class="code">.default_factory()</span>, assigns the result as the value of <span class="code"><em>d</em></span><span class="code">[<em>k</em>]</span>, and returns the result. In other words, the type <span class="code">defaultdict</span> behaves much like the following Python-coded class:</p>
<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">class</code></strong><code> </code><code class="nc">defaultdict</code><code class="p">(</code><code class="nb">dict</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code><code> </code><code class="n">default_factory</code><code class="o">=</code><strong><code class="kc">None</code></strong><code class="p">,</code><code> </code><code class="o">*</code><code class="n">a</code><code class="p">,</code><code> </code><code class="o">*</code><code class="o">*</code><code class="n">k</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><code class="nb">super</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="fm">__init__</code><code class="p">(</code><code class="o">*</code><code class="n">a</code><code class="p">,</code><code> </code><code class="o">*</code><code class="o">*</code><code class="n">k</code><code class="p">)</code><code>
</code><code>        </code><code class="bp">self</code><code class="o">.</code><code class="n">default_factory</code><code> </code><code class="o">=</code><code> </code><code class="n">default_factory</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__getitem__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code><code> </code><code class="n">key</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">if</code></strong><code> </code><code class="n">key</code><code> </code><strong><code class="ow">not</code><code> </code><code class="ow">in</code></strong><code> </code><code class="bp">self</code><code> </code><strong><code class="ow">and</code></strong><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">default_factory</code><code> </code><strong><code class="ow">is</code><code> </code><code class="ow">not</code><code> </code><code class="kc">None</code></strong><code class="p">:</code><code>
</code><code>            </code><code class="bp">self</code><code class="p">[</code><code class="n">key</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">default_factory</code><code class="p">(</code><code class="p">)</code><code>
</code><code>        </code><strong><code class="k">return</code></strong><code> </code><code class="nb">dict</code><code class="o">.</code><code class="fm">__getitem__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code><code> </code><code class="n">key</code><code class="p">)</code></pre>
<p>As this Python equivalent implies, to instantiate <span class="code">defaultdict</span> you usually pass it an extra first argument (before any other arguments, positional and/or named, if any, to pass on to plain <span class="code">dict</span>). The extra first argument becomes the initial value of <span class="code">default_factory</span>; you can also access and rebind <span class="code">default_factory</span> later, though doing so is infrequent in normal Python code.</p>
<p>All behavior of <span class="code">defaultdict</span> is essentially as implied by this Python equivalent (except <span class="code">str</span> and <span class="code">repr</span>, which return strings different from those they would return for a <span class="code">dict</span>). Named methods, such as <span class="code">get</span> and <span class="code">pop</span>, are not affected. All behavior related to keys (method <span class="code">keys</span>, iteration, membership test via operator <span class="code">in</span>, etc.) reflects exactly the keys that are currently in the container (whether you put them there explicitly, or implicitly via an indexing that called <span class="code">default_factory</span>).</p>
<p>A typical use of <span class="code">defaultdict</span> is, for example, to set <span class="code">default_factory</span> to <span class="code">list</span>, to make a mapping from keys to lists of values:</p>
<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">make_multi_dict</code><code class="p">(</code><code class="n">items</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="n">d</code><code> </code><code class="o">=</code><code> </code><code class="n">collections</code><code class="o">.</code><code class="n">defaultdict</code><code class="p">(</code><code class="nb">list</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">for</code></strong><code> </code><code class="n">key</code><code class="p">,</code><code> </code><code class="n">value</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">items</code><code class="p">:</code><code>
</code><code>        </code><code class="n">d</code><code class="p">[</code><code class="n">key</code><code class="p">]</code><code class="o">.</code><code class="n">append</code><code class="p">(</code><code class="n">value</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">return</code></strong><code> </code><code class="n">d</code></pre>
<p>Called with any iterable whose items are pairs of the form <span class="code">(<em>key</em>,</span> <span class="code"><em>value</em></span><span class="code">)</span>, with all keys being hashable, this <span class="code">make_multi_dict</span> function returns a mapping that associates each key to the lists of one or more values that accompanied it in the iterable (if you want a pure <span class="code">dict</span> result, change the last statement into <span class="code">return dict(d)</span>—this is rarely necessary).</p>
<p>If you don’t want duplicates in the result, and every <span class="code"><em>value</em></span> is hashable, use a <span class="code">collections.defaultdict(set)</span>, and <span class="code">add</span> rather than <span class="code">append</span> in the loop.<sup><a data-type="noteref" href="ch08.xhtml#ch01fn88" id="ch01fn88-marker">2</a></sup></p>
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="keydefaultdict">
<h5>keydefaultdict</h5>
<p>A<a contenteditable="false" data-primary="keydefaultdict class" data-see="default dict" data-type="indexterm" id="idm44924526522272"/> variation on <span class="code">defaultdict</span> that is <em>not</em> found in the <span class="code">collections</span> module is a <span class="code">defaultdict</span> whose <span class="code">default_factory</span> takes the key as an initialization argument. This example shows how you can implement this for yourself:</p>
<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">class</code></strong><code> </code><code class="nc">keydefaultdict</code><code class="p">(</code><code class="nb">dict</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code><code> </code><code class="n">default_factory</code><code class="o">=</code><strong><code class="kc">None</code></strong><code class="p">,</code><code> </code><code class="o">*</code><code class="n">a</code><code class="p">,</code><code> </code><code class="o">*</code><code class="o">*</code><code class="n">k</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><code class="nb">super</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="fm">__init__</code><code class="p">(</code><code class="o">*</code><code class="n">a</code><code class="p">,</code><code> </code><code class="o">*</code><code class="o">*</code><code class="n">k</code><code class="p">)</code><code>
</code><code>        </code><code class="bp">self</code><code class="o">.</code><code class="n">default_factory</code><code> </code><code class="o">=</code><code> </code><code class="n">default_factory</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__missing__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code><code> </code><code class="n">key</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">if</code></strong><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">default_factory</code><code> </code><strong><code class="ow">is</code><code> </code><code class="kc">None</code></strong><code class="p">:</code><code>
</code><code>            </code><code class="k">raise</code><code> </code><code class="ne">KeyError</code><code class="p">(</code><code class="n">key</code><code class="p">)</code><code>
</code><code>        </code><code class="bp">self</code><code class="p">[</code><code class="n">key</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">default_factory</code><code class="p">(</code><code class="n">key</code><code class="p">)</code><code>
</code><code>        </code><strong><code class="k">return</code></strong><code> </code><code class="bp">self</code><code class="p">[</code><code class="n">key</code><code class="p">]</code></pre>
<p>The<a contenteditable="false" data-primary="dict (built-in type)" data-type="indexterm" id="idm44924526416832"/> <span class="code">dict</span> class supports the<a contenteditable="false" data-primary="__missing__ (dict type)" data-type="indexterm" id="idm44924526414640"/> <span class="code">__missing__</span> method for subclasses to implement custom behavior when a key is accessed that is not yet in the <span class="code">dict</span>. In this example, we implement <span class="code">__missing__</span> to call the default factory method with the new key, and add it to the <span class="code">dict</span>. You can use <span class="code">keydefaultdict</span> rather than <span class="code">defaultdict</span> when the <span class="code">default_factory</span> requires an argument (most often, this happens when the default factory is a class that takes an identifier constructor argument).</p>
</div></aside>
</div></section>
<section data-pdf-bookmark="deque" data-type="sect2"><div class="sect2" id="deque">
<h2>deque</h2>
<p><span class="code">deque</span><a contenteditable="false" data-primary="deque (double-ended queue) (collections module)" data-secondary="deque class (collections module)" data-type="indexterm" id="idm44924526384976"/><a contenteditable="false" data-primary="double-ended queue (deque)" data-type="indexterm" id="idm44924526383760"/> is a sequence type whose instances are “double-ended queues” (additions and removals at either end are fast and thread-safe). A <span class="code">deque</span> instance <span class="code"><em>d</em></span> is a mutable sequence, with an optional maximum length, and can be indexed and iterated on (however, <span class="code"><em>d</em></span> cannot be sliced; it can only be indexed one item at a time, whether for access, rebinding, or deletion). If a deque instance <span class="code"><em>d</em></span> has a maximum length, when items are added to either side of <span class="code"><em>d</em></span> so that <span class="code"><em>d</em></span>’s length exceeds that maximum, items are silently dropped from the other side.</p>
<p><span class="code">deque</span> is especially useful for implementing first-in, first-out (FIFO) queues.<sup><a data-type="noteref" href="ch08.xhtml#ch01fn89" id="ch01fn89-marker">3</a></sup> <span class="code">deque</span> is also good for maintaining “the latest <em>N</em> things seen,” also known in some other languages as a <em>ring buffer</em>.</p>
<p><a data-type="xref" href="#deque_methods">Table 8-6</a> lists the methods the <span class="code">deque</span> type supplies.</p>
<table class="border" id="deque_methods">
<caption><span class="label">Table 8-6. </span><span class="code">deque</span> methods</caption>
<tbody>
<tr>
<td class="width-15"><span class="code">deque</span></td>
<td><span class="code">deque(<em>seq</em>=(), /, maxlen=<strong>None</strong>)</span><br/>
			The initial items of <span class="code"><em>d</em></span> are those of <span class="code"><em>seq</em></span>, in the same order. <span class="code"><em>d</em></span><span class="code">.maxlen</span> is a read-only attribute: when its value is <span class="code"><strong>None</strong></span>, <span class="code"><em>d</em></span> has no maximum length; when an <span class="code">int</span>, it must be <span class="code">&gt;=0</span>. <span class="code"><em>d</em></span>’s maximum length is <span class="code"><em>d</em></span><span class="code">.maxlen</span>.</td>
</tr>
<tr>
<td><span class="code">append</span></td>
<td><span class="code"><em>d</em></span><span class="code">.append(<em>item</em>, /)</span><br/>
			Appends<a contenteditable="false" data-primary="append method" data-secondary="collections.deque" data-type="indexterm" id="idm44924526352352"/> <span class="code"><em>item</em></span> at the right (end) of <span class="code"><em>d</em></span>.</td>
</tr>
<tr>
<td><span class="code">appendleft</span></td>
<td><span class="code"><em>d</em></span><span class="code">.appendleft(<em>item</em>, /)</span><br/>
			Appends<a contenteditable="false" data-primary="appendleft (collections.deque)" data-type="indexterm" id="idm44924526345520"/> <span class="code"><em>item</em></span> at the left (start) of <span class="code"><em>d</em></span>.</td>
</tr>
<tr>
<td><span class="code">clear</span></td>
<td><span class="code"><em>d</em></span><span class="code">.clear()</span><br/>
			Removes<a contenteditable="false" data-primary="clear method" data-secondary="collections.deque" data-type="indexterm" id="idm44924526339504"/> all items from <span class="code"><em>d</em></span>, leaving it empty.</td>
</tr>
<tr>
<td><span class="code">extend</span></td>
<td><span class="code"><em>d</em></span><span class="code">.extend(<em>iterable</em>, /)</span><br/>
			Appends<a contenteditable="false" data-primary="extend method" data-secondary="collections.deque" data-type="indexterm" id="idm44924526333552"/> all items of <span class="code"><em>iterable</em></span> at the right (end) of <span class="code"><em>d</em></span>.</td>
</tr>
<tr>
<td><span class="code">extendleft</span></td>
<td><span class="code"><em>d</em></span><span class="code">.extendleft(<em>iterable</em>, /)</span><br/>
			Appends<a contenteditable="false" data-primary="extendleft (collections.deque)" data-type="indexterm" id="idm44924526326752"/> all items of <span class="code"><em>iterable</em></span> at the left (start) of <span class="code"><em>d</em></span>, in reverse order.</td>
</tr>
<tr>
<td><span class="code">pop</span></td>
<td><span class="code"><em>d</em></span><span class="code">.pop()</span><br/>
			Removes and returns the last (rightmost) item from <span class="code"><em>d</em></span>. If <span class="code"><em>d</em></span> is empty, raises <span class="code">IndexError</span>.</td>
</tr>
<tr>
<td><span class="code">popleft</span></td>
<td><span class="code"><em>d</em></span><span class="code">.popleft()</span><br/>
			Removes and returns the first (leftmost) item from <span class="code"><em>d</em></span>. If <span class="code"><em>d</em></span> is empty, raises <span class="code">IndexError</span>.</td>
</tr>
<tr>
<td><span class="code">rotate</span></td>
<td><span class="code"><em>d</em></span><span class="code">.rotate(<em>n</em>=1, /)</span><br/>
			Rotates <span class="code"><em>d n</em></span> steps to the right (if <span class="code"><em>n</em></span><span class="code">&lt;0</span>, rotates left).<a contenteditable="false" data-startref="colmod08" data-type="indexterm" id="idm44924526306864"/><a contenteditable="false" data-primary="" data-startref="SLcollect08" data-type="indexterm" id="idm44924526305728"/></td>
</tr>
</tbody>
</table>
<div data-type="warning" epub:type="warning">
<h1>Avoid Indexing or Slicing a deque</h1>
<p><span class="code">deque</span> is primarily intended for cases that access, add, and remove items from either the <span class="code">deque</span>’s start or end. While indexing or slicing into a <span class="code">deque</span> is possible, it may only have <span class="code">O(n)</span> performance (vs <span class="code">O(1)</span> for <span class="code">list</span>) when accessing an inner value using <span class="code">deque[i]</span> form. If you must access inner values, consider using a <span class="code">list</span> instead.</p>
</div>
</div></section>
</div></section>
<section data-pdf-bookmark="The functools Module" data-type="sect1"><div class="sect1" id="the_functools_module">
<h1>The functools Module</h1>
<p>The<a contenteditable="false" data-primary="standard library modules" data-secondary="functools" data-type="indexterm" id="SLfunc08"/><a contenteditable="false" data-primary="functools module" data-type="indexterm" id="funcmod08"/> <span class="code">functools</span> module supplies functions and types supporting functional programming in Python, listed in <a data-type="xref" href="#functions_and_attributes_of_the_functoo">Table 8-7</a>.</p>
<table class="border" id="functions_and_attributes_of_the_functoo">
<caption><span class="label">Table 8-7. </span>Functions and attributes of the <span class="code">functools</span> module</caption>
<tbody>
<tr>
<td class="width-18"><span class="code">cach⁠e⁠d⁠_​p⁠r⁠o⁠perty</span></td>
<td><span class="code">cached_property(func)</span><br/>
<span class="version">3.8+</span> A<a contenteditable="false" data-primary="cached_property (functools module)" data-type="indexterm" id="idm44924526284496"/> caching version of the <span class="code">property</span> decorator. Evaluating the property the first time caches the returned value, so that subsequent calls can return the cached value instead of repeating the property calculation. <span class="code">cached_property</span> uses a threading lock to ensure that the property calculation is performed only once, even in a multithreaded environment.<sup><a data-type="noteref" href="ch08.xhtml#ch01fn90" id="ch01fn90-marker">a</a></sup></td>
</tr>
<tr>
<td><span class="code">lru_cache</span>,<br/>
<span class="code">cache</span></td>
<td><span class="code">lru_cache(max_size=128,</span> <span class="code">typed=<strong>False</strong>)</span>,<br/>
<span class="code">cache()</span><br/>
			A <em>memoizing<a contenteditable="false" data-primary="memoization" data-type="indexterm" id="idm44924526272912"/></em> decorator<a contenteditable="false" data-primary="lru_cache (functools module)" data-type="indexterm" id="idm44924526271648"/><a contenteditable="false" data-primary="cache (functools module)" data-type="indexterm" id="idm44924526270576"/> suitable for decorating a function whose arguments are all hashable, adding to the function a cache storing the last <span class="code">max_size</span> results (<span class="code">max_size</span> should be a power of 2, or <span class="code"><strong>None</strong></span> to have the cache keep all previous results); when you call the decorated function again with arguments that are in the cache, it immediately returns the previously cached result, bypassing the underlying function’s body code. When <span class="code">typed</span> is <span class="code"><strong>True</strong></span>, arguments that compare equal but have different types, such as 23 and 23.0, are cached separately. <span class="version">3.9+</span> If setting <span class="code">max_size</span> to <span class="code"><strong>None</strong></span>, use <span class="code">cache</span> instead. For more details and examples, see the <a href="https://oreil.ly/hLRYd">online docs</a>. <span class="version">3.8+</span> <span class="code">lru_cache</span> may also be used as a decorator with no ().</td>
</tr>
<tr>
<td><span class="code">partial</span></td>
<td><span class="code">partial(<em>func</em>, /,</span> <span class="code">*<em>a, **k</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="partial (functools module)" data-type="indexterm" id="idm44924526255728"/> a callable <span class="code"><em>p</em></span> that is just like <span class="code"><em>func</em></span> (which is any callable), but with some positional and/or named parameters already bound to the values given in <span class="code"><em>a</em></span> and <span class="code"><em>k</em></span>. In other words, <span class="code"><em>p</em></span> is a <em>partial application</em> of <span class="code"><em>func</em></span>, often also known (with debatable correctness, but colorfully, in honor of mathematician Haskell Curry) as a <em>currying</em> of <span class="code"><em>func</em></span> to the given arguments. For example, say that we have a list of numbers <span class="code">L</span> and want to clip the negative ones to <span class="code">0</span>. One way to do it is:
			<pre data-code-language="python" data-type="programlisting">
<code class="n">L</code> <code class="o">=</code> <code class="nb">map</code><code class="p">(</code><code class="n">functools</code><code class="o">.</code><code class="n">partial</code><code class="p">(</code><code class="nb">max</code><code class="p">,</code> <code class="mi">0</code><code class="p">),</code> <code class="n">L</code><code class="p">)</code></pre>
			as an alternative to the <span class="code"><strong>lambda</strong></span>-using snippet:

			<pre data-code-language="python" data-type="programlisting">
<code class="n">L</code><code> </code><code class="o">=</code><code> </code><code class="nb">map</code><code class="p">(</code><strong><code class="k">lambda</code></strong><code> </code><code class="n">x</code><code class="p">:</code><code> </code><code class="nb">max</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code> </code><code class="n">x</code><code class="p">)</code><code class="p">,</code><code> </code><code class="n">L</code><code class="p">)</code></pre>
			and to the most concise approach, a list comprehension:

			<pre data-code-language="python" data-type="programlisting">
<code class="n">L</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="nb">max</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code> </code><code class="n">x</code><code class="p">)</code><code> </code><strong><code class="k">for</code></strong><code> </code><code class="n">x</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">L</code><code class="p">]</code></pre>
<span class="code">functools.partial</span> comes into its own in situations that demand callbacks, such as event-driven programming for some GUIs and networking applications.<br/>
<span class="code">partial</span> returns a callable with the attributes <span class="code">func</span> (the wrapped function), <span class="code">args</span> (the <span class="code">tuple</span> of prebound positional arguments), and <span class="code">keywords</span> (the <span class="code">dict</span> of prebound named arguments, or <span class="code"><strong>None</strong></span>).</td>
</tr>
<tr>
<td><span class="code">reduce</span></td>
<td><span class="code">reduce(<em>func</em>,</span> <span class="code"><em>seq</em></span><span class="code">[,</span> <span class="code"><em>init</em></span><span class="code">], /)</span><br/>
			Applies<a contenteditable="false" data-primary="reduce (functools module)" data-type="indexterm" id="idm44924590738032"/> <span class="code"><em>func</em></span> to the items of <span class="code"><em>seq</em></span>, from left to right, to reduce the iterable to a single value. <span class="code"><em>func</em></span> must be callable with two arguments. <span class="code">reduce</span> calls <span class="code"><em>func</em></span> on the first two items of <span class="code"><em>seq</em></span>, then on the result of the first call and the third item, and so on, and returns the result of the last such call. When <span class="code"><em>init</em></span> is present, <span class="code">reduce</span> uses it before <span class="code"><em>seq</em></span>’s first item, if any. When <span class="code"><em>init</em></span> is missing, <span class="code"><em>seq</em></span> must be nonempty. When <span class="code"><em>init</em></span> is missing and <span class="code"><em>seq</em></span> has only one item, <span class="code">reduce</span> returns <span class="code"><em>seq</em></span><span class="code">[0]</span>. Similarly, when <span class="code"><em>init</em></span> is present and <span class="code"><em>seq</em></span> is empty, <span class="code">reduce</span> returns <span class="code"><em>init</em></span><em>.</em> <span class="code">reduce</span> is thus roughly equivalent to:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">reduce_equiv</code><code class="p">(</code><code class="n">func</code><code class="p">,</code><code> </code><code class="n">seq</code><code class="p">,</code><code> </code><code class="n">init</code><code class="o">=</code><strong><code class="kc">None</code></strong><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="n">seq</code><code> </code><code class="o">=</code><code> </code><code class="nb">iter</code><code class="p">(</code><code class="n">seq</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">if</code></strong><code> </code><code class="n">init</code><code> </code><strong><code class="ow">is</code><code> </code><code class="kc">None</code></strong><code class="p">:</code><code>
</code><code>        </code><code class="n">init</code><code> </code><code class="o">=</code><code> </code><code class="nb">next</code><code class="p">(</code><code class="n">seq</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">for</code></strong><code> </code><code class="n">item</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">seq</code><code class="p">:</code><code> </code><code>
</code><code>        </code><code class="n">init</code><code> </code><code class="o">=</code><code> </code><code class="n">func</code><code class="p">(</code><code class="n">init</code><code class="p">,</code><code> </code><code class="n">item</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">return</code></strong><code> </code><code class="n">init</code></pre>
			An example use of <span class="code">reduce</span> is to compute the product of a sequence of numbers:

			<pre data-code-language="python" data-type="programlisting">
<code class="n">prod</code><code class="o">=</code><code class="n">reduce</code><code class="p">(</code><code class="n">operator</code><code class="o">.</code><code class="n">mul</code><code class="p">,</code> <code class="n">seq</code><code class="p">,</code> <code class="mi">1</code><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">singledispatch</span>,<br/>
<span class="code">singledispatchmethod</span></td>
<td>Function<a contenteditable="false" data-primary="singledispatch (functools module)" data-type="indexterm" id="idm44924590657472"/><a contenteditable="false" data-primary="singledispatchmethod (functools module)" data-type="indexterm" id="idm44924590623216"/> decorators to support multiple implementations of a method with differing types for their first argument. See the <a href="https://oreil.ly/1nle3">online docs</a> for a detailed description.</td>
</tr>
<tr>
<td><span class="code">total_ordering</span></td>
<td>A <a contenteditable="false" data-primary="total_ordering (functools module)" data-type="indexterm" id="idm44924590619456"/>class decorator suitable for decorating classes that supply at least one inequality comparison method, such as <span class="code">__lt__</span>, and, ideally, also supply <span class="code">__eq__</span>. Based on the class’s existing methods, the class decorator <span class="code">total_ordering</span> adds to the class all other inequality comparison methods that aren’t implemented in the class itself or any of its superclasses, removing the need for you to add boilerplate code for them.</td>
</tr>
<tr>
<td><span class="code">wraps</span></td>
<td><span class="code">wraps(wrapped)</span><br/>
			A<a contenteditable="false" data-primary="wraps (functools module)" data-type="indexterm" id="idm44924590588096"/> decorator suitable for decorating functions that wrap another function, <span class="code">wrapped</span> (often nested functions within another decorator). <span class="code">wraps</span> copies the <span class="code">__name__</span>, <span class="code">__doc__</span>, and <span class="code">__module__</span> attributes of <span class="code">wrapped</span> on the decorated function, thus improving the behavior of the built-in function <span class="code">help</span>, and of doctests, covered in <a data-type="xref" href="ch17.xhtml#the_doctest_module">“The doctest Module”</a>.<a contenteditable="false" data-primary="" data-startref="SLfunc08" data-type="indexterm" id="idm44924590580992"/><a contenteditable="false" data-primary="" data-startref="funcmod08" data-type="indexterm" id="idm44924590579584"/></td>
</tr>
</tbody>
<tbody><tr class="footnotes"><td colspan="2"><p data-type="footnote" id="ch01fn90"><sup><a href="ch08.xhtml#ch01fn90-marker">a</a></sup> In Python versions 3.8 to 3.11, <span class="code">cached_property</span> is implemented using a class-level lock. As such, it synchronizes for all instances of the class or any subclass, not just the current instance. Thus, <span class="code">cached_property</span> can reduce performance in a multithreaded environment, and is <em>not</em> recommended.</p></td></tr></tbody></table>
</div></section>
<section data-pdf-bookmark="The heapq Module" data-type="sect1"><div class="sect1" id="the_heapq_module">
<h1>The heapq Module</h1>
<p>The<a contenteditable="false" data-primary="heapq module" data-type="indexterm" id="heapqmod08"/> <span class="code">heapq</span> module uses <a href="https://oreil.ly/RU6F_"><em>min-heap</em></a> algorithms to keep a list in “nearly sorted” order as items are inserted and extracted. <span class="code">heapq</span>’s operation is faster than calling a list’s <span class="code">sort</span> method after each insertion, and much faster than <span class="code">bisect</span> (covered in the <a href="https://oreil.ly/nZ_9m">online docs</a>). For many purposes, such as implementing “priority queues,” the nearly sorted order supported by <span class="code">heapq</span> is just as good as a fully sorted order, and faster to establish and maintain. The <span class="code">heapq</span> module supplies the functions listed in <a data-type="xref" href="#functions_of_the_heapq_module">Table 8-8</a>.</p>
<table class="border" id="functions_of_the_heapq_module">
<caption><span class="label">Table 8-8. </span>Functions of the <span class="code">heapq</span> module</caption>
<tbody>
<tr>
<td class="width-15"><span class="code">heapify</span></td>
<td><span class="code">heapify(<em>alist</em>, /)</span><br/>
			Permutes <span class="code">list</span> <span class="code"><em>alist</em></span> as needed to make it satisfy the (min) heap condition:
			<ul class="simplelist">
<li>For any <span class="code"><em>i</em></span> <span class="code">&gt;= 0</span>:</li>
<li><span class="code">alist[<em>i</em>] &lt;= alist[2 *</span> <span class="code"><em>i</em></span> <span class="code">+ 1]</span> and</li>
<li><span class="code">alist[<em>i</em>] &lt;= alist[2 *</span> <span class="code"><em>i</em></span> <span class="code">+ 2]</span></li>
<li>as long as all the indices in question are <span class="code">&lt;len(<em>alist</em>)</span>.</li>
</ul>
			If a <span class="code">list</span> satisfies the (min) heap condition, the list’s first item is the smallest (or equal-smallest) one. A sorted <span class="code">list</span> satisfies the heap condition, but many other permutations of a list also satisfy the heap condition without requiring the list to be fully sorted. <span class="code">heapify</span> runs in <span class="code">O(len(<em>alist</em>))</span> time.</td>
</tr>
<tr>
<td><span class="code">heappop</span></td>
<td><span class="code">heappop(<em>alist</em>, /)</span><br/>
			Removes and returns the smallest (first) item of <span class="code"><em>alist</em></span>, a <span class="code">list</span> that satisfies the heap condition, and permutes some of the remaining items of <span class="code"><em>alist</em></span> to ensure the heap condition is still satisfied after the removal. <span class="code">heappop</span> runs in <span class="code">O(log(len(<em>alist</em>)))</span> time.</td>
</tr>
<tr>
<td><span class="code">heappush</span></td>
<td><span class="code">heappush(<em>alist</em>,</span> <span class="code"><em>item</em></span><span class="code">, /)</span><br/>
			Inserts <span class="code"><em>item</em></span> in <span class="code"><em>alist</em></span>, a <span class="code">list</span> that satisfies the heap condition, and permutes some items of <span class="code"><em>alist</em></span> to ensure the heap condition is still satisfied after the insertion. <span class="code">heappush</span> runs in <span class="code">O(log(len(<em>alist</em>)))</span> time.</td>
</tr>
<tr>
<td><span class="code">heappushpop</span></td>
<td><span class="code">heappushpop(<em>alist</em>,</span> <span class="code"><em>item</em></span><span class="code">, /)</span><br/>
			Logically equivalent to <span class="code">heappush</span> followed by <span class="code">heappop</span>, similar to:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">heappushpop</code><code class="p">(</code><code class="n">alist</code><code class="p">,</code><code> </code><code class="n">item</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="n">heappush</code><code class="p">(</code><code class="n">alist</code><code class="p">,</code><code> </code><code class="n">item</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">return</code></strong><code> </code><code class="n">heappop</code><code class="p">(</code><code class="n">alist</code><code class="p">)</code></pre>
<span class="code">heappushpop</span> runs in <span class="code">O(log(len(<em>alist</em>)))</span> time and is generally faster than the logically equivalent function just shown. <span class="code">heappushpop</span> can be called on an empty <span class="code"><em>alist</em></span>: in that case, it returns the <span class="code"><em>item</em></span> argument, as it does when <span class="code"><em>item</em></span> is smaller than any existing item of <span class="code"><em>alist</em></span>.</td>
</tr>
<tr>
<td><span class="code">heapreplace</span></td>
<td><span class="code">heapreplace(<em>alist</em>,</span> <span class="code"><em>item</em></span><span class="code">, /)</span><br/>
			Logically equivalent to <span class="code">heappop</span> followed by <span class="code">heappush</span>, similar to:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">heapreplace</code><code class="p">(</code><code class="n">alist</code><code class="p">,</code><code> </code><code class="n">item</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">try</code></strong><code class="p">:</code><code> </code><strong><code class="k">return</code></strong><code> </code><code class="n">heappop</code><code class="p">(</code><code class="n">alist</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">finally</code></strong><code class="p">:</code><code> </code><code class="n">heappush</code><code class="p">(</code><code class="n">alist</code><code class="p">,</code><code> </code><code class="n">item</code><code class="p">)</code></pre>
<span class="code">heapreplace</span> runs in <span class="code">O(log(len(<em>alist</em>)))</span> time and is generally faster than the logically equivalent function just shown. <span class="code">heapreplace</span> cannot be called on an empty <span class="code"><em>alist</em></span>: <span class="code">heapreplace</span> always returns an item that was already in <span class="code"><em>alist</em></span>, never the <span class="code"><em>item</em></span> just being pushed onto it.</td>
</tr>
<tr>
<td><span class="code">merge</span></td>
<td><span class="code">merge(<em>*iterables</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="merge (heaapq module)" data-type="indexterm" id="idm44924590428624"/> an iterator yielding, in sorted order (smallest to largest), the items of the <span class="code"><em>iterables</em></span>, each of which must be smallest-to-largest sorted.</td>
</tr>
<tr>
<td><span class="code">nlargest</span></td>
<td><span class="code">nlargest(<em>n</em>,</span> <span class="code"><em>seq</em></span><span class="code">, /, key=<strong>None</strong>)</span><br/>
			Returns<a contenteditable="false" data-primary="nlargest (heapq module)" data-type="indexterm" id="idm44924590401088"/> a reverse-sorted <span class="code">list</span> with the <span class="code"><em>n</em></span> largest items of iterable <span class="code"><em>seq</em></span> (or less than <span class="code"><em>n</em></span> if <span class="code"><em>seq</em></span> has fewer than <span class="code"><em>n</em></span> items); like <span class="code">sorted(<em>seq</em>, reverse=<strong>True</strong>)[:<em>n</em>]</span>, but faster when <span class="code"><em>n</em></span> is “small enough”<sup><a data-type="noteref" href="ch08.xhtml#ch01fn91" id="ch01fn91-marker">a</a></sup> compared to <span class="code">len(<em>seq</em>)</span>. You may also specify a (named or positional) <span class="code">key=</span> argument, like you can for <span class="code">sorted</span>.</td>
</tr>
<tr>
<td><span class="code">nsmallest</span></td>
<td><span class="code">nsmallest(<em>n</em>,</span> <span class="code"><em>seq</em></span><span class="code">, /, key=<strong>None</strong>)</span><br/>
			Returns<a contenteditable="false" data-primary="nsmallest (heapq module)" data-type="indexterm" id="idm44924590377792"/> a sorted <span class="code">list</span> with the <span class="code"><em>n</em></span> smallest items of iterable <span class="code"><em>seq</em></span> (or less than <span class="code"><em>n</em></span> if <span class="code"><em>seq</em></span> has fewer than <span class="code"><em>n</em></span> items); like <span class="code">sorted(<em>seq</em>)[:<em>n</em>]</span>, but faster when <span class="code"><em>n</em></span> is “small enough” compared to <span class="code">len(<em>seq</em>)</span>. You may also specify a (named or positional) <span class="code">key=</span> argument, like you can for <span class="code">sorted</span>.</td>
</tr>
</tbody>
<tbody><tr class="footnotes"><td colspan="2"><p data-type="footnote" id="ch01fn91"><sup><a href="ch08.xhtml#ch01fn91-marker">a</a></sup> To find out how specific values of <span class="code"><em>n</em></span> and <span class="code">len(<em>seq</em>)</span> affect the timing of <span class="code">nlargest</span>, <span class="code">nsmallest</span>, and <span class="code">sorted</span> on your specific Python version and machine, use <span class="code">timeit</span>, covered in <a data-type="xref" href="ch17.xhtml#the_timeit_module">“The timeit module”</a>.</p></td></tr></tbody></table>
<section data-pdf-bookmark="The Decorate–Sort–Undecorate Idiom" data-type="sect2"><div class="sect2" id="the_decorateen_dashsorten_dashundecorat">
<h2>The Decorate–Sort–Undecorate Idiom</h2>
<p>Several functions in the <span class="code">heapq</span> module, although they perform comparisons, do not accept a <span class="code">key=</span> argument<a contenteditable="false" data-primary="key argument" data-secondary="heapq" data-type="indexterm" id="idm44924590363056"/> to customize the comparisons. This is inevitable, since the functions operate in place on a plain <span class="code">list</span> of the items: they have nowhere to “stash away” custom comparison keys computed once and for all.</p>
<p>When you need both heap functionality and custom comparisons, you can apply the good<a contenteditable="false" data-primary="decorate–sort–undecorate (DSU) idiom" data-type="indexterm" id="idm44924590360192"/><a contenteditable="false" data-primary="DSU (decorate–sort–undecorate) idiom" data-type="indexterm" id="idm44924590359120"/> old <a href="https://oreil.ly/7iR8O"><em>decorate–sort–undecorate (DSU)</em> idiom</a><sup><a data-type="noteref" href="ch08.xhtml#ch01fn92" id="ch01fn92-marker">4</a></sup> (which used to be crucial to optimize sorting in ancient versions of Python, before the <span class="code">key=</span> functionality was introduced).</p>
<p>The DSU idiom, as applied to <span class="code">heapq</span>, has the following components:</p>
<dl>
<dt>Decorate</dt>
<dd>Build an auxiliary list <span class="code"><em>A</em></span> where each item is a tuple starting with the sort key and ending with the item of the original list <span class="code"><em>L</em></span>.</dd>
<dt>Sort</dt>
<dd>Call <span class="code">heapq</span> functions on <span class="code"><em>A</em></span>, typically starting with <span class="code">heapq.heapify(<em>A</em>)</span>.<sup><a data-type="noteref" href="ch08.xhtml#ch01fn93" id="ch01fn93-marker">5</a></sup></dd>
<dt>Undecorate</dt>
<dd>When you extract an item from <span class="code"><em>A</em></span>, typically by calling <span class="code">heapq.heappop(<em>A</em>)</span>, return just the last item of the resulting tuple (which was an item of the original list <span class="code"><em>L</em></span>).</dd>
</dl>
<p>When you add an item to <span class="code"><em>A</em></span> by calling <span class="code">heapq.heappush(<em>A</em>, /,</span> <span class="code"><em>item</em></span><span class="code">)</span>, decorate the actual item you’re inserting into a tuple starting with the sort key.</p>
<p>This sequence of operations can be wrapped up in a class, as in this example:</p>
<pre data-code-language="python" data-type="programlisting">
<strong><code class="kn">import</code><code> </code><code class="nn">heapq</code></strong><code>
</code><code>
</code><strong><code class="k">class</code></strong><code> </code><code class="nc">KeyHeap</code><code class="p">(</code><code class="nb">object</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code><code> </code><code class="n">alist</code><code class="p">,</code><code> </code><code class="o">/</code><code class="p">,</code><code> </code><code class="n">key</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><code class="bp">self</code><code class="o">.</code><code class="n">heap</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="p">(</code><code class="n">key</code><code class="p">(</code><code class="n">o</code><code class="p">)</code><code class="p">,</code><code> </code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">o</code><code class="p">)</code><code> </code><strong><code class="k">for</code></strong><code> </code><code class="n">i</code><code class="p">,</code><code> </code><code class="n">o</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="nb">enumerate</code><code class="p">(</code><code class="n">alist</code><code class="p">)</code><code class="p">]</code><code>
</code><code>        </code><code class="n">heapq</code><code class="o">.</code><code class="n">heapify</code><code class="p">(</code><code class="bp">self</code><code class="o">.</code><code class="n">heap</code><code class="p">)</code><code>
</code><code>        </code><code class="bp">self</code><code class="o">.</code><code class="n">key</code><code> </code><code class="o">=</code><code> </code><code class="n">key</code><code>
</code><code>        </code><strong><code class="k">if</code></strong><code> </code><code class="n">alist</code><code class="p">:</code><code>
</code><code>            </code><code class="bp">self</code><code class="o">.</code><code class="n">nexti</code><code> </code><code class="o">=</code><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">heap</code><code class="p">[</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code>
</code><code>        </code><strong><code class="k">else</code></strong><code class="p">:</code><code>
</code><code>            </code><code class="bp">self</code><code class="o">.</code><code class="n">nexti</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code>
</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="fm">__len__</code><code class="p">(</code><code class="bp">self</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">return</code></strong><code> </code><code class="nb">len</code><code class="p">(</code><code class="bp">self</code><code class="o">.</code><code class="n">heap</code><code class="p">)</code><code>
</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="nf">push</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code><code> </code><code class="n">o</code><code class="p">,</code><code> </code><code class="o">/</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><code class="n">heapq</code><code class="o">.</code><code class="n">heappush</code><code class="p">(</code><code class="bp">self</code><code class="o">.</code><code class="n">heap</code><code class="p">,</code><code> </code><code class="p">(</code><code class="bp">self</code><code class="o">.</code><code class="n">key</code><code class="p">(</code><code class="n">o</code><code class="p">)</code><code class="p">,</code><code> </code><code class="bp">self</code><code class="o">.</code><code class="n">nexti</code><code class="p">,</code><code> </code><code class="n">o</code><code class="p">)</code><code class="p">)</code><code>
</code><code>        </code><code class="bp">self</code><code class="o">.</code><code class="n">nexti</code><code> </code><code class="o">+</code><code class="o">=</code><code> </code><code class="mi">1</code><code>
</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="nf">pop</code><code class="p">(</code><code class="bp">self</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">return</code></strong><code> </code><code class="n">heapq</code><code class="o">.</code><code class="n">heappop</code><code class="p">(</code><code class="bp">self</code><code class="o">.</code><code class="n">heap</code><code class="p">)</code><code class="p">[</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code></pre>
<p>In this example, we use an increasing number in the middle of the decorated tuple (after the sort key, before the actual item) to ensure that actual items are <em>never</em> compared directly, even if their sort keys are equal (this semantic guarantee is an important aspect of the <span class="code">key</span> argument’s functionality for <span class="code">sort</span> and the like).<a contenteditable="false" data-primary="" data-startref="heapqmod08" data-type="indexterm" id="idm44924590138320"/></p>
</div></section>
</div></section>
<section data-pdf-bookmark="The argparse Module" data-type="sect1"><div class="sect1" id="the_argparse_module">
<h1>The argparse Module</h1>
<p>When<a contenteditable="false" data-primary="standard library modules" data-secondary="argparse" data-type="indexterm" id="SLarg08"/><a contenteditable="false" data-primary="argparse module" data-type="indexterm" id="idm44924590158080"/> you write a Python program meant to be run from the command line (or from a shell script in Unix-like systems, or a batch file in Windows), you often want to let the user pass to the program, on the command line or within the<a contenteditable="false" data-primary="command-line options" data-secondary="parsing (argparse module)" data-type="indexterm" id="idm44924590156848"/> script, <em>command-line arguments</em> (including <em>command-line options</em>, which by convention are arguments starting with one or two dash characters). In Python, you can access the arguments as <span class="code">sys.argv</span>, an attribute of the module <span class="code">sys</span> holding those arguments as a list of strings (<span class="code">sys.argv[0]</span> is the name or path by which the user started your program; the arguments are in the sublist <span class="code">sys.argv[1:]</span>). The Python standard library offers three modules to process those arguments; we only cover the newest and most powerful one, <span class="code">argparse</span>, and we only cover a small, <em>core</em> subset of <span class="code">argparse</span>’s rich functionality. See the online <a href="https://oreil.ly/v_ml0">reference</a> and <a href="https://oreil.ly/QWg01">tutorial</a> for much, much more. <span class="code">argparse</span> provides one class, which has the following signature:</p>
<table class="border">
<tbody>
<tr>
<td class="width-15"><span class="code">ArgumentParser</span></td>
<td><span class="code">ArgumentParser(**<em>kwargs</em>)</span><br/>
<span class="code">ArgumentParser</span> is the class whose instances perform argument parsing. It accepts many named arguments, mostly meant to improve the help message that your program displays if command-line arguments include <span class="code">-h</span> or <span class="code">--help</span>. One named argument you should always pass is <span class="code">description=</span>, a string summarizing the purpose of your program.</td>
</tr>
</tbody>
</table>
<p>Given an instance <span class="code"><em>ap</em></span> of <span class="code">ArgumentParser</span>, prepare it with one or more calls to <span class="code"><em>ap</em></span><span class="code">.add_argument</span>, then use it by calling <span class="code"><em>ap</em></span><span class="code">.parse_args()</span> without arguments (so it parses <span class="code">sys.argv</span>). The call returns an instance of <span class="code">argparse.Namespace</span>, with your program’s arguments and options as attributes.</p>
<p><span class="code">add_argument</span> has a mandatory first argument: an identifier string for positional command-line arguments, or a flag name for command-line options. In the latter case, pass one or more flag names; an option can have both a short name (dash, then a character) and a long name (two dashes, then an identifier).</p>
<p>After the positional arguments, pass to <span class="code">add_argument</span> zero or more named arguments to control its behavior. <a data-type="xref" href="#common_named_arguments_to_add_argument">Table 8-9</a> lists the most commonly used ones.</p>
<table class="border" id="common_named_arguments_to_add_argument">
<caption><span class="label">Table 8-9. </span>Common named arguments to <span class="code">add_argument</span></caption>
<tbody>
<tr>
<td><span class="code">action</span></td>
<td>What the parser does with this argument. Default: <span class="code">'store'</span>, which stores the argument’s value in the namespace (at the name given by <span class="code">dest</span>, described later in this table). Also useful: <span class="code">'store_true'</span> and <span class="code">'store_false'</span>, making an option into a <span class="code">bool</span> (defaulting to the opposite <span class="code">bool</span> if the option is not present), and <span class="code">'append'</span>, appending argument values to a list (and thus allowing an option to be repeated).</td>
</tr>
<tr>
<td><span class="code">choices</span></td>
<td>A set of values allowed for the argument (parsing the argument raises an exception if the value is not among these). Default: no constraints.</td>
</tr>
<tr>
<td><span class="code">default</span></td>
<td>Value if the argument is not present. Default: <span class="code"><strong>None</strong></span>.</td>
</tr>
<tr>
<td><span class="code">dest</span></td>
<td>Name of the attribute to use for this argument. Default: same as the first positional argument stripped of leading dashes, if any.</td>
</tr>
<tr>
<td><span class="code">help</span></td>
<td>A<a contenteditable="false" data-primary="help argument" data-type="indexterm" id="idm44924590054368"/> <span class="code">str</span> describing the argument, for help messages.</td>
</tr>
<tr>
<td><span class="code">nargs</span></td>
<td>The number of command-line arguments used by this logical argument. Default: <span class="code">1</span>, stored in the namespace. Can be an <span class="code">int &gt; 0</span> (uses that many arguments, stores them as a list), <span class="code">'?'</span> (<span class="code">1</span> or none, in which case it uses <span class="code">default</span>), <span class="code">'*'</span> (<span class="code">0</span> or more, stored as a list), <span class="code">'+'</span> (<span class="code">1</span> or more, stored as a list), or <span class="code">argparse.REMAINDER</span> (all remaining arguments, stored as a list).</td>
</tr>
<tr>
<td><span class="code">type</span></td>
<td>A callable accepting a string, often a type such as <span class="code">int</span>; used to transform values from strings to something else. Can be an instance of <span class="code">argparse.FileType</span> to open the string as a filename (for reading if <span class="code">FileType('r')</span>, for writing if <span class="code">FileType('w')</span>, and so on).</td>
</tr>
</tbody>
</table>
<p>Here’s a simple example of <span class="code">argparse</span>—save this code in a file called <em>greet.py</em>:</p>
<pre data-code-language="python" data-type="programlisting">
<strong><code class="kn">import</code></strong><code> </code><code class="nn">argparse</code><code>
</code><code class="n">ap</code><code> </code><code class="o">=</code><code> </code><code class="n">argparse</code><code class="o">.</code><code class="n">ArgumentParser</code><code class="p">(</code><code class="n">description</code><code class="o">=</code><code class="s1">'</code><code class="s1">Just an example</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">ap</code><code class="o">.</code><code class="n">add_argument</code><code class="p">(</code><code class="s1">'</code><code class="s1">who</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">nargs</code><code class="o">=</code><code class="s1">'</code><code class="s1">?</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">default</code><code class="o">=</code><code class="s1">'</code><code class="s1">World</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">ap</code><code class="o">.</code><code class="n">add_argument</code><code class="p">(</code><code class="s1">'</code><code class="s1">--formal</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">action</code><code class="o">=</code><code class="s1">'</code><code class="s1">store_true</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="n">ns</code><code> </code><code class="o">=</code><code> </code><code class="n">ap</code><code class="o">.</code><code class="n">parse_args</code><code class="p">(</code><code class="p">)</code><code>
</code><strong><code class="k">if</code></strong><code> </code><code class="n">ns</code><code class="o">.</code><code class="n">formal</code><code class="p">:</code><code>
</code><code>    </code><code class="n">greet</code><code> </code><code class="o">=</code><code> </code><code class="s1">'</code><code class="s1">Most felicitous salutations, o </code><code class="si">{}</code><code class="s1">.</code><code class="s1">'</code><code>
</code><strong><code class="k">else</code></strong><code class="p">:</code><code>
</code><code>    </code><code class="n">greet</code><code> </code><code class="o">=</code><code> </code><code class="s1">'</code><code class="s1">Hello, </code><code class="si">{}</code><code class="s1">!</code><code class="s1">'</code><code>
</code><code class="nb">print</code><code class="p">(</code><code class="n">greet</code><code class="o">.</code><code class="n">format</code><code class="p">(</code><code class="n">ns</code><code class="o">.</code><code class="n">who</code><code class="p">)</code><code class="p">)</code></pre>
<p>Now, <span class="code"><strong>python</strong></span> <span class="code"><strong>greet.py</strong></span> prints <span class="code">Hello,</span> <span class="code">World!</span>, while <span class="code"><strong>python</strong></span> <span class="code"><strong>greet.py</strong></span> <span class="code"><strong>--formal Cornelia</strong></span> prints <span class="code">Most felicitous salutations, o Cornelia</span>.<a contenteditable="false" data-primary="" data-startref="SLarg08" data-type="indexterm" id="idm44924589949008"/></p>
</div></section>
<section data-pdf-bookmark="The itertools Module" data-type="sect1"><div class="sect1" id="the_itertools_module">
<h1>The itertools Module</h1>
<p>The<a contenteditable="false" data-primary="standard library modules" data-secondary="itertools" data-type="indexterm" id="SLiter08"/><a contenteditable="false" data-primary="itertools module" data-type="indexterm" id="itermod08"/> <span class="code">itertools</span> module offers high-performance building blocks to build and manipulate iterators. To handle long processions of items, iterators are often better than lists, thanks to the iterators’ intrinsic<a contenteditable="false" data-primary="lazy evaluation" data-type="indexterm" id="idm44924589898864"/> “lazy evaluation” approach: an iterator produces items one at a time, as needed, while all items of a list (or other sequence) must be in memory at the same time. This approach even makes it feasible to build and use unbounded iterators, while lists must always have finite numbers of items (since any machine has a finite amount of memory).</p>
<p><a data-type="xref" href="#functions_and_attributes_of_the_itertoo">Table 8-10</a> covers the most frequently used attributes of <span class="code">itertools</span>; each of them is an iterator type, which you call to get an instance of the type in question, or a factory function behaving similarly. See the <a href="https://oreil.ly/d5Eew">online docs</a> for more <span class="code">itertools</span> attributes, including<a contenteditable="false" data-primary="generators" data-type="indexterm" id="idm44924589893968"/><a contenteditable="false" data-primary="combinatorial generators" data-type="indexterm" id="idm44924589892832"/> <em>combinatorial</em> generators for permutations, combinations, and Cartesian products, as well as a useful taxonomy of <span class="code">itertools</span> attributes.</p>
<p>The online docs also offer recipes describing ways to combine and use <span class="code">itertools</span> attributes. The recipes assume you have <span class="code"><strong>from</strong></span> <span class="code">itertools</span> <span class="code"><strong>import</strong></span> <span class="code">*</span> at the top of your module; this is <em>not</em> recommended use, just an assumption to make the recipes’ code more compact. It’s best to <span class="code"><strong>import</strong></span> <span class="code">itertools</span> <span class="code"><strong>as</strong></span> <span class="code">it</span>, then use references such as <span class="code">it</span><span class="code">.</span><span class="code"><em>something</em></span> rather than the more verbose <span class="code">itertools</span><span class="code">.</span><span class="code"><em>something</em></span>.<sup><a data-type="noteref" href="ch08.xhtml#ch01fn94" id="ch01fn94-marker">6</a></sup></p>
<table class="border" id="functions_and_attributes_of_the_itertoo">
<caption><span class="label">Table 8-10. </span>Functions and attributes of the <span class="code">itertools</span> module</caption>
<tbody>
<tr>
<td><span class="code">accumulate</span></td>
<td><span class="code">accumulate(<em>seq</em>,</span> <span class="code"><em>func</em></span><span class="code">, /[, initial<em>=init</em>])</span><br/>
			Similar<a contenteditable="false" data-primary="accumulate (itertools module)" data-type="indexterm" id="idm44924589867088"/> to <span class="code">functools.reduce(<em>func</em>,</span> <span class="code"><em>seq</em></span><span class="code">)</span>, but returns an iterator of all the intermediate computed values, not just the final value. <strong><span class="version">3.8+</span></strong> You can also pass an initial value <span class="code"><em>init</em></span>, which works the same way as in <span class="code">functools.reduce</span> (see <a data-type="xref" href="#functions_and_attributes_of_the_functoo">Table 8-7</a>).</td>
</tr>
<tr>
<td><span class="code">chain</span></td>
<td><span class="code">chain(<em>*iterables</em>)</span><br/>
			Yields<a contenteditable="false" data-primary="chain (itertools module)" data-type="indexterm" id="idm44924589857488"/> items from the first argument, then items from the second argument, and so on, until the end of the last argument. This is just like the generator expression:
			<pre data-code-language="python" data-type="programlisting">
<code class="p">(</code><em><code class="n">it</code></em><code> </code><strong><code class="k">for</code></strong><code> </code><em><code class="n">iterable</code></em><code> </code><strong><code class="ow">in</code></strong><code> </code><em><code class="n">iterables</code></em><code> </code><strong><code class="k">for</code></strong><code> </code><em><code class="n">it</code></em><code> </code><strong><code class="ow">in</code></strong><code> </code><em><code class="n">iterable</code></em><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">chain.from_ iterable</span></td>
<td><span class="code">chain.from_iterable(<em>iterables</em>, /)</span><br/>
			Yields<a contenteditable="false" data-primary="chain.from_iterable (itertools module)" data-type="indexterm" id="idm44924589832496"/> items from the iterables in the argument, in order, just like the genexp:
			<pre data-code-language="python" data-type="programlisting">
<code class="p">(</code><em><code class="n">it</code></em><code> </code><strong><code class="k">for</code></strong><code> </code><em><code class="n">iterable</code></em><code> </code><strong><code class="ow">in</code></strong><code> </code><em><code class="n">iterables</code></em><code> </code><strong><code class="k">for</code></strong><code> </code><em><code class="n">it</code></em><code> </code><strong><code class="ow">in</code></strong><code> </code><em><code class="n">iterable</code></em><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">compress</span></td>
<td><span class="code">compress(<em>data</em>,</span> <span class="code"><em>conditions</em></span><span class="code">, /)</span><br/>
			Yields<a contenteditable="false" data-primary="compress (itertools module)" data-type="indexterm" id="idm44924589788704"/> each item from <span class="code"><em>data</em></span> corresponding to a true item in <span class="code"><em>conditions</em></span>, just like the genexp:
			<pre data-code-language="python" data-type="programlisting">
<code class="p">(</code><em><code class="n">it</code></em><code> </code><strong><code class="k">for</code></strong><code> </code><em><code class="n">it</code></em><code class="p">,</code><code> </code><em><code class="n">cond</code></em><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="nb">zip</code><code class="p">(</code><em><code class="n">data</code></em><code class="p">,</code><code> </code><em><code class="n">conditions</code></em><code class="p">)</code><code> </code><strong><code class="k">if</code></strong><code> </code><em><code class="n">cond</code></em><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">count</span></td>
<td><span class="code">count(start=0, step=1)</span><br/>
			Yields<a contenteditable="false" data-primary="count (itertools module)" data-type="indexterm" id="idm44924589741168"/> consecutive integers starting from <span class="code"><em>start</em></span>, just like the generator:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">count</code><code class="p">(</code><code class="n">start</code><code class="o">=</code><code class="mi">0</code><code class="p">,</code><code> </code><code class="n">step</code><code class="o">=</code><code class="mi">1</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">while</code><code> </code><code class="kc">True</code></strong><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">yield</code></strong><code> </code><code class="n">start</code><code>
</code><code>        </code><code class="n">start</code><code> </code><code class="o">+</code><code class="o">=</code><code> </code><code class="n">step</code></pre>
<span class="code">count</span> returns an unending iterator, so use it carefully, always ensuring you explicitly terminate any loop over it.</td>
</tr>
<tr>
<td><span class="code">cycle</span></td>
<td><span class="code">cycle(<em>iterable</em>, /)</span><br/>
			Yields<a contenteditable="false" data-primary="cycle (itertools module)" data-type="indexterm" id="idm44924589687488"/> each item of <span class="code"><em>iterable</em></span>, endlessly repeating items from the beginning each time it reaches the end, just like the generator:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">cycle</code><code class="p">(</code><code class="n">iterable</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="n">saved</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="p">]</code><code>
</code><code>    </code><strong><code class="k">for</code></strong><code> </code><code class="n">item</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">iterable</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">yield</code></strong><code> </code><code class="n">item</code><code>
</code><code>        </code><code class="n">saved</code><code class="o">.</code><code class="n">append</code><code class="p">(</code><code class="n">item</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">while</code></strong><code> </code><code class="n">saved</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">for</code></strong><code> </code><code class="n">item</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">saved</code><code class="p">:</code><code>
</code><code>            </code><strong><code class="k">yield</code></strong><code> </code><code class="n">item</code></pre>
<span class="code">cycle</span> returns an unending iterator, so use it carefully, always ensuring you explicitly terminate any loop over it.</td>
</tr>
<tr>
<td><span class="code">dropwhile</span></td>
<td><span class="code">dropwhile(<em>func</em>,</span> <span class="code"><em>iterable</em></span><span class="code">, /)</span><br/>
			Drops<a contenteditable="false" data-primary="dropwhile (itertools module)" data-type="indexterm" id="idm44924589612656"/> the <span class="code">0+</span> leading items of <span class="code"><em>iterable</em></span> for which <span class="code"><em>func</em></span> is true, then yields each remaining item, just like the generator:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">dropwhile</code><code class="p">(</code><code class="n">func</code><code class="p">,</code><code> </code><code class="n">iterable</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="n">iterator</code><code> </code><code class="o">=</code><code> </code><code class="nb">iter</code><code class="p">(</code><code class="n">iterable</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">for</code></strong><code> </code><code class="n">item</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">iterator</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">if</code><code> </code><code class="ow">not</code></strong><code> </code><code class="n">func</code><code class="p">(</code><code class="n">item</code><code class="p">)</code><code class="p">:</code><code>
</code><code>            </code><strong><code class="k">yield</code></strong><code> </code><code class="n">item</code><code>
</code><strong><code>            </code><code class="k">break</code></strong><code>
</code><code>    </code><strong><code class="k">for</code></strong><code> </code><code class="n">item</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">iterator</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">yield</code></strong><code> </code><code class="n">item</code></pre>
</td>
</tr>
<tr>
<td><span class="code">filterfalse</span></td>
<td><span class="code">filterfalse(<em>func</em>,</span> <span class="code"><em>iterable</em></span><span class="code">, /)</span><br/>
			Yields<a contenteditable="false" data-primary="filterfalse (itertools module)" data-type="indexterm" id="idm44924526226544"/> those items of <span class="code"><em>iterable</em></span> for which <span class="code"><em>func</em></span> is false, just like the genexp:
			<pre data-code-language="python" data-type="programlisting">
<code class="p">(</code><em><code class="n">it</code></em><code> </code><strong><code class="k">for</code></strong><code> </code><em><code class="n">it</code></em><code> </code><strong><code class="ow">in</code></strong><code> </code><em><code class="n">iterable</code></em><code> </code><strong><code class="k">if</code><code> </code><code class="ow">not</code></strong><code> </code><em><code class="n">func</code></em><code class="p">(</code><em><code class="n">it</code></em><code class="p">)</code><code class="p">)</code></pre>
<span class="code"><em>func</em></span> can be any callable accepting a single argument, or <span class="code"><strong>None</strong></span>. When <span class="code"><em>func</em></span> is <span class="code"><strong>None</strong></span>, <span class="code">filterfalse</span> yields false items, just like the genexp:

			<pre data-code-language="python" data-type="programlisting">
<code class="p">(</code><em><code class="n">it</code></em><code> </code><strong><code class="k">for</code></strong><code> </code><em><code class="n">it</code></em><code> </code><strong><code class="ow">in</code></strong><code> </code><em><code class="n">iterable</code></em><code> </code><strong><code class="k">if</code><code> </code><code class="ow">not</code></strong><code> </code><em><code class="n">it</code></em><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">groupby</span></td>
<td><span class="code">groupby(<em>iterable</em>, /, key=<strong>None</strong>)</span><br/>
<span class="code"><em>iterable</em></span> normally<a contenteditable="false" data-primary="groupby (itertools module)" data-type="indexterm" id="idm44924526132800"/> needs to be already sorted according to <span class="code">key</span> (<span class="code"><strong>None</strong></span>, as usual, standing for the identity function, <span class="code"><strong>lambda</strong></span> <span class="code">x: x</span>). <span class="code">groupby</span> yields pairs <span class="code">(<em>k</em>,</span> <span class="code"><em>g</em></span><span class="code">)</span>, each pair representing a <em>group</em> of adjacent items from <span class="code"><em>iterable</em></span> having the same value <span class="code"><em>k</em></span> for <span class="code"><em>key</em></span><span class="code">(<em>item</em>)</span>; each <span class="code"><em>g</em></span> is an iterator yielding the items in the group. When the <span class="code">groupby</span> object advances, previous iterators <span class="code"><em>g</em></span> become invalid (so, if a group of items needs to be processed later, you’d better store somewhere a <span class="code">list</span> “snapshot” of it, <span class="code">list(<em>g</em>)</span>).<br/>
			Another way of looking at the groups <span class="code">groupby</span> yields is that each terminates as soon as <span class="code"><em>key</em></span><span class="code">(<em>item</em>)</span> changes (which is why you normally call <span class="code">groupby</span> only on an <span class="code"><em>iterable</em></span> that’s already sorted by <span class="code"><em>key</em></span>).<a contenteditable="false" data-primary="key argument" data-secondary="itertools.groupby" data-type="indexterm" id="idm44924526092352"/><br/>
			For example, suppose that, given a <span class="code">set</span> of lowercase words, we want a <span class="code">dict</span> that maps each initial to the longest word having that initial (with “ties” broken arbitrarily). We could write:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="kn">import</code></strong><code> </code><code class="nn">itertools</code><code> </code><strong><code class="k">as</code></strong><code> </code><code class="nn">it</code><code>
</code><strong><code class="kn">import</code></strong><code> </code><code class="nn">operator</code><code>
</code><strong><code class="k">def</code></strong><code> </code><code class="nf">set2dict</code><code class="p">(</code><code class="n">aset</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="n">first</code><code> </code><code class="o">=</code><code> </code><code class="n">operator</code><code class="o">.</code><code class="n">itemgetter</code><code class="p">(</code><code class="mi">0</code><code class="p">)</code><code>
</code><code>    </code><code class="n">words</code><code> </code><code class="o">=</code><code> </code><code class="nb">sorted</code><code class="p">(</code><code class="n">aset</code><code class="p">,</code><code> </code><code class="n">key</code><code class="o">=</code><code class="n">first</code><code class="p">)</code><code>
</code><code>    </code><code class="n">adict</code><code> </code><code class="o">=</code><code> </code><code class="p">{</code><code class="p">}</code><code>
</code><code>    </code><strong><code class="k">for</code></strong><code> </code><code class="n">init</code><code class="p">,</code><code> </code><code class="n">group</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">it</code><code class="o">.</code><code class="n">groupby</code><code class="p">(</code><code class="n">words</code><code class="p">,</code><code> </code><code class="n">key</code><code class="o">=</code><code class="n">first</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><code class="n">adict</code><code class="p">[</code><code class="n">init</code><code class="p">]</code><code> </code><code class="o">=</code><code> </code><code class="nb">max</code><code class="p">(</code><code class="n">group</code><code class="p">,</code><code> </code><code class="n">key</code><code class="o">=</code><code class="nb">len</code><code class="p">)</code><code>
</code><code>    </code><strong><code class="k">return</code></strong><code> </code><code class="n">adict</code></pre>
</td>
</tr>
<tr>
<td><span class="code">islice</span></td>
<td><span class="code">islice(<em>iterable</em>[,</span> <span class="code"><em>start</em></span><span class="code">],</span> <span class="code"><em>stop</em></span><span class="code">[,</span> <span class="code"><em>step</em></span><span class="code">], /)</span><br/>
			Yields<a contenteditable="false" data-primary="islice (itertools module)" data-type="indexterm" id="idm44924526014480"/> items of <span class="code"><em>iterable</em></span> (skipping the first <span class="code"><em>start</em></span> ones, by default <span class="code">0</span>) up to but not including <span class="code"><em>stop</em></span>, advancing by steps of <span class="code"><em>step</em></span> (default <span class="code">1</span>) at a time. All arguments must be nonnegative integers (or <span class="code"><strong>None</strong></span>), and <span class="code"><em>step</em></span> must be <span class="code">&gt; 0</span>. Apart from checks and optional arguments, it’s like the generator:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">islice</code><code class="p">(</code><code class="n">iterable</code><code class="p">,</code><code> </code><code class="n">start</code><code class="p">,</code><code> </code><code class="n">stop</code><code class="p">,</code><code> </code><code class="n">step</code><code class="o">=</code><code class="mi">1</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="n">en</code><code> </code><code class="o">=</code><code> </code><code class="nb">enumerate</code><code class="p">(</code><code class="n">iterable</code><code class="p">)</code><code>
</code><code>    </code><code class="n">n</code><code> </code><code class="o">=</code><code> </code><code class="n">stop</code><code>
</code><code>    </code><strong><code class="k">for</code></strong><code> </code><code class="n">n</code><code class="p">,</code><code> </code><code class="n">item</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">en</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">if</code></strong><code> </code><code class="n">n</code><code class="o">&gt;</code><code class="o">=</code><code class="n">start</code><code class="p">:</code><code>
</code><code>            </code><strong><code class="k">break</code></strong><code>
</code><code>    </code><strong><code class="k">while</code></strong><code> </code><code class="n">n</code><code class="o">&lt;</code><code class="n">stop</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">yield</code></strong><code> </code><code class="n">item</code><code>
</code><code>        </code><strong><code class="k">for</code></strong><code> </code><code class="n">x</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="nb">range</code><code class="p">(</code><code class="n">step</code><code class="p">)</code><code class="p">:</code><code>
</code><code>            </code><code class="n">n</code><code class="p">,</code><code> </code><code class="n">item</code><code> </code><code class="o">=</code><code> </code><code class="nb">next</code><code class="p">(</code><code class="n">en</code><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">pairwise</span></td>
<td><span class="code">pairwise(<em>seq</em>, /)</span><br/>
<strong><span class="version">3.10+</span></strong> Yields<a contenteditable="false" data-primary="pairwise (itertools module)" data-type="indexterm" id="idm44924525893664"/> pairs of items in <span class="code"><em>seq</em></span>, with overlap (for example, <span class="code">pairwise('ABCD')</span> will yield <span class="code">'AB'</span>, <span class="code">'BC'</span>, and <span class="code">'CD'</span>). Equivalent to the iterator returned from <span class="code">zip(<em>seq</em>,</span> <span class="code"><em>seq</em></span><span class="code">[1:])</span>.</td>
</tr>
<tr>
<td><span class="code">repeat</span></td>
<td><span class="code">repeat(<em>item</em>, /[</span><span class="code"><em>,</em></span> <span class="code">times])</span><br/>
			Repeatedly yields<a contenteditable="false" data-primary="repeat (itertools module)" data-type="indexterm" id="idm44924525843952"/> <span class="code"><em>item</em></span>, just like the genexp:
			<pre data-code-language="python" data-type="programlisting">
<code class="p">(</code><code class="n">item</code><code> </code><strong><code class="k">for</code></strong><code> </code><code class="n">_</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="nb">range</code><code class="p">(</code><code class="n">times</code><code class="p">)</code><code class="p">)</code></pre>
			When <span class="code">times</span> is absent, the iterator is unbounded, yielding a potentially infinite number of items, each of which is the object <span class="code"><em>item</em></span>, just like the generator:

			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">repeat_unbounded</code><code class="p">(</code><code class="n">item</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">while</code><code> </code><code class="kc">True</code></strong><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">yield</code></strong><code> </code><code class="n">item</code></pre>
</td>
</tr>
<tr>
<td><span class="code">starmap</span></td>
<td><span class="code">starmap(<em>func</em>,</span> <span class="code"><em>iterable</em></span><span class="code">, /)</span><br/>
			Yields<a contenteditable="false" data-primary="starmap (itertools module)" data-type="indexterm" id="idm44924525791728"/> <span class="code">func(*<em>item</em>)</span> for each <span class="code"><em>item</em></span> in <span class="code"><em>iterable</em></span> (each such <span class="code"><em>item</em></span> must be an iterable, normally a tuple), just like the generator:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">starmap</code><code class="p">(</code><code class="n">func</code><code class="p">,</code><code> </code><code class="n">iterable</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">for</code></strong><code> </code><code class="n">item</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">iterable</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">yield</code></strong><code> </code><code class="n">func</code><code class="p">(</code><code class="o">*</code><code class="n">item</code><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">takewhile</span></td>
<td><span class="code">takewhile(<em>func</em>,</span> <span class="code"><em>iterable</em></span><span class="code">, /)</span><br/>
			Yields<a contenteditable="false" data-primary="takewhile (itertools module)" data-type="indexterm" id="idm44924525739728"/> items from <span class="code"><em>iterable</em></span> as long as <span class="code"><em>func</em></span><span class="code">(<em>item</em>)</span> is truthy, then finishes, just like the generator:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">takewhile</code><code class="p">(</code><code class="n">func</code><code class="p">,</code><code> </code><code class="n">iterable</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">for</code></strong><code> </code><code class="n">item</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">iterable</code><code class="p">:</code><code>
</code><code>        </code><strong><code class="k">if</code></strong><code> </code><code class="n">func</code><code class="p">(</code><code class="n">item</code><code class="p">)</code><code class="p">:</code><code>
</code><code>            </code><strong><code class="k">yield</code></strong><code> </code><code class="n">item</code><code>
</code><code>        </code><strong><code class="k">else</code></strong><code class="p">:</code><code>
</code><strong><code>            </code><code class="k">break</code></strong></pre>
</td>
</tr>
<tr>
<td><span class="code">tee</span></td>
<td><span class="code">tee(<em>iterable</em>,</span> <span class="code"><em>n</em></span><span class="code">=2, /)</span><br/>
			Returns<a contenteditable="false" data-primary="tee (itertools module)" data-type="indexterm" id="idm44924525679264"/> a tuple of <span class="code"><em>n</em></span> independent iterators, each yielding items that are the same as those of <span class="code"><em>iterable</em></span>. The returned iterators are independent from each other, but they are <em>not</em> independent from <span class="code"><em>iterable</em></span>; avoid altering the object <span class="code"><em>iterable</em></span> in any way, as long as you’re still using any of the returned iterators.</td>
</tr>
<tr>
<td><span class="code">zip_longest</span></td>
<td><span class="code">zip_longest(*<em>iterables</em>, /, fillvalue=<strong>None</strong>)</span><br/>
			Yields<a contenteditable="false" data-primary="zip_longest (itertools module)" data-type="indexterm" id="idm44924525642240"/> tuples with one corresponding item from each of the <span class="code"><em>iterables</em></span>; stops when the longest of the <span class="code"><em>iterables</em></span> is exhausted, behaving as if each of the others was “padded” to that same length with references to <span class="code">fillvalue</span>. If <span class="code"><strong>None</strong></span> is a value that might be valid in one or more of the <em>iterables</em> (such that it could be confused with <span class="code"><strong>None</strong></span> values used for padding), you can use a Python Ellipsis (<span class="code">...</span>) or a sentinel object <span class="code">FILL=object()</span> for <span class="code">fillvalue</span>.</td>
</tr>
</tbody>
</table>
<p>We have shown equivalent generators and genexps for many attributes of <span class="code">itertools</span>, but it’s important to take into account the sheer speed of <span class="code">itertools</span>. As a trivial example, consider repeating some action 10 times:</p>
<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">for</code></strong><code> </code><code class="n">_</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">itertools</code><code class="o">.</code><code class="n">repeat</code><code class="p">(</code><code class="kc">None</code><code class="p">,</code><code> </code><code class="mi">10</code><code class="p">)</code><code class="p">:</code><code> </code><strong><code class="k">pass</code></strong></pre>
<p>This turns out to be about 10 to 20% faster, depending on the Python release and platform, than the straightforward<a contenteditable="false" data-primary="" data-startref="SLiter08" data-type="indexterm" id="idm44924525620016"/><a contenteditable="false" data-primary="" data-startref="itermod08" data-type="indexterm" id="idm44924525618848"/> alternative:</p>
<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">for</code></strong><code> </code><code class="n">_</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code><code class="p">:</code><code> </code><strong><code class="k">pass</code></strong></pre>
</div></section>
<div data-type="footnotes"><p data-type="footnote" id="ch01fn84"><sup><a href="ch08.xhtml#ch01fn84-marker">1</a></sup> I.e., according to the <a href="https://oreil.ly/3jMaN">Liskov substitution principle</a>, a core notion of object-oriented programming.</p><p data-type="footnote" id="ch01fn88"><sup><a href="ch08.xhtml#ch01fn88-marker">2</a></sup> When first introduced, <span class="code">defaultdict(int)</span> was commonly used to maintain counts of items. Since <span class="code">Counter</span> is now part of the <span class="code">collections</span> module, use <span class="code">Counter</span> instead of <span class="code">defaultdict(int)</span> for the specific task of counting items.</p><p data-type="footnote" id="ch01fn89"><sup><a href="ch08.xhtml#ch01fn89-marker">3</a></sup> For last-in, first-out (LIFO) queues, aka “stacks,” a <span class="code">list</span>, with its <span class="code">append</span> and <span class="code">pop</span> methods, is perfectly sufficient.</p><p data-type="footnote" id="ch01fn92"><sup><a href="ch08.xhtml#ch01fn92-marker">4</a></sup> Also known as the <a href="https://oreil.ly/FHlZB"><em>Schwartzian transform</em></a>.</p><p data-type="footnote" id="ch01fn93"><sup><a href="ch08.xhtml#ch01fn93-marker">5</a></sup> This step is not <em>quite</em> a full “sort,” but it looks close enough to call it one, at least if you squint.</p><p data-type="footnote" id="ch01fn94"><sup><a href="ch08.xhtml#ch01fn94-marker">6</a></sup> Some experts recommend <span class="code"><strong>from</strong></span> <span class="code">itertools</span> <span class="code"><strong>import</strong></span> <span class="code">*</span>, but the authors of this book disagree.</p></div></div></section></div></body></html>