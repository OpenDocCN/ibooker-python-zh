# 1\. 编程作为一种思维方式

> 原文：[`allendowney.github.io/ThinkPython/chap01.html`](https://allendowney.github.io/ThinkPython/chap01.html)

本书的第一个目标是教你如何使用 Python 编程。但是，学习编程意味着学习一种新的思维方式，因此本书的第二个目标是帮助你像计算机科学家一样思考。这种思维方式结合了数学、工程和自然科学的一些最佳特征。像数学家一样，计算机科学家使用形式化语言来表示思想——特别是表示计算。像工程师一样，他们设计事物，将组件组装成系统，并在替代方案之间进行权衡。像科学家一样，他们观察复杂系统的行为，提出假设，并测试预测。

我们将从编程的最基本元素开始，逐步深入。在本章中，我们将了解 Python 如何表示数字、字母和单词。你还将学会执行算术运算。

你还将开始学习编程的词汇，包括运算符、表达式、值和类型等术语。这个词汇非常重要——你需要它来理解本书的其他内容，与其他程序员沟通，并使用和理解虚拟助手。

## 1.1\. 算术运算符

**算术运算符**是表示算术计算的符号。例如，加号`+`表示加法运算。

```py
30 + 12 
```

```py
42 
```

减号`-`是执行减法的运算符。

```py
43 - 1 
```

```py
42 
```

星号`*`表示乘法运算。

```py
6 * 7 
```

```py
42 
```

斜杠`/`表示除法运算：

```py
84 / 2 
```

```py
42.0 
```

注意，除法的结果是`42.0`而不是`42`。这是因为 Python 中有两种类型的数字：

+   **整数**，表示没有分数或小数部分的数字，以及

+   **浮点数**，表示整数和带有小数点的数字。

如果你对两个整数进行加法、减法或乘法运算，结果是一个整数。但是如果你对两个整数进行除法运算，结果是一个浮动小数。Python 提供了另一个运算符`//`，用于执行**整数除法**。整数除法的结果始终是一个整数。

```py
84 // 2 
```

```py
42 
```

整数除法也被称为“地板除法”，因为它总是向下舍入（朝向“地板”）。

```py
85 // 2 
```

```py
42 
```

最后，运算符`**`执行指数运算；也就是说，它将一个数字提升到一个幂：

```py
7 ** 2 
```

```py
49 
```

在某些其他语言中，插入符号`^`用于表示指数运算，但在 Python 中，它是一个位运算符，称为 XOR。如果你不熟悉位运算符，结果可能会让你感到意外：

```py
7 ^ 2 
```

```py
5 
```

我不会在本书中介绍位运算符，但你可以在[`wiki.python.org/moin/BitwiseOperators`](http://wiki.python.org/moin/BitwiseOperators)阅读相关内容。

## 1.2\. 表达式

运算符和数字的集合叫做**表达式**。一个表达式可以包含任意数量的运算符和数字。例如，下面是一个包含两个运算符的表达式。

```py
6 + 6 ** 2 
```

```py
42 
```

请注意，指数运算优先于加法。Python 遵循你在数学课上学到的运算顺序：指数运算优先于乘法和除法，而乘法和除法又优先于加法和减法。

在下面的例子中，乘法发生在加法之前。

```py
12 + 5 * 6 
```

```py
42 
```

如果你希望加法先发生，可以使用括号。

```py
(12 + 5) * 6 
```

```py
102 
```

每个表达式都有一个**值**。例如，表达式 `6 * 7` 的值是 `42`。

## 1.3\. 算术函数

除了算术运算符，Python 还提供了一些**函数**，可以与数字一起使用。例如，`round` 函数接受一个浮动点数字，并将其四舍五入到最接近的整数。

```py
round(42.4) 
```

```py
42 
```

```py
round(42.6) 
```

```py
43 
```

`abs` 函数计算一个数字的绝对值。对于正数，绝对值就是数字本身。

```py
abs(42) 
```

```py
42 
```

对于负数，绝对值是正数。

```py
abs(-42) 
```

```py
42 
```

当我们使用像这样的函数时，我们说我们在**调用**该函数。调用函数的表达式叫做**函数调用**。

当你调用函数时，括号是必须的。如果不加括号，会得到错误信息。

```py
abs 42 
```

```py
 Cell In[17], line 1
    abs 42
        ^
SyntaxError: invalid syntax 
```

你可以忽略这条消息的第一行，它现在不包含任何我们需要理解的信息。第二行是包含错误的代码，下面有一个插入符号 (`^`)，指示发现错误的位置。

最后一行表明这是一个**语法错误**，意味着表达式的结构有问题。在这个例子中，问题是函数调用需要括号。

让我们看看如果你省略括号*以及*值会发生什么。

```py
abs 
```

```py
<function abs(x, /)> 
```

函数名本身就是一个合法的表达式，具有一个值。当它被显示时，值表示 `abs` 是一个函数，并包含一些稍后我会解释的附加信息。

## 1.4\. 字符串

除了数字，Python 还可以表示字母的序列，这些序列被称为**字符串**，因为字母像珠子一样串在一起。要写一个字符串，我们可以将字母序列放在直引号内。

```py
'Hello' 
```

```py
'Hello' 
```

使用双引号也是合法的。

```py
"world" 
```

```py
'world' 
```

双引号使得写包含撇号的字符串变得容易，因为撇号和直引号是相同的符号。

```py
"it's a small " 
```

```py
"it's a small " 
```

字符串也可以包含空格、标点符号和数字。

```py
'Well, ' 
```

```py
'Well, ' 
```

`+` 运算符可以与字符串一起使用；它将两个字符串连接成一个字符串，这个操作称为**连接**。

```py
'Well, ' + "it's a small " + 'world.' 
```

```py
"Well, it's a small world." 
```

`*` 运算符也可以与字符串一起使用；它可以制作字符串的多个副本并将它们连接起来。

```py
'Spam, ' * 4 
```

```py
'Spam, Spam, Spam, Spam, ' 
```

其他的算术运算符不能与字符串一起使用。

Python 提供了一个名为 `len` 的函数，用于计算字符串的长度。

```py
len('Spam') 
```

```py
4 
```

注意，`len` 计算引号之间的字母数，但不包括引号本身。

当你创建一个字符串时，请确保使用直引号。反引号，也称为反引号，会导致语法错误。

```py
`Hello` 
```

```py
 Cell In[26], line 1
    `Hello`
    ^
SyntaxError: invalid syntax 
```

智能引号，也称为卷曲引号，也是非法的。

## 1.5\. 值和类型

到目前为止，我们已经看到了三种类型的值：

+   `2` 是一个整数，

+   `42.0` 是一个浮点数，而

+   `'Hello'` 是一个字符串。

一种值被称为**类型**。每个值都有一个类型 - 或者我们有时说它“属于”一个类型。

Python 提供了一个名为 `type` 的函数，可以告诉你任何值的类型。整数的类型是 `int`。

```py
type(2) 
```

```py
int 
```

浮点数的类型是 `float`。

```py
type(42.0) 
```

```py
float 
```

字符串的类型是 `str`。

```py
type('Hello, World!') 
```

```py
str 
```

类型 `int`、`float` 和 `str` 可以被用作函数。例如，`int` 可以接受一个浮点数并将其转换为整数（总是向下取整）。

```py
int(42.9) 
```

```py
42 
```

而 `float` 可以将整数转换为浮点数值。

```py
float(42) 
```

```py
42.0 
```

现在，这里有一些可能让人困惑的东西。如果你把一串数字放在引号中会得到什么呢？

```py
'126' 
```

```py
'126' 
```

它看起来像一个数字，但实际上它是一个字符串。

```py
type('126') 
```

```py
str 
```

如果你尝试像数字一样使用它，可能会得到一个错误。

```py
'126' / 3 
```

```py
TypeError: unsupported operand type(s) for /: 'str' and 'int' 
```

这个例子会生成一个 `TypeError`，这意味着表达式中的值（称为**操作数**）具有错误的类型。错误消息表明 `/` 运算符不支持这些值的类型，它们分别为 `str` 和 `int`。

如果你有一个包含数字的字符串，你可以使用 `int` 将其转换为整数。

```py
int('126') / 3 
```

```py
42.0 
```

如果你有一个包含数字和小数点的字符串，你可以使用 `float` 将其转换为浮点数。

```py
float('12.6') 
```

```py
12.6 
```

当你写一个大整数时，你可能会尝试在数字组之间使用逗号，例如 `1,000,000`。这在 Python 中是一个合法的表达式，但结果不是一个整数。

```py
1,000,000 
```

```py
(1, 0, 0) 
```

Python 解释 `1,000,000` 为一个逗号分隔的整数序列。我们稍后会学到更多关于这种序列的知识。

你可以使用下划线使大数更易于阅读。

```py
1_000_000 
```

```py
1000000 
```

## 1.6\. 形式语言和自然语言

**自然语言** 是人们说的语言，如英语、西班牙语和法语。它们不是由人类设计的；它们是自然演变而来的。

**形式语言** 是由人类设计用于特定应用的语言。例如，数学家使用的符号是一种形式语言，非常擅长表示数字和符号之间的关系。类似地，编程语言是被设计用来表达计算的形式语言。

尽管形式语言和自然语言有一些共同点，但它们之间存在重要的区别：

+   歧义：自然语言充满了歧义，人们通过使用上下文线索和其他信息来处理它。形式语言旨在几乎或完全无歧义，这意味着任何程序具有完全确定的意义，无论上下文如何。

+   冗余性：为了弥补歧义并减少误解，自然语言使用冗余。因此，它们通常很冗长。正式语言不那么冗余，更加简洁。

+   文字的字面性：自然语言充满成语和隐喻。正式语言确切地表达其意思。

因为我们都是用自然语言长大的，有时很难适应正式语言。正式语言比自然语言更为密集，因此阅读起来需要更多时间。此外，结构也很重要，所以不总是从上到下、从左到右阅读最佳。最后，细节至关重要。在自然语言中，你可以忽略拼写和标点的小错误，但在正式语言中，这可能造成很大差异。

## 1.7\. 调试

程序员会犯错误。出于一些奇怪的原因，编程错误被称为**bug**，追踪它们的过程称为**debugging**。

编程，尤其是调试，有时会激发强烈的情绪。如果你在解决一个困难的 bug，你可能会感到愤怒、悲伤或尴尬。

准备好应对这些反应可能有助于你应对它们。一种方法是把计算机看作是一个具有某些优势（如速度和精度）和特定弱点（如缺乏同理心和无法把握全局图景）的员工。

你的工作是成为一名优秀的经理：找到利用优势和减少弱点的方法。找到利用你的情绪参与问题解决的方法，同时不让你的反应影响你有效工作的能力。

学习调试可能很令人沮丧，但这是一种有价值的技能，对编程之外的许多活动都很有用。在每章的末尾，都会有一个像这样的部分，提供关于调试的建议。希望它们有所帮助！

## 1.8\. 术语表

**算术运算符:** 符号，如`+`和`*`，表示加法或乘法等算术运算。

**整数:** 一种表示没有分数或小数部分的数字的类型。

**浮点数:** 一种表示整数和带小数部分的数字的类型。

**整数除法:** 一个运算符，`//`，用于将两个数字相除并向下取整至整数。

**表达式:** 变量、值和运算符的组合。

**值:** 整数、浮点数或字符串 - 或者我们稍后将看到的其他类型的值。

**函数:** 执行某些有用操作的一系列语句的命名序列。函数可能需要参数，也可能不需要，并且可能产生结果，也可能不产生。

**函数调用:** 一个表达式或表达式的一部分，运行一个函数。它由函数名后跟括号中的参数列表组成。

**语法错误:** 程序中的错误，使其无法解析 - 因此也无法运行。

**字符串:** 一种表示字符序列的类型。

**concatenation：** 将两个字符串连接在一起。

**type：** 一类值。我们到目前为止见过的类型有整数（类型 `int`）、浮点数（类型 `float`）和字符串（类型 `str`）。

**operand：** 操作符作用的值之一。

**natural language：** 人们说的自然演变而来的任何语言。

**formal language：** 人们为特定目的设计的任何语言，例如表示数学思想或计算机程序。所有编程语言都是形式语言。

**bug：** 程序中的错误。

**debugging：** 查找和修正错误的过程。

## 1.9\. 练习

```py
# This cell tells Jupyter to provide detailed debugging information
# when a runtime error occurs. Run it before working on the exercises.

%xmode Verbose 
```

```py
Exception reporting mode: Verbose 
```

### 1.9.1\. 向虚拟助手提问

在你学习本书的过程中，有几种方式可以利用虚拟助手或聊天机器人帮助你学习。

+   如果你想了解章节中的某个主题，或者有任何不清楚的地方，可以请求解释。

+   如果你在做任何练习时遇到困难，可以请求帮助。

在每一章中，我都会建议你可以和虚拟助手一起做的练习，但我鼓励你自己尝试，看看什么方法最适合你。

这里有一些你可以向虚拟助手提问的主题：

+   之前我提到了位运算符，但我没有解释为什么 `7 ^ 2` 的值是 5。试试问“Python 中的位运算符是什么？”或者“`7 XOR 2` 的值是多少？”

+   我还提到了运算顺序。想了解更多细节，可以问“Python 中的运算顺序是什么？”

+   `round` 函数，我们用它来将浮点数四舍五入到最接近的整数，可以接受第二个参数。试试问“round 函数的参数是什么？”或者“如何将 pi 四舍五入到三位小数？”

+   还有一个我没提到的算术运算符；试试问“Python 中的取余运算符是什么？”

大多数虚拟助手都了解 Python，因此它们能比较可靠地回答类似这样的问题。但请记住，这些工具也会犯错。如果你从聊天机器人那里得到代码，一定要进行测试！

### 1.9.2\. 练习

你可能会想，如果一个数字以 `0.5` 结尾，`round` 会做什么？答案是它有时会向上舍入，有时会向下舍入。试试这些例子，看看你能不能弄清楚它遵循什么规则。

```py
round(42.5) 
```

```py
42 
```

```py
round(43.5) 
```

```py
44 
```

如果你感兴趣，可以问虚拟助手：“如果一个数字以 0.5 结尾，Python 会向上还是向下舍入？”

### 1.9.3\. 练习

当你学习新特性时，应该尝试自己动手并故意犯错。这样，你会学到错误信息的含义，当你再次看到它们时就能理解它们。这比在后期偶然犯错要好。

1.  你可以使用负号来表示负数，例如 `-2`。如果你在一个数字前面加上加号会发生什么？那 `2++2` 呢？

1.  如果你有两个值中间没有运算符，比如`4 2`，会发生什么？

1.  如果你调用一个函数像`round(42.5)`，如果省略一个或两个括号会发生什么？

### 1.9.4\. 练习

记住每个表达式都有一个值，每个值都有一个类型，我们可以使用`type`函数来查找任何值的类型。

以下表达式的值的类型是什么？请对每个做出最佳猜测，然后使用`type`来确认。

+   `765`

+   `2.718`

+   `'2 pi'`

+   `abs(-7)`

+   `abs(-7.0)`

+   `abs`

+   `int`

+   `type`

### 1.9.5\. 练习

以下问题让你有机会练习编写算术表达式。

1.  42 分钟 42 秒是多少秒？

1.  10 公里是多少英里？提示：1 英里等于 1.61 公里。

1.  如果你在 42 分钟 42 秒内跑完 10 公里，你的平均配速是多少（单位：每英秒）？

1.  你的平均配速是多少（单位：分钟和秒每英里）？

1.  你的平均速度是多少（单位：英里每小时）？

如果你已经了解了变量，你可以在这个练习中使用它们。如果你不懂，也可以做这个练习，然后我们会在下一章介绍它们。

[Think Python: 第三版](https://allendowney.github.io/ThinkPython/index.html)

版权所有 2024 [Allen B. Downey](https://allendowney.com)

代码许可：[MIT 许可](https://mit-license.org/)

文本许可：[知识共享署名-非商业性使用-相同方式共享 4.0 国际](https://creativecommons.org/licenses/by-nc-sa/4.0/)
