<html><head></head><body><section data-pdf-bookmark="Chapter 11. Modules, Packages, and Goodies" data-type="chapter" epub:type="chapter"><div class="chapter" id="ch_modules">&#13;
<h1><span class="label">Chapter 11. </span>Modules, Packages, and Goodies</h1>&#13;
&#13;
&#13;
<p>During your bottom-up climb, you’ve progressed from&#13;
built-in data types&#13;
to constructing ever-larger data and code structures.&#13;
In this chapter,&#13;
you finally learn how to write realistic&#13;
whole programs in Python.&#13;
You’ll write your own <em>modules</em>&#13;
and learn how to use others&#13;
from Python’s <em>standard library</em>&#13;
and other sources.</p>&#13;
&#13;
<p>The text of this book is organized in a hierarchy:&#13;
words, sentences, paragraphs, and chapters.&#13;
Otherwise, it would be unreadable&#13;
pretty quickly.<sup><a data-type="noteref" href="ch11.html#idm45794994198296" id="idm45794994198296-marker">1</a></sup>&#13;
Code has a roughly similar bottom-up organization:&#13;
data types are like words;&#13;
expressions and statements are like sentences;&#13;
functions are like paragraphs;&#13;
and modules are like chapters.&#13;
To continue the analogy, in this book,&#13;
when I say that something will be explained in <a data-type="xref" href="ch08.html#ch_dicts">Chapter 8</a>,&#13;
in programming that’s like referring to code in another module.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Modules and the import Statement" data-type="sect1"><div class="sect1" id="idm45794994196328">&#13;
<h1>Modules and the import Statement</h1>&#13;
&#13;
<p><a data-primary="modules" data-seealso="specific modules" data-type="indexterm" id="ix_ch11-modules-asciidoc0"/>We’ll create and use Python&#13;
code in more than one file.&#13;
A <em>module</em> is just a file of any Python code.&#13;
You don’t need to do anything special—any Python code can be used as a module by others.</p>&#13;
&#13;
<p>We refer to code of other modules by using the&#13;
Python <code>import</code> statement.&#13;
This makes the code and variables in the&#13;
imported module available to your program.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Import a Module" data-type="sect2"><div class="sect2" id="import">&#13;
<h2>Import a Module</h2>&#13;
&#13;
<p><a data-primary="import statement" data-type="indexterm" id="ix_ch11-modules-asciidoc1"/><a data-primary="modules" data-secondary="importing" data-type="indexterm" id="ix_ch11-modules-asciidoc2"/>The simplest use of the <code>import</code> statement is <code>import</code> <em><code>module</code></em>,&#13;
where <em><code>module</code></em> is the name of another Python file,&#13;
without the <em>.py</em> extension.</p>&#13;
&#13;
<p>Let’s say you and a few others want something fast for lunch,&#13;
but don’t want a long discussion,&#13;
and you always end up picking what the loudest person wants anyhow.&#13;
Let the computer decide!&#13;
Let’s write a module with a single function that returns a random&#13;
fast-food choice,&#13;
and a main program that calls it and prints the choice.</p>&#13;
&#13;
<p>The module (<em>fast.py</em>) is shown in <a data-type="xref" href="#ch11_ex1">Example 11-1</a>.</p>&#13;
<div data-type="example" id="ch11_ex1">&#13;
<h5><span class="label">Example 11-1. </span>fast.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">from</code> <code class="nn">random</code> <code class="kn">import</code> <code class="n">choice</code>&#13;
&#13;
<code class="n">places</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'McDonalds", "KFC", "Burger King", "Taco Bell",</code>&#13;
     <code class="s2">"Wendys"</code><code class="p">,</code> <code class="s2">"Arbys"</code><code class="p">,</code> <code class="s2">"Pizza Hut"</code><code class="p">]</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">pick</code><code class="p">():</code>  <code class="c1"># see the docstring below?</code>&#13;
    <code class="sd">"""Return random fast food place"""</code>&#13;
    <code class="k">return</code> <code class="n">choice</code><code class="p">(</code><code class="n">places</code><code class="p">)</code></pre></div>&#13;
&#13;
<p>And <a data-type="xref" href="#ch11_ex2">Example 11-2</a> shows the main program that imports it&#13;
(call it <em>lunch.py</em>).</p>&#13;
<div data-type="example" id="ch11_ex2">&#13;
<h5><span class="label">Example 11-2. </span>lunch.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">fast</code>&#13;
&#13;
<code class="n">place</code> <code class="o">=</code> <code class="n">fast</code><code class="o">.</code><code class="n">pick</code><code class="p">()</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s2">"Let's go to"</code><code class="p">,</code> <code class="n">place</code><code class="p">)</code></pre></div>&#13;
&#13;
<p>If you have these two files in the same directory&#13;
and instruct Python to run <em>lunch.py</em>&#13;
as the main program,&#13;
it will access the <code>fast</code> module and&#13;
run its <code>pick()</code> function.&#13;
We wrote this version of <code>pick()</code>&#13;
to return a random result from a list of strings,&#13;
so that’s what the main program will get&#13;
back and print:</p>&#13;
<pre>$ <strong>python lunch.py</strong>&#13;
Let's go to Burger King&#13;
$ <strong>python lunch.py</strong>&#13;
Let's go to Pizza Hut&#13;
$ <strong>python lunch.py</strong>&#13;
Let's go to Arbys</pre>&#13;
&#13;
<p>We used imports in two different places:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>The main program <em>lunch.py</em> imported our new module <code>fast</code>.</p>&#13;
</li>&#13;
<li>&#13;
<p>The module file <em>fast.py</em> imported the <code>choice</code> function&#13;
from Python’s standard library module named <code>random</code>.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p class="pagebreak-before">We also used imports in two different ways&#13;
in our main program and our module:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>In the first case, we imported the entire <code>fast</code> module&#13;
but needed to use <code>fast</code> as a prefix to <code>pick()</code>.&#13;
After this <code>import</code> statement,&#13;
everything in <em>fast.py</em> is&#13;
available to the main program,&#13;
as long as we tack <code>fast.</code> before&#13;
its name.&#13;
By <em>qualifying</em> the contents of a module with the module’s name,&#13;
we avoid any nasty naming conflicts.&#13;
There could be a <code>pick()</code> function in some other module,&#13;
and we would not call it by mistake.</p>&#13;
</li>&#13;
<li>&#13;
<p>In the second case,&#13;
we’re within a module and know that nothing else&#13;
named <code>choice</code> is here,&#13;
so we imported the <code>choice()</code> function&#13;
from the <code>random</code> module directly.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>We could have written <em>fast.py</em>, as shown in <a data-type="xref" href="#ch11_ex3">Example 11-3</a>,&#13;
importing <code>random</code> within the <code>pick()</code> function instead of&#13;
at the top of the file.</p>&#13;
<div data-type="example" id="ch11_ex3">&#13;
<h5><span class="label">Example 11-3. </span>fast2.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">places</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'McDonalds", "KFC", "Burger King", "Taco Bell",</code>&#13;
     <code class="s2">"Wendys"</code><code class="p">,</code> <code class="s2">"Arbys"</code><code class="p">,</code> <code class="s2">"Pizza Hut"</code><code class="p">]</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">pick</code><code class="p">():</code>&#13;
    <code class="kn">import</code> <code class="nn">random</code>&#13;
    <code class="k">return</code> <code class="n">random</code><code class="o">.</code><code class="n">choice</code><code class="p">(</code><code class="n">places</code><code class="p">)</code></pre></div>&#13;
&#13;
<p>Like many aspects of programming,&#13;
use the style that seems the&#13;
most clear to you.&#13;
The module-qualified name (<code>random.choice</code>) is safer but&#13;
requires a little more <span class="keep-together">typing.</span></p>&#13;
&#13;
<p>Consider importing from outside the function&#13;
if the imported code might be used in more than one place,&#13;
and from inside if you know its use will be limited.&#13;
Some people prefer to put all their imports at the top of the file,&#13;
just to make all the dependencies of their code explicit.&#13;
Either way works.<a data-startref="ix_ch11-modules-asciidoc2" data-type="indexterm" id="idm45794994054664"/><a data-startref="ix_ch11-modules-asciidoc1" data-type="indexterm" id="idm45794994054056"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Import a Module with Another Name" data-type="sect2"><div class="sect2" id="import_alias">&#13;
<h2>Import a Module with Another Name</h2>&#13;
&#13;
<p><a data-primary="modules" data-secondary="importing with alias" data-type="indexterm" id="idm45794994044312"/>In our main <em>lunch.py</em> program,&#13;
we called <code>import fast</code>.&#13;
But what if you:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Have another module named <code>fast</code> somewhere?</p>&#13;
</li>&#13;
<li>&#13;
<p>Want to use a name that is more mnemonic?</p>&#13;
</li>&#13;
<li>&#13;
<p>Caught your fingers in a door and want to minimize typing?</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p class="pagebreak-before"><a data-primary="alias" data-type="indexterm" id="idm45794994038264"/>In these cases, you can import using an <em>alias</em>, as shown in <a data-type="xref" href="#ch11_ex4">Example 11-4</a>.&#13;
Let’s use the alias <code>f</code>.</p>&#13;
<div data-type="example" id="ch11_ex4">&#13;
<h5><span class="label">Example 11-4. </span>fast3.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">fast</code> <code class="kn">as</code> <code class="nn">f</code>&#13;
<code class="n">place</code> <code class="o">=</code> <code class="n">f</code><code class="o">.</code><code class="n">pick</code><code class="p">()</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s2">"Let's go to"</code><code class="p">,</code> <code class="n">place</code><code class="p">)</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Import Only What You Want from a Module" data-type="sect2"><div class="sect2" id="import_some">&#13;
<h2>Import Only What You Want from a Module</h2>&#13;
&#13;
<p><a data-primary="modules" data-secondary="importing specific part of" data-type="indexterm" id="idm45794993984120"/>You can import a whole module&#13;
or just parts of it.&#13;
You just saw the latter:&#13;
we only wanted the <code>choice()</code> function from&#13;
the <code>random</code> module.</p>&#13;
&#13;
<p>Like the module itself,&#13;
you can use an alias for each thing that you import.</p>&#13;
&#13;
<p>Let’s redo <em>lunch.py</em> a few more times.&#13;
First, import <code>pick()</code> from the <code>fast</code> module&#13;
with its original name (<a data-type="xref" href="#ch11_ex5">Example 11-5</a>).</p>&#13;
<div data-type="example" id="ch11_ex5">&#13;
<h5><span class="label">Example 11-5. </span>fast4.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">from</code> <code class="nn">fast</code> <code class="kn">import</code> <code class="n">pick</code>&#13;
<code class="n">place</code> <code class="o">=</code> <code class="n">pick</code><code class="p">()</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s2">"Let's go to"</code><code class="p">,</code> <code class="n">place</code><code class="p">)</code></pre></div>&#13;
&#13;
<p>Now import it as <code>who_cares</code>(<a data-type="xref" href="#ch11_ex6">Example 11-6</a>).<a data-startref="ix_ch11-modules-asciidoc0" data-type="indexterm" id="idm45794993939176"/></p>&#13;
<div data-type="example" id="ch11_ex6">&#13;
<h5><span class="label">Example 11-6. </span>fast5.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">from</code> <code class="nn">fast</code> <code class="kn">import</code> <code class="n">pick</code> <code class="k">as</code> <code class="n">who_cares</code>&#13;
<code class="n">place</code> <code class="o">=</code> <code class="n">who_cares</code><code class="p">()</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s2">"Let's go to"</code><code class="p">,</code> <code class="n">place</code><code class="p">)</code></pre></div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Packages" data-type="sect1"><div class="sect1" id="packages">&#13;
<h1>Packages</h1>&#13;
&#13;
<p><a data-primary="packages" data-seealso="specific packages" data-type="indexterm" id="ix_ch11-modules-asciidoc3"/>We went from single lines of code,&#13;
to multiline functions,&#13;
to standalone programs,&#13;
to multiple modules in the same directory.&#13;
If you don’t have many modules, the same directory works fine.</p>&#13;
&#13;
<p>To allow Python applications to scale even more,&#13;
you can organize modules into file and module hierarchies&#13;
called <em>packages</em>.&#13;
A package is just a subdirectory that contains <em>.py</em> files.&#13;
And you can go more than one level deep,&#13;
with directories inside those.</p>&#13;
&#13;
<p>We just wrote a module that chooses a fast-food place.&#13;
Let’s add a similar module to dispense life advice.&#13;
We’ll make one new main program called <em>questions.py</em>&#13;
in our current directory.&#13;
Now make a subdirectory&#13;
named <em>choices</em>&#13;
and put two modules in it—<em>fast.py</em> and <em>advice.py</em>.&#13;
Each module has a function that returns a string.</p>&#13;
&#13;
<p>The main program (<em>questions.py</em>) has an extra import&#13;
and line (<a data-type="xref" href="#ch11_ex7">Example 11-7</a>).</p>&#13;
<div data-type="example" id="ch11_ex7">&#13;
<h5><span class="label">Example 11-7. </span>questions.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">from</code> <code class="nn">sources</code> <code class="kn">import</code> <code class="n">fast</code><code class="p">,</code> <code class="n">advice</code>&#13;
&#13;
<code class="k">print</code><code class="p">(</code><code class="s2">"Let's go to"</code><code class="p">,</code> <code class="n">fast</code><code class="o">.</code><code class="n">pick</code><code class="p">())</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s2">"Should we take out?"</code><code class="p">,</code> <code class="n">advice</code><code class="o">.</code><code class="n">give</code><code class="p">())</code></pre></div>&#13;
&#13;
<p>That <code>from sources</code> makes Python look for a directory named&#13;
<em>sources</em>, starting under your current directory.&#13;
Inside <em>sources</em> it looks for the files <em>fast.py</em>&#13;
and <em>advice.py</em>.</p>&#13;
&#13;
<p>The first module (<em>choices/fast.py</em>) is the same&#13;
code as before, just moved into the&#13;
<em>choices</em> directory (<a data-type="xref" href="#ch11_ex8">Example 11-8</a>).</p>&#13;
<div data-type="example" id="ch11_ex8">&#13;
<h5><span class="label">Example 11-8. </span>choices/fast.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">from</code> <code class="nn">random</code> <code class="kn">import</code> <code class="n">choice</code>&#13;
&#13;
<code class="n">places</code> <code class="o">=</code> <code class="p">[</code><code class="s2">"McDonalds"</code><code class="p">,</code> <code class="s2">"KFC"</code><code class="p">,</code> <code class="s2">"Burger King"</code><code class="p">,</code> <code class="s2">"Taco Bell"</code><code class="p">,</code>&#13;
     <code class="s2">"Wendys"</code><code class="p">,</code> <code class="s2">"Arbys"</code><code class="p">,</code> <code class="s2">"Pizza Hut"</code><code class="p">]</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">pick</code><code class="p">():</code>&#13;
    <code class="sd">"""Return random fast food place"""</code>&#13;
    <code class="k">return</code> <code class="n">choice</code><code class="p">(</code><code class="n">places</code><code class="p">)</code></pre></div>&#13;
&#13;
<p>The second module (<em>choices/advice.py</em>) is new,&#13;
but it works a lot like its fast-food relative (<a data-type="xref" href="#ch11_ex9">Example 11-9</a>).</p>&#13;
<div data-type="example" id="ch11_ex9">&#13;
<h5><span class="label">Example 11-9. </span>choices/advice.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">from</code> <code class="nn">random</code> <code class="kn">import</code> <code class="n">choice</code>&#13;
&#13;
<code class="n">answers</code> <code class="o">=</code> <code class="p">[</code><code class="s2">"Yes!"</code><code class="p">,</code> <code class="s2">"No!"</code><code class="p">,</code> <code class="s2">"Reply hazy"</code><code class="p">,</code> <code class="s2">"Sorry, what?"</code><code class="p">]</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">give</code><code class="p">():</code>&#13;
    <code class="sd">"""Return random advice"""</code>&#13;
    <code class="k">return</code> <code class="n">choice</code><code class="p">(</code><code class="n">answers</code><code class="p">)</code></pre></div>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>If your version of Python is earlier than 3.3,&#13;
you’ll need one more thing in the <em>sources</em> subdirectory&#13;
to make it a Python package:&#13;
a file named&#13;
<em>__init__.py</em>.&#13;
This can be an empty file,&#13;
but pre-3.3 Python needs it to treat the directory&#13;
containing it as a package.&#13;
(This is another common Python interview question.)</p>&#13;
</div>&#13;
&#13;
<p>Run the main <em>questions.py</em> program&#13;
(from your current directory, not in <em>sources</em>)&#13;
to see what happens:</p>&#13;
<pre>$ <strong>python questions.py</strong>&#13;
Let's go to KFC&#13;
Should we take out? Yes!&#13;
$ <strong>python questions.py</strong>&#13;
Let's go to Wendys&#13;
Should we take out? Reply hazy&#13;
$ <strong>python questions.py</strong>&#13;
Let's go to McDonalds&#13;
Should we take out? Reply hazy</pre>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="The Module Search Path" data-type="sect2"><div class="sect2" id="import_search_path">&#13;
<h2>The Module Search Path</h2>&#13;
&#13;
<p><a data-primary="packages" data-secondary="module search path" data-type="indexterm" id="idm45794993761832"/>I just said that Python looks under your current directory for&#13;
the subdirectory <em>choices</em> and its modules.&#13;
Actually, it looks in other places, as well,&#13;
and you can control this.</p>&#13;
&#13;
<p>Earlier, we imported the function <code>choice()</code>&#13;
from the standard library’s&#13;
<code>random</code> module.&#13;
That wasn’t in your current directory,&#13;
so Python needed to look elsewhere also.</p>&#13;
&#13;
<p>To see all the places that your Python interpreter looks,&#13;
import the standard <code>sys</code> module and use its <code>path</code> list.&#13;
This is a list of directory names and ZIP archive files&#13;
that Python searches in order&#13;
to find modules to import.</p>&#13;
&#13;
<p>You can access and modify this list.&#13;
Here’s the value of <code>sys.path</code> for Python 3.7 on my Mac:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">sys</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">place</code> <code class="ow">in</code> <code class="n">sys</code><code class="o">.</code><code class="n">path</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">place</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
&#13;
<code class="go">/Library/Frameworks/Python.framework/Versions/3.7/lib/python37.zip</code>&#13;
<code class="go">/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7</code>&#13;
<code class="go">/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/lib-dynload</code></pre>&#13;
&#13;
<p>That initial blank output line is the empty string&#13;
<code>''</code>, which stands for the current directory.&#13;
If <code>''</code> is first in <code>sys.path</code>,&#13;
Python looks in the current directory first&#13;
when you try to import something:&#13;
<code>import fast</code> looks for <em>fast.py</em>.&#13;
This is Python’s usual setup.&#13;
Also, when we made that subdirectory called <em>sources</em> and put&#13;
Python files in it,&#13;
they could be imported with <code>import sources</code>&#13;
or <code>from sources import fast</code>.</p>&#13;
&#13;
<p>The first match will be used.&#13;
This means that if you define a module named <code>random</code>&#13;
and it’s in the search path&#13;
before the standard library,&#13;
you won’t be able to access the standard library’s&#13;
<code>random</code> now.</p>&#13;
&#13;
<p>You can modify the search path within your code.&#13;
Let’s say you want Python to look in the&#13;
<em>/my/modules</em> directory before any other:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">sys</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">sys</code><code class="o">.</code><code class="n">path</code><code class="o">.</code><code class="n">insert</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="s">"/my/modules"</code><code class="p">)</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Relative and Absolute Imports" data-type="sect2"><div class="sect2" id="relative_imports">&#13;
<h2>Relative and Absolute Imports</h2>&#13;
&#13;
<p><a data-primary="absolute imports" data-type="indexterm" id="idm45794993647960"/><a data-primary="imports, relative/absolute" data-type="indexterm" id="idm45794993647256"/><a data-primary="packages" data-secondary="relative/absolute imports" data-type="indexterm" id="idm45794993646616"/><a data-primary="relative imports" data-type="indexterm" id="idm45794993645704"/><a data-primary="relative/absolute imports" data-type="indexterm" id="idm45794993645032"/>In our examples so far,&#13;
we imported our own modules from:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>The current directory</p>&#13;
</li>&#13;
<li>&#13;
<p>The subdirectory <em>choices</em></p>&#13;
</li>&#13;
<li>&#13;
<p>The Python standard library</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>This works well until you have a local module with the&#13;
same name as a standard one.&#13;
Which do you want?</p>&#13;
&#13;
<p>Python supports <em>absolute</em> or <em>relative</em> imports.&#13;
The examples that you’ve seen so far are absolute imports.&#13;
If you typed <code>import rougarou</code>,&#13;
for each directory in the search path, Python&#13;
will look for a file named <em>rougarou.py</em> (a module)&#13;
or a directory&#13;
named <em>rougarou</em> (a package).</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>If <em>rougarou.py</em> is in the same directory as your calling problem,&#13;
you can import it <em>relative</em> to your location with&#13;
<code>from . import rougarou</code>.</p>&#13;
</li>&#13;
<li>&#13;
<p>If it’s in the directory above you:&#13;
<code>from .. import rougarou</code>.</p>&#13;
</li>&#13;
<li>&#13;
<p>If it’s under a sibling directory called <code>creatures</code>:&#13;
<code>from ..creatures import</code> <span class="keep-together"><code>rougarou</code></span>.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>The <code>.</code> and <code>..</code> notation was borrowed from Unix’s&#13;
shorthand for <em>current directory</em> and <em>parent directory</em>.</p>&#13;
&#13;
<p>For a good discussion of Python import problems&#13;
that you may run into,&#13;
see&#13;
<a href="https://oreil.ly/QMWHY">Traps for the Unwary in Python’s Import System</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Namespace Packages" data-type="sect2"><div class="sect2" id="idm45794993598920">&#13;
<h2>Namespace Packages</h2>&#13;
&#13;
<p><a data-primary="namespace packages" data-type="indexterm" id="idm45794993597320"/><a data-primary="packages" data-secondary="namespace packages" data-type="indexterm" id="idm45794993596616"/>You’ve seen that you can package Python modules as:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>A single <em>module</em> (<em>.py</em> file)</p>&#13;
</li>&#13;
<li>&#13;
<p>A <em>package</em> (directory containing modules,&#13;
and possibly other packages)</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>You can also split a package across directories with&#13;
<em>namespace packages</em>.&#13;
Say you want a package called <em>critters</em> that will contain&#13;
a Python module for each dangerous creature (real or&#13;
imagined, supposedly with background info and protective hints).&#13;
This might get large over time,&#13;
and you’d like to subdivide these by geographic location.&#13;
One option is to add location subpackages under <em>critters</em>&#13;
and move the existing <em>.py</em> module files under them,&#13;
but this would break things for other modules that import them.&#13;
Instead, we can go <em>up</em> and do the following:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Make new location directories above <em>critters</em></p>&#13;
</li>&#13;
<li>&#13;
<p>Make cousin <em>critters</em> directories under these new parents</p>&#13;
</li>&#13;
<li>&#13;
<p>Move existing modules to their respective directories.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>This needs some illustration.&#13;
Say we started with this file layout:</p>&#13;
<pre>critters&#13;
 ⌞ rougarou.py&#13;
 ⌞ wendigo.py</pre>&#13;
&#13;
<p>Normal imports of these modules would look like this:</p>&#13;
&#13;
<pre data-type="programlisting">from critters import wendigo, rougarou</pre>&#13;
&#13;
<p>Now if we decided on US locations <em>north</em> and <em>south</em>,&#13;
the files and directories would look like this:</p>&#13;
<pre>north&#13;
 ⌞ critters&#13;
   ⌞ wendigo.py&#13;
south&#13;
 ⌞ critters&#13;
   ⌞ rougarou.py</pre>&#13;
&#13;
<p>If both <em>north</em> and <em>south</em> are in your module search path,&#13;
you can import the modules as though they were still cohabiting&#13;
a single-directory package:</p>&#13;
&#13;
<pre data-type="programlisting">from critters import wendigo, rougarou</pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Modules Versus Objects" data-type="sect2"><div class="sect2" id="modules_vs">&#13;
<h2>Modules Versus Objects</h2>&#13;
&#13;
<p><a data-primary="modules" data-secondary="packages and" data-type="indexterm" id="idm45794993559384"/><a data-primary="objects" data-secondary="packages and" data-type="indexterm" id="idm45794993558408"/><a data-primary="packages" data-secondary="modules versus objects" data-type="indexterm" id="idm45794993557464"/>When should you put your code into a module,&#13;
and when into an object?</p>&#13;
&#13;
<p>They look similar in many ways.&#13;
An object or module called <code>thing</code>&#13;
with an internal data value called <code>stuff</code>&#13;
would let you access the value as <code>thing.stuff</code>.&#13;
<code>stuff</code> may have been defined when the module or class was created,&#13;
or it may have been assigned later.</p>&#13;
&#13;
<p>All the classes, functions, and global variables in a module&#13;
are available to the outside.&#13;
<a data-primary="__ (double underscores)" data-type="indexterm" id="idm45794993553464"/><a data-primary="double underscore (__)" data-type="indexterm" id="idm45794993552760"/>Objects can use properties and “dunder” (<code>__</code> …)&#13;
naming to&#13;
hide or control access to their data attributes.</p>&#13;
&#13;
<p>This means you can do this:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">math</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">math</code><code class="o">.</code><code class="n">pi</code>&#13;
<code class="go">3.141592653589793</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">math</code><code class="o">.</code><code class="n">pi</code> <code class="o">=</code> <code class="mf">3.0</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">math</code><code class="o">.</code><code class="n">pi</code>&#13;
<code class="go">3.0</code></pre>&#13;
&#13;
<p>Did you just ruin calculations for everyone on this computer?&#13;
Yes! No, I’m kidding.<sup><a data-type="noteref" href="ch11.html#idm45794993539736" id="idm45794993539736-marker">2</a></sup>&#13;
This did not affect the Python <code>math</code> module.&#13;
You only changed the value of <code>pi</code> for the copy&#13;
of the <code>math</code> module code imported by your calling program,&#13;
and all evidence of your crimes will disappear when it finishes.</p>&#13;
&#13;
<p>There’s only one copy&#13;
of any module imported by your program,&#13;
even if you import it more than once.&#13;
You can use it to save global things, of interest&#13;
to any code that imports it.&#13;
This is similar to a class, which also has only one copy,&#13;
although you can have many objects created from it.<a data-startref="ix_ch11-modules-asciidoc3" data-type="indexterm" id="idm45794993537192"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Goodies in the Python Standard Library" data-type="sect1"><div class="sect1" id="stdlib_goodies">&#13;
<h1>Goodies in the Python Standard Library</h1>&#13;
&#13;
<p><a data-primary="Python standard library" data-type="indexterm" id="ix_ch11-modules-asciidoc4"/>One <a data-primary="Python standard library" data-secondary="benefits of" data-type="indexterm" id="idm45794993527976"/>of Python’s prominent claims is that it has “batteries included”—a large standard library of modules that perform many useful tasks. They are kept separate to avoid bloating the core language.&#13;
When you’re about to write some Python code,&#13;
it’s often worthwhile to first check&#13;
whether there’s a standard module that already does what you want.&#13;
It’s surprising how often you encounter little gems&#13;
in the standard library.&#13;
Python also provides authoritative&#13;
<a href="http://docs.python.org/3/library">documentation</a>&#13;
for the modules,&#13;
along with a&#13;
<a href="http://bit.ly/library-tour">tutorial</a>.&#13;
Doug Hellmann’s website&#13;
<a href="http://bit.ly/py-motw">Python Module of the Week</a>&#13;
and book&#13;
<a href="http://bit.ly/py-libex"><em>The Python Standard Library by Example</em></a> (Addison-Wesley Professional)&#13;
are also very useful guides.</p>&#13;
&#13;
<p>Upcoming chapters in this book feature many of the standard modules&#13;
that are specific to the web, systems, databases, and so on.&#13;
In this section, I talk about some standard modules&#13;
that have generic uses.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Handle Missing Keys with setdefault() and defaultdict()" data-type="sect2"><div class="sect2" id="defaultdict">&#13;
<h2>Handle Missing Keys with setdefault() and defaultdict()</h2>&#13;
&#13;
<p><a data-primary="keys" data-secondary="handling missing" data-type="indexterm" id="ix_ch11-modules-asciidoc5"/><a data-primary="Python standard library" data-secondary="handling missing keys" data-type="indexterm" id="ix_ch11-modules-asciidoc6"/><a data-primary="setdefault() function" data-type="indexterm" id="ix_ch11-modules-asciidoc7"/>You’ve seen that trying to access a dictionary&#13;
with a nonexistent key raises an exception.&#13;
Using the dictionary <code>get()</code> function&#13;
to return a default value avoids an exception.&#13;
The <code>setdefault()</code> function is like <code>get()</code>,&#13;
but also assigns an item to the dictionary&#13;
if the key is missing:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">periodic_table</code> <code class="o">=</code> <code class="p">{</code><code class="s">'Hydrogen'</code><code class="p">:</code> <code class="mi">1</code><code class="p">,</code> <code class="s">'Helium'</code><code class="p">:</code> <code class="mi">2</code><code class="p">}</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">periodic_table</code>&#13;
<code class="go">{'Hydrogen': 1, 'Helium': 2}</code></pre>&#13;
&#13;
<p>If the key was <em>not</em> already in the dictionary,&#13;
the new value is used:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">carbon</code> <code class="o">=</code> <code class="n">periodic_table</code><code class="o">.</code><code class="n">setdefault</code><code class="p">(</code><code class="s">'Carbon'</code><code class="p">,</code> <code class="mi">12</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">carbon</code>&#13;
<code class="go">12</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">periodic_table</code>&#13;
<code class="go">{'Hydrogen': 1, 'Helium': 2, 'Carbon': 12}</code></pre>&#13;
&#13;
<p>If we try to assign a different default value to an <em>existing</em> key,&#13;
the original value is returned and nothing is changed:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">helium</code> <code class="o">=</code> <code class="n">periodic_table</code><code class="o">.</code><code class="n">setdefault</code><code class="p">(</code><code class="s">'Helium'</code><code class="p">,</code> <code class="mi">947</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">helium</code>&#13;
<code class="go">2</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">periodic_table</code>&#13;
<code class="go">{'Hydrogen': 1, 'Helium': 2, 'Carbon': 12}</code></pre>&#13;
&#13;
<p><a data-primary="defaultdict() function" data-type="indexterm" id="idm45794993359768"/><code>defaultdict()</code> is similar, but specifies the default&#13;
value for any new key up front,&#13;
when the dictionary is created.&#13;
Its argument is a function.&#13;
In this example, we pass the function <code>int</code>,&#13;
which will be called as <code>int()</code> and return the integer <code>0</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">defaultdict</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">periodic_table</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="nb">int</code><code class="p">)</code></pre>&#13;
&#13;
<p>Now any missing value will be an integer (<code>int</code>),&#13;
with the value <code>0</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">periodic_table</code><code class="p">[</code><code class="s">'Hydrogen'</code><code class="p">]</code> <code class="o">=</code> <code class="mi">1</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">periodic_table</code><code class="p">[</code><code class="s">'Lead'</code><code class="p">]</code>&#13;
<code class="go">0</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">periodic_table</code>&#13;
<code class="go">defaultdict(&lt;class 'int'&gt;, {'Hydrogen': 1, 'Lead': 0})</code></pre>&#13;
&#13;
<p>The argument to <code>defaultdict()</code> is a function that returns&#13;
the value to be assigned to a missing key.&#13;
In the following example, <code>no_idea()</code> is executed to return&#13;
a value when needed:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">defaultdict</code>&#13;
<code class="go">&gt;&gt;&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">def</code> <code class="nf">no_idea</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">return</code> <code class="s">'Huh?'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">bestiary</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="n">no_idea</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">bestiary</code><code class="p">[</code><code class="s">'A'</code><code class="p">]</code> <code class="o">=</code> <code class="s">'Abominable Snowman'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">bestiary</code><code class="p">[</code><code class="s">'B'</code><code class="p">]</code> <code class="o">=</code> <code class="s">'Basilisk'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">bestiary</code><code class="p">[</code><code class="s">'A'</code><code class="p">]</code>&#13;
<code class="go">'Abominable Snowman'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">bestiary</code><code class="p">[</code><code class="s">'B'</code><code class="p">]</code>&#13;
<code class="go">'Basilisk'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">bestiary</code><code class="p">[</code><code class="s">'C'</code><code class="p">]</code>&#13;
<code class="go">'Huh?'</code></pre>&#13;
&#13;
<p>You can use the functions <code>int()</code>, <code>list()</code>, or <code>dict()</code> to return&#13;
default empty values for those types:&#13;
<code>int()</code> returns <code>0</code>,&#13;
<code>list()</code> returns an empty list (<code>[]</code>),&#13;
and <code>dict()</code> returns an empty dictionary (<code>{}</code>).&#13;
If you omit the argument,&#13;
the initial value of a new key will be set to <code>None</code>.</p>&#13;
&#13;
<p>By the way,&#13;
you can use <code>lambda</code> to define your default-making function&#13;
right inside the call:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">bestiary</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="k">lambda</code><code class="p">:</code> <code class="s">'Huh?'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">bestiary</code><code class="p">[</code><code class="s">'E'</code><code class="p">]</code>&#13;
<code class="go">'Huh?'</code></pre>&#13;
&#13;
<p>Using <code>int</code> is one way to make your own counter:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">defaultdict</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">food_counter</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="nb">int</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">food</code> <code class="ow">in</code> <code class="p">[</code><code class="s">'spam'</code><code class="p">,</code> <code class="s">'spam'</code><code class="p">,</code> <code class="s">'eggs'</code><code class="p">,</code> <code class="s">'spam'</code><code class="p">]:</code>&#13;
<code class="gp">... </code>    <code class="n">food_counter</code><code class="p">[</code><code class="n">food</code><code class="p">]</code> <code class="o">+=</code> <code class="mi">1</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">food</code><code class="p">,</code> <code class="n">count</code> <code class="ow">in</code> <code class="n">food_counter</code><code class="o">.</code><code class="n">items</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">food</code><code class="p">,</code> <code class="n">count</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">eggs 1</code>&#13;
<code class="go">spam 3</code></pre>&#13;
&#13;
<p>In the preceding example,&#13;
if <code>food_counter</code> had been a normal dictionary&#13;
instead of a <code>defaultdict</code>,&#13;
Python would have raised an exception every time&#13;
we tried to increment&#13;
the dictionary element <code>food_counter[food]</code>&#13;
because it would not have been initialized.&#13;
We would have needed to do some extra work, as shown here:<a data-startref="ix_ch11-modules-asciidoc7" data-type="indexterm" id="idm45794993079480"/><a data-startref="ix_ch11-modules-asciidoc6" data-type="indexterm" id="idm45794993078872"/><a data-startref="ix_ch11-modules-asciidoc5" data-type="indexterm" id="idm45794993078232"/></p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">dict_counter</code> <code class="o">=</code> <code class="p">{}</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">food</code> <code class="ow">in</code> <code class="p">[</code><code class="s">'spam'</code><code class="p">,</code> <code class="s">'spam'</code><code class="p">,</code> <code class="s">'eggs'</code><code class="p">,</code> <code class="s">'spam'</code><code class="p">]:</code>&#13;
<code class="gp">... </code>    <code class="k">if</code> <code class="ow">not</code> <code class="n">food</code> <code class="ow">in</code> <code class="n">dict_counter</code><code class="p">:</code>&#13;
<code class="gp">... </code>        <code class="n">dict_counter</code><code class="p">[</code><code class="n">food</code><code class="p">]</code> <code class="o">=</code> <code class="mi">0</code>&#13;
<code class="gp">... </code>    <code class="n">dict_counter</code><code class="p">[</code><code class="n">food</code><code class="p">]</code> <code class="o">+=</code> <code class="mi">1</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">food</code><code class="p">,</code> <code class="n">count</code> <code class="ow">in</code> <code class="n">dict_counter</code><code class="o">.</code><code class="n">items</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">food</code><code class="p">,</code> <code class="n">count</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">spam 3</code>&#13;
<code class="go">eggs 1</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Count Items with Counter()" data-type="sect2"><div class="sect2" id="counter">&#13;
<h2>Count Items with Counter()</h2>&#13;
&#13;
<p><a data-primary="counter() function" data-type="indexterm" id="idm45794993055560"/><a data-primary="Python standard library" data-secondary="counting items" data-type="indexterm" id="idm45794993003752"/>Speaking of counters,&#13;
the standard library has one that does the work&#13;
of the previous example and more:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">Counter</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">breakfast</code> <code class="o">=</code> <code class="p">[</code><code class="s">'spam'</code><code class="p">,</code> <code class="s">'spam'</code><code class="p">,</code> <code class="s">'eggs'</code><code class="p">,</code> <code class="s">'spam'</code><code class="p">]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">breakfast_counter</code> <code class="o">=</code> <code class="n">Counter</code><code class="p">(</code><code class="n">breakfast</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">breakfast_counter</code>&#13;
<code class="go">Counter({'spam': 3, 'eggs': 1})</code></pre>&#13;
&#13;
<p class="pagebreak-before"><a data-primary="most_common () function" data-type="indexterm" id="idm45794993001208"/>The <code>most_common()</code> function returns all elements&#13;
in descending order, or just the top <code>count</code>&#13;
elements if given a count:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">breakfast_counter</code><code class="o">.</code><code class="n">most_common</code><code class="p">()</code>&#13;
<code class="go">[('spam', 3), ('eggs', 1)]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">breakfast_counter</code><code class="o">.</code><code class="n">most_common</code><code class="p">(</code><code class="mi">1</code><code class="p">)</code>&#13;
<code class="go">[('spam', 3)]</code></pre>&#13;
&#13;
<p>You can combine counters.&#13;
First, let’s see again what’s in <code>breakfast_counter</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">breakfast_counter</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">Counter</code><code class="p">({</code><code class="s">'spam'</code><code class="p">:</code> <code class="mi">3</code><code class="p">,</code> <code class="s">'eggs'</code><code class="p">:</code> <code class="mi">1</code><code class="p">})</code></pre>&#13;
&#13;
<p>This time, we make a new list called <code>lunch</code>,&#13;
and a counter called <code>lunch_counter</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">lunch</code> <code class="o">=</code> <code class="p">[</code><code class="s">'eggs'</code><code class="p">,</code> <code class="s">'eggs'</code><code class="p">,</code> <code class="s">'bacon'</code><code class="p">]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">lunch_counter</code> <code class="o">=</code> <code class="n">Counter</code><code class="p">(</code><code class="n">lunch</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">lunch_counter</code>&#13;
<code class="go">Counter({'eggs': 2, 'bacon': 1})</code></pre>&#13;
&#13;
<p>The first way we combine the two counters&#13;
is by addition, using <code>+</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">breakfast_counter</code> <code class="o">+</code> <code class="n">lunch_counter</code>&#13;
<code class="go">Counter({'spam': 3, 'eggs': 3, 'bacon': 1})</code></pre>&#13;
&#13;
<p>As you might expect, you subtract one&#13;
counter from another by using <code>-</code>.&#13;
What’s for breakfast but not for lunch?</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">breakfast_counter</code> <code class="o">-</code> <code class="n">lunch_counter</code>&#13;
<code class="go">Counter({'spam': 3})</code></pre>&#13;
&#13;
<p>Okay, now what can we have for lunch&#13;
that we can’t have for breakfast?</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">lunch_counter</code> <code class="o">-</code> <code class="n">breakfast_counter</code>&#13;
<code class="go">Counter({'bacon': 1, 'eggs': 1})</code></pre>&#13;
&#13;
<p>Similar to sets in <a data-type="xref" href="ch08.html#ch_dicts">Chapter 8</a>,&#13;
you can get common items by using the intersection operator <code>&amp;</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">breakfast_counter</code> <code class="o">&amp;</code> <code class="n">lunch_counter</code>&#13;
<code class="go">Counter({'eggs': 1})</code></pre>&#13;
&#13;
<p>The intersection chose the common element (<code>'eggs'</code>)&#13;
with the lower count.&#13;
This makes sense:&#13;
breakfast offered only one egg,&#13;
so that’s the common count.</p>&#13;
&#13;
<p>Finally, you can get all items by using the&#13;
union operator <code>|</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">breakfast_counter</code> <code class="o">|</code> <code class="n">lunch_counter</code>&#13;
<code class="go">Counter({'spam': 3, 'eggs': 2, 'bacon': 1})</code></pre>&#13;
&#13;
<p>The item <code>'eggs'</code> was again common to both.&#13;
Unlike addition, union didn’t add their counts, but&#13;
selected the one with the larger count.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Order by Key with OrderedDict()" data-type="sect2"><div class="sect2" id="ordered_dict">&#13;
<h2>Order by Key with OrderedDict()</h2>&#13;
&#13;
<p><a data-primary="OrderedDict() function" data-type="indexterm" id="idm45794992711400"/><a data-primary="Python standard library" data-secondary="order by key" data-type="indexterm" id="idm45794992710696"/>This is an example run with the Python 2 interpreter:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">quotes</code> <code class="o">=</code> <code class="p">{</code>&#13;
<code class="gp">... </code>    <code class="s">'Moe'</code><code class="p">:</code> <code class="s">'A wise guy, huh?'</code><code class="p">,</code>&#13;
<code class="gp">... </code>    <code class="s">'Larry'</code><code class="p">:</code> <code class="s">'Ow!'</code><code class="p">,</code>&#13;
<code class="gp">... </code>    <code class="s">'Curly'</code><code class="p">:</code> <code class="s">'Nyuk nyuk!'</code><code class="p">,</code>&#13;
<code class="gp">... </code>    <code class="p">}</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">stooge</code> <code class="ow">in</code> <code class="n">quotes</code><code class="p">:</code>&#13;
<code class="gp">... </code> <code class="k">print</code><code class="p">(</code><code class="n">stooge</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">Larry</code>&#13;
<code class="go">Curly</code>&#13;
<code class="go">Moe</code></pre>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Starting with Python 3.7,&#13;
dictionaries retain keys in the order in which they were added.&#13;
<code>OrderedDict</code> is useful for earlier versions,&#13;
which have an unpredictable order.&#13;
The examples in this section are relevant only if you’re&#13;
a version of Python earlier than 3.7.</p>&#13;
</div>&#13;
&#13;
<p>An <code>OrderedDict()</code> remembers the order of key addition&#13;
and returns them in the same order from an iterator.&#13;
Try creating an <code>OrderedDict</code> from a sequence of&#13;
(<em>key</em>, <em>value</em>) tuples:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">OrderedDict</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">quotes</code> <code class="o">=</code> <code class="n">OrderedDict</code><code class="p">([</code>&#13;
<code class="gp">... </code>    <code class="p">(</code><code class="s">'Moe'</code><code class="p">,</code> <code class="s">'A wise guy, huh?'</code><code class="p">),</code>&#13;
<code class="gp">... </code>    <code class="p">(</code><code class="s">'Larry'</code><code class="p">,</code> <code class="s">'Ow!'</code><code class="p">),</code>&#13;
<code class="gp">... </code>    <code class="p">(</code><code class="s">'Curly'</code><code class="p">,</code> <code class="s">'Nyuk nyuk!'</code><code class="p">),</code>&#13;
<code class="gp">... </code>    <code class="p">])</code>&#13;
<code class="go">&gt;&gt;&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">stooge</code> <code class="ow">in</code> <code class="n">quotes</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">stooge</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">Moe</code>&#13;
<code class="go">Larry</code>&#13;
<code class="go">Curly</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Stack + Queue == deque" data-type="sect2"><div class="sect2" id="deque">&#13;
<h2>Stack + Queue == deque</h2>&#13;
&#13;
<p><a data-primary="deque" data-type="indexterm" id="idm45794992538840"/><a data-primary="Python standard library" data-secondary="deque" data-type="indexterm" id="idm45794992537912"/><a data-primary="sequences" data-secondary="deque and" data-type="indexterm" id="idm45794992536968"/>A <code>deque</code> (pronounced <em>deck</em>) is a double-ended queue,&#13;
which has features of both a stack and a queue.&#13;
It’s useful when you want to add and delete items from&#13;
either end of a sequence.&#13;
Here, we work from both ends of a word to the middle&#13;
to see whether it’s a palindrome.&#13;
The function <code>popleft()</code> removes the&#13;
leftmost item from the deque and returns it;&#13;
<code>pop()</code> removes the rightmost item&#13;
and returns it.&#13;
Together,&#13;
they work from the ends toward the middle.&#13;
As long as the end characters match,&#13;
it keeps popping until it reaches the middle:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">def</code> <code class="nf">palindrome</code><code class="p">(</code><code class="n">word</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">deque</code>&#13;
<code class="gp">... </code>    <code class="n">dq</code> <code class="o">=</code> <code class="n">deque</code><code class="p">(</code><code class="n">word</code><code class="p">)</code>&#13;
<code class="gp">... </code>    <code class="k">while</code> <code class="nb">len</code><code class="p">(</code><code class="n">dq</code><code class="p">)</code> <code class="o">&gt;</code> <code class="mi">1</code><code class="p">:</code>&#13;
<code class="gp">... </code>       <code class="k">if</code> <code class="n">dq</code><code class="o">.</code><code class="n">popleft</code><code class="p">()</code> <code class="o">!=</code> <code class="n">dq</code><code class="o">.</code><code class="n">pop</code><code class="p">():</code>&#13;
<code class="gp">... </code>           <code class="k">return</code> <code class="bp">False</code>&#13;
<code class="gp">... </code>    <code class="k">return</code> <code class="bp">True</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">palindrome</code><code class="p">(</code><code class="s">'a'</code><code class="p">)</code>&#13;
<code class="go">True</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">palindrome</code><code class="p">(</code><code class="s">'racecar'</code><code class="p">)</code>&#13;
<code class="go">True</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">palindrome</code><code class="p">(</code><code class="s">''</code><code class="p">)</code>&#13;
<code class="go">True</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">palindrome</code><code class="p">(</code><code class="s">'radar'</code><code class="p">)</code>&#13;
<code class="go">True</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">palindrome</code><code class="p">(</code><code class="s">'halibut'</code><code class="p">)</code>&#13;
<code class="go">False</code></pre>&#13;
&#13;
<p>I used this as a simple illustration&#13;
of deques.&#13;
If you really wanted a quick palindrome&#13;
checker,&#13;
it would be a lot simpler to just&#13;
compare a string with its reverse.&#13;
<a data-primary="slice" data-secondary="reversing a string with" data-type="indexterm" id="idm45794992532168"/>Python doesn’t have a <code>reverse()</code>&#13;
function for strings,&#13;
but it does have a way to reverse a&#13;
string with a slice, as illustrated here:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">def</code> <code class="nf">another_palindrome</code><code class="p">(</code><code class="n">word</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">return</code> <code class="n">word</code> <code class="o">==</code> <code class="n">word</code><code class="p">[::</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">another_palindrome</code><code class="p">(</code><code class="s">'radar'</code><code class="p">)</code>&#13;
<code class="go">True</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">another_palindrome</code><code class="p">(</code><code class="s">'halibut'</code><code class="p">)</code>&#13;
<code class="go">False</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Iterate over Code Structures with itertools" data-type="sect2"><div class="sect2" id="itertools">&#13;
<h2>Iterate over Code Structures with itertools</h2>&#13;
&#13;
<p><a data-primary="code structures" data-secondary="iterating over" data-type="indexterm" id="idm45794992387160"/><a data-primary="iteration" data-secondary="code structures" data-type="indexterm" id="idm45794992386184"/><a data-primary="itertools" data-type="indexterm" id="idm45794992385240"/><a data-primary="Python standard library" data-secondary="iterating over code structures" data-type="indexterm" id="idm45794992384568"/><a href="http://bit.ly/py-itertools"><code>itertools</code></a>&#13;
contains special-purpose iterator functions.&#13;
Each returns one item at a time&#13;
when called within a <code>for</code> … <code>in</code> loop,&#13;
and remembers its state between calls.</p>&#13;
&#13;
<p><a data-primary="chain() function" data-type="indexterm" id="idm45794992381576"/><code>chain()</code> runs through its arguments as though they&#13;
were a single iterable:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">itertools</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">item</code> <code class="ow">in</code> <code class="n">itertools</code><code class="o">.</code><code class="n">chain</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">],</code> <code class="p">[</code><code class="s">'a'</code><code class="p">,</code> <code class="s">'b'</code><code class="p">]):</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">item</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">1</code>&#13;
<code class="go">2</code>&#13;
<code class="go">a</code>&#13;
<code class="go">b</code></pre>&#13;
&#13;
<p><a data-primary="cycle() function" data-type="indexterm" id="idm45794992379032"/><code>cycle()</code> is an infinite iterator, cycling through its arguments:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">itertools</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">item</code> <code class="ow">in</code> <code class="n">itertools</code><code class="o">.</code><code class="n">cycle</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">]):</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">item</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">1</code>&#13;
<code class="go">2</code>&#13;
<code class="go">1</code>&#13;
<code class="go">2</code>&#13;
<code class="go">.</code>&#13;
<code class="go">.</code>&#13;
<code class="go">.</code></pre>&#13;
&#13;
<p>And, so on.</p>&#13;
&#13;
<p><a data-primary="accumulate() function" data-type="indexterm" id="idm45794992280824"/><code>accumulate()</code> calculates accumulated values.&#13;
By default, it calculates the sum:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">itertools</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">item</code> <code class="ow">in</code> <code class="n">itertools</code><code class="o">.</code><code class="n">accumulate</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">]):</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">item</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">1</code>&#13;
<code class="go">3</code>&#13;
<code class="go">6</code>&#13;
<code class="go">10</code></pre>&#13;
&#13;
<p>You can provide a function as the second argument to&#13;
<code>accumulate()</code>, and it will be used instead of addition.&#13;
The function should take two arguments and return&#13;
a single result.  This example&#13;
calculates an accumulated product:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">itertools</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">def</code> <code class="nf">multiply</code><code class="p">(</code><code class="n">a</code><code class="p">,</code> <code class="n">b</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">return</code> <code class="n">a</code> <code class="o">*</code> <code class="n">b</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">item</code> <code class="ow">in</code> <code class="n">itertools</code><code class="o">.</code><code class="n">accumulate</code><code class="p">([</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">],</code> <code class="n">multiply</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">item</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">1</code>&#13;
<code class="go">2</code>&#13;
<code class="go">6</code>&#13;
<code class="go">24</code></pre>&#13;
&#13;
<p>The <code>itertools</code> module has many more functions,&#13;
notably some for&#13;
combinations and permutations&#13;
that can be time savers when the need arises.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Print Nicely with pprint()" data-type="sect2"><div class="sect2" id="pprint">&#13;
<h2>Print Nicely with pprint()</h2>&#13;
&#13;
<p><a data-primary="pprint() function" data-type="indexterm" id="idm45794992084984"/><a data-primary="pretty printer" data-type="indexterm" id="idm45794992084280"/><a data-primary="Python standard library" data-secondary="pretty printer" data-type="indexterm" id="idm45794992083608"/>All of our examples have used <code>print()</code>&#13;
(or just the variable name, in the interactive&#13;
interpreter)&#13;
to print things.&#13;
Sometimes, the results are hard to read.&#13;
We need a <em>pretty printer</em> such as <code>pprint()</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">pprint</code> <code class="kn">import</code> <code class="n">pprint</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">quotes</code> <code class="o">=</code> <code class="n">OrderedDict</code><code class="p">([</code>&#13;
<code class="gp">... </code>    <code class="p">(</code><code class="s">'Moe'</code><code class="p">,</code> <code class="s">'A wise guy, huh?'</code><code class="p">),</code>&#13;
<code class="gp">... </code>    <code class="p">(</code><code class="s">'Larry'</code><code class="p">,</code> <code class="s">'Ow!'</code><code class="p">),</code>&#13;
<code class="gp">... </code>    <code class="p">(</code><code class="s">'Curly'</code><code class="p">,</code> <code class="s">'Nyuk nyuk!'</code><code class="p">),</code>&#13;
<code class="gp">... </code>    <code class="p">])</code>&#13;
<code class="go">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>Plain old <code>print()</code> just dumps things out there:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">quotes</code><code class="p">)</code>&#13;
<code class="go">OrderedDict([('Moe', 'A wise guy, huh?'), ('Larry', 'Ow!'),</code>&#13;
<code class="go">    ('Curly', 'Nyuk nyuk!')])</code></pre>&#13;
&#13;
<p>However, <code>pprint()</code> tries to align elements for better readability:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">pprint</code><code class="p">(</code><code class="n">quotes</code><code class="p">)</code>&#13;
<code class="go">{'Moe': 'A wise guy, huh?',</code>&#13;
<code class="go"> 'Larry': 'Ow!',</code>&#13;
<code class="go"> 'Curly': 'Nyuk nyuk!'}</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Get Random" data-type="sect2"><div class="sect2" id="random">&#13;
<h2>Get Random</h2>&#13;
&#13;
<p><a data-primary="random numbers" data-type="indexterm" id="idm45794992003896"/>We played with <code>random.choice()</code> at the beginning of this chapter.&#13;
That returns a value from the sequence&#13;
(list, tuple, dictionary, string)&#13;
argument that it’s given:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">random</code> <code class="kn">import</code> <code class="n">choice</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">choice</code><code class="p">([</code><code class="mi">23</code><code class="p">,</code> <code class="mi">9</code><code class="p">,</code> <code class="mi">46</code><code class="p">,</code> <code class="s">'bacon'</code><code class="p">,</code> <code class="mh">0x123abc</code><code class="p">])</code>&#13;
<code class="go">1194684</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">choice</code><code class="p">(</code> <code class="p">(</code><code class="s">'a'</code><code class="p">,</code> <code class="s">'one'</code><code class="p">,</code> <code class="s">'and-a'</code><code class="p">,</code> <code class="s">'two'</code><code class="p">)</code> <code class="p">)</code>&#13;
<code class="go">'one'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">choice</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="mi">100</code><code class="p">))</code>&#13;
<code class="go">68</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">choice</code><code class="p">(</code><code class="s">'alphabet'</code><code class="p">)</code>&#13;
<code class="go">'l'</code></pre>&#13;
&#13;
<p><a data-primary="sample() function" data-type="indexterm" id="idm45794991939976"/>Use the <code>sample()</code> function to get more than one&#13;
value at a time:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">random</code> <code class="kn">import</code> <code class="n">sample</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">sample</code><code class="p">([</code><code class="mi">23</code><code class="p">,</code> <code class="mi">9</code><code class="p">,</code> <code class="mi">46</code><code class="p">,</code> <code class="s">'bacon'</code><code class="p">,</code> <code class="mh">0x123abc</code><code class="p">],</code> <code class="mi">3</code><code class="p">)</code>&#13;
<code class="go">[1194684, 23, 9]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">sample</code><code class="p">((</code><code class="s">'a'</code><code class="p">,</code> <code class="s">'one'</code><code class="p">,</code> <code class="s">'and-a'</code><code class="p">,</code> <code class="s">'two'</code><code class="p">),</code> <code class="mi">2</code><code class="p">)</code>&#13;
<code class="go">['two', 'and-a']</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">sample</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="mi">100</code><code class="p">),</code> <code class="mi">4</code><code class="p">)</code>&#13;
<code class="go">[54, 82, 10, 78]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">sample</code><code class="p">(</code><code class="s">'alphabet'</code><code class="p">,</code> <code class="mi">7</code><code class="p">)</code>&#13;
<code class="go">['l', 'e', 'a', 't', 'p', 'a', 'b']</code></pre>&#13;
&#13;
<p><a data-primary="randint() function" data-type="indexterm" id="idm45794991857592"/><a data-primary="range() function" data-type="indexterm" id="idm45794991797832"/>To get a random integer from any range,&#13;
you can use <code>choice()</code> or <code>sample()</code> with <code>range()</code>,&#13;
or use <code>randint()</code> or <code>randrange()</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">random</code> <code class="kn">import</code> <code class="n">randint</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">randint</code><code class="p">(</code><code class="mi">38</code><code class="p">,</code> <code class="mi">74</code><code class="p">)</code>&#13;
<code class="go">71</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">randint</code><code class="p">(</code><code class="mi">38</code><code class="p">,</code> <code class="mi">74</code><code class="p">)</code>&#13;
<code class="go">60</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">randint</code><code class="p">(</code><code class="mi">38</code><code class="p">,</code> <code class="mi">74</code><code class="p">)</code>&#13;
<code class="go">61</code></pre>&#13;
&#13;
<p><a data-primary="randrange() function" data-type="indexterm" id="idm45794991765176"/><code>randrange()</code>, like <code>range()</code>,&#13;
has arguments for the start (inclusive)&#13;
and end (exclusive) integers,&#13;
and an optional integer step:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">random</code> <code class="kn">import</code> <code class="n">randrange</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">randrange</code><code class="p">(</code><code class="mi">38</code><code class="p">,</code> <code class="mi">74</code><code class="p">)</code>&#13;
<code class="go">65</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">randrange</code><code class="p">(</code><code class="mi">38</code><code class="p">,</code> <code class="mi">74</code><code class="p">,</code> <code class="mi">10</code><code class="p">)</code>&#13;
<code class="go">68</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">randrange</code><code class="p">(</code><code class="mi">38</code><code class="p">,</code> <code class="mi">74</code><code class="p">,</code> <code class="mi">10</code><code class="p">)</code>&#13;
<code class="go">48</code></pre>&#13;
&#13;
<p>Finally, get a random real number (a float)&#13;
between 0.0 and 1.0:<a data-startref="ix_ch11-modules-asciidoc4" data-type="indexterm" id="idm45794991624232"/></p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">random</code> <code class="kn">import</code> <code class="n">random</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">random</code><code class="p">()</code>&#13;
<code class="go">0.07193393312692198</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">random</code><code class="p">()</code>&#13;
<code class="go">0.7403243673826271</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">random</code><code class="p">()</code>&#13;
<code class="go">0.9716517846775018</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="More Batteries: Get Other Python Code" data-type="sect1"><div class="sect1" id="other_python">&#13;
<h1>More Batteries: Get Other Python Code</h1>&#13;
&#13;
<p><a data-primary="Python standard library" data-secondary="third-party alternatives to" data-type="indexterm" id="idm45794991599208"/>Sometimes, the standard library doesn’t have what you need,&#13;
or doesn’t do it in quite the right way.&#13;
There’s an entire world of open source,&#13;
third-party Python software.&#13;
Good resources include the following:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><a href="http://pypi.python.org">PyPi</a>&#13;
(also known as the Cheese Shop, after an old Monty Python skit)</p>&#13;
</li>&#13;
<li>&#13;
<p><a href="https://github.com/Python">GitHub</a></p>&#13;
</li>&#13;
<li>&#13;
<p><a href="https://readthedocs.org">readthedocs</a></p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>You can find many smaller code examples at <a href="https://oreil.ly/clMAi">activestate</a>.</p>&#13;
&#13;
<p>Almost all of the Python code in this book uses&#13;
the standard Python installation on your computer,&#13;
which includes all the built-ins and the standard library.&#13;
External packages are featured in some places:&#13;
I mentioned <code>requests</code> in <a data-type="xref" href="ch01.html#ch_intro">Chapter 1</a>; I have more details in <a data-type="xref" href="ch18.html#ch_web">Chapter 18</a>.&#13;
<a data-type="xref" href="app02.html#app_install">Appendix B</a> shows how to&#13;
install third-party Python software,&#13;
along with many other&#13;
nuts-and-bolts development details.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Coming Up" data-type="sect1"><div class="sect1" id="idm45794991639672">&#13;
<h1>Coming Up</h1>&#13;
&#13;
<p>The next chapter is a practical one, covering&#13;
many aspects of data manipulation in Python.&#13;
You’ll encounter the binary <em>bytes</em> and <em>bytearray</em> data types,&#13;
handle Unicode characters in text strings,&#13;
and search text strings with regular expressions.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Things to Do" data-type="sect1"><div class="sect1" id="idm45794991636984">&#13;
<h1>Things to Do</h1>&#13;
&#13;
<p>11.1&#13;
<a data-primary="modules" data-secondary="practice exercises" data-type="indexterm" id="idm45794991635192"/><a data-primary="packages" data-secondary="practice exercises" data-type="indexterm" id="idm45794991634184"/>Create a file called <em>zoo.py</em>.&#13;
In it, define a function called <code>hours()</code> that&#13;
prints the string <code>'Open 9-5 daily'</code>.&#13;
Then, use the interactive interpreter to&#13;
import the <code>zoo</code> module and call its <code>hours()</code> function.</p>&#13;
&#13;
<p>11.2&#13;
In the interactive interpreter,&#13;
import the <code>zoo</code> module as <code>menagerie</code> and call its <code>hours()</code> function.</p>&#13;
&#13;
<p>11.3&#13;
Staying in the interpreter,&#13;
import the <code>hours()</code> function from <code>zoo</code> directly and call it.</p>&#13;
&#13;
<p>11.4&#13;
Import the <code>hours()</code> function as <code>info</code> and call it.</p>&#13;
&#13;
<p>11.5&#13;
Make a dictionary called <code>plain</code> with the key-value pairs&#13;
<code>'a': 1</code>, <code>'b': 2</code>, and <code>'c': 3</code>, and then print it.</p>&#13;
&#13;
<p>11.6&#13;
Make an <code>OrderedDict</code> called <code>fancy</code> from&#13;
the same pairs listed in&#13;
the previous question and print it.&#13;
Did it print in the same order as <code>plain</code>?</p>&#13;
&#13;
<p>11.7&#13;
Make a <code>defaultdict</code> called <code>dict_of_lists</code>&#13;
and pass it the argument <code>list</code>.&#13;
Make the list <code>dict_of_lists['a']</code> and&#13;
append the value <code>'something for a'</code> to it in one assignment.&#13;
Print <code>dict_of_lists['a']</code>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<div data-type="footnotes"><p data-type="footnote" id="idm45794994198296"><sup><a href="ch11.html#idm45794994198296-marker">1</a></sup> At least, a little less readable than it already is.</p><p data-type="footnote" id="idm45794993539736"><sup><a href="ch11.html#idm45794993539736-marker">2</a></sup> Or am I? Bwa ha ha.</p></div></div></section></body></html>