<html><head></head><body><section class="pagenumrestart" data-pdf-bookmark="Chapter 1. Python Essentials for DevOps" data-type="chapter" epub:type="chapter"><div class="chapter" id="python_essentials_for_devops">&#13;
<h1><span class="label">Chapter 1. </span>Python Essentials for DevOps</h1>&#13;
&#13;
&#13;
<p><a data-primary="Python (basics)" data-type="indexterm" id="ix_ch01-asciidoc0"/>DevOps, the combination of software development with information technology operations, has been a hot field during the last decade. Traditional boundaries among software development, deployment, maintenance, and quality assurance have been broken, enabling more integrated teams. Python has been a popular language both in traditional IT operations and in DevOps due to its combination of flexibility, power, and ease of use.</p>&#13;
&#13;
<p>The Python programming language was publicly released in the early 1990s for use in system administration. It has been a great success in this area and has gained wide adoption. Python is a general-purpose programming language used in just about every domain. The visual effects and the motion picture industries embraced it. More recently, it has become the de facto language of data science and machine learning (ML).&#13;
It has been used across industries from aviation to bioinformatics. Python has an extensive arsenal of tools to cover the wide-ranging needs of its users. Learning the whole Python Standard Library (the capabilities that come with any Python installation) would be a daunting task. Trying to learn all the third-party packages that enliven the Python ecosystem would be an immense undertaking. The good news is that you don’t need to do those things. You can become a powerful DevOps practitioner by learning only a small subset of Python.</p>&#13;
&#13;
<p>In this chapter, we draw on our decades of Python DevOps experience to teach only the elements of the language that you need.&#13;
 These are the parts of Python DevOps that are used daily. They form the essential toolbox to get things done. Once you have these core concepts down, you can add more complicated tools, as you’ll see in later chapters.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Installing and Running Python" data-type="sect1"><div class="sect1" id="idm46691364733000">&#13;
<h1>Installing and Running Python</h1>&#13;
&#13;
<p><a data-primary="Python (basics)" data-secondary="installing/running" data-type="indexterm" id="idm46691364731544"/>If you want to try the code in this overview, you need Python 3.7  or later installed (the latest release is 3.8.0 as of this writing) and access to a shell. In macOS X, Windows, and most Linux distributions, you can open the terminal application to access a shell.  To see what version of Python you are using, open a shell, and type <code>python</code> <span class="keep-together"><code>--version</code></span>:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting"><code class="nv">$ </code>python --version&#13;
Python 3.8.0</pre>&#13;
&#13;
<p>Python installers can be downloaded directly from the <a href="https://www.python.org/downloads">Python.org website</a>. Alternatively, you can use a package manager such as Apt, RPM, MacPorts, Homebrew, Chocolatey, or many others.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="The Python Shell" data-type="sect2"><div class="sect2" id="idm46691368368904">&#13;
<h2>The Python Shell</h2>&#13;
&#13;
<p><a data-primary="Python (basics)" data-secondary="Python shell" data-type="indexterm" id="idm46691368181000"/><a data-primary="Python shell" data-type="indexterm" id="idm46691363853592"/>The simplest way to run Python is to use the built-in interactive interpreter. Just type <code>python</code> in a shell. You can then interactively run Python statements. Type <code>exit()</code> to exit the shell.</p>&#13;
&#13;
<pre data-type="programlisting">$ python&#13;
Python 3.8.0 (default, Sep 23 2018, 09:47:03)&#13;
[Clang 9.0.0 (clang-900.0.38)] on darwin&#13;
Type "help", "copyright", "credits" or "license" for more information.&#13;
&gt;&gt;&gt; 1 + 2&#13;
3&#13;
&gt;&gt;&gt; exit()</pre>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Python scripts" data-type="sect3"><div class="sect3" id="idm46691359450568">&#13;
<h3>Python scripts</h3>&#13;
&#13;
<p><a data-primary="Python (basics)" data-secondary="Python scripts" data-type="indexterm" id="idm46691358141224"/>Python code runs from a file with the <em>.py</em> extension:</p>&#13;
&#13;
<pre data-type="programlisting"># This is my first Python script&#13;
print('Hello world!')</pre>&#13;
&#13;
<p>Save this code to a file named <em>hello.py</em>. To invoke the script, in a shell run <code>python</code> followed by the filename:</p>&#13;
&#13;
<pre data-type="programlisting">$ python hello.py&#13;
Hello world!</pre>&#13;
&#13;
<p>Python scripts are how most production Python code runs.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="IPython" data-type="sect3"><div class="sect3" id="idm46691363157288">&#13;
<h3>IPython</h3>&#13;
&#13;
<p><a data-primary="IPython" data-type="indexterm" id="idm46691363305704"/><a data-primary="Python (basics)" data-secondary="IPython" data-type="indexterm" id="idm46691359382712"/>Besides the built-in interactive shell, several third-party interactive shells run Python code. One of the most popular is <a href="https://ipython.org">IPython</a>. IPython offers <em>introspection</em> (the ability to dynamically get information about objects), syntax highlighting, special <em>magic</em> commands (which we touch on later in this chapter), and many more features, making it a pleasure to use for exploring Python. To install IPython, use the Python package manager, <code>pip</code>:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting"><code class="nv">$ </code>pip install ipython</pre>&#13;
&#13;
<p>Running is similar to running the built-in interactive shell described in the previous section:</p>&#13;
&#13;
<pre data-type="programlisting">$ ipython&#13;
Python 3.8.0 (default, Sep 23 2018, 09:47:03)&#13;
Type 'copyright', 'credits' or 'license' for more information&#13;
IPython 7.5.0 -- An enhanced Interactive Python. Type '?' for help.&#13;
In [1]: print('Hello')&#13;
Hello&#13;
&#13;
In [2]: exit()</pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Jupyter Notebooks" data-type="sect2"><div class="sect2" id="idm46691368333448">&#13;
<h2>Jupyter Notebooks</h2>&#13;
&#13;
<p><a data-primary="Jupyter Notebooks" data-type="indexterm" id="idm46691362227736"/><a data-primary="Python (basics)" data-secondary="Jupyter Notebooks" data-type="indexterm" id="idm46691363794520"/>A spin-off from the iPython project, the Jupyter project allows documents containing text, code, and visualizations. These documents are powerful tools for combining running code, output, and formatted text. Jupyter enables the delivery of documentation along with the code. It has achieved widespread popularity, especially in the data science world. Here is how to install and run Jupyter notebooks:</p>&#13;
&#13;
<pre data-code-language="bash" data-type="programlisting"><code class="nv">$ </code>pip install jupyter&#13;
<code class="nv">$ </code>jupyter notebook</pre>&#13;
&#13;
<p>This command opens a web browser tab showing the current working directory. From here, you can open existing notebooks in the current project or create new ones.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Procedural Programming" data-type="sect1"><div class="sect1" id="idm46691362914872">&#13;
<h1>Procedural Programming</h1>&#13;
&#13;
<p><a data-primary="Python (basics)" data-secondary="procedural programming" data-type="indexterm" id="ix_ch01-asciidoc1"/>If you’ve been around programming at all, you’ve probably heard terms like object-oriented programming (OOP) and functional programming. These are different architectural paradigms used to organize programs. One of the most basic paradigms, procedural programming, is an excellent place to start. <em>Procedural programming</em> is the issuing of instructions to a computer in an ordered sequence:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">i</code> <code class="o">=</code> <code class="mi">3</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">j</code> <code class="o">=</code> <code class="n">i</code> <code class="o">+</code><code class="mi">1</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">i</code> <code class="o">+</code> <code class="n">j</code>&#13;
<code class="mi">7</code></pre>&#13;
&#13;
<p>As you can see in this example, there are three statements that are executed in order from the first line to the last. Each statement uses the state produced by the previous ones. In this case, the first statement assigns the value 3 to a variable named <code>i</code>. In the second statement, this variable’s value is used to assign a value to a variable named <code>j</code>, and in the third statement, the values from both variables are added together. Don’t worry about the details of these statements yet; notice that they are executed in order and rely on the state created by the previous statements.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Variables" data-type="sect2"><div class="sect2" id="idm46691363423368">&#13;
<h2>Variables</h2>&#13;
&#13;
<p><a data-primary="Python (basics)" data-secondary="variables" data-type="indexterm" id="idm46691358778136"/><a data-primary="variables" data-type="indexterm" id="idm46691364230760"/>A variable is a name that points to some value. In the previous example, the variables are <code>i</code> and <code>j</code> . Variables in Python can be assigned to new values:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">dog_name</code> <code class="o">=</code> <code class="s1">'spot'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">dog_name</code>&#13;
<code class="s1">'spot'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">dog_name</code> <code class="o">=</code> <code class="s1">'rex'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">dog_name</code>&#13;
<code class="s1">'rex'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">dog_name</code> <code class="o">=</code> <code class="s1">'t-'</code> <code class="o">+</code> <code class="n">dog_name</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">dog_name</code>&#13;
<code class="s1">'t-rex'</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>Python variables use dynamic typing. In practice, this means that they can be reassigned to values of different types or classes:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">big</code> <code class="o">=</code> <code class="s1">'large'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">big</code>&#13;
<code class="s1">'large'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">big</code> <code class="o">=</code> <code class="mi">1000</code><code class="o">*</code><code class="mi">1000</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">big</code>&#13;
<code class="mi">1000000</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">big</code> <code class="o">=</code> <code class="p">{}</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">big</code>&#13;
<code class="p">{}</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>Here the same variable is set to a string, a number, and a dictionary. Variables can be reassigned to values of any type.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Basic Math" data-type="sect2"><div class="sect2" id="idm46691363423064">&#13;
<h2>Basic Math</h2>&#13;
&#13;
<p><a data-primary="Python (basics)" data-secondary="basic math" data-type="indexterm" id="idm46691358493240"/>Basic math operations such as addition, subtraction, multiplication, and division can all be performed using built-in math operators:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="mi">1</code> <code class="o">+</code> <code class="mi">1</code>&#13;
<code class="mi">2</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="mi">3</code> <code class="o">-</code> <code class="mi">4</code>&#13;
<code class="err">–</code><code class="mi">1</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="mi">2</code><code class="o">*</code><code class="mi">5</code>&#13;
<code class="mi">10</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="mi">2</code><code class="o">/</code><code class="mi">3</code>&#13;
<code class="mf">0.6666666666666666</code></pre>&#13;
&#13;
<p>Note that a <code>//</code>  symbol is for integer division.  The symbol <code>**</code> creates an exponent, and <code>%</code> is the modulo operator:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="mi">5</code><code class="o">/</code><code class="mi">2</code>&#13;
<code class="mf">2.5</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="mi">5</code><code class="o">//</code><code class="mi">2</code>&#13;
<code class="mi">2</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="mi">3</code><code class="o">**</code><code class="mi">2</code>&#13;
<code class="mi">9</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="mi">5</code><code class="o">%</code><code class="mi">2</code>&#13;
<code class="mi">1</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Comments" data-type="sect2"><div class="sect2" id="idm46691358392152">&#13;
<h2>Comments</h2>&#13;
&#13;
<p><a data-primary="Python (basics)" data-secondary="comments" data-type="indexterm" id="idm46691358437848"/>Comments are text ignored by the Python interpreter. They are useful for documentation of code and can be mined by some services to provide standalone documentation. Single-line comments are delineated by prepending with <code>#</code>. A single-line comment can start at the beginning of a line, or at any point thereafter. Everything after the <code>#</code> is part of the comment until a new line break occurs:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"> <code class="c1"># This is a comment</code>&#13;
 <code class="mi">1</code> <code class="o">+</code> <code class="mi">1</code> <code class="c1"># This comment follows a statement</code></pre>&#13;
&#13;
<p>Multiline comments are enclosed themselves in blocks beginning and ending with either <code>"""</code> or <code>'''</code>:<a data-startref="ix_ch01-asciidoc1" data-type="indexterm" id="idm46691358388888"/></p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="sd">"""</code>&#13;
<code class="sd">This statement is a block comment.</code>&#13;
<code class="sd">It can run for multiple lines</code>&#13;
<code class="sd">"""</code>&#13;
&#13;
<code class="sd">'''</code>&#13;
<code class="sd">This statement is also a block comment</code>&#13;
<code class="sd">'''</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Built-in Functions" data-type="sect2"><div class="sect2" id="idm46691358391512">&#13;
<h2>Built-in Functions</h2>&#13;
&#13;
<p><a data-primary="Python (basics)" data-secondary="built-in functions" data-type="indexterm" id="idm46691358350344"/>Functions are statements grouped as a unit. You invoke a function by typing the function name, followed by parentheses. If the function takes arguments, the arguments appear within the parentheses.  Python has many built-in functions. Two of the most widely used built-in functions are <code>print</code> and <code>range</code>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Print" data-type="sect2"><div class="sect2" id="idm46691358383960">&#13;
<h2>Print</h2>&#13;
&#13;
<p><a data-primary="print() function" data-type="indexterm" id="idm46691358382728"/><a data-primary="Python (basics)" data-secondary="print function" data-type="indexterm" id="idm46691358382024"/>The <code>print</code> function produces output that a user of a program can view. It is less relevant in interactive environments but is a fundamental tool when writing Python scripts. In the previous example, the argument to the <code>print</code> function is written as output when the script runs:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="c1"># This is my first Python script</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s2">"Hello world!"</code><code class="p">)</code>&#13;
&#13;
<code class="err">$</code> <code class="n">python</code> <code class="n">hello</code><code class="o">.</code><code class="n">py</code>&#13;
<code class="n">Hello</code> <code class="n">world</code><code class="err">!</code></pre>&#13;
&#13;
<p><code>print</code> can be used to see the value of a variable or to give feedback as to the state of a program. <code>print</code> generally outputs the standard output stream and is visible as program output in a shell.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Range" data-type="sect2"><div class="sect2" id="idm46691358318536">&#13;
<h2>Range</h2>&#13;
&#13;
<p><a data-primary="Python (basics)" data-secondary="range function" data-type="indexterm" id="idm46691358317400"/><a data-primary="range() function" data-type="indexterm" id="idm46691358316424"/>Though <code>range</code> is a built-in function, it is technically not a function at all. It is a type representing a sequence of numbers. When calling the <code>range()</code> constructor, an object representing a sequence of numbers is returned.  Range objects count through a sequence of numbers. The <code>range</code> function takes up to three integer arguments. If only one argument appears, then the sequence is represented by the numbers from zero up to, but not including, that number. If a second argument appears, it represents the starting point, rather than the default of starting from 0. The third argument can be used to specify the step distance, and it defaults to 1.</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code>&#13;
<code class="nb">range</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="mi">10</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">list</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">))</code>&#13;
<code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">9</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">list</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="mi">10</code><code class="p">))</code>&#13;
<code class="p">[</code><code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">9</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">list</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="mi">10</code><code class="p">,</code> <code class="mi">3</code><code class="p">))</code>&#13;
<code class="p">[</code><code class="mi">5</code><code class="p">,</code> <code class="mi">8</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p><code>range</code> maintains a small memory footprint, even over extended sequences, as it only stores the start, stop, and step values. The <code>range</code> function can iterate through long sequences of numbers without performance constraints.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Execution Control" data-type="sect1"><div class="sect1" id="idm46691363744312">&#13;
<h1>Execution Control</h1>&#13;
&#13;
<p><a data-primary="execution control" data-type="indexterm" id="ix_ch01-asciidoc2"/><a data-primary="Python (basics)" data-secondary="execution control" data-type="indexterm" id="ix_ch01-asciidoc3"/>Python has many constructs to control the flow of statement execution. You can group statements you wish to run together as a block of code. These blocks can be run multiple times using <code>for</code> and <code>while</code> loops or only run under certain conditions using <code>if</code> statements, <code>while</code> loops, or <code>try-except</code> blocks.  Using these constructs is the first step to taking advantage of the power of programming.&#13;
Different languages demarcate blocks of code using different conventions. Many languages with syntax similar to the C language (a very influential language used in writing Unix) use curly brackets around a group of statements to define a block. In Python, indentation is used to indicate a block. Statements are grouped by indentation into blocks that execute as a unit.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>The Python interpreter does not care if you use tabs or spaces to indent, as long as you are consistent. The Python style guide, <a href="https://oreil.ly/b5yU4">PEP-8</a>, however, recommends using four whitespaces for each level of indentation.</p>&#13;
</div>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="if/elif/else" data-type="sect2"><div class="sect2" id="idm46691361502312">&#13;
<h2>if/elif/else</h2>&#13;
&#13;
<p><a data-primary="execution control" data-secondary="if/elif/else statements" data-type="indexterm" id="idm46691361500872"/><a data-primary="if/elif/else statements" data-type="indexterm" id="idm46691361499896"/><code>if/elif/else</code> statements are common ways to branch between decisions in code. A block directly after an <code>if</code> statement runs if that statement evaluates to <code>True</code>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">i</code> <code class="o">=</code> <code class="mi">45</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">if</code> <code class="n">i</code> <code class="o">==</code> <code class="mi">45</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="s1">'i is 45'</code><code class="p">)</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="n">i</code> <code class="ow">is</code> <code class="mi">45</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>Here we used the <code>==</code> operator, which returns <code>True</code> if items are equal and <code>False</code> if not.&#13;
Optionally, this block can follow an <code>elif</code> or <code>else</code> statement with an accompanying block. In the case of an <code>elif</code> statement, this block only executes if the <code>elif</code> evaluates to <code>True</code>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">i</code> <code class="o">=</code> <code class="mi">35</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">if</code> <code class="n">i</code> <code class="o">==</code> <code class="mi">45</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="s1">'i is 45'</code><code class="p">)</code>&#13;
<code class="o">...</code> <code class="k">elif</code> <code class="n">i</code> <code class="o">==</code> <code class="mi">35</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="s1">'i is 35'</code><code class="p">)</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="n">i</code> <code class="ow">is</code> <code class="mi">35</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>Multiple <code>elif</code> loops can append together. If you are familiar with <code>switch</code> statements in other languages, this simulates that same behavior of choosing from multiple choices. Adding an <code>else</code> statement at the end runs a block if none of the other conditions evaluate as <code>True</code>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">i</code> <code class="o">=</code> <code class="mi">0</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">if</code> <code class="n">i</code> <code class="o">==</code> <code class="mi">45</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="s1">'i is 45'</code><code class="p">)</code>&#13;
<code class="o">...</code> <code class="k">elif</code> <code class="n">i</code> <code class="o">==</code> <code class="mi">35</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="s1">'i is 35'</code><code class="p">)</code>&#13;
<code class="o">...</code> <code class="k">elif</code> <code class="n">i</code> <code class="o">&gt;</code> <code class="mi">10</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="s1">'i is greater than 10'</code><code class="p">)</code>&#13;
<code class="o">...</code> <code class="k">elif</code> <code class="n">i</code><code class="o">%</code><code class="mi">3</code> <code class="o">==</code> <code class="mi">0</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="s1">'i is a multiple of 3'</code><code class="p">)</code>&#13;
<code class="o">...</code> <code class="k">else</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="s1">'I don'</code><code class="n">t</code> <code class="n">know</code> <code class="n">much</code> <code class="n">about</code> <code class="n">i</code><code class="o">...</code><code class="s1">')</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="n">i</code> <code class="ow">is</code> <code class="n">a</code> <code class="n">multiple</code> <code class="n">of</code> <code class="mi">3</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>You can nest <code>if</code> statements, creating blocks containing <code>if</code> statements that only execute if an outer <code>if</code> statement is <code>True</code>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">cat</code> <code class="o">=</code> <code class="s1">'spot'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">if</code> <code class="s1">'s'</code> <code class="ow">in</code> <code class="n">cat</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="s2">"Found an 's' in a cat"</code><code class="p">)</code>&#13;
<code class="o">...</code>     <code class="k">if</code> <code class="n">cat</code> <code class="o">==</code> <code class="s1">'Sheba'</code><code class="p">:</code>&#13;
<code class="o">...</code>         <code class="k">print</code><code class="p">(</code><code class="s2">"I found Sheba"</code><code class="p">)</code>&#13;
<code class="o">...</code>     <code class="k">else</code><code class="p">:</code>&#13;
<code class="o">...</code>         <code class="k">print</code><code class="p">(</code><code class="s2">"Some other cat"</code><code class="p">)</code>&#13;
<code class="o">...</code> <code class="k">else</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="s2">" a cat without 's'"</code><code class="p">)</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="n">Found</code> <code class="n">an</code> <code class="s1">'s'</code> <code class="ow">in</code> <code class="n">a</code> <code class="n">cat</code>&#13;
<code class="n">Some</code> <code class="n">other</code> <code class="n">cat</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="for Loops" data-type="sect2"><div class="sect2" id="idm46691361288824">&#13;
<h2>for Loops</h2>&#13;
&#13;
<p><a data-primary="execution control" data-secondary="for loops" data-type="indexterm" id="idm46691361238504"/><a data-primary="for loops" data-type="indexterm" id="idm46691361237496"/><code>for</code> loops allow you to repeat a block of statements (a code block) once for each member of a <em>sequence</em> (ordered group of items). As you iterate through the sequence, the current item can be accessed by the code block. One of most common uses of loops is to iterate through a <code>range</code> object to do a task a set number of times:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="k">for</code> <code class="n">i</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">):</code>&#13;
<code class="o">...</code>     <code class="n">x</code> <code class="o">=</code> <code class="n">i</code><code class="o">*</code><code class="mi">2</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="n">x</code><code class="p">)</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="mi">0</code>&#13;
<code class="mi">2</code>&#13;
<code class="mi">4</code>&#13;
<code class="mi">6</code>&#13;
<code class="mi">8</code>&#13;
<code class="mi">10</code>&#13;
<code class="mi">12</code>&#13;
<code class="mi">14</code>&#13;
<code class="mi">16</code>&#13;
<code class="mi">18</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>In this example, our block of code is as follows:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">...</code>     <code class="n">x</code> <code class="o">=</code> <code class="n">i</code><code class="o">*</code><code class="mi">2</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="n">x</code><code class="p">)</code></pre>&#13;
&#13;
<p>We repeat this code 10 times, each time assigning the variable <code>i</code> to the next number in the sequence of integers from 0–9. <code>for</code> loops can be used to iterate through any of the Python sequence types. You will see these later in this chapter.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="continue" data-type="sect3"><div class="sect3" id="idm46691361045336">&#13;
<h3>continue</h3>&#13;
&#13;
<p>The <a data-primary="continue statement" data-type="indexterm" id="idm46691361095880"/><code>continue</code> statement skips a step in a loop, jumping to the next item in the sequence:<a data-startref="ix_ch01-asciidoc3" data-type="indexterm" id="idm46691361094760"/><a data-startref="ix_ch01-asciidoc2" data-type="indexterm" id="idm46691361094056"/></p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="k">for</code> <code class="n">i</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">6</code><code class="p">):</code>&#13;
<code class="o">...</code>     <code class="k">if</code> <code class="n">i</code> <code class="o">==</code> <code class="mi">3</code><code class="p">:</code>&#13;
<code class="o">...</code>         <code class="k">continue</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="n">i</code><code class="p">)</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="mi">0</code>&#13;
<code class="mi">1</code>&#13;
<code class="mi">2</code>&#13;
<code class="mi">4</code>&#13;
<code class="mi">5</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="while Loops" data-type="sect1"><div class="sect1" id="idm46691361028584">&#13;
<h1>while Loops</h1>&#13;
&#13;
<p><a data-primary="Python (basics)" data-secondary="while loops" data-type="indexterm" id="idm46691361009768"/><a data-primary="while loops" data-type="indexterm" id="idm46691361008792"/><code>while</code> loops repeat a block as long as a condition evaluates to <code>True</code>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">count</code> <code class="o">=</code> <code class="mi">0</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">while</code> <code class="n">count</code> <code class="o">&lt;</code> <code class="mi">3</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"The count is {count}"</code><code class="p">)</code>&#13;
<code class="o">...</code>     <code class="n">count</code> <code class="o">+=</code> <code class="mi">1</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="n">The</code> <code class="n">count</code> <code class="ow">is</code> <code class="mi">0</code>&#13;
<code class="n">The</code> <code class="n">count</code> <code class="ow">is</code> <code class="mi">1</code>&#13;
<code class="n">The</code> <code class="n">count</code> <code class="ow">is</code> <code class="mi">2</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>It is essential to define a way for your loop to end. Otherwise, you will be stuck in the loop until your program crashes. One way to handle this is to define your conditional statement such that it eventually evaluates to <code>False</code>. An alternative pattern uses the <code>break</code> statement to exit a loop using a nested conditional:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">count</code> <code class="o">=</code> <code class="mi">0</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"The count is {count}"</code><code class="p">)</code>&#13;
<code class="o">...</code>     <code class="k">if</code> <code class="n">count</code> <code class="o">&gt;</code> <code class="mi">5</code><code class="p">:</code>&#13;
<code class="o">...</code>         <code class="k">break</code>&#13;
<code class="o">...</code>     <code class="n">count</code> <code class="o">+=</code> <code class="mi">1</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="n">The</code> <code class="n">count</code> <code class="ow">is</code> <code class="mi">0</code>&#13;
<code class="n">The</code> <code class="n">count</code> <code class="ow">is</code> <code class="mi">1</code>&#13;
<code class="n">The</code> <code class="n">count</code> <code class="ow">is</code> <code class="mi">2</code>&#13;
<code class="n">The</code> <code class="n">count</code> <code class="ow">is</code> <code class="mi">3</code>&#13;
<code class="n">The</code> <code class="n">count</code> <code class="ow">is</code> <code class="mi">4</code>&#13;
<code class="n">The</code> <code class="n">count</code> <code class="ow">is</code> <code class="mi">5</code>&#13;
<code class="n">The</code> <code class="n">count</code> <code class="ow">is</code> <code class="mi">6</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Handling Exceptions" data-type="sect1"><div class="sect1" id="idm46691360948648">&#13;
<h1>Handling Exceptions</h1>&#13;
&#13;
<p><a data-primary="exception handling" data-type="indexterm" id="idm46691360947608"/><a data-primary="Python (basics)" data-secondary="handling exceptions" data-type="indexterm" id="idm46691360864856"/>Exceptions are a type of error causing your program to crash if not handled (caught). Catching them with a <code>try-except</code> block allows the program to continue. These blocks are created by indenting the block in which the exception might be raised, putting a <code>try</code> statement before it and an <code>except</code> statement after it, followed by a code block that should run when the error occurs:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">thinkers</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'Plato'</code><code class="p">,</code> <code class="s1">'PlayDo'</code><code class="p">,</code> <code class="s1">'Gumby'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">try</code><code class="p">:</code>&#13;
<code class="o">...</code>         <code class="n">thinker</code> <code class="o">=</code> <code class="n">thinkers</code><code class="o">.</code><code class="n">pop</code><code class="p">()</code>&#13;
<code class="o">...</code>         <code class="k">print</code><code class="p">(</code><code class="n">thinker</code><code class="p">)</code>&#13;
<code class="o">...</code>     <code class="k">except</code> <code class="ne">IndexError</code> <code class="k">as</code> <code class="n">e</code><code class="p">:</code>&#13;
<code class="o">...</code>         <code class="k">print</code><code class="p">(</code><code class="s2">"We tried to pop too many thinkers"</code><code class="p">)</code>&#13;
<code class="o">...</code>         <code class="k">print</code><code class="p">(</code><code class="n">e</code><code class="p">)</code>&#13;
<code class="o">...</code>         <code class="k">break</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="n">Gumby</code>&#13;
<code class="n">PlayDo</code>&#13;
<code class="n">Plato</code>&#13;
<code class="n">We</code> <code class="n">tried</code> <code class="n">to</code> <code class="n">pop</code> <code class="n">too</code> <code class="n">many</code> <code class="n">thinkers</code>&#13;
<code class="n">pop</code> <code class="kn">from</code> <code class="nn">empty</code> <code class="nn">list</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>There are many built-in exceptions, such as <code>IOError</code>, <code>KeyError</code>, and <code>ImportError</code>. Many third-party packages also define their own exception classes. They indicate that something has gone very wrong, so it only pays to catch them if you are confident that the problem won’t be fatal to your software. You can specify explicitly which exception type you will catch. Ideally, you should catch the exact exception type (in our example, this was the exception <code>IndexError</code>).</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Built-in Objects" data-type="sect1"><div class="sect1" id="idm46691360734440">&#13;
<h1>Built-in Objects</h1>&#13;
&#13;
<p><a data-primary="Python (basics)" data-secondary="built-in objects" data-type="indexterm" id="ix_ch01-asciidoc4"/>In this overview, we will not be covering OOP. The Python language, however, comes with quite a few built-in classes.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="What Is an Object?" data-type="sect2"><div class="sect2" id="idm46691360731496">&#13;
<h2>What Is an Object?</h2>&#13;
&#13;
<p><a data-primary="objects" data-secondary="defined" data-type="indexterm" id="idm46691360730328"/>In OOP, data or state and functionality appear together. The essential concepts to understand when working with objects are <em>class instantiation</em>  (creating objects from classes) and <em>dot syntax</em> (the syntax for accessing an object’s attributes and methods). A class defines attributes and methods shared by its objects. Think of it as the technical drawing of a car model. The class can then be instantiated to create an instance. The instance, or object, is a single car built based on those drawings.</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="c1"># Define a class for fancy defining fancy cars</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">class</code> <code class="nc">FancyCar</code><code class="p">():</code>&#13;
<code class="o">...</code>     <code class="k">pass</code>&#13;
<code class="o">...</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">type</code><code class="p">(</code><code class="n">FancyCar</code><code class="p">)</code>&#13;
<code class="o">&lt;</code><code class="k">class</code> <code class="err">'</code><code class="nc">type</code><code class="s1">'&gt;</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="c1"># Instantiate a fancy car</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_car</code> <code class="o">=</code> <code class="n">FancyCar</code><code class="p">()</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">type</code><code class="p">(</code><code class="n">my_car</code><code class="p">)</code>&#13;
<code class="o">&lt;</code><code class="k">class</code> <code class="err">'</code><code class="nc">__main__</code><code class="o">.</code><code class="n">FancyCar</code><code class="s1">'&gt;</code></pre>&#13;
&#13;
<p>You don’t need to worry about creating your own classes at this point. Just understand that each object is an instantiation of a class.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Object Methods and Attributes" data-type="sect2"><div class="sect2" id="idm46691360689448">&#13;
<h2>Object Methods and Attributes</h2>&#13;
&#13;
<p><a data-primary="objects" data-secondary="methods and attributes" data-type="indexterm" id="idm46691360688328"/>Objects store data in attributes. These attributes are variables attached to the object or object class. Objects define functionality in <em>object methods</em> (methods defined for all objects in a class) and <em>class methods</em> (methods attached to a class and shared by all objects in the class), which are functions attached to the object.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>In Python documentation, functions attached to objects and classes are referred to as methods.</p>&#13;
</div>&#13;
&#13;
<p>These functions have access to the object’s attributes and can modify and use the object’s data. To call an object’s method or access one of its attributes, we use dot <span class="keep-together">syntax:</span></p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="c1"># Define a class for fancy defining fancy cars</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">class</code> <code class="nc">FancyCar</code><code class="p">():</code>&#13;
<code class="o">...</code>     <code class="c1"># Add a class variable</code>&#13;
<code class="o">...</code>     <code class="n">wheels</code> <code class="o">=</code> <code class="mi">4</code>&#13;
<code class="o">...</code>     <code class="c1"># Add a method</code>&#13;
<code class="o">...</code>     <code class="k">def</code> <code class="nf">driveFast</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="o">...</code>         <code class="k">print</code><code class="p">(</code><code class="s2">"Driving so fast"</code><code class="p">)</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="c1"># Instantiate a fancy car</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_car</code> <code class="o">=</code> <code class="n">FancyCar</code><code class="p">()</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="c1"># Access the class attribute</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_car</code><code class="o">.</code><code class="n">wheels</code>&#13;
<code class="mi">4</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="c1"># Invoke the method</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_car</code><code class="o">.</code><code class="n">driveFast</code><code class="p">()</code>&#13;
<code class="n">Driving</code> <code class="n">so</code> <code class="n">fast</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>So here our <code>FancyCar</code> class defines a method called <code>driveFast</code> and an attribute <code>wheels</code>. When you instantiate an instance  of <code>FancyCar</code> named <code>my_car</code>, you can access the attribute and invoke the method using the dot syntax.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Sequences" data-type="sect2"><div class="sect2" id="idm46691360554728">&#13;
<h2>Sequences</h2>&#13;
&#13;
<p><a data-primary="objects" data-secondary="sequences" data-type="indexterm" id="ix_ch01-asciidoc5"/><a data-primary="sequences" data-type="indexterm" id="ix_ch01-asciidoc6"/>Sequences are a family of built-in types, including the <em>list</em>, <em>tuple</em>, <em>range</em>, <em>string</em>, and <em>binary</em> types. Sequences represent ordered and finite collections of items.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Sequence operations" data-type="sect3"><div class="sect3" id="idm46691360548568">&#13;
<h3>Sequence operations</h3>&#13;
&#13;
<p><a data-primary="objects" data-secondary="sequences" data-type="indexterm" id="idm46691360546968"/><a data-primary="sequence operations" data-type="indexterm" id="idm46691360545992"/><a data-primary="sequences" data-secondary="operations" data-type="indexterm" id="idm46691360545320"/>There are many operations that work across all of the types of sequences. We cover some of the most commonly used operations here.</p>&#13;
&#13;
<p>You can use the <code>in</code> and <code>not in</code> operators to test whether or not an item exists in a sequence:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="mi">2</code> <code class="ow">in</code> <code class="p">[</code><code class="mi">1</code><code class="p">,</code><code class="mi">2</code><code class="p">,</code><code class="mi">3</code><code class="p">]</code>&#13;
<code class="bp">True</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s1">'a'</code> <code class="ow">not</code> <code class="ow">in</code> <code class="s1">'cat'</code>&#13;
<code class="bp">False</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="mi">10</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">12</code><code class="p">)</code>&#13;
<code class="bp">True</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="mi">10</code> <code class="ow">not</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="mi">4</code><code class="p">)</code>&#13;
<code class="bp">True</code></pre>&#13;
&#13;
<p>You can reference the contents of a sequence by using its index number. To access the item at some index, use square brackets with the index number as an argument. The first item indexed is at position 0, the second at 1, and so forth up to the number one less than the number of items:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code> <code class="o">=</code> <code class="s1">'Bill Cheatham'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code>&#13;
<code class="s1">'B'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="p">[</code><code class="mi">2</code><code class="p">]</code>&#13;
<code class="s1">'l'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="p">[</code><code class="mi">12</code><code class="p">]</code>&#13;
<code class="s1">'m'</code></pre>&#13;
&#13;
<p>Indexing can appear from the end of a sequence rather than from the front using negative numbers. The last item has the index of –1, the second to last has the index of –2, and so forth:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code> <code class="o">=</code> <code class="s2">"Bill Cheatham"</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="p">[</code><code class="err">–</code><code class="mi">1</code><code class="p">]</code>&#13;
<code class="s1">'m'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="p">[</code><code class="err">–</code><code class="mi">2</code><code class="p">]</code>&#13;
<code class="s1">'a'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="p">[</code><code class="err">–</code><code class="mi">13</code><code class="p">]</code>&#13;
<code class="s1">'B'</code></pre>&#13;
&#13;
<p>The index of an item results from the <code>index</code> method. By default, it returns the index of the first occurrence of the item, but optional arguments can define a subrange in which to search:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code> <code class="o">=</code> <code class="s2">"Bill Cheatham"</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="o">.</code><code class="n">index</code><code class="p">(</code><code class="s1">'C'</code><code class="p">)</code>&#13;
<code class="mi">5</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="o">.</code><code class="n">index</code><code class="p">(</code><code class="s1">'a'</code><code class="p">)</code>&#13;
<code class="mi">8</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="o">.</code><code class="n">index</code><code class="p">(</code><code class="s1">'a'</code><code class="p">,</code><code class="mi">9</code><code class="p">,</code> <code class="mi">12</code><code class="p">)</code>&#13;
<code class="mi">11</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="p">[</code><code class="mi">11</code><code class="p">]</code>&#13;
<code class="s1">'a'</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>You can produce a new sequence from a sequence using slicing. A slice appears by invoking a sequence with brackets containing optional <code>start</code>, <code>stop</code>, and <code>step</code> <span class="keep-together">arguments:</span></p>&#13;
<pre>my_sequence[start:stop:step]</pre>&#13;
&#13;
<p><code>start</code> is the index of the first item to use in the new sequence, <code>stop</code> the first index beyond that point, and <code>step</code>, the distance between items. These arguments are all optional and are replaced with default values if omitted. This statement produces a copy of the original sequence. The default value for <code>start</code> is 0, for <code>stop</code> is the length of the sequence, and for <code>step</code> is 1. Note that if the step does not appear, the corresponding <em>:</em> can also be dropped:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'a'</code><code class="p">,</code> <code class="s1">'b'</code><code class="p">,</code> <code class="s1">'c'</code><code class="p">,</code> <code class="s1">'d'</code><code class="p">,</code> <code class="s1">'e'</code><code class="p">,</code> <code class="s1">'f'</code><code class="p">,</code> <code class="s1">'g'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="p">[</code><code class="mi">2</code><code class="p">:</code><code class="mi">5</code><code class="p">]</code>&#13;
<code class="p">[</code><code class="s1">'c'</code><code class="p">,</code> <code class="s1">'d'</code><code class="p">,</code> <code class="s1">'e'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="p">[:</code><code class="mi">5</code><code class="p">]</code>&#13;
<code class="p">[</code><code class="s1">'a'</code><code class="p">,</code> <code class="s1">'b'</code><code class="p">,</code> <code class="s1">'c'</code><code class="p">,</code> <code class="s1">'d'</code><code class="p">,</code> <code class="s1">'e'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="p">[</code><code class="mi">3</code><code class="p">:]</code>&#13;
<code class="p">[</code><code class="s1">'d'</code><code class="p">,</code> <code class="s1">'e'</code><code class="p">,</code> <code class="s1">'f'</code><code class="p">,</code> <code class="s1">'g'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p class="pagebreak-before">Negative numbers can be used to index backward:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="p">[</code><code class="err">–</code><code class="mi">6</code><code class="p">:]</code>&#13;
<code class="p">[</code><code class="s1">'b'</code><code class="p">,</code> <code class="s1">'c'</code><code class="p">,</code> <code class="s1">'d'</code><code class="p">,</code> <code class="s1">'e'</code><code class="p">,</code> <code class="s1">'f'</code><code class="p">,</code> <code class="s1">'g'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="p">[</code><code class="mi">3</code><code class="p">:</code><code class="err">–</code><code class="mi">1</code><code class="p">]</code>&#13;
<code class="p">[</code><code class="s1">'d'</code><code class="p">,</code> <code class="s1">'e'</code><code class="p">,</code> <code class="s1">'f'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>Sequences share many operations for getting information about them and their contents.  <code>len</code> returns the length of the sequence, <code>min</code> the smallest member, <code>max</code> the largest, and <code>count</code> the number of a particular item. <code>min</code> and <code>max</code> work only on sequences with items that are comparable. Remember that these work with any sequence type:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code> <code class="o">=</code> <code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">len</code><code class="p">(</code><code class="n">my_sequence</code><code class="p">)</code>&#13;
<code class="mi">12</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">min</code><code class="p">(</code><code class="n">my_sequence</code><code class="p">)</code>&#13;
<code class="mi">0</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">max</code><code class="p">(</code><code class="n">my_sequence</code><code class="p">)</code>&#13;
<code class="mi">4</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">my_sequence</code><code class="o">.</code><code class="n">count</code><code class="p">(</code><code class="mi">1</code><code class="p">)</code>&#13;
<code class="mi">3</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Lists" data-type="sect3"><div class="sect3" id="idm46691360547944">&#13;
<h3>Lists</h3>&#13;
&#13;
<p><a data-primary="lists" data-type="indexterm" id="ix_ch01-asciidoc7"/><a data-primary="objects" data-secondary="lists" data-type="indexterm" id="ix_ch01-asciidoc8"/><a data-primary="sequences" data-secondary="lists" data-type="indexterm" id="ix_ch01-asciidoc9"/>Lists, one of the most commonly used Python data structures, represent an ordered collection of items of any type. The use of square brackets indicates a list syntax.</p>&#13;
&#13;
<p>The function <code>list()</code> can be used to create an empty list or a list based on another finite iterable object (such as another sequence):</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="nb">list</code><code class="p">()</code>&#13;
<code class="p">[]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">list</code><code class="p">(</code><code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">))</code>&#13;
<code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">9</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">list</code><code class="p">(</code><code class="s2">"Henry Miller"</code><code class="p">)</code>&#13;
<code class="p">[</code><code class="s1">'H'</code><code class="p">,</code> <code class="s1">'e'</code><code class="p">,</code> <code class="s1">'n'</code><code class="p">,</code> <code class="s1">'r'</code><code class="p">,</code> <code class="s1">'y'</code><code class="p">,</code> <code class="s1">' '</code><code class="p">,</code> <code class="s1">'M'</code><code class="p">,</code> <code class="s1">'i'</code><code class="p">,</code> <code class="s1">'l'</code><code class="p">,</code> <code class="s1">'l'</code><code class="p">,</code> <code class="s1">'e'</code><code class="p">,</code> <code class="s1">'r'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>Lists created by using square brackets directly are the most common form. Items in the list need to be enumerated explicitly in this case. Remember that the items in a list can be of different types:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">empty</code> <code class="o">=</code> <code class="p">[]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">empty</code>&#13;
<code class="p">[]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">nine</code> <code class="o">=</code> <code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">9</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">nine</code>&#13;
<code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">9</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">mixed</code> <code class="o">=</code> <code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="s1">'a'</code><code class="p">,</code> <code class="n">empty</code><code class="p">,</code> <code class="s1">'WheelHoss'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">mixed</code>&#13;
<code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="s1">'a'</code><code class="p">,</code> <code class="p">[],</code> <code class="s1">'WheelHoss'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>The most efficient way to add a single item to a list is to <code>append</code> the item to the end of the list. A less efficient method, <code>insert</code>, allows you to insert an item at the index position of your choice:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'cherry'</code><code class="p">,</code> <code class="s1">'apple'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code>&#13;
<code class="p">[</code><code class="s1">'cherry'</code><code class="p">,</code> <code class="s1">'apple'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code><code class="o">.</code><code class="n">append</code><code class="p">(</code><code class="s1">'rhubarb'</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code>&#13;
<code class="p">[</code><code class="s1">'cherry'</code><code class="p">,</code> <code class="s1">'apple'</code><code class="p">,</code> <code class="s1">'rhubarb'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code><code class="o">.</code><code class="n">insert</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="s1">'cream'</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code>&#13;
<code class="p">[</code><code class="s1">'cherry'</code><code class="p">,</code> <code class="s1">'cream'</code><code class="p">,</code> <code class="s1">'apple'</code><code class="p">,</code> <code class="s1">'rhubarb'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>The contents of one list can be added to another using the <code>extend</code> method:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code>&#13;
<code class="p">[</code><code class="s1">'cherry'</code><code class="p">,</code> <code class="s1">'cream'</code><code class="p">,</code> <code class="s1">'apple'</code><code class="p">,</code> <code class="s1">'rhubarb'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">desserts</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'cookies'</code><code class="p">,</code> <code class="s1">'paste'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">desserts</code>&#13;
<code class="p">[</code><code class="s1">'cookies'</code><code class="p">,</code> <code class="s1">'paste'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">desserts</code><code class="o">.</code><code class="n">extend</code><code class="p">(</code><code class="n">pies</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">desserts</code>&#13;
<code class="p">[</code><code class="s1">'cookies'</code><code class="p">,</code> <code class="s1">'paste'</code><code class="p">,</code> <code class="s1">'cherry'</code><code class="p">,</code> <code class="s1">'cream'</code><code class="p">,</code> <code class="s1">'apple'</code><code class="p">,</code> <code class="s1">'rhubarb'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>The most efficient and common way of removing the last item from a list and returning its value is to <code>pop</code> it. An index argument can be supplied to this method, removing and returning the item at that index. This technique is less efficient, as the list needs to be re-indexed:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code>&#13;
<code class="p">[</code><code class="s1">'cherry'</code><code class="p">,</code> <code class="s1">'cream'</code><code class="p">,</code> <code class="s1">'apple'</code><code class="p">,</code> <code class="s1">'rhubarb'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code><code class="o">.</code><code class="n">pop</code><code class="p">()</code>&#13;
<code class="s1">'rhubarb'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code>&#13;
<code class="p">[</code><code class="s1">'cherry'</code><code class="p">,</code> <code class="s1">'cream'</code><code class="p">,</code> <code class="s1">'apple'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code><code class="o">.</code><code class="n">pop</code><code class="p">(</code><code class="mi">1</code><code class="p">)</code>&#13;
<code class="s1">'cream'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code>&#13;
<code class="p">[</code><code class="s1">'cherry'</code><code class="p">,</code> <code class="s1">'apple'</code><code class="p">]</code></pre>&#13;
&#13;
<p>There is also a <code>remove</code> method, which removes the first occurrence of an item.</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code><code class="o">.</code><code class="n">remove</code><code class="p">(</code><code class="s1">'apple'</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">pies</code>&#13;
<code class="p">[</code><code class="s1">'cherry'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>One of the most potent and idiomatic Python features, list comprehensions, allows you to use the functionality of a <code>for</code> loop in a single line.&#13;
 Let’s look at a simple example, starting with a <code>for</code> loop squaring all of the numbers from 0–9 and appending them to a list:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">squares</code> <code class="o">=</code> <code class="p">[]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">for</code> <code class="n">i</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">):</code>&#13;
<code class="o">...</code>     <code class="n">squared</code> <code class="o">=</code> <code class="n">i</code><code class="o">*</code><code class="n">i</code>&#13;
<code class="o">...</code>     <code class="n">squares</code><code class="o">.</code><code class="n">append</code><code class="p">(</code><code class="n">squared</code><code class="p">)</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">squares</code>&#13;
<code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">9</code><code class="p">,</code> <code class="mi">16</code><code class="p">,</code> <code class="mi">25</code><code class="p">,</code> <code class="mi">36</code><code class="p">,</code> <code class="mi">49</code><code class="p">,</code> <code class="mi">64</code><code class="p">,</code> <code class="mi">81</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>In order to replace this with a list comprehension, we do the following:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">squares</code> <code class="o">=</code> <code class="p">[</code><code class="n">i</code><code class="o">*</code><code class="n">i</code> <code class="k">for</code> <code class="n">i</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">)]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">squares</code>&#13;
<code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">9</code><code class="p">,</code> <code class="mi">16</code><code class="p">,</code> <code class="mi">25</code><code class="p">,</code> <code class="mi">36</code><code class="p">,</code> <code class="mi">49</code><code class="p">,</code> <code class="mi">64</code><code class="p">,</code> <code class="mi">81</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>Note that the functionality of the inner block is put first, followed by the <code>for</code> statement. You can also add conditionals to list comprehensions, filtering the results:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">squares</code> <code class="o">=</code> <code class="p">[</code><code class="n">i</code><code class="o">*</code><code class="n">i</code> <code class="k">for</code> <code class="n">i</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code> <code class="k">if</code> <code class="n">i</code><code class="o">%</code><code class="mi">2</code><code class="o">==</code><code class="mi">0</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">squares</code>&#13;
<code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">16</code><code class="p">,</code> <code class="mi">36</code><code class="p">,</code> <code class="mi">64</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>Other techniques for list comprehensions include nesting them and using multiple variables, but the more straightforward form shown here is the most common.<a data-startref="ix_ch01-asciidoc9" data-type="indexterm" id="idm46691351144056"/><a data-startref="ix_ch01-asciidoc8" data-type="indexterm" id="idm46691351041032"/><a data-startref="ix_ch01-asciidoc7" data-type="indexterm" id="idm46691351040424"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Strings" data-type="sect3"><div class="sect3" id="idm46691360052792">&#13;
<h3>Strings</h3>&#13;
&#13;
<p><a data-primary="strings" data-type="indexterm" id="ix_ch01-asciidoc10"/>The string sequence type is a collection of ordered characters surrounded by quotation marks. As of Python 3, strings default to using <em>UTF-8</em> encoding.</p>&#13;
&#13;
<p>You can create strings either by using the string constructor method, <code>str(),</code> or by directly enclosing the text in quotation marks:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="nb">str</code><code class="p">()</code>&#13;
<code class="s1">''</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s2">"some new string!"</code>&#13;
<code class="s1">'some new string!'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s1">'or with single quotes'</code>&#13;
<code class="s1">'or with single quotes'</code></pre>&#13;
&#13;
<p>The string constructor can be used to make strings from other objects:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">my_list</code> <code class="o">=</code> <code class="nb">list</code><code class="p">()</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">str</code><code class="p">(</code><code class="n">my_list</code><code class="p">)</code>&#13;
<code class="s1">'[]'</code></pre>&#13;
&#13;
<p class="pagebreak-before">You can create multiline strings by using triple quotes around the content:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">multi_line</code> <code class="o">=</code> <code class="s2">"""This is a</code>&#13;
<code class="s2">... multi-line string,</code>&#13;
<code class="s2">... which includes linebreaks.</code>&#13;
<code class="s2">... """</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">print</code><code class="p">(</code><code class="n">multi_line</code><code class="p">)</code>&#13;
<code class="n">This</code> <code class="ow">is</code> <code class="n">a</code>&#13;
<code class="n">multi</code><code class="o">-</code><code class="n">line</code> <code class="n">string</code><code class="p">,</code>&#13;
<code class="n">which</code> <code class="n">includes</code> <code class="n">linebreaks</code><code class="o">.</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>In addition to the methods shared by all sequences, strings have quite a few methods distinct to their class.</p>&#13;
&#13;
<p>It is relatively common for user text to have trailing or leading whitespace. If someone types " yes " in a form instead of “yes” you usually want to treat them the same. Python strings have a <code>strip</code> method just for this case. It returns a string with the whitespace removed from the beginning and end. There are also methods to remove the whitespace from only the right or left side of the string:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="nb">input</code> <code class="o">=</code> <code class="s2">"  I want more  "</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">input</code><code class="o">.</code><code class="n">strip</code><code class="p">()</code>&#13;
<code class="s1">'I want more'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">input</code><code class="o">.</code><code class="n">rstrip</code><code class="p">()</code>&#13;
<code class="s1">'  I want more'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">input</code><code class="o">.</code><code class="n">lstrip</code><code class="p">()</code>&#13;
<code class="s1">'I want more  '</code></pre>&#13;
&#13;
<p>On the other hand, if you want to add padding to a string, you can use the <code>ljust</code> or <code>rjust</code> methods. Either one pads with whitespace by default, or takes a character <span class="keep-together">argument:</span></p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">output</code> <code class="o">=</code> <code class="s1">'Barry'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">output</code><code class="o">.</code><code class="n">ljust</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code>&#13;
<code class="s1">'Barry     '</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">output</code><code class="o">.</code><code class="n">rjust</code><code class="p">(</code><code class="mi">10</code><code class="p">,</code> <code class="s1">'*'</code><code class="p">)</code>&#13;
<code class="s1">'*****Barry'</code></pre>&#13;
&#13;
<p>Sometimes you want to break a string up into a list of substrings. Perhaps you have a sentence you want to turn into a list of words, or a string of words separated by commas. The <code>split</code> method breaks a string into a list of strings. By default, it uses whitespace as the token to make the breaks. An optional argument can be used to add in another character where the split can break:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">text</code> <code class="o">=</code> <code class="s2">"Mary had a little lamb"</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">text</code><code class="o">.</code><code class="n">split</code><code class="p">()</code>&#13;
<code class="p">[</code><code class="s1">'Mary'</code><code class="p">,</code> <code class="s1">'had'</code><code class="p">,</code> <code class="s1">'a'</code><code class="p">,</code> <code class="s1">'little'</code><code class="p">,</code> <code class="s1">'lamb'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">url</code> <code class="o">=</code> <code class="s2">"gt.motomomo.io/v2/api/asset/143"</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">url</code><code class="o">.</code><code class="n">split</code><code class="p">(</code><code class="s1">'/'</code><code class="p">)</code>&#13;
<code class="p">[</code><code class="s1">'gt.motomomo.io'</code><code class="p">,</code> <code class="s1">'v2'</code><code class="p">,</code> <code class="s1">'api'</code><code class="p">,</code> <code class="s1">'asset'</code><code class="p">,</code> <code class="s1">'143'</code><code class="p">]</code></pre>&#13;
&#13;
<p>You can easily create a new string from a sequence of strings and <code>join</code> them into a single string. This method inserts a string as a separator between a list of other strings:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">items</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'cow'</code><code class="p">,</code> <code class="s1">'milk'</code><code class="p">,</code> <code class="s1">'bread'</code><code class="p">,</code> <code class="s1">'butter'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s2">" and "</code><code class="o">.</code><code class="n">join</code><code class="p">(</code><code class="n">items</code><code class="p">)</code>&#13;
<code class="s1">'cow and milk and bread and butter'</code></pre>&#13;
&#13;
<p>Changing the case of text is a common occurrence, whether it is making the case uniform for comparison or changing in preparation for user consumption. Python strings have several methods to make this an easy process:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">name</code> <code class="o">=</code> <code class="s2">"bill monroe"</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">name</code><code class="o">.</code><code class="n">capitalize</code><code class="p">()</code>&#13;
<code class="s1">'Bill monroe'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">name</code><code class="o">.</code><code class="n">upper</code><code class="p">()</code>&#13;
<code class="s1">'BILL MONROE'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">name</code><code class="o">.</code><code class="n">title</code><code class="p">()</code>&#13;
<code class="s1">'Bill Monroe'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">name</code><code class="o">.</code><code class="n">swapcase</code><code class="p">()</code>&#13;
<code class="s1">'BILL MONROE'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">name</code> <code class="o">=</code> <code class="s2">"BILL MONROE"</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">name</code><code class="o">.</code><code class="n">lower</code><code class="p">()</code>&#13;
<code class="s1">'bill monroe'</code></pre>&#13;
&#13;
<p>Python also provides methods to understand a string’s content. Whether it’s checking the case of the text, or seeing if it represents a number, there are quite a few built-in methods for interrogation. Here are just a few of the most commonly used methods:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="s2">"William"</code><code class="o">.</code><code class="n">startswith</code><code class="p">(</code><code class="s1">'W'</code><code class="p">)</code>&#13;
<code class="bp">True</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s2">"William"</code><code class="o">.</code><code class="n">startswith</code><code class="p">(</code><code class="s1">'Bill'</code><code class="p">)</code>&#13;
<code class="bp">False</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s2">"Molly"</code><code class="o">.</code><code class="n">endswith</code><code class="p">(</code><code class="s1">'olly'</code><code class="p">)</code>&#13;
<code class="bp">True</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s2">"abc123"</code><code class="o">.</code><code class="n">isalnum</code><code class="p">()</code>&#13;
<code class="bp">True</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s2">"abc123"</code><code class="o">.</code><code class="n">isalpha</code><code class="p">()</code>&#13;
<code class="bp">False</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s2">"abc"</code><code class="o">.</code><code class="n">isalnum</code><code class="p">()</code>&#13;
<code class="bp">True</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s2">"123"</code><code class="o">.</code><code class="n">isnumeric</code><code class="p">()</code>&#13;
<code class="bp">True</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s2">"Sandy"</code><code class="o">.</code><code class="n">istitle</code><code class="p">()</code>&#13;
<code class="bp">True</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s2">"Sandy"</code><code class="o">.</code><code class="n">islower</code><code class="p">()</code>&#13;
<code class="bp">False</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s2">"SANDY"</code><code class="o">.</code><code class="n">isupper</code><code class="p">()</code>&#13;
<code class="bp">True</code></pre>&#13;
&#13;
<p>You can insert content into a string and control its format at runtime.&#13;
Your program can use the values of variables or other calculated content in strings. This approach is used in both creating user-consumed text and for writing software logs.</p>&#13;
&#13;
<p>The older form of string formatting in Python comes from the C language <code>printf</code> function.&#13;
You can use the modulus operator, <code>%</code>,  to insert formatted values into a string. This technique applies to the form <code>string % values</code>,  where values can be a single nontuple or a tuple of multiple values. The string itself must have a conversion specifier for each value. The conversion specifier, at a minimum, starts with a <code>%</code> and is followed by a character representing the type of value inserted:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="s2">"</code><code class="si">%s</code><code class="s2"> + </code><code class="si">%s</code><code class="s2"> = </code><code class="si">%s</code><code class="s2">"</code> <code class="o">%</code> <code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="s2">"Three"</code><code class="p">)</code>&#13;
<code class="s1">'1 + 2 = Three'</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>Additional format arguments include the conversion specifier. For example, you can control the number of places a float, <code>%f</code>, prints:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="s2">"</code><code class="si">%.3f</code><code class="s2">"</code> <code class="o">%</code> <code class="mf">1.234567</code>&#13;
<code class="s1">'1.235'</code></pre>&#13;
&#13;
<p>This mechanism for string formatting was the dominant one in Python for years, and you encounter it in legacy code. This approach offers some compelling features, such as sharing syntax with other languages. It also has some pitfalls. In particular, due to the use of a sequence to hold the arguments, errors related to displaying <code>tuple</code> and <code>dict</code> objects are common. We recommend adopting newer formatting options, such as the string <code>format</code> method, template strings, and f-strings, to both avoid these errors and increase the simplicity and readability of your code.</p>&#13;
&#13;
<p>Python 3 introduced a new way of formatting strings using the string method <code>format</code>. This way of formatting has been backported to Python 2 as well. This specification uses curly brackets in the string to indicate replacement fields rather than the modulus-based conversion specifiers of the old-style formatting. The insert values become arguments to the string <code>format</code> method. The order of the arguments determines their placement order in the target string:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="s1">'{} comes before {}'</code><code class="o">.</code><code class="n">format</code><code class="p">(</code><code class="s1">'first'</code><code class="p">,</code> <code class="s1">'second'</code><code class="p">)</code>&#13;
<code class="s1">'first comes before second'</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>You can specify index numbers in the brackets to insert values in an order different than that in the argument list. You can also repeat a value by specifying the same index number in multiple replacement fields:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="s1">'{1} comes after {0}, but {1} comes before {2}'</code><code class="o">.</code><code class="n">format</code><code class="p">(</code><code class="s1">'first'</code><code class="p">,</code>&#13;
                                                           <code class="s1">'second'</code><code class="p">,</code>&#13;
                                                           <code class="s1">'third'</code><code class="p">)</code>&#13;
<code class="s1">'second comes after first, but second comes before third'</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>An even more powerful feature is that the insert values can be specified by name:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="s1">'''{country} is an island.</code>&#13;
<code class="s1">... {country} is off of the coast of</code>&#13;
<code class="s1">... {continent} in the {ocean}'''</code><code class="o">.</code><code class="n">format</code><code class="p">(</code><code class="n">ocean</code><code class="o">=</code><code class="s1">'Indian Ocean'</code><code class="p">,</code>&#13;
<code class="o">...</code>                                      <code class="n">continent</code><code class="o">=</code><code class="s1">'Africa'</code><code class="p">,</code>&#13;
<code class="o">...</code>                                      <code class="n">country</code><code class="o">=</code><code class="s1">'Madagascar'</code><code class="p">)</code>&#13;
<code class="s1">'Madagascar is an island.</code>&#13;
<code class="n">Madagascar</code> <code class="ow">is</code> <code class="n">off</code> <code class="n">of</code> <code class="n">the</code> <code class="n">coast</code> <code class="n">of</code>&#13;
<code class="n">Africa</code> <code class="ow">in</code> <code class="n">the</code> <code class="n">Indian</code> <code class="n">Ocean</code><code class="s1">'</code></pre>&#13;
&#13;
<p>Here a <code>dict</code> works to supply the key values for name-based replacement fields:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">values</code> <code class="o">=</code> <code class="p">{</code><code class="s1">'first'</code><code class="p">:</code> <code class="s1">'Bill'</code><code class="p">,</code> <code class="s1">'last'</code><code class="p">:</code> <code class="s1">'Bailey'</code><code class="p">}</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="s2">"Won't you come home {first} {last}?"</code><code class="o">.</code><code class="n">format</code><code class="p">(</code><code class="o">**</code><code class="n">values</code><code class="p">)</code>&#13;
<code class="s2">"Won't you come home Bill Bailey?"</code></pre>&#13;
&#13;
<p>You can also specify format specification arguments. Here they add left and right padding using <code>&gt;</code> and <code>&lt;</code>.  In the second example, we specify a character to use in the <span class="keep-together">padding:</span></p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">text</code> <code class="o">=</code> <code class="s2">"|{0:&gt;22}||{0:&lt;22}|"</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">text</code><code class="o">.</code><code class="n">format</code><code class="p">(</code><code class="s1">'O'</code><code class="p">,</code><code class="s1">'O'</code><code class="p">)</code>&#13;
<code class="s1">'|                     O||O                     |'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">text</code> <code class="o">=</code> <code class="s2">"|{0:&lt;&gt;22}||{0:&gt;&lt;22}|"</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">text</code><code class="o">.</code><code class="n">format</code><code class="p">(</code><code class="s1">'O'</code><code class="p">,</code><code class="s1">'O'</code><code class="p">)</code>&#13;
<code class="s1">'|&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;O||O&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;|'</code></pre>&#13;
&#13;
<p>Format specifications are done using <a href="https://oreil.ly/ZOFJg">the format specification mini-language</a>. Our topic also uses another type of language called <em>f-strings</em>.</p>&#13;
&#13;
<p>Python f-strings use the same formatting language as the <code>format</code> method, but offer a more straightforward and intuitive mechanism for using them. f-strings are prepended with either <em>f</em> or <em>F</em> before the first quotation mark. Like the <code>format</code> string previously described, f-strings use curly braces to demarcate replacement fields. In an f-string, however, the content of the replacement field is an expression. This approach means it can refer to variables defined in the current scope or involve calculations:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">a</code> <code class="o">=</code> <code class="mi">1</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">b</code> <code class="o">=</code> <code class="mi">2</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">f</code><code class="s2">"a is {a}, b is {b}. Adding them results in {a + b}"</code>&#13;
<code class="s1">'a is 1, b is 2. Adding them results in 3'</code></pre>&#13;
&#13;
<p>As in <code>format</code> strings, format specifications in f-strings happen within the curly brackets after the value expression and start with a <code>:</code>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">count</code> <code class="o">=</code> <code class="mi">43</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">f</code><code class="s2">"|{count:5d}"</code>&#13;
<code class="s1">'|   43'</code></pre>&#13;
&#13;
<p>The value expression can contain nested expressions, referencing variables, and expressions in the construction of the parent expression:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">padding</code> <code class="o">=</code> <code class="mi">10</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">f</code><code class="s2">"|{count:{padding}d}"</code>&#13;
<code class="s1">'|        43'</code></pre>&#13;
<div data-type="tip"><h6>Tip</h6>&#13;
<p>We highly recommend using f-strings for the majority of your string formatting. They combine the power of the specification mini-language with a simple and intuitive syntax.</p>&#13;
</div>&#13;
&#13;
<p>Template strings are designed to offer a straightforward string substitution mechanism. These built-in methods work for tasks such as internationalization, where simple word substitutions are necessary. They use <code>$</code> as a substitution character, with optional curly braces surrounding them. The characters directly following the <code>$</code> identify the value to be inserted. When the <code>substitute</code> method of the string template executes, these names are used to assign values.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Built-in types and functions are available whenever you run Python code, but to access the broader world of functionality available in the Python ecosystem, you need to use the <code>import</code> statement. This approach lets you add functionality from the Python Standard Library or third-party services into your environment. You can selectively import parts of a package by using the <code>from</code> keyword:<a data-startref="ix_ch01-asciidoc10" data-type="indexterm" id="idm46691350168888"/></p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="kn">from</code> <code class="nn">string</code> <code class="kn">import</code> <code class="n">Template</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">greeting</code> <code class="o">=</code> <code class="n">Template</code><code class="p">(</code><code class="s2">"$hello Mark Anthony"</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">greeting</code><code class="o">.</code><code class="n">substitute</code><code class="p">(</code><code class="n">hello</code><code class="o">=</code><code class="s2">"Bonjour"</code><code class="p">)</code>&#13;
<code class="s1">'Bonjour Mark Anthony'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">greeting</code><code class="o">.</code><code class="n">substitute</code><code class="p">(</code><code class="n">hello</code><code class="o">=</code><code class="s2">"Zdravstvuyte"</code><code class="p">)</code>&#13;
<code class="s1">'Zdravstvuyte Mark Anthony'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">greeting</code><code class="o">.</code><code class="n">substitute</code><code class="p">(</code><code class="n">hello</code><code class="o">=</code><code class="s2">"Nǐn hǎo"</code><code class="p">)</code>&#13;
<code class="s1">'Nǐn hǎo Mark Anthony'</code></pre>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Dicts" data-type="sect3"><div class="sect3" id="idm46691350166568">&#13;
<h3>Dicts</h3>&#13;
&#13;
<p><a data-primary="dicts" data-type="indexterm" id="idm46691351037688"/><a data-primary="sequences" data-secondary="dicts" data-type="indexterm" id="idm46691350007816"/>Aside from strings and lists, dicts may be the most used of the Python built-in classes. A <em>dict</em> is a mapping of keys to values. The lookup of any particular value using a key is highly efficient and fast. The keys can be strings, numbers, custom objects, or any other nonmutable type.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>A <em>mutable</em> object is one whose contents can change in place. Lists are a primary example; the contents of the list can change without the list’s identity changing. Strings are not mutable. You create a new string each time you change the contents of an existing one.</p>&#13;
</div>&#13;
&#13;
<p>Dicts are represented as comma–separated key/value pairs surrounded by curly braces. The key/value pairs consist of a key, a colon (<em>:</em>), and then a value.</p>&#13;
&#13;
<p>You can create a dict object using the <code>dict()</code> constructor. With no arguments, it creates an empty dict. It takes a sequence of key/value pairs as an argument as well:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code> <code class="o">=</code> <code class="nb">dict</code><code class="p">()</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">type</code><code class="p">(</code><code class="nb">map</code><code class="p">)</code>&#13;
<code class="o">&lt;</code><code class="k">class</code> <code class="err">'</code><code class="nc">dict</code><code class="s1">'&gt;</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code>&#13;
<code class="p">{}</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">kv_list</code> <code class="o">=</code> <code class="p">[[</code><code class="s1">'key-1'</code><code class="p">,</code> <code class="s1">'value-1'</code><code class="p">],</code> <code class="p">[</code><code class="s1">'key-2'</code><code class="p">,</code> <code class="s1">'value-2'</code><code class="p">]]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">dict</code><code class="p">(</code><code class="n">kv_list</code><code class="p">)</code>&#13;
<code class="p">{</code><code class="s1">'key-1'</code><code class="p">:</code> <code class="s1">'value-1'</code><code class="p">,</code> <code class="s1">'key-2'</code><code class="p">:</code> <code class="s1">'value-2'</code><code class="p">}</code></pre>&#13;
&#13;
<p>You can also create a <em>dict</em> directly using curly braces:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code> <code class="o">=</code> <code class="p">{</code><code class="s1">'key-1'</code><code class="p">:</code> <code class="s1">'value-1'</code><code class="p">,</code> <code class="s1">'key-2'</code><code class="p">:</code> <code class="s1">'value-2'</code><code class="p">}</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code>&#13;
<code class="p">{</code><code class="s1">'key-1'</code><code class="p">:</code> <code class="s1">'value-1'</code><code class="p">,</code> <code class="s1">'key-2'</code><code class="p">:</code> <code class="s1">'value-2'</code><code class="p">}</code></pre>&#13;
&#13;
<p>You can access the value associated with a key using square bracket syntax:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code><code class="p">[</code><code class="s1">'key-1'</code><code class="p">]</code>&#13;
<code class="s1">'value-1'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code><code class="p">[</code><code class="s1">'key-2'</code><code class="p">]</code>&#13;
<code class="s1">'value-2'</code></pre>&#13;
&#13;
<p>You can use the same syntax to set a value. If the key is not in the dict, it adds as a new entry.   If it already exists, the value changes to the new value:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code>&#13;
<code class="p">{</code><code class="s1">'key-1'</code><code class="p">:</code> <code class="s1">'value-1'</code><code class="p">,</code> <code class="s1">'key-2'</code><code class="p">:</code> <code class="s1">'value-2'</code><code class="p">}</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code><code class="p">[</code><code class="s1">'key-3'</code><code class="p">]</code> <code class="o">=</code> <code class="s1">'value-3'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code>&#13;
<code class="p">{</code><code class="s1">'key-1'</code><code class="p">:</code> <code class="s1">'value-1'</code><code class="p">,</code> <code class="s1">'key-2'</code><code class="p">:</code> <code class="s1">'value-2'</code><code class="p">,</code> <code class="s1">'key-3'</code><code class="p">:</code> <code class="s1">'value-3'</code><code class="p">}</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code><code class="p">[</code><code class="s1">'key-1'</code><code class="p">]</code> <code class="o">=</code> <code class="mi">13</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code>&#13;
<code class="p">{</code><code class="s1">'key-1'</code><code class="p">:</code> <code class="mi">13</code><code class="p">,</code> <code class="s1">'key-2'</code><code class="p">:</code> <code class="s1">'value-2'</code><code class="p">,</code> <code class="s1">'key-3'</code><code class="p">:</code> <code class="s1">'value-3'</code><code class="p">}</code></pre>&#13;
&#13;
<p>If you try to access a key that has not been defined in a dict, a <code>KeyError</code> exception will be thrown:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code><code class="p">[</code><code class="s1">'key-4'</code><code class="p">]</code>&#13;
<code class="n">Traceback</code> <code class="p">(</code><code class="n">most</code> <code class="n">recent</code> <code class="n">call</code> <code class="n">last</code><code class="p">):</code>&#13;
  <code class="n">File</code> <code class="s2">"&lt;input&gt;"</code><code class="p">,</code> <code class="n">line</code> <code class="mi">1</code><code class="p">,</code> <code class="ow">in</code> <code class="o">&lt;</code><code class="n">module</code><code class="o">&gt;</code>&#13;
    <code class="nb">map</code><code class="p">[</code><code class="s1">'key-4'</code><code class="p">]</code>&#13;
<code class="ne">KeyError</code><code class="p">:</code> <code class="s1">'key-4'</code></pre>&#13;
&#13;
<p>You can check to see if the key exists in a dict using the <code>in</code> syntax we saw with sequences. In the case of dicts, it checks for the existence of keys:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="k">if</code> <code class="s1">'key-4'</code> <code class="ow">in</code> <code class="nb">map</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="nb">map</code><code class="p">[</code><code class="s1">'key-4'</code><code class="p">])</code>&#13;
<code class="o">...</code> <code class="k">else</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="s1">'key-4 not there'</code><code class="p">)</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="n">key</code><code class="o">-</code><code class="mi">4</code> <code class="ow">not</code> <code class="n">there</code></pre>&#13;
&#13;
<p>A more intuitive solution is to use the <code>get()</code> method. If you have not defined a key in a dict, it returns a supplied default value. If you have not supplied a default value, it returns <code>None</code>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="s1">'key-4'</code><code class="p">,</code> <code class="s1">'default-value'</code><code class="p">)</code>&#13;
<code class="s1">'default-value'</code></pre>&#13;
&#13;
<p>Use <code>del</code> to remove a key-value pair from a dict:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="k">del</code><code class="p">(</code><code class="nb">map</code><code class="p">[</code><code class="s1">'key-1'</code><code class="p">])</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code>&#13;
<code class="p">{</code><code class="s1">'key-2'</code><code class="p">:</code> <code class="s1">'value-2'</code><code class="p">,</code> <code class="s1">'key-3'</code><code class="p">:</code> <code class="s1">'value-3'</code><code class="p">}</code></pre>&#13;
&#13;
<p>The <a data-primary="keys() method" data-type="indexterm" id="idm46691349580088"/><code>keys()</code> method returns a <code>dict_keys</code> object with the dict’s keys. The <code>values()</code> method returns an <code>dict_values</code> object, and the <code>items()</code> method returns key-value pairs. This last method is useful for iterating through the contents of a dict:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code><code class="o">.</code><code class="n">keys</code><code class="p">()</code>&#13;
<code class="n">dict_keys</code><code class="p">([</code><code class="s1">'key-1'</code><code class="p">,</code> <code class="s1">'key-2'</code><code class="p">])</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">map</code><code class="o">.</code><code class="n">values</code><code class="p">()</code>&#13;
<code class="n">dict_values</code><code class="p">([</code><code class="s1">'value-1'</code><code class="p">,</code> <code class="s1">'value-2'</code><code class="p">])</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">for</code> <code class="n">key</code><code class="p">,</code> <code class="n">value</code> <code class="ow">in</code> <code class="nb">map</code><code class="o">.</code><code class="n">items</code><code class="p">():</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"{key}: {value}"</code><code class="p">)</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="n">key</code><code class="o">-</code><code class="mi">1</code><code class="p">:</code> <code class="n">value</code><code class="o">-</code><code class="mi">1</code>&#13;
<code class="n">key</code><code class="o">-</code><code class="mi">2</code><code class="p">:</code> <code class="n">value</code><code class="o">-</code><code class="mi">2</code></pre>&#13;
&#13;
<p>Similar to list comprehensions, dict comprehensions are one-line statements returning a dict by iterating through a sequence<a data-startref="ix_ch01-asciidoc6" data-type="indexterm" id="idm46691349500792"/><a data-startref="ix_ch01-asciidoc5" data-type="indexterm" id="idm46691349461400"/>:<a data-startref="ix_ch01-asciidoc4" data-type="indexterm" id="idm46691349460664"/></p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">letters</code> <code class="o">=</code> <code class="s1">'abcde'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="c1"># mapping individual letters to their upper-case representations</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">cap_map</code> <code class="o">=</code> <code class="p">{</code><code class="n">x</code><code class="p">:</code> <code class="n">x</code><code class="o">.</code><code class="n">upper</code><code class="p">()</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="n">letters</code><code class="p">}</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">cap_map</code><code class="p">[</code><code class="s1">'b'</code><code class="p">]</code>&#13;
<code class="s1">'B'</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Functions" data-type="sect1"><div class="sect1" id="idm46691349458600">&#13;
<h1>Functions</h1>&#13;
&#13;
<p><a data-primary="functions (generally)" data-type="indexterm" id="ix_ch01-asciidoc11"/><a data-primary="Python (basics)" data-secondary="functions" data-type="indexterm" id="ix_ch01-asciidoc12"/>You have seen some Python built-in functions already. Now move on to writing your own. Remember, a <em>function</em> is a mechanism for encapsulating a block of code.  You can repeat the behavior of this block in multiple spots without having to duplicate the code.  Your code will be better organized, more testable, maintainable, and easier to understand.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Anatomy of a Function" data-type="sect2"><div class="sect2" id="idm46691349394088">&#13;
<h2>Anatomy of a Function</h2>&#13;
&#13;
<p><a data-primary="functions (generally)" data-secondary="anatomy" data-type="indexterm" id="idm46691349392488"/>The first line of a function definition starts with the keyword <code>def</code>, followed by the function name, function parameters enclosed in parentheses, and then <code>:</code>. The rest of the function is a code block and is indented:</p>&#13;
<pre>def &lt;FUNCTION NAME&gt;(&lt;PARAMETERS&gt;):&#13;
    &lt;CODE BLOCK&gt;</pre>&#13;
&#13;
<p>If a string using multiline syntax is provided first in the indented block, it acts as documentation. Use these to describe what your function does, how parameters work, and what it can be expected to return. You will find these docstrings are invaluable for communicating with future users of your code. Various programs and services also use them to create documentation. Providing docstrings is considered a best practice and is highly recommended:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="k">def</code> <code class="nf">my_function</code><code class="p">():</code>&#13;
<code class="o">...</code>    <code class="s1">'''This is a doc string.</code>&#13;
<code class="s1">...</code>&#13;
<code class="s1">...    It should describe what the function does,</code>&#13;
<code class="s1">...    what parameters work, and what the</code>&#13;
<code class="s1">...    function returns.</code>&#13;
<code class="s1">...    '''</code></pre>&#13;
&#13;
<p>Function arguments occur in the parentheses following the function name. They can be either positional or keyword. Positional arguments use the order of the arguments to assign value:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="k">def</code> <code class="nf">positioned</code><code class="p">(</code><code class="n">first</code><code class="p">,</code> <code class="n">second</code><code class="p">):</code>&#13;
<code class="o">...</code>     <code class="s2">"""Assignment based on order."""</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"first: {first}"</code><code class="p">)</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"second: {second}"</code><code class="p">)</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">positioned</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">)</code>&#13;
<code class="n">first</code><code class="p">:</code> <code class="mi">1</code>&#13;
<code class="n">second</code><code class="p">:</code> <code class="mi">2</code>&#13;
<code class="o">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>With keyword arguments, assign each argument a default value:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="k">def</code> <code class="nf">keywords</code><code class="p">(</code><code class="n">first</code><code class="o">=</code><code class="mi">1</code><code class="p">,</code> <code class="n">second</code><code class="o">=</code><code class="mi">2</code><code class="p">):</code>&#13;
<code class="o">...</code>     <code class="s1">'''Default values assigned'''</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"first: {first}"</code><code class="p">)</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"second: {second}"</code><code class="p">)</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code></pre>&#13;
&#13;
<p>The default values are used when no values are passed during function invocation. The keyword parameters can be called by name during function invocation, in which case the order will not matter:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">keywords</code><code class="p">(</code><code class="mi">0</code><code class="p">)</code>&#13;
<code class="n">first</code><code class="p">:</code> <code class="mi">0</code>&#13;
<code class="n">second</code><code class="p">:</code> <code class="mi">2</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">keywords</code><code class="p">(</code><code class="mi">3</code><code class="p">,</code><code class="mi">4</code><code class="p">)</code>&#13;
<code class="n">first</code><code class="p">:</code> <code class="mi">3</code>&#13;
<code class="n">second</code><code class="p">:</code> <code class="mi">4</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">keywords</code><code class="p">(</code><code class="n">second</code><code class="o">=</code><code class="s1">'one'</code><code class="p">,</code> <code class="n">first</code><code class="o">=</code><code class="s1">'two'</code><code class="p">)</code>&#13;
<code class="n">first</code><code class="p">:</code> <code class="n">two</code>&#13;
<code class="n">second</code><code class="p">:</code> <code class="n">one</code></pre>&#13;
&#13;
<p>When using keyword parameters, all parameters defined after a keyword parameter must be keyword parameters as well.&#13;
All functions return a value. The <code>return</code> keyword is used to set this value. If not set from a function definition, the function returns <code>None</code>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="k">def</code> <code class="nf">no_return</code><code class="p">():</code>&#13;
<code class="o">...</code>     <code class="s1">'''No return defined'''</code>&#13;
<code class="o">...</code>     <code class="k">pass</code>&#13;
<code class="o">...</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">result</code> <code class="o">=</code> <code class="n">no_return</code><code class="p">()</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">print</code><code class="p">(</code><code class="n">result</code><code class="p">)</code>&#13;
<code class="bp">None</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">def</code> <code class="nf">return_one</code><code class="p">():</code>&#13;
<code class="o">...</code>     <code class="s1">'''Returns 1'''</code>&#13;
<code class="o">...</code>     <code class="k">return</code> <code class="mi">1</code>&#13;
<code class="o">...</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">result</code> <code class="o">=</code> <code class="n">return_one</code><code class="p">()</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">print</code><code class="p">(</code><code class="n">result</code><code class="p">)</code>&#13;
<code class="mi">1</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Functions as Objects" data-type="sect2"><div class="sect2" id="idm46691349393464">&#13;
<h2>Functions as Objects</h2>&#13;
&#13;
<p><a data-primary="functions (generally)" data-secondary="as objects" data-type="indexterm" id="idm46691349100760"/><a data-primary="objects" data-secondary="functions as" data-type="indexterm" id="idm46691349099816"/>Functions are objects. They can be passed around, or stored in data structures.  You can define two functions, put them in a list, and then iterate through the list to invoke them:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="k">def</code> <code class="nf">double</code><code class="p">(</code><code class="nb">input</code><code class="p">):</code>&#13;
<code class="o">...</code>     <code class="s1">'''double input'''</code>&#13;
<code class="o">...</code>     <code class="k">return</code> <code class="nb">input</code><code class="o">*</code><code class="mi">2</code>&#13;
<code class="o">...</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">double</code>&#13;
<code class="o">&lt;</code><code class="n">function</code> <code class="n">double</code> <code class="n">at</code> <code class="mh">0x107d34ae8</code><code class="o">&gt;</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">type</code><code class="p">(</code><code class="n">double</code><code class="p">)</code>&#13;
<code class="o">&lt;</code><code class="k">class</code> <code class="err">'</code><code class="nc">function</code><code class="s1">'&gt;</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">def</code> <code class="nf">triple</code><code class="p">(</code><code class="nb">input</code><code class="p">):</code>&#13;
<code class="o">...</code>     <code class="s1">'''Triple input'''</code>&#13;
<code class="o">...</code>     <code class="k">return</code> <code class="nb">input</code><code class="o">*</code><code class="mi">3</code>&#13;
<code class="o">...</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">functions</code> <code class="o">=</code> <code class="p">[</code><code class="n">double</code><code class="p">,</code> <code class="n">triple</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">for</code> <code class="n">function</code> <code class="ow">in</code> <code class="n">functions</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="n">function</code><code class="p">(</code><code class="mi">3</code><code class="p">))</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="mi">6</code>&#13;
<code class="mi">9</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Anonymous Functions" data-type="sect2"><div class="sect2" id="idm46691349096248">&#13;
<h2>Anonymous Functions</h2>&#13;
&#13;
<p><a data-primary="anonymous functions" data-type="indexterm" id="idm46691348992856"/><a data-primary="functions (generally)" data-secondary="anonymous" data-type="indexterm" id="idm46691348992376"/>When you need to create a very limited function, you can create an unnamed (anonymous) one using the <code>lambda</code> keyword.  Generally, you should limit their use to situations where a function expects a small function as a argument. In this example, you take a list of lists and sort it. The default sorting mechanism compares based on the first item of each sublist:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">items</code> <code class="o">=</code> <code class="p">[[</code><code class="mi">0</code><code class="p">,</code> <code class="s1">'a'</code><code class="p">,</code> <code class="mi">2</code><code class="p">],</code> <code class="p">[</code><code class="mi">5</code><code class="p">,</code> <code class="s1">'b'</code><code class="p">,</code> <code class="mi">0</code><code class="p">],</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="s1">'c'</code><code class="p">,</code> <code class="mi">1</code><code class="p">]]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">sorted</code><code class="p">(</code><code class="n">items</code><code class="p">)</code>&#13;
<code class="p">[[</code><code class="mi">0</code><code class="p">,</code> <code class="s1">'a'</code><code class="p">,</code> <code class="mi">2</code><code class="p">],</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="s1">'c'</code><code class="p">,</code> <code class="mi">1</code><code class="p">],</code> <code class="p">[</code><code class="mi">5</code><code class="p">,</code> <code class="s1">'b'</code><code class="p">,</code> <code class="mi">0</code><code class="p">]]</code></pre>&#13;
&#13;
<p>To sort based on something other than the first entry, you can define a method which returns the item’s second entry and pass it into the sorting function’s <code>key</code> parameter:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="k">def</code> <code class="nf">second</code><code class="p">(</code><code class="n">item</code><code class="p">):</code>&#13;
<code class="o">...</code>     <code class="s1">'''return second entry'''</code>&#13;
<code class="o">...</code>     <code class="k">return</code> <code class="n">item</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code>&#13;
<code class="o">...</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">sorted</code><code class="p">(</code><code class="n">items</code><code class="p">,</code> <code class="n">key</code><code class="o">=</code><code class="n">second</code><code class="p">)</code>&#13;
<code class="p">[[</code><code class="mi">0</code><code class="p">,</code> <code class="s1">'a'</code><code class="p">,</code> <code class="mi">2</code><code class="p">],</code> <code class="p">[</code><code class="mi">5</code><code class="p">,</code> <code class="s1">'b'</code><code class="p">,</code> <code class="mi">0</code><code class="p">],</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="s1">'c'</code><code class="p">,</code> <code class="mi">1</code><code class="p">]]</code></pre>&#13;
&#13;
<p>With the <code>lambda</code> keyword, you can do the same thing without the full function definition. Lambdas work with the <code>lambda</code> keyword followed by a parameter name, a colon, and a return value:</p>&#13;
<pre>lambda &lt;PARAM&gt;: &lt;RETURN EXPRESSION&gt;</pre>&#13;
&#13;
<p>Sort using lambdas, first using the second entry and then using the third:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="nb">sorted</code><code class="p">(</code><code class="n">items</code><code class="p">,</code> <code class="n">key</code><code class="o">=</code><code class="k">lambda</code> <code class="n">item</code><code class="p">:</code> <code class="n">item</code><code class="p">[</code><code class="mi">1</code><code class="p">])</code>&#13;
<code class="p">[[</code><code class="mi">0</code><code class="p">,</code> <code class="s1">'a'</code><code class="p">,</code> <code class="mi">2</code><code class="p">],</code> <code class="p">[</code><code class="mi">5</code><code class="p">,</code> <code class="s1">'b'</code><code class="p">,</code> <code class="mi">0</code><code class="p">],</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="s1">'c'</code><code class="p">,</code> <code class="mi">1</code><code class="p">]]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">sorted</code><code class="p">(</code><code class="n">items</code><code class="p">,</code> <code class="n">key</code><code class="o">=</code><code class="k">lambda</code> <code class="n">item</code><code class="p">:</code> <code class="n">item</code><code class="p">[</code><code class="mi">2</code><code class="p">])</code>&#13;
<code class="p">[[</code><code class="mi">5</code><code class="p">,</code> <code class="s1">'b'</code><code class="p">,</code> <code class="mi">0</code><code class="p">],</code> <code class="p">[</code><code class="mi">2</code><code class="p">,</code> <code class="s1">'c'</code><code class="p">,</code> <code class="mi">1</code><code class="p">],</code> <code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="s1">'a'</code><code class="p">,</code> <code class="mi">2</code><code class="p">]]</code></pre>&#13;
&#13;
<p>Be cautious of using lambdas more generally, as they can create code that is poorly documented and confusing to read if used in place of general functions.<a data-startref="ix_ch01-asciidoc12" data-type="indexterm" id="idm46691348813464"/><a data-startref="ix_ch01-asciidoc11" data-type="indexterm" id="idm46691348812856"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Using Regular Expressions" data-type="sect1"><div class="sect1" id="idm46691349095656">&#13;
<h1>Using Regular Expressions</h1>&#13;
&#13;
<p><a data-primary="Python (basics)" data-secondary="regular expressions" data-type="indexterm" id="ix_ch01-asciidoc13"/><a data-primary="regular expressions" data-type="indexterm" id="ix_ch01-asciidoc14"/>The need to match patterns in strings comes up again and again. You could be looking for an identifier in a log file or checking user input for keywords or a myriad of other cases. You have already seen simple pattern matching using the <code>in</code> operation for sequences, or the string <code>.endswith</code> and <code>.startswith</code> methods. To do more sophisticated matching, you need a more powerful tool. Regular expressions, often referred to as regex, are the answer. Regular expressions use a string of characters to define search patterns. The Python <code>re</code> package offers regular expression operations similar to those found in Perl. The <code>re</code> module uses backslashes (<em>\</em>) to delineate special characters used in matching. To avoid confusion with regular string escape sequences, raw strings are recommended when defining regular expression patterns. Raw strings are prepended with an <em>r</em> before the first quotation mark.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Python strings have several escape sequences. Among the most common are line-feed <code>\n</code> and tab <code>\t</code>.</p>&#13;
</div>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Searching" data-type="sect2"><div class="sect2" id="idm46691348702360">&#13;
<h2>Searching</h2>&#13;
&#13;
<p><a data-primary="regular expressions" data-secondary="searching" data-type="indexterm" id="idm46691348700888"/><a data-primary="searches, regex" data-type="indexterm" id="idm46691348699912"/>Let say you have a cc list from an email as a text and you want to understand more about who is in this list:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">1</code><code class="p">]:</code> <code class="n">cc_list</code> <code class="o">=</code> <code class="s1">'''Ezra Koenig &lt;ekoenig@vpwk.com&gt;,</code>&#13;
<code class="s1">   ...: Rostam Batmanglij &lt;rostam@vpwk.com&gt;,</code>&#13;
<code class="s1">   ...: Chris Tomson &lt;ctomson@vpwk.com,</code>&#13;
<code class="s1">   ...: Bobbi Baio &lt;bbaio@vpwk.com'''</code></pre>&#13;
&#13;
<p>If you want to know whether a name is in this text, you could use the <code>in</code> sequence membership syntax:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">2</code><code class="p">]:</code> <code class="s1">'Rostam'</code> <code class="ow">in</code> <code class="n">cc_list</code>&#13;
<code class="n">Out</code><code class="p">[</code><code class="mi">2</code><code class="p">]:</code> <code class="bp">True</code></pre>&#13;
&#13;
<p>To get similar behavior, you can use the <code>re.search</code> function, which returns a <code>re.Match</code> object only if there is a match:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">3</code><code class="p">]:</code> <code class="kn">import</code> <code class="nn">re</code>&#13;
&#13;
<code class="n">In</code> <code class="p">[</code><code class="mi">4</code><code class="p">]:</code> <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'Rostam'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="n">Out</code><code class="p">[</code><code class="mi">4</code><code class="p">]:</code> <code class="o">&lt;</code><code class="n">re</code><code class="o">.</code><code class="n">Match</code> <code class="nb">object</code><code class="p">;</code> <code class="n">span</code><code class="o">=</code><code class="p">(</code><code class="mi">32</code><code class="p">,</code> <code class="mi">38</code><code class="p">),</code> <code class="n">match</code><code class="o">=</code><code class="s1">'Rostam'</code><code class="o">&gt;</code></pre>&#13;
&#13;
<p>You can use this as a condition to test for membership:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="k">if</code> <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'Rostam'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">):</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="s1">'Found Rostam'</code><code class="p">)</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="n">Found</code> <code class="n">Rostam</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Character Sets" data-type="sect2"><div class="sect2" id="idm46691348486408">&#13;
<h2>Character Sets</h2>&#13;
&#13;
<p><a data-primary="character sets, in regex searches" data-type="indexterm" id="idm46691348482520"/><a data-primary="regular expressions" data-secondary="character sets" data-type="indexterm" id="idm46691348481656"/>So far <code>re</code> hasn’t given you anything you couldn’t get using the <code>in</code> operator. However, what if you are looking for a person in a text, but you can’t remember if the name is <em>Bobbi</em> or <em>Robby</em>?</p>&#13;
&#13;
<p>With regular expressions, you can use groups of characters, any one of which could appear in a spot. These are called character sets. The characters from which a match should be chosen are enclosed by square brackets in the regular expression definition. You can match on <em>B</em> or <em>R</em>, followed by <em>obb</em>, and either <em>i</em> or <em>y</em>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">5</code><code class="p">]:</code> <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'[R,B]obb[i,y]'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="n">Out</code><code class="p">[</code><code class="mi">5</code><code class="p">]:</code> <code class="o">&lt;</code><code class="n">re</code><code class="o">.</code><code class="n">Match</code> <code class="nb">object</code><code class="p">;</code> <code class="n">span</code><code class="o">=</code><code class="p">(</code><code class="mi">101</code><code class="p">,</code> <code class="mi">106</code><code class="p">),</code> <code class="n">match</code><code class="o">=</code><code class="s1">'Bobbi'</code><code class="o">&gt;</code></pre>&#13;
&#13;
<p>You can put comma-separated individual characters in a character set or use ranges. The range <em>A–Z</em> includes all the capitalized letters; the range <em>0–9</em> includes the digits from zero to nine:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">6</code><code class="p">]:</code> <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'Chr[a-z][a-z]'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="n">Out</code> <code class="p">[</code><code class="mi">6</code><code class="p">]:</code> <code class="o">&lt;</code><code class="n">re</code><code class="o">.</code><code class="n">Match</code> <code class="nb">object</code><code class="p">;</code> <code class="n">span</code><code class="o">=</code><code class="p">(</code><code class="mi">69</code><code class="p">,</code> <code class="mi">74</code><code class="p">),</code> <code class="n">match</code><code class="o">=</code><code class="s1">'Chris'</code><code class="o">&gt;</code></pre>&#13;
&#13;
<p>The <em>+</em> after an item in a regular expression matches one or more of that item. A number in brackets matches an exact number of characters:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">7</code><code class="p">]:</code> <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'[A-Za-z]+'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="n">Out</code> <code class="p">[</code><code class="mi">7</code><code class="p">]:</code> <code class="o">&lt;</code><code class="n">re</code><code class="o">.</code><code class="n">Match</code> <code class="nb">object</code><code class="p">;</code> <code class="n">span</code><code class="o">=</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="mi">4</code><code class="p">),</code> <code class="n">match</code><code class="o">=</code><code class="s1">'Ezra'</code><code class="o">&gt;</code>&#13;
<code class="n">In</code> <code class="p">[</code><code class="mi">8</code><code class="p">]:</code> <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'[A-Za-z]{6}'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="n">Out</code> <code class="p">[</code><code class="mi">8</code><code class="p">]:</code> <code class="o">&lt;</code><code class="n">re</code><code class="o">.</code><code class="n">Match</code> <code class="nb">object</code><code class="p">;</code> <code class="n">span</code><code class="o">=</code><code class="p">(</code><code class="mi">5</code><code class="p">,</code> <code class="mi">11</code><code class="p">),</code> <code class="n">match</code><code class="o">=</code><code class="s1">'Koenig'</code><code class="o">&gt;</code></pre>&#13;
&#13;
<p>We can construct a match using a combination of character sets and other characters to make a naive match of an email address. The <em>.</em> character has a special meaning. It is a wildcard and matches any character. To match against the actual <em>.</em> character, you must escape it using a backslash:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">9</code><code class="p">]:</code> <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'[A-Za-z]+@[a-z]+\.[a-z]+'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="n">Out</code><code class="p">[</code><code class="mi">9</code><code class="p">]:</code> <code class="o">&lt;</code><code class="n">re</code><code class="o">.</code><code class="n">Match</code> <code class="nb">object</code><code class="p">;</code> <code class="n">span</code><code class="o">=</code><code class="p">(</code><code class="mi">13</code><code class="p">,</code> <code class="mi">29</code><code class="p">),</code> <code class="n">match</code><code class="o">=</code><code class="s1">'ekoenig@vpwk.com'</code><code class="o">&gt;</code></pre>&#13;
&#13;
<p>This example is just a demonstration of character sets. It does not represent the full complexity of a production-ready regular expressions for emails.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Character Classes" data-type="sect2"><div class="sect2" id="idm46691348483240">&#13;
<h2>Character Classes</h2>&#13;
&#13;
<p><a data-primary="character classes, in regex searches" data-type="indexterm" id="idm46691348165720"/><a data-primary="regular expressions" data-secondary="character classes" data-type="indexterm" id="idm46691348164856"/>In addition to character sets, Python’s <code>re</code> offers character classes. These are premade character sets. Some commonly used ones are <code>\w</code>, which is equivalent to <code>[a-zA-Z0-9_]</code> and <code>\d</code>, which is equivalent to <code>[0-9]</code>. You can use the <em>+</em> modifier to match for multiple characters:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'\w+'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="o">&lt;</code><code class="n">re</code><code class="o">.</code><code class="n">Match</code> <code class="nb">object</code><code class="p">;</code> <code class="n">span</code><code class="o">=</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="mi">4</code><code class="p">),</code> <code class="n">match</code><code class="o">=</code><code class="s1">'Ezra'</code><code class="o">&gt;</code></pre>&#13;
&#13;
<p>And you can replace our primative email matcher with <code>\w</code>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'\w+\@\w+\.\w+'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="o">&lt;</code><code class="n">re</code><code class="o">.</code><code class="n">Match</code> <code class="nb">object</code><code class="p">;</code> <code class="n">span</code><code class="o">=</code><code class="p">(</code><code class="mi">13</code><code class="p">,</code> <code class="mi">29</code><code class="p">),</code> <code class="n">match</code><code class="o">=</code><code class="s1">'ekoenig@vpwk.com'</code><code class="o">&gt;</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Groups" data-type="sect2"><div class="sect2" id="idm46691348219416">&#13;
<h2>Groups</h2>&#13;
&#13;
<p><a data-primary="groups, defining in regex searches" data-type="indexterm" id="idm46691348126088"/><a data-primary="regular expressions" data-secondary="groups" data-type="indexterm" id="idm46691348092328"/>You can use parentheses to define groups in a match. These groups can be accessed from the match object. They are numbered in the order they appear, with the zero group being the full match:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'(\w+)\@(\w+)\.(\w+)'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="o">&lt;</code><code class="n">re</code><code class="o">.</code><code class="n">Match</code> <code class="nb">object</code><code class="p">;</code> <code class="n">span</code><code class="o">=</code><code class="p">(</code><code class="mi">13</code><code class="p">,</code> <code class="mi">29</code><code class="p">),</code> <code class="n">match</code><code class="o">=</code><code class="s1">'ekoenig@vpwk.com'</code><code class="o">&gt;</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code> <code class="o">=</code> <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'(\w+)\@(\w+)\.(\w+)'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code><code class="o">.</code><code class="n">group</code><code class="p">(</code><code class="mi">0</code><code class="p">)</code>&#13;
<code class="s1">'ekoenig@vpwk.com'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code><code class="o">.</code><code class="n">group</code><code class="p">(</code><code class="mi">1</code><code class="p">)</code>&#13;
<code class="s1">'ekoenig'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code><code class="o">.</code><code class="n">group</code><code class="p">(</code><code class="mi">2</code><code class="p">)</code>&#13;
<code class="s1">'vpwk'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code><code class="o">.</code><code class="n">group</code><code class="p">(</code><code class="mi">3</code><code class="p">)</code>&#13;
<code class="s1">'com'</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Named Groups" data-type="sect2"><div class="sect2" id="idm46691348089656">&#13;
<h2>Named Groups</h2>&#13;
&#13;
<p><a data-primary="named groups, in regex searches" data-type="indexterm" id="idm46691348088760"/><a data-primary="regular expressions" data-secondary="named groups" data-type="indexterm" id="idm46691347975800"/>You can also supply names for the groups by adding <code>?P&lt;NAME&gt;</code> in the group definition. Then you can access the groups by name instead of number:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code> <code class="o">=</code> <code class="n">re</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'(?P&lt;name&gt;\w+)\@(?P&lt;SLD&gt;\w+)\.(?P&lt;TLD&gt;\w+)'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code><code class="o">.</code><code class="n">group</code><code class="p">(</code><code class="s1">'name'</code><code class="p">)</code>&#13;
<code class="s1">'ekoenig'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s1">'''name: {matched.group("name")}</code>&#13;
<code class="s1">... Secondary Level Domain: {matched.group("SLD")}</code>&#13;
<code class="s1">... Top Level Domain: {matched.group("TLD")}'''</code><code class="p">)</code>&#13;
<code class="n">name</code><code class="p">:</code> <code class="n">ekoenig</code>&#13;
<code class="n">Secondary</code> <code class="n">Level</code> <code class="n">Domain</code><code class="p">:</code> <code class="n">vpwk</code>&#13;
<code class="n">Top</code> <code class="n">Level</code> <code class="n">Domain</code><code class="p">:</code> <code class="n">com</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Find All" data-type="sect2"><div class="sect2" id="idm46691347861992">&#13;
<h2>Find All</h2>&#13;
&#13;
<p><a data-primary="findall() command" data-type="indexterm" id="idm46691347867544"/><a data-primary="regular expressions" data-secondary="find all" data-type="indexterm" id="idm46691347866840"/>Up until now, we have demonstrated returning just the first match found. We can also use <code>findall</code> to return all of the matches as a list of strings:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code> <code class="o">=</code> <code class="n">re</code><code class="o">.</code><code class="n">findall</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'\w+\@\w+\.\w+'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code>&#13;
<code class="p">[</code><code class="s1">'ekoenig@vpwk.com'</code><code class="p">,</code> <code class="s1">'rostam@vpwk.com'</code><code class="p">,</code> <code class="s1">'ctomson@vpwk.com'</code><code class="p">,</code> <code class="s1">'cbaio@vpwk.com'</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code> <code class="o">=</code> <code class="n">re</code><code class="o">.</code><code class="n">findall</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'(\w+)\@(\w+)\.(\w+)'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code>&#13;
<code class="p">[(</code><code class="s1">'ekoenig'</code><code class="p">,</code> <code class="s1">'vpwk'</code><code class="p">,</code> <code class="s1">'com'</code><code class="p">),</code> <code class="p">(</code><code class="s1">'rostam'</code><code class="p">,</code> <code class="s1">'vpwk'</code><code class="p">,</code> <code class="s1">'com'</code><code class="p">),</code>&#13;
 <code class="p">(</code><code class="s1">'ctomson'</code><code class="p">,</code> <code class="s1">'vpwk'</code><code class="p">,</code> <code class="s1">'com'</code><code class="p">),</code> <code class="p">(</code><code class="s1">'cbaio'</code><code class="p">,</code> <code class="s1">'vpwk'</code><code class="p">,</code> <code class="s1">'com'</code><code class="p">)]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">names</code> <code class="o">=</code> <code class="p">[</code><code class="n">x</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="n">matched</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">names</code>&#13;
<code class="p">[</code><code class="s1">'ekoenig'</code><code class="p">,</code> <code class="s1">'rostam'</code><code class="p">,</code> <code class="s1">'ctomson'</code><code class="p">,</code> <code class="s1">'cbaio'</code><code class="p">]</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Find Iterator" data-type="sect2"><div class="sect2" id="idm46691347945592">&#13;
<h2>Find Iterator</h2>&#13;
&#13;
<p><a data-primary="finditer() method" data-type="indexterm" id="idm46691347782440"/><a data-primary="regular expressions" data-secondary="find iterator" data-type="indexterm" id="idm46691347781736"/>When dealing with large texts, such as logs, it is useful to not process the text all at once. You can produce an <em>iterator</em> object using the <code>finditer</code> method. This object processes text until it finds a match and then stops. Passing it to the <code>next</code> function returns the current match and continues processing until finding the next match. In this way, you can deal with each match individually without devoting resources to process all of the input at once:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code> <code class="o">=</code> <code class="n">re</code><code class="o">.</code><code class="n">finditer</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'\w+\@\w+\.\w+'</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code>&#13;
<code class="o">&lt;</code><code class="n">callable_iterator</code> <code class="nb">object</code> <code class="n">at</code> <code class="mh">0x108e68748</code><code class="o">&gt;</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">next</code><code class="p">(</code><code class="n">matched</code><code class="p">)</code>&#13;
<code class="o">&lt;</code><code class="n">re</code><code class="o">.</code><code class="n">Match</code> <code class="nb">object</code><code class="p">;</code> <code class="n">span</code><code class="o">=</code><code class="p">(</code><code class="mi">13</code><code class="p">,</code> <code class="mi">29</code><code class="p">),</code> <code class="n">match</code><code class="o">=</code><code class="s1">'ekoenig@vpwk.com'</code><code class="o">&gt;</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">next</code><code class="p">(</code><code class="n">matched</code><code class="p">)</code>&#13;
<code class="o">&lt;</code><code class="n">re</code><code class="o">.</code><code class="n">Match</code> <code class="nb">object</code><code class="p">;</code> <code class="n">span</code><code class="o">=</code><code class="p">(</code><code class="mi">51</code><code class="p">,</code> <code class="mi">66</code><code class="p">),</code> <code class="n">match</code><code class="o">=</code><code class="s1">'rostam@vpwk.com'</code><code class="o">&gt;</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">next</code><code class="p">(</code><code class="n">matched</code><code class="p">)</code>&#13;
<code class="o">&lt;</code><code class="n">re</code><code class="o">.</code><code class="n">Match</code> <code class="nb">object</code><code class="p">;</code> <code class="n">span</code><code class="o">=</code><code class="p">(</code><code class="mi">83</code><code class="p">,</code> <code class="mi">99</code><code class="p">),</code> <code class="n">match</code><code class="o">=</code><code class="s1">'ctomson@vpwk.com'</code><code class="o">&gt;</code></pre>&#13;
&#13;
<p>The iterator object, <code>matched</code>, can be used in a <code>for</code> loop as well:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">matched</code> <code class="o">=</code> <code class="n">re</code><code class="o">.</code><code class="n">finditer</code><code class="p">(</code><code class="s2">"(?P&lt;name&gt;\w+)\@(?P&lt;SLD&gt;\w+)\.(?P&lt;TLD&gt;\w+)"</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">for</code> <code class="n">m</code> <code class="ow">in</code> <code class="n">matched</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="n">m</code><code class="o">.</code><code class="n">groupdict</code><code class="p">())</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="p">{</code><code class="s1">'name'</code><code class="p">:</code> <code class="s1">'ekoenig'</code><code class="p">,</code> <code class="s1">'SLD'</code><code class="p">:</code> <code class="s1">'vpwk'</code><code class="p">,</code> <code class="s1">'TLD'</code><code class="p">:</code> <code class="s1">'com'</code><code class="p">}</code>&#13;
<code class="p">{</code><code class="s1">'name'</code><code class="p">:</code> <code class="s1">'rostam'</code><code class="p">,</code> <code class="s1">'SLD'</code><code class="p">:</code> <code class="s1">'vpwk'</code><code class="p">,</code> <code class="s1">'TLD'</code><code class="p">:</code> <code class="s1">'com'</code><code class="p">}</code>&#13;
<code class="p">{</code><code class="s1">'name'</code><code class="p">:</code> <code class="s1">'ctomson'</code><code class="p">,</code> <code class="s1">'SLD'</code><code class="p">:</code> <code class="s1">'vpwk'</code><code class="p">,</code> <code class="s1">'TLD'</code><code class="p">:</code> <code class="s1">'com'</code><code class="p">}</code>&#13;
<code class="p">{</code><code class="s1">'name'</code><code class="p">:</code> <code class="s1">'cbaio'</code><code class="p">,</code> <code class="s1">'SLD'</code><code class="p">:</code> <code class="s1">'vpwk'</code><code class="p">,</code> <code class="s1">'TLD'</code><code class="p">:</code> <code class="s1">'com'</code><code class="p">}</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Substitution" data-type="sect2"><div class="sect2" id="idm46691347636024">&#13;
<h2>Substitution</h2>&#13;
&#13;
<p><a data-primary="regular expressions" data-secondary="substitution" data-type="indexterm" id="idm46691347635016"/><a data-primary="substitution, in regex searches" data-type="indexterm" id="idm46691347508280"/>Besides searching and matching, regexes can be used to substitute part or all of a string:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">re</code><code class="o">.</code><code class="n">sub</code><code class="p">(</code><code class="s2">"\d"</code><code class="p">,</code> <code class="s2">"#"</code><code class="p">,</code> <code class="s2">"The passcode you entered was  09876"</code><code class="p">)</code>&#13;
<code class="s1">'The passcode you entered was  #####'</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">users</code> <code class="o">=</code> <code class="n">re</code><code class="o">.</code><code class="n">sub</code><code class="p">(</code><code class="s2">"(?P&lt;name&gt;\w+)\@(?P&lt;SLD&gt;\w+)\.(?P&lt;TLD&gt;\w+)"</code><code class="p">,</code>&#13;
                   <code class="s2">"\g&lt;TLD&gt;.\g&lt;SLD&gt;.\g&lt;name&gt;"</code><code class="p">,</code> <code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">print</code><code class="p">(</code><code class="n">users</code><code class="p">)</code>&#13;
<code class="n">Ezra</code> <code class="n">Koenig</code> <code class="o">&lt;</code><code class="n">com</code><code class="o">.</code><code class="n">vpwk</code><code class="o">.</code><code class="n">ekoenig</code><code class="o">&gt;</code><code class="p">,</code>&#13;
<code class="n">Rostam</code> <code class="n">Batmanglij</code> <code class="o">&lt;</code><code class="n">com</code><code class="o">.</code><code class="n">vpwk</code><code class="o">.</code><code class="n">rostam</code><code class="o">&gt;</code><code class="p">,</code>&#13;
<code class="n">Chris</code> <code class="n">Tomson</code> <code class="o">&lt;</code><code class="n">com</code><code class="o">.</code><code class="n">vpwk</code><code class="o">.</code><code class="n">ctomson</code><code class="p">,</code>&#13;
<code class="n">Chris</code> <code class="n">Baio</code> <code class="o">&lt;</code><code class="n">com</code><code class="o">.</code><code class="n">vpwk</code><code class="o">.</code><code class="n">cbaio</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Compiling" data-type="sect2"><div class="sect2" id="idm46691347505224">&#13;
<h2>Compiling</h2>&#13;
&#13;
<p><a data-primary="compiling, regex" data-type="indexterm" id="idm46691347504216"/><a data-primary="regular expressions" data-secondary="compiling" data-type="indexterm" id="idm46691347393688"/>All of the examples so far have called methods on the <code>re</code> module directly. This is adequate for many cases, but if the same match is going to happen many times, <span class="keep-together">performance</span> gains can be had by compiling the regular expression into an object. This object can be reused for matches without recompiling:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">regex</code> <code class="o">=</code> <code class="n">re</code><code class="o">.</code><code class="n">compile</code><code class="p">(</code><code class="s-Affix">r</code><code class="s1">'\w+\@\w+\.\w+'</code><code class="p">)</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">regex</code><code class="o">.</code><code class="n">search</code><code class="p">(</code><code class="n">cc_list</code><code class="p">)</code>&#13;
<code class="o">&lt;</code><code class="n">re</code><code class="o">.</code><code class="n">Match</code> <code class="nb">object</code><code class="p">;</code> <code class="n">span</code><code class="o">=</code><code class="p">(</code><code class="mi">13</code><code class="p">,</code> <code class="mi">29</code><code class="p">),</code> <code class="n">match</code><code class="o">=</code><code class="s1">'ekoenig@vpwk.com'</code><code class="o">&gt;</code></pre>&#13;
&#13;
<p>Regular expressions offer many more features than we have dealt with here. Indeed many books have been written on their use, but you should now be prepared for most basic cases.<a data-startref="ix_ch01-asciidoc14" data-type="indexterm" id="idm46691347388856"/><a data-startref="ix_ch01-asciidoc13" data-type="indexterm" id="idm46691347293656"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Lazy Evaluation" data-type="sect1"><div class="sect1" id="idm46691348711288">&#13;
<h1>Lazy Evaluation</h1>&#13;
&#13;
<p><a data-primary="lazy evaluation" data-type="indexterm" id="idm46691347291752"/><a data-primary="Python (basics)" data-secondary="lazy evaluation" data-type="indexterm" id="idm46691347291048"/><em>Lazy evaluation</em> is the idea that, especially when dealing with large amounts of data, you do not want process all of the data before using the results. You have already seen this with the <code>range</code> type, where the memory footprint is the same, even for one representing a large group of numbers.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Generators" data-type="sect2"><div class="sect2" id="idm46691347288872">&#13;
<h2>Generators</h2>&#13;
&#13;
<p><a data-primary="generators" data-type="indexterm" id="idm46691347366184"/><a data-primary="lazy evaluation" data-secondary="generators" data-type="indexterm" id="idm46691347365480"/>You can use generators in a similar way as <code>range</code> objects. They perform some operation on data in chunks as requested. They pause their state in between calls. This means that you can store variables that are needed to calculate output, and they are accessed every time the generator is called.</p>&#13;
&#13;
<p>To write a generator function, use the <code>yield</code> keyword rather than a return statement. Every time the generator is called, it returns the value specified by <code>yield</code> and then pauses its state until it is next called. Let’s write a generator that simply counts, returning each subsequent number:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="k">def</code> <code class="nf">count</code><code class="p">():</code>&#13;
<code class="o">...</code>     <code class="n">n</code> <code class="o">=</code> <code class="mi">0</code>&#13;
<code class="o">...</code>     <code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
<code class="o">...</code>         <code class="n">n</code> <code class="o">+=</code> <code class="mi">1</code>&#13;
<code class="o">...</code>         <code class="k">yield</code> <code class="n">n</code>&#13;
<code class="o">...</code>&#13;
<code class="o">...</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">counter</code> <code class="o">=</code> <code class="n">count</code><code class="p">()</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">counter</code>&#13;
<code class="o">&lt;</code><code class="n">generator</code> <code class="nb">object</code> <code class="n">count</code> <code class="n">at</code> <code class="mh">0x10e8509a8</code><code class="o">&gt;</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">next</code><code class="p">(</code><code class="n">counter</code><code class="p">)</code>&#13;
<code class="mi">1</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">next</code><code class="p">(</code><code class="n">counter</code><code class="p">)</code>&#13;
<code class="mi">2</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">next</code><code class="p">(</code><code class="n">counter</code><code class="p">)</code>&#13;
<code class="mi">3</code></pre>&#13;
&#13;
<p>Note that the generator keeps track of its state, and hence the variable <code>n</code> in each call to the generator reflects the value previously set. Let’s implement a Fibonacci generator:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="k">def</code> <code class="nf">fib</code><code class="p">():</code>&#13;
<code class="o">...</code>     <code class="n">first</code> <code class="o">=</code> <code class="mi">0</code>&#13;
<code class="o">...</code>     <code class="n">last</code> <code class="o">=</code> <code class="mi">1</code>&#13;
<code class="o">...</code>     <code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
<code class="o">...</code>         <code class="n">first</code><code class="p">,</code> <code class="n">last</code> <code class="o">=</code> <code class="n">last</code><code class="p">,</code> <code class="n">first</code> <code class="o">+</code> <code class="n">last</code>&#13;
<code class="o">...</code>         <code class="k">yield</code> <code class="n">first</code>&#13;
<code class="o">...</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">f</code> <code class="o">=</code> <code class="n">fib</code><code class="p">()</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">next</code><code class="p">(</code><code class="n">f</code><code class="p">)</code>&#13;
<code class="mi">1</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">next</code><code class="p">(</code><code class="n">f</code><code class="p">)</code>&#13;
<code class="mi">1</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">next</code><code class="p">(</code><code class="n">f</code><code class="p">)</code>&#13;
<code class="mi">2</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="nb">next</code><code class="p">(</code><code class="n">f</code><code class="p">)</code>&#13;
<code class="mi">3</code></pre>&#13;
&#13;
<p>We can also iterate using the generator in a <code>for</code> loop:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">f</code> <code class="o">=</code> <code class="n">fib</code><code class="p">()</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="n">f</code><code class="p">:</code>&#13;
<code class="o">...</code>     <code class="k">print</code><code class="p">(</code><code class="n">x</code><code class="p">)</code>&#13;
<code class="o">...</code>     <code class="k">if</code> <code class="n">x</code> <code class="o">&gt;</code> <code class="mi">12</code><code class="p">:</code>&#13;
<code class="o">...</code>         <code class="k">break</code>&#13;
<code class="o">...</code>&#13;
<code class="mi">1</code>&#13;
<code class="mi">1</code>&#13;
<code class="mi">2</code>&#13;
<code class="mi">3</code>&#13;
<code class="mi">5</code>&#13;
<code class="mi">8</code>&#13;
<code class="mi">13</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Generator Comprehensions" data-type="sect2"><div class="sect2" id="idm46691347149032">&#13;
<h2>Generator Comprehensions</h2>&#13;
&#13;
<p><a data-primary="generator comprehensions" data-type="indexterm" id="idm46691347115640"/><a data-primary="lazy evaluation" data-secondary="generator comprehensions" data-type="indexterm" id="idm46691347115000"/>We can use generator comprehensions to create one-line generators. They are created using a syntax similar to list comprehensions, but parentheses are used rather than square brackets:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">list_o_nums</code> <code class="o">=</code> <code class="p">[</code><code class="n">x</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">100</code><code class="p">)]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">gen_o_nums</code> <code class="o">=</code> <code class="p">(</code><code class="n">x</code> <code class="k">for</code> <code class="n">x</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">100</code><code class="p">))</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">list_o_nums</code>&#13;
<code class="p">[</code><code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="o">...</code>  <code class="mi">97</code><code class="p">,</code> <code class="mi">98</code><code class="p">,</code> <code class="mi">99</code><code class="p">]</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">gen_o_nums</code>&#13;
<code class="o">&lt;</code><code class="n">generator</code> <code class="nb">object</code> <code class="o">&lt;</code><code class="n">genexpr</code><code class="o">&gt;</code> <code class="n">at</code> <code class="mh">0x10ea14408</code><code class="o">&gt;</code></pre>&#13;
&#13;
<p>Even with this small example, we can see the difference in memory used by using the <code>sys.getsizeof</code> method, which returns the size of an object, in bytes:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="kn">import</code> <code class="nn">sys</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">sys</code><code class="o">.</code><code class="n">getsizeof</code><code class="p">(</code><code class="n">list_o_nums</code><code class="p">)</code>&#13;
<code class="mi">912</code>&#13;
<code class="o">&gt;&gt;&gt;</code> <code class="n">sys</code><code class="o">.</code><code class="n">getsizeof</code><code class="p">(</code><code class="n">gen_o_nums</code><code class="p">)</code>&#13;
<code class="mi">120</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="More IPython Features" data-type="sect1"><div class="sect1" id="idm46691346967016">&#13;
<h1>More IPython Features</h1>&#13;
&#13;
<p><a data-primary="IPython" data-secondary="advanced features" data-type="indexterm" id="idm46691346972872"/><a data-primary="Python (basics)" data-secondary="IPython advanced features" data-type="indexterm" id="idm46691346971896"/>You saw some of IPython’s features at the beginning of the chapter. Now let’s look at some more advanced features, such as running shell commands from within the IPython interpreter and using magic functions.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Using IPython to Run Unix Shell Commands" data-type="sect2"><div class="sect2" id="idm46691346906952">&#13;
<h2>Using IPython to Run Unix Shell Commands</h2>&#13;
&#13;
<p><a data-primary="IPython" data-secondary="running Unix shell commands" data-type="indexterm" id="idm46691346905576"/>You can use IPython to run shell commands. This is one of the most compelling reasons to perform DevOps actions in the IPython shell.  Let’s take a look at a very simple example where the <code>!</code> character, which IPython uses to identify shell commands, is put in front of the command <code>ls</code>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">3</code><code class="p">]:</code> <code class="n">var_ls</code> <code class="o">=</code> <code class="err">!</code><code class="n">ls</code> <code class="o">-</code><code class="n">l</code>&#13;
<code class="n">In</code> <code class="p">[</code><code class="mi">4</code><code class="p">]:</code> <code class="nb">type</code><code class="p">(</code><code class="n">var_ls</code><code class="p">)</code>&#13;
<code class="n">Out</code><code class="p">[</code><code class="mi">4</code><code class="p">]:</code> <code class="n">IPython</code><code class="o">.</code><code class="n">utils</code><code class="o">.</code><code class="n">text</code><code class="o">.</code><code class="n">SList</code></pre>&#13;
&#13;
<p>The output of the command is assigned to a Python variable <code>var_ls</code>.  The <code>type</code> of this variable is <code>IPython.utils.text.SList</code>.&#13;
The <code>SList</code> type converts a regular shell command into an object that has three main methods:  <code>fields</code>, <code>grep</code>, and <code>sort</code>.  Here is an example in action using the Unix <code>df</code> command.  The <code>sort</code> method can interpret the whitespace from this Unix command and then sort the third column by size:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">6</code><code class="p">]:</code> <code class="n">df</code> <code class="o">=</code> <code class="err">!</code><code class="n">df</code>&#13;
<code class="n">In</code> <code class="p">[</code><code class="mi">7</code><code class="p">]:</code> <code class="n">df</code><code class="o">.</code><code class="n">sort</code><code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="n">nums</code> <code class="o">=</code> <code class="bp">True</code><code class="p">)</code></pre>&#13;
&#13;
<p>Let’s take a look at <code>SList</code> and <code>.grep</code> next.  Here is an example that searches for what commands with <code>kill</code> as part of their names are installed in the <em>/usr/bin</em> directory:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">10</code><code class="p">]:</code> <code class="n">ls</code> <code class="o">=</code> <code class="err">!</code><code class="n">ls</code> <code class="o">-</code><code class="n">l</code> <code class="o">/</code><code class="n">usr</code><code class="o">/</code><code class="nb">bin</code>&#13;
<code class="n">In</code> <code class="p">[</code><code class="mi">11</code><code class="p">]:</code> <code class="n">ls</code><code class="o">.</code><code class="n">grep</code><code class="p">(</code><code class="s2">"kill"</code><code class="p">)</code>&#13;
<code class="n">Out</code><code class="p">[</code><code class="mi">11</code><code class="p">]:</code>&#13;
<code class="p">[</code><code class="s1">'-rwxr-xr-x   1 root   wheel      1621 Aug 20  2018 kill.d'</code><code class="p">,</code>&#13;
 <code class="s1">'-rwxr-xr-x   1 root   wheel     23984 Mar 20 23:10 killall'</code><code class="p">,</code>&#13;
 <code class="s1">'-rwxr-xr-x   1 root   wheel     30512 Mar 20 23:10 pkill'</code><code class="p">]</code></pre>&#13;
&#13;
<p>The key take away here is that IPython is a dream environment for hacking around with little shell scripts.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Using IPython magic commands" data-type="sect3"><div class="sect3" id="idm46691346715560">&#13;
<h3>Using IPython magic commands</h3>&#13;
&#13;
<p><a data-primary="IPython" data-secondary="magic commands" data-type="indexterm" id="idm46691346758184"/>If you get in the habit of using IPython, you should also get in the habit of using built-in magic commands.  They are essentially shortcuts that pack a big punch.  Magic commands are indicated by prepending them with <code>%%</code>. Here is an example of how to write inline Bash inside of IPython.  Note, this is just a small command, but it could be an entire Bash script:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">13</code><code class="p">]:</code> <code class="o">%%</code><code class="n">bash</code>&#13;
    <code class="o">...</code><code class="p">:</code> <code class="n">uname</code> <code class="o">-</code><code class="n">a</code>&#13;
    <code class="o">...</code><code class="p">:</code>&#13;
    <code class="o">...</code><code class="p">:</code>&#13;
<code class="n">Darwin</code> <code class="n">nogibjj</code><code class="o">.</code><code class="n">local</code> <code class="mf">18.5</code><code class="o">.</code><code class="mi">0</code> <code class="n">Darwin</code> <code class="n">Kernel</code> <code class="n">Version</code> <code class="mf">18.5</code><code class="o">.</code><code class="mi">0</code><code class="p">:</code> <code class="n">Mon</code> <code class="n">Mar</code> <code class="o">...</code></pre>&#13;
&#13;
<p>The <code>%%writefile</code> is pretty tricky because you can write and test Python or Bash scripts on the fly, using IPython to execute them.  That’s not a bad party trick at all:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">16</code><code class="p">]:</code> <code class="o">%%</code><code class="n">writefile</code> <code class="n">print_time</code><code class="o">.</code><code class="n">py</code>&#13;
    <code class="o">...</code><code class="p">:</code> <code class="c1">#!/usr/bin/env python</code>&#13;
    <code class="o">...</code><code class="p">:</code> <code class="kn">import</code> <code class="nn">datetime</code>&#13;
    <code class="o">...</code><code class="p">:</code> <code class="k">print</code><code class="p">(</code><code class="n">datetime</code><code class="o">.</code><code class="n">datetime</code><code class="o">.</code><code class="n">now</code><code class="p">()</code><code class="o">.</code><code class="n">time</code><code class="p">())</code>&#13;
    <code class="o">...</code><code class="p">:</code>&#13;
    <code class="o">...</code><code class="p">:</code>&#13;
    <code class="o">...</code><code class="p">:</code>&#13;
<code class="n">Writing</code> <code class="n">print_time</code><code class="o">.</code><code class="n">py</code>&#13;
&#13;
<code class="n">In</code> <code class="p">[</code><code class="mi">17</code><code class="p">]:</code> <code class="n">cat</code> <code class="n">print_time</code><code class="o">.</code><code class="n">py</code>&#13;
<code class="c1">#!/usr/bin/env python</code>&#13;
<code class="kn">import</code> <code class="nn">datetime</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="n">datetime</code><code class="o">.</code><code class="n">datetime</code><code class="o">.</code><code class="n">now</code><code class="p">()</code><code class="o">.</code><code class="n">time</code><code class="p">())</code>&#13;
&#13;
<code class="n">In</code> <code class="p">[</code><code class="mi">18</code><code class="p">]:</code> <code class="err">!</code><code class="n">python</code> <code class="n">print_time</code><code class="o">.</code><code class="n">py</code>&#13;
<code class="mi">19</code><code class="p">:</code><code class="mo">06</code><code class="p">:</code><code class="mf">00.594914</code></pre>&#13;
&#13;
<p>Another very useful command, <code>%who</code>, will show you what is loaded into memory.  It comes in quite handy when you have been working in a terminal that has been running for a long time:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">In</code> <code class="p">[</code><code class="mi">20</code><code class="p">]:</code> <code class="o">%</code><code class="n">who</code>&#13;
<code class="n">df</code>     <code class="n">ls</code>     <code class="n">var_ls</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Exercises" data-type="sect1"><div class="sect1" id="idm46691346582184">&#13;
<h1>Exercises</h1>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Write a Python function that takes a name as an argument and prints that name.</p>&#13;
</li>&#13;
<li>&#13;
<p>Write a Python function that takes a string as an argument and prints whether it is upper- or lowercase.</p>&#13;
</li>&#13;
<li>&#13;
<p>Write a list comprehension that results in a list of every letter in the word <em>smogtether</em> capitalized.</p>&#13;
</li>&#13;
<li>&#13;
<p>Write a generator that alternates between returning <em>Even</em> and <em>Odd</em>.<a data-startref="ix_ch01-asciidoc0" data-type="indexterm" id="idm46691346571336"/><a data-primary="Amazon Web Services" data-see="AWS" data-type="indexterm" id="idm46691346570600"/><a data-primary="Bash" data-see="shells, Bash/ZSH" data-type="indexterm" id="idm46691346569656"/><a data-primary="CD" data-see="continuous integration/continuous deployment (CI/CD)" data-type="indexterm" id="idm46691346568712"/><a data-primary="CI" data-see="continuous integration" data-type="indexterm" id="idm46691346567672"/><a data-primary="CI/CD" data-see="continuous integration/continuous deployment" data-type="indexterm" id="idm46691346566728"/><a data-primary="command line" data-secondary="creating command-line tools" data-see="command-line tools" data-type="indexterm" id="idm46691346565752"/><a data-primary="Docker" data-secondary="sklearn-based machine learning model with" data-see="sklearn-based machine learning model" data-type="indexterm" id="idm46691346564568"/><a data-primary="Exploratory Data Analysis" data-see="EDA" data-type="indexterm" id="idm46691346563352"/><a data-primary="FaaS" data-see="function as a service" data-type="indexterm" id="idm46691346562440"/><a data-primary="files, automating" data-see="automating files and the filesystem" data-type="indexterm" id="idm46691346561496"/><a data-primary="Google Container Engine (GKE)" data-see="GKE Kubernetes cluster" data-type="indexterm" id="idm46691346560584"/><a data-primary="IaC" data-see="Infrastructure as Code" data-type="indexterm" id="idm46691346559672"/><a data-primary="init system" data-see="systemd" data-type="indexterm" id="idm46691346558728"/><a data-primary="Kubernetes" data-secondary="sklearn-based machine learning model with" data-see="sklearn-based machine learning model" data-type="indexterm" id="idm46691346557784"/><a data-primary="MLOps" data-see="machine learning" data-type="indexterm" id="idm46691346538600"/><a data-primary="one-liners" data-see="Python one-liners" data-type="indexterm" id="idm46691346537656"/><a data-primary="provisioning, manual" data-see="manual provisioning" data-type="indexterm" id="idm46691346536712"/><a data-primary="ZSH" data-see="shells, Bash/ZSH" data-type="indexterm" id="idm46691346535768"/></p>&#13;
</li>&#13;
</ul>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>