<html><head></head><body><section data-pdf-bookmark="Chapter 13. Calendars and Clocks" data-type="chapter" epub:type="chapter"><div class="chapter" id="ch_times">&#13;
<h1><span class="label">Chapter 13. </span>Calendars and Clocks</h1>&#13;
&#13;
<blockquote>&#13;
<p><a data-primary="calendars/clocks" data-type="indexterm" id="ix_ch13-times-asciidoc0"/>“One!” strikes the clock in the belfry tower,<br/>&#13;
Which but sixty minutes ago<br/>&#13;
Sounded twelve for the midnight hour.</p>&#13;
<p data-type="attribution">Frederick B. Needham, <cite>The Round of the Clock</cite></p>&#13;
</blockquote>&#13;
<blockquote>&#13;
<p>I’ve been on a calendar but I have never been on time.</p>&#13;
<p data-type="attribution">Marilyn Monroe</p>&#13;
</blockquote>&#13;
&#13;
<p>Programmers devote a surprising amount of effort&#13;
to dates and times.&#13;
Let’s talk about some of the problems they encounter&#13;
and then get to some best practices&#13;
and tricks to make the situation a little less messy.</p>&#13;
&#13;
<p><a data-primary="calendars/clocks" data-secondary="challenges of date representation" data-type="indexterm" id="idm45794987070360"/><a data-primary="dates, representations of" data-seealso="calendars/clocks" data-type="indexterm" id="idm45794987069416"/>Dates can be represented in many ways—too many ways, actually.&#13;
Even in English with the Roman calendar,&#13;
you’ll see many variants of a simple date:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>July 21 1987</p>&#13;
</li>&#13;
<li>&#13;
<p>21 Jul 1987</p>&#13;
</li>&#13;
<li>&#13;
<p>21/7/1987</p>&#13;
</li>&#13;
<li>&#13;
<p>7/21/1987</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Among other problems, date representations can be ambiguous.&#13;
In the previous examples,&#13;
it’s easy to determine that 7 stands for the month&#13;
and 21 is the day of the month,&#13;
because months don’t go to 21.&#13;
But how about <code>1/6/2012</code>?&#13;
Is that referring to January 6 or June 1?</p>&#13;
&#13;
<p>The month name varies by language within the Roman calendar.&#13;
Even the year and month&#13;
can have a different definition in other cultures.</p>&#13;
&#13;
<p>Times have their own sources of grief,&#13;
especially because of time zones&#13;
and daylight savings time.&#13;
If you look at a time zone map,&#13;
the zones follow political and historic boundaries&#13;
rather than crisp lines&#13;
every 15 degrees (360 degrees / 24) of longitude.&#13;
And countries start and end daylight savings times&#13;
on different days of&#13;
the year.&#13;
Southern hemisphere countries advance their&#13;
clocks as their northern friends are winding theirs back,&#13;
and vice versa.</p>&#13;
&#13;
<p>Python’s standard library has many date and&#13;
time modules, including: <code>datetime</code>, <code>time</code>,&#13;
<code>calendar</code>, <code>dateutil</code>, and others.&#13;
There’s some overlap, and it’s a bit confusing.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Leap Year" data-type="sect1"><div class="sect1" id="leap_year">&#13;
<h1>Leap Year</h1>&#13;
&#13;
<p><a data-primary="calendars/clocks" data-secondary="leap years" data-type="indexterm" id="idm45794987037208"/><a data-primary="leap years" data-type="indexterm" id="idm45794987036232"/>Leap years are a special wrinkle in time.&#13;
You probably know that every four years is a leap year&#13;
(and the summer Olympics&#13;
and the American presidential election).&#13;
Did you also know that every 100 years is not a leap year,&#13;
but that every 400 years is?&#13;
Here’s code to test various years for leapiness:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">calendar</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">calendar</code><code class="o">.</code><code class="n">isleap</code><code class="p">(</code><code class="mi">1900</code><code class="p">)</code>&#13;
<code class="go">False</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">calendar</code><code class="o">.</code><code class="n">isleap</code><code class="p">(</code><code class="mi">1996</code><code class="p">)</code>&#13;
<code class="go">True</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">calendar</code><code class="o">.</code><code class="n">isleap</code><code class="p">(</code><code class="mi">1999</code><code class="p">)</code>&#13;
<code class="go">False</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">calendar</code><code class="o">.</code><code class="n">isleap</code><code class="p">(</code><code class="mi">2000</code><code class="p">)</code>&#13;
<code class="go">True</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">calendar</code><code class="o">.</code><code class="n">isleap</code><code class="p">(</code><code class="mi">2002</code><code class="p">)</code>&#13;
<code class="go">False</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">calendar</code><code class="o">.</code><code class="n">isleap</code><code class="p">(</code><code class="mi">2004</code><code class="p">)</code>&#13;
<code class="go">True</code></pre>&#13;
&#13;
<p>For the curious:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>A year has 365.242196 days&#13;
(after one spin around the sun,&#13;
the earth is about a quarter-turn on its axis&#13;
from where it started).</p>&#13;
</li>&#13;
<li>&#13;
<p>Add one day every four years.&#13;
Now an average year has 365.242196 – 0.25 = 364.992196 days</p>&#13;
</li>&#13;
<li>&#13;
<p>Subtract a day every 100 years.&#13;
Now an average year has 364.992196 + 0.01 = 365.002196 days</p>&#13;
</li>&#13;
<li>&#13;
<p>Add a day every 400 years.&#13;
Now an average year has 365.002196 – 0.0025 = 364.999696 days</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Close enough for now!&#13;
We will not speak of&#13;
<a href="https://oreil.ly/aJ32N">leap seconds</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="The datetime Module" data-type="sect1"><div class="sect1" id="datetime">&#13;
<h1>The datetime Module</h1>&#13;
&#13;
<p><a data-primary="calendars/clocks" data-secondary="datetime module" data-type="indexterm" id="ix_ch13-times-asciidoc1"/><a data-primary="datetime object" data-type="indexterm" id="ix_ch13-times-asciidoc2"/>The standard <code>datetime</code> module handles&#13;
(which should not be a surprise)&#13;
dates and times.&#13;
It defines four main object classes, each with many methods:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><code>date</code> for years, months, and days</p>&#13;
</li>&#13;
<li>&#13;
<p><code>time</code> for hours, minutes, seconds, and fractions</p>&#13;
</li>&#13;
<li>&#13;
<p><code>datetime</code> for dates and times together</p>&#13;
</li>&#13;
<li>&#13;
<p><code>timedelta</code> for date and/or time intervals</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>You can make a <code>date</code> object by specifying a year, month, and day.&#13;
Those values are then available as attributes:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">date</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">halloween</code> <code class="o">=</code> <code class="n">date</code><code class="p">(</code><code class="mi">2019</code><code class="p">,</code> <code class="mi">10</code><code class="p">,</code> <code class="mi">31</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">halloween</code>&#13;
<code class="go">datetime.date(2019, 10, 31)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">halloween</code><code class="o">.</code><code class="n">day</code>&#13;
<code class="go">31</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">halloween</code><code class="o">.</code><code class="n">month</code>&#13;
<code class="go">10</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">halloween</code><code class="o">.</code><code class="n">year</code>&#13;
<code class="go">2019</code></pre>&#13;
&#13;
<p><a data-primary="isoformat() function" data-type="indexterm" id="idm45794986965800"/>You can print a <code>date</code> with its <code>isoformat()</code> method:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">halloween</code><code class="o">.</code><code class="n">isoformat</code><code class="p">()</code>&#13;
<code class="go">'2019-10-31'</code></pre>&#13;
&#13;
<p>The <code>iso</code> refers to ISO 8601,&#13;
an international standard for representing dates and times.&#13;
It goes from most general (year) to most specific (day).&#13;
Because of this,&#13;
it also sorts correctly: by year, then month, then day.&#13;
I usually choose this format for date representation in programs,&#13;
and for filenames that save data by date.&#13;
The next section describes the more complex&#13;
<code>strptime()</code> and <code>strftime()</code>&#13;
methods for parsing and formatting dates.</p>&#13;
&#13;
<p><a data-primary="today() function" data-type="indexterm" id="idm45794986873752"/>This example uses the <code>today()</code> method to generate today’s date:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">date</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code> <code class="o">=</code> <code class="n">date</code><code class="o">.</code><code class="n">today</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code>&#13;
<code class="go">datetime.date(2019, 4, 5)</code></pre>&#13;
&#13;
<p><a data-primary="timedelta object" data-type="indexterm" id="idm45794986792504"/>This one makes use of a <code>timedelta</code> object&#13;
to add some time interval to a <code>date</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">timedelta</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">one_day</code> <code class="o">=</code> <code class="n">timedelta</code><code class="p">(</code><code class="n">days</code><code class="o">=</code><code class="mi">1</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">tomorrow</code> <code class="o">=</code> <code class="n">now</code> <code class="o">+</code> <code class="n">one_day</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">tomorrow</code>&#13;
<code class="go">datetime.date(2019, 4, 6)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code> <code class="o">+</code> <code class="mi">17</code><code class="o">*</code><code class="n">one_day</code>&#13;
<code class="go">datetime.date(2019, 4, 22)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">yesterday</code> <code class="o">=</code> <code class="n">now</code> <code class="o">-</code> <code class="n">one_day</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">yesterday</code>&#13;
<code class="go">datetime.date(2019, 4, 4)</code></pre>&#13;
&#13;
<p>The range of <code>date</code> is from&#13;
<code>date.min</code> (year=1, month=1, day=1)&#13;
to <code>date.max</code> (year=9999, month=12, day=31).&#13;
As a result,&#13;
you can’t use it for historic or astronomical calculations.</p>&#13;
&#13;
<p>The <code>datetime</code> module’s <code>time</code> object is used to&#13;
represent a time of day:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">time</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">noon</code> <code class="o">=</code> <code class="n">time</code><code class="p">(</code><code class="mi">12</code><code class="p">,</code> <code class="mi">0</code><code class="p">,</code> <code class="mi">0</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">noon</code>&#13;
<code class="go">datetime.time(12, 0)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">noon</code><code class="o">.</code><code class="n">hour</code>&#13;
<code class="go">12</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">noon</code><code class="o">.</code><code class="n">minute</code>&#13;
<code class="go">0</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">noon</code><code class="o">.</code><code class="n">second</code>&#13;
<code class="go">0</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">noon</code><code class="o">.</code><code class="n">microsecond</code>&#13;
<code class="go">0</code></pre>&#13;
&#13;
<p>The arguments go from the largest time unit (hours)&#13;
to the smallest (microseconds).&#13;
If you don’t provide all the arguments,&#13;
<code>time</code> assumes all the rest are zero.&#13;
By the way,&#13;
just because you can store and retrieve microseconds&#13;
doesn’t mean you can retrieve time from your computer&#13;
to the exact microsecond.&#13;
The accuracy of subsecond measurements depends on many&#13;
factors in the hardware and operating system.</p>&#13;
&#13;
<p>The <code>datetime</code> object includes both the date and time of day.&#13;
You can create one directly,&#13;
such as the one that follows,&#13;
which is for January 2, 2019, at 3:04 A.M.,&#13;
plus 5 seconds&#13;
and 6 microseconds:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">datetime</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">some_day</code> <code class="o">=</code> <code class="n">datetime</code><code class="p">(</code><code class="mi">2019</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">6</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">some_day</code>&#13;
<code class="go">datetime.datetime(2019, 1, 2, 3, 4, 5, 6)</code></pre>&#13;
&#13;
<p><a data-primary="isoformat() function" data-type="indexterm" id="idm45794986678424"/>The <code>datetime</code> object also has an <code>isoformat()</code> method:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">some_day</code><code class="o">.</code><code class="n">isoformat</code><code class="p">()</code>&#13;
<code class="go">'2019-01-02T03:04:05.000006'</code></pre>&#13;
&#13;
<p>That middle <code>T</code> separates the date and time parts.</p>&#13;
&#13;
<p><a data-primary="now() function" data-type="indexterm" id="idm45794986570664"/><code>datetime</code> has a <code>now()</code> method to&#13;
return the current date and time:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">datetime</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code> <code class="o">=</code> <code class="n">datetime</code><code class="o">.</code><code class="n">now</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code>&#13;
<code class="go">datetime.datetime(2019, 4, 5, 19, 53, 7, 580562)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code><code class="o">.</code><code class="n">year</code>&#13;
<code class="go">2019</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code><code class="o">.</code><code class="n">month</code>&#13;
<code class="go">4</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code><code class="o">.</code><code class="n">day</code>&#13;
<code class="go">5</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code><code class="o">.</code><code class="n">hour</code>&#13;
<code class="go">19</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code><code class="o">.</code><code class="n">minute</code>&#13;
<code class="go">53</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code><code class="o">.</code><code class="n">second</code>&#13;
<code class="go">7</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code><code class="o">.</code><code class="n">microsecond</code>&#13;
<code class="go">580562</code></pre>&#13;
&#13;
<p>You can <code>combine()</code> a <code>date</code> object and a <code>time</code> object&#13;
into a <code>datetime</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">datetime</code><code class="p">,</code> <code class="n">time</code><code class="p">,</code> <code class="n">date</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">noon</code> <code class="o">=</code> <code class="n">time</code><code class="p">(</code><code class="mi">12</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">this_day</code> <code class="o">=</code> <code class="n">date</code><code class="o">.</code><code class="n">today</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">noon_today</code> <code class="o">=</code> <code class="n">datetime</code><code class="o">.</code><code class="n">combine</code><code class="p">(</code><code class="n">this_day</code><code class="p">,</code> <code class="n">noon</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">noon_today</code>&#13;
<code class="go">datetime.datetime(2019, 4, 5, 12, 0)</code></pre>&#13;
&#13;
<p>You can yank the <code>date</code> and <code>time</code> from a <code>datetime</code>&#13;
by using the <code>date()</code> and <code>time()</code> methods:<a data-startref="ix_ch13-times-asciidoc2" data-type="indexterm" id="idm45794986432456"/><a data-startref="ix_ch13-times-asciidoc1" data-type="indexterm" id="idm45794986431720"/></p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">noon_today</code><code class="o">.</code><code class="n">date</code><code class="p">()</code>&#13;
<code class="go">datetime.date(2019, 4, 5)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">noon_today</code><code class="o">.</code><code class="n">time</code><code class="p">()</code>&#13;
<code class="go">datetime.time(12, 0)</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Using the time Module" data-type="sect1"><div class="sect1" id="time">&#13;
<h1>Using the time Module</h1>&#13;
&#13;
<p><a data-primary="calendars/clocks" data-secondary="time module" data-type="indexterm" id="ix_ch13-times-asciidoc3"/><a data-primary="time module" data-type="indexterm" id="ix_ch13-times-asciidoc4"/>It is confusing that Python has a <code>datetime</code> module&#13;
with a <code>time</code> object,&#13;
and a separate <code>time</code> module.&#13;
Furthermore, the <code>time</code> module has a function called—wait for it—<code>time()</code>.</p>&#13;
&#13;
<p>One way to represent an absolute time&#13;
is to count the number of seconds since some starting point.&#13;
<a data-primary="Unix" data-secondary="time representation" data-type="indexterm" id="idm45794986404664"/><em>Unix time</em> uses the number of seconds since midnight on&#13;
January 1, 1970.<sup><a data-type="noteref" href="ch13.html#idm45794986403304" id="idm45794986403304-marker">1</a></sup>&#13;
<a data-primary="epoch" data-type="indexterm" id="idm45794986402616"/>This value is often called the <em>epoch</em>,&#13;
and it is often the simplest way to&#13;
exchange dates and times among systems.</p>&#13;
&#13;
<p>The <code>time</code> module’s <code>time()</code> function returns&#13;
the current time as an epoch value:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">time</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code> <code class="o">=</code> <code class="n">time</code><code class="o">.</code><code class="n">time</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code>&#13;
<code class="go">1554512132.778233</code></pre>&#13;
&#13;
<p>More than one billion seconds have ticked by&#13;
since New Year’s, 1970.&#13;
Where did the time go?</p>&#13;
&#13;
<p>You can convert an epoch value to a string by using <code>ctime()</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">time</code><code class="o">.</code><code class="n">ctime</code><code class="p">(</code><code class="n">now</code><code class="p">)</code>&#13;
<code class="go">'Fri Apr  5 19:55:32 2019'</code></pre>&#13;
&#13;
<p>In the next section, you’ll see how to produce more attractive&#13;
formats for dates and times.</p>&#13;
&#13;
<p>Epoch values are a useful least-common denominator for&#13;
date and time exchange&#13;
with different systems, such as JavaScript.&#13;
<a data-primary="struct_time objects" data-type="indexterm" id="idm45794986346888"/>Sometimes, though, you need actual days, hours, and so forth,&#13;
which <code>time</code> provides as <code>struct_time</code> objects.&#13;
<a data-primary="gmtime() function" data-type="indexterm" id="idm45794986344104"/><a data-primary="localtime() function" data-type="indexterm" id="idm45794986343368"/><code>localtime()</code> provides the time in your system’s time zone,&#13;
and <code>gmtime()</code> provides it in UTC:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">time</code><code class="o">.</code><code class="n">localtime</code><code class="p">(</code><code class="n">now</code><code class="p">)</code>&#13;
<code class="go">time.struct_time(tm_year=2019, tm_mon=4, tm_mday=5, tm_hour=19,</code>&#13;
<code class="go">tm_min=55, tm_sec=32, tm_wday=4, tm_yday=95, tm_isdst=1)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">time</code><code class="o">.</code><code class="n">gmtime</code><code class="p">(</code><code class="n">now</code><code class="p">)</code>&#13;
<code class="go">time.struct_time(tm_year=2019, tm_mon=4, tm_mday=6, tm_hour=0,</code>&#13;
<code class="go">tm_min=55, tm_sec=32, tm_wday=5, tm_yday=96, tm_isdst=0)</code></pre>&#13;
&#13;
<p>My <code>19:55</code> (Central time zone, Daylight Savings) was&#13;
<code>00:55</code> in the next day in UTC&#13;
(formerly called <em>Greenwich time</em> or <em>Zulu time</em>).&#13;
If you omit the argument to <code>localtime()</code> or <code>gmtime()</code>,&#13;
they assume the current time.</p>&#13;
&#13;
<p>Some of the <code>tm_...</code> values in <code>struct_time</code>&#13;
are a bit ambiguous, so take a look at <a data-type="xref" href="#table1301">Table 13-1</a> for more details.</p>&#13;
<table id="table1301">&#13;
<caption><span class="label">Table 13-1. </span><code>struct_time</code> values</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Index</th>&#13;
<th>Name</th>&#13;
<th>Meaning</th>&#13;
<th>Values</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p>0</p></td>&#13;
<td><p><code>tm_year</code></p></td>&#13;
<td><p>Year</p></td>&#13;
<td><p><code>0000</code> to <code>9999</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>1</p></td>&#13;
<td><p><code>tm_mon</code></p></td>&#13;
<td><p>Month</p></td>&#13;
<td><p><code>1</code> to <code>12</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>2</p></td>&#13;
<td><p><code>tm_mday</code></p></td>&#13;
<td><p>Day of month</p></td>&#13;
<td><p><code>1</code> to <code>31</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>3</p></td>&#13;
<td><p><code>tm_hour</code></p></td>&#13;
<td><p>Hour</p></td>&#13;
<td><p><code>0</code> to <code>23</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>4</p></td>&#13;
<td><p><code>tm_min</code></p></td>&#13;
<td><p>Minute</p></td>&#13;
<td><p><code>0</code> to <code>59</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>5</p></td>&#13;
<td><p><code>tm_sec</code></p></td>&#13;
<td><p>Second</p></td>&#13;
<td><p><code>0</code> to <code>61</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>6</p></td>&#13;
<td><p><code>tm_wday</code></p></td>&#13;
<td><p>Day of week</p></td>&#13;
<td><p><code>0</code> (Monday) to <code>6</code> (Sunday)</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>7</p></td>&#13;
<td><p><code>tm_yday</code></p></td>&#13;
<td><p>Day of year</p></td>&#13;
<td><p><code>1</code> to <code>366</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p>8</p></td>&#13;
<td><p><code>tm_isdst</code></p></td>&#13;
<td><p>Daylight savings?</p></td>&#13;
<td><p><code>0</code> = no, <code>1</code> = yes, <code>-1</code> = unknown</p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>If you don’t want to type all those <code>tm_...</code> names,&#13;
<code>struct_time</code> also acts like a&#13;
named tuple (see <a data-type="xref" href="ch10.html#named_tuples">“Named Tuples”</a>),&#13;
so you can use the indexes from the previous table:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">time</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code> <code class="o">=</code> <code class="n">time</code><code class="o">.</code><code class="n">localtime</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code>&#13;
<code class="go">time.struct_time(tm_year=2019, tm_mon=6, tm_mday=23, tm_hour=12,</code>&#13;
<code class="go">tm_min=12, tm_sec=24, tm_wday=6, tm_yday=174, tm_isdst=1)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code>&#13;
<code class="go">2019</code>&#13;
<code class="go">print(list(now[x] for x in range(9)))</code>&#13;
<code class="go">[2019, 6, 23, 12, 12, 24, 6, 174, 1]</code></pre>&#13;
&#13;
<p><code>mktime()</code> goes in the other direction,&#13;
converting&#13;
a <code>struct_time</code> object to epoch seconds:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">tm</code> <code class="o">=</code> <code class="n">time</code><code class="o">.</code><code class="n">localtime</code><code class="p">(</code><code class="n">now</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">time</code><code class="o">.</code><code class="n">mktime</code><code class="p">(</code><code class="n">tm</code><code class="p">)</code>&#13;
<code class="go">1554512132.0</code></pre>&#13;
&#13;
<p>This doesn’t exactly match our earlier epoch value of&#13;
<code>now()</code> because&#13;
the <code>struct_time</code> object preserves time only to the second.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p><a data-primary="time zones, UTC versus" data-type="indexterm" id="idm45794986184232"/><a data-primary="UTC" data-type="indexterm" id="idm45794986183528"/>Some advice: wherever possible,&#13;
<em>use UTC</em> instead of time zones.&#13;
UTC is an absolute time, independent of time zones.&#13;
If you have a server,&#13;
<em>set its time to UTC</em>;&#13;
do not use local time.</p>&#13;
&#13;
<p><a data-primary="daylight savings time" data-type="indexterm" id="idm45794986137048"/>More advice:&#13;
<em>never use daylight savings time</em>&#13;
if you can avoid it.&#13;
If you use daylight savings time,&#13;
an hour disappears at one time of year (“spring ahead”)&#13;
and occurs twice at another time (“fall back”).&#13;
For some reason,&#13;
many organizations use local time with&#13;
daylight savings in their computer systems,&#13;
but are mystified twice every year by&#13;
that spooky hour.<a data-startref="ix_ch13-times-asciidoc4" data-type="indexterm" id="idm45794986135464"/><a data-startref="ix_ch13-times-asciidoc3" data-type="indexterm" id="idm45794986134792"/></p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Read and Write Dates and Times" data-type="sect1"><div class="sect1" id="datetime_io">&#13;
<h1>Read and Write Dates and Times</h1>&#13;
&#13;
<p><a data-primary="calendars/clocks" data-secondary="reading/writing dates and times" data-type="indexterm" id="ix_ch13-times-asciidoc5"/><code>isoformat()</code> is not the only way to write dates and times.&#13;
You already saw the <code>ctime()</code> function in the <code>time</code> module,&#13;
which you can use to convert epochs&#13;
to strings:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">time</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code> <code class="o">=</code> <code class="n">time</code><code class="o">.</code><code class="n">time</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">time</code><code class="o">.</code><code class="n">ctime</code><code class="p">(</code><code class="n">now</code><code class="p">)</code>&#13;
<code class="go">'Fri Apr  5 19:58:23 2019'</code></pre>&#13;
&#13;
<p><a data-primary="strftime() function" data-type="indexterm" id="idm45794986067336"/>You can also convert dates and times to strings&#13;
by using <code>strftime()</code>.&#13;
This is provided as a method in the&#13;
<code>datetime</code>, <code>date</code>, and <code>time</code> objects,&#13;
and as a function in the <code>time</code> module.&#13;
<code>strftime()</code> uses format strings to specify the output,&#13;
which you can see in <a data-type="xref" href="#strftime_table">Table 13-2</a>.</p>&#13;
<table id="strftime_table">&#13;
<caption><span class="label">Table 13-2. </span>Output specifiers for <code>strftime()</code></caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Format string</th>&#13;
<th>Date/time unit</th>&#13;
<th>Range</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><code>%Y</code></p></td>&#13;
<td><p>year</p></td>&#13;
<td><p><code>1900</code>-…</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>%m</code></p></td>&#13;
<td><p>month</p></td>&#13;
<td><p><code>01</code>-<code>12</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>%B</code></p></td>&#13;
<td><p>month name</p></td>&#13;
<td><p><code>January</code>, …</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>%b</code></p></td>&#13;
<td><p>month abbrev</p></td>&#13;
<td><p><code>Jan</code>, …</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>%d</code></p></td>&#13;
<td><p>day of month</p></td>&#13;
<td><p><code>01</code>-<code>31</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>%A</code></p></td>&#13;
<td><p>weekday name</p></td>&#13;
<td><p><code>Sunday</code>, …</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>a</code></p></td>&#13;
<td><p>weekday abbrev</p></td>&#13;
<td><p><code>Sun</code>, …</p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>%H</code></p></td>&#13;
<td><p>hour (24 hr)</p></td>&#13;
<td><p><code>00</code>-<code>23</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>%I</code></p></td>&#13;
<td><p>hour (12 hr)</p></td>&#13;
<td><p><code>01</code>-<code>12</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>%p</code></p></td>&#13;
<td><p>AM/PM</p></td>&#13;
<td><p><code>AM</code>, <code>PM</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>%M</code></p></td>&#13;
<td><p>minute</p></td>&#13;
<td><p><code>00</code>-<code>59</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>%S</code></p></td>&#13;
<td><p>second</p></td>&#13;
<td><p><code>00</code>-<code>59</code></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>Numbers are zero-padded on the left.</p>&#13;
&#13;
<p>Here’s the <code>strftime()</code> function provided by the <code>time</code> module.&#13;
It converts a <code>struct_time</code> object to a string.&#13;
We’ll first define the format string <code>fmt</code> and use it again later:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">time</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fmt</code> <code class="o">=</code> <code class="s">"It's %A, %B </code><code class="si">%d</code><code class="s">, %Y, local time %I:%M:%S%p"</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">t</code> <code class="o">=</code> <code class="n">time</code><code class="o">.</code><code class="n">localtime</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">t</code>&#13;
<code class="go">time.struct_time(tm_year=2019, tm_mon=3, tm_mday=13, tm_hour=15,</code>&#13;
<code class="go">tm_min=23, tm_sec=46, tm_wday=2, tm_yday=72, tm_isdst=1)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">time</code><code class="o">.</code><code class="n">strftime</code><code class="p">(</code><code class="n">fmt</code><code class="p">,</code> <code class="n">t</code><code class="p">)</code>&#13;
<code class="go">"It's Wednesday, March 13, 2019, local time 03:23:46PM"</code></pre>&#13;
&#13;
<p>If we try this with a <code>date</code> object,&#13;
only the date parts will work,&#13;
and the time defaults to midnight:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">date</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">some_day</code> <code class="o">=</code> <code class="n">date</code><code class="p">(</code><code class="mi">2019</code><code class="p">,</code> <code class="mi">7</code><code class="p">,</code> <code class="mi">4</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fmt</code> <code class="o">=</code> <code class="s">"It's %A, %B </code><code class="si">%d</code><code class="s">, %Y, local time %I:%M:%S%p"</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">some_day</code><code class="o">.</code><code class="n">strftime</code><code class="p">(</code><code class="n">fmt</code><code class="p">)</code>&#13;
<code class="go">"It's Thursday, July 04, 2019, local time 12:00:00AM"</code></pre>&#13;
&#13;
<p>For a <code>time</code> object, only the time parts are converted:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">time</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fmt</code> <code class="o">=</code> <code class="s">"It's %A, %B </code><code class="si">%d</code><code class="s">, %Y, local time %I:%M:%S%p"</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">some_time</code> <code class="o">=</code> <code class="n">time</code><code class="p">(</code><code class="mi">10</code><code class="p">,</code> <code class="mi">35</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">some_time</code><code class="o">.</code><code class="n">strftime</code><code class="p">(</code><code class="n">fmt</code><code class="p">)</code>&#13;
<code class="go">"It's Monday, January 01, 1900, local time 10:35:00AM"</code></pre>&#13;
&#13;
<p>You won’t want to use the day parts from a <code>time</code> object,&#13;
because they’re meaningless.</p>&#13;
&#13;
<p><a data-primary="strptime() function" data-type="indexterm" id="idm45794985897272"/>To go the other way and convert a string to a date or time,&#13;
use <code>strptime()</code> with the same format string.&#13;
There’s no regular expression pattern matching;&#13;
the nonformat parts of the string (without <code>%</code>)&#13;
need to match exactly.&#13;
Let’s specify a format that matches <em>year</em>-<em>month</em>-<em>day</em>,&#13;
such as <code>2019-01-29</code>.&#13;
What happens if the date string you want to parse has&#13;
spaces instead of dashes?</p>&#13;
&#13;
<pre class="c_less_space" data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">time</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fmt</code> <code class="o">=</code> <code class="s">"%Y-%m-</code><code class="si">%d</code><code class="s">"</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">time</code><code class="o">.</code><code class="n">strptime</code><code class="p">(</code><code class="s">"2019 01 29"</code><code class="p">,</code> <code class="n">fmt</code><code class="p">)</code>&#13;
<code class="gt">Traceback (most recent call last):</code>&#13;
<code class="gr">  File "&lt;stdin&gt;",</code>&#13;
<code class="gr">    line 1, in &lt;module&gt;</code>&#13;
<code class="gr">  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/_strptime.py",</code>&#13;
<code class="gr">    line 571, in _strptime_time</code>&#13;
<code class="gr">    tt = _strptime(data_string, format)[0]</code>&#13;
<code class="gr">  File "/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/_strptime.py",</code>&#13;
<code class="gr">    line 359, in _strptime(data_string, format))</code>&#13;
<code class="gr">ValueError</code>: <code class="n">time data '2019 01 29' does not match format '%Y-%m-%d</code></pre>&#13;
&#13;
<p>If we feed <code>strptime()</code> some dashes, is it happy now?</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">time</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fmt</code> <code class="o">=</code> <code class="s">"%Y-%m-</code><code class="si">%d</code><code class="s">"</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">time</code><code class="o">.</code><code class="n">strptime</code><code class="p">(</code><code class="s">"2019-01-29"</code><code class="p">,</code> <code class="n">fmt</code><code class="p">)</code>&#13;
<code class="go">time.struct_time(tm_year=2019, tm_mon=1, tm_mday=29, tm_hour=0,</code>&#13;
<code class="go">tm_min=0, tm_sec=0, tm_wday=1, tm_yday=29, tm_isdst=-1)</code></pre>&#13;
&#13;
<p>Or fix the <code>fmt</code> string to match the date string:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">time</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fmt</code> <code class="o">=</code> <code class="s">"%Y %m </code><code class="si">%d</code><code class="s">"</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">time</code><code class="o">.</code><code class="n">strptime</code><code class="p">(</code><code class="s">"2019 01 29"</code><code class="p">,</code> <code class="n">fmt</code><code class="p">)</code>&#13;
<code class="go">time.struct_time(tm_year=2019, tm_mon=1, tm_mday=29, tm_hour=0,</code>&#13;
<code class="go">tm_min=0, tm_sec=0, tm_wday=1, tm_yday=29, tm_isdst=-1)</code></pre>&#13;
&#13;
<p>Even if the string seems to match its format,&#13;
an exception is raised if a value is out of range (file names truncated for space):</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">time</code><code class="o">.</code><code class="n">strptime</code><code class="p">(</code><code class="s">"2019-13-29"</code><code class="p">,</code> <code class="n">fmt</code><code class="p">)</code>&#13;
<code class="gt">Traceback (most recent call last):</code>&#13;
<code class="gr">  File "&lt;stdin&gt;",</code>&#13;
<code class="gr">    line 1, in &lt;module&gt;</code>&#13;
<code class="gr">  File ".../3.7/lib/python3.7/_strptime.py",</code>&#13;
<code class="gr">    line 571, in _strptime_time</code>&#13;
<code class="gr">    tt = _strptime(data_string, format)[0]</code>&#13;
<code class="gr">  File ".../3.7/lib/python3.7/_strptime.py",</code>&#13;
<code class="gr">    line 359, in _strptime(data_string, format))</code>&#13;
<code class="gr">ValueError</code>: <code class="n">time data '2019-13-29' does not match format '%Y-%m-%d</code></pre>&#13;
&#13;
<p>Names are specific to your <em>locale</em>—internationalization settings for your operating system.&#13;
<a data-primary="setlocale() function" data-type="indexterm" id="ix_ch13-times-asciidoc6"/>If you need to print different month and day names,&#13;
change your locale by using <code>setlocale()</code>;&#13;
its first argument is&#13;
<code>locale.LC_TIME</code> for dates and times,&#13;
and the second is a string&#13;
combining the language and country abbreviation.&#13;
Let’s invite some international friends to&#13;
a Halloween party.&#13;
We’ll print the month, day,&#13;
and day of week in&#13;
US English, French, German,&#13;
Spanish, and Icelandic&#13;
(Icelanders have real elves):</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">locale</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">date</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">halloween</code> <code class="o">=</code> <code class="n">date</code><code class="p">(</code><code class="mi">2019</code><code class="p">,</code> <code class="mi">10</code><code class="p">,</code> <code class="mi">31</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">lang_country</code> <code class="ow">in</code> <code class="p">[</code><code class="s">'en_us'</code><code class="p">,</code> <code class="s">'fr_fr'</code><code class="p">,</code> <code class="s">'de_de'</code><code class="p">,</code> <code class="s">'es_es'</code><code class="p">,</code> <code class="s">'is_is'</code><code class="p">,]:</code>&#13;
<code class="gp">... </code>    <code class="n">locale</code><code class="o">.</code><code class="n">setlocale</code><code class="p">(</code><code class="n">locale</code><code class="o">.</code><code class="n">LC_TIME</code><code class="p">,</code> <code class="n">lang_country</code><code class="p">)</code>&#13;
<code class="gp">... </code>    <code class="n">halloween</code><code class="o">.</code><code class="n">strftime</code><code class="p">(</code><code class="s">'%A, %B </code><code class="si">%d</code><code class="s">'</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">'en_us'</code>&#13;
<code class="go">'Thursday, October 31'</code>&#13;
<code class="go">'fr_fr'</code>&#13;
<code class="go">'Jeudi, octobre 31'</code>&#13;
<code class="go">'de_de'</code>&#13;
<code class="go">'Donnerstag, Oktober 31'</code>&#13;
<code class="go">'es_es'</code>&#13;
<code class="go">'jueves, octubre 31'</code>&#13;
<code class="go">'is_is'</code>&#13;
<code class="go">'fimmtudagur, október 31'</code>&#13;
<code class="go">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>Where do you find these magic values for <code>lang_country</code>?&#13;
This is a bit wonky, but you can try this to get all of them&#13;
(there are a few hundred):</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">locale</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">names</code> <code class="o">=</code> <code class="n">locale</code><code class="o">.</code><code class="n">locale_alias</code><code class="o">.</code><code class="n">keys</code><code class="p">()</code></pre>&#13;
&#13;
<p>From <code>names</code>,&#13;
let’s get just locale names that seem to work&#13;
with <code>setlocale()</code>,&#13;
such as the ones we used in the preceding&#13;
example—a two-character <a href="http://bit.ly/iso-639-1">language&#13;
code</a> followed by an underscore and a two-character&#13;
<a href="http://bit.ly/iso-3166-1">country code</a>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">good_names</code> <code class="o">=</code> <code class="p">[</code><code class="n">name</code> <code class="k">for</code> <code class="n">name</code> <code class="ow">in</code> <code class="n">names</code> <code class="k">if</code> \&#13;
<code class="go">len(name) == 5 and name[2] == '_']</code></pre>&#13;
&#13;
<p>What do the first five look like?</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">good_names</code><code class="p">[:</code><code class="mi">5</code><code class="p">]</code>&#13;
<code class="go">['sr_cs', 'de_at', 'nl_nl', 'es_ni', 'sp_yu']</code></pre>&#13;
&#13;
<p>So, if you wanted all the German language locales, try this:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">de</code> <code class="o">=</code> <code class="p">[</code><code class="n">name</code> <code class="k">for</code> <code class="n">name</code> <code class="ow">in</code> <code class="n">good_names</code> <code class="k">if</code> <code class="n">name</code><code class="o">.</code><code class="n">startswith</code><code class="p">(</code><code class="s">'de'</code><code class="p">)]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">de</code>&#13;
<code class="go">['de_at', 'de_de', 'de_ch', 'de_lu', 'de_be']</code></pre>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>If you run <code>set_locale()</code> and get the error</p>&#13;
&#13;
<pre data-type="programlisting">locale.Error: unsupported locale setting</pre>&#13;
&#13;
<p>that locale is not supported by your operating system.&#13;
You’ll need to figure out what your operating system needs&#13;
to add it.&#13;
This can happen even if Python told you&#13;
(using <code>locale.locale_alias.keys()</code>)&#13;
that it was a good locale.&#13;
I had this error when testing on macOS&#13;
with the locale <code>cy_gb</code>&#13;
(Welsh, Great Britain),&#13;
even though it had accepted <code>is_is</code> (Icelandic)&#13;
in the preceding example<a data-startref="ix_ch13-times-asciidoc6" data-type="indexterm" id="idm45794985425992"/>.<a data-startref="ix_ch13-times-asciidoc5" data-type="indexterm" id="idm45794985425160"/></p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="All the Conversions" data-type="sect1"><div class="sect1" id="idm45794986133080">&#13;
<h1>All the Conversions</h1>&#13;
&#13;
<p><a data-primary="calendars/clocks" data-secondary="standard Python time interconversions" data-type="indexterm" id="idm45794985423560"/><a data-type="xref" href="#datetime_fig">Figure 13-1</a> (from the Python&#13;
<a href="https://oreil.ly/C_39k">wiki</a>)&#13;
summarizes all the standard Python time interconversions.</p>&#13;
&#13;
<figure><div class="figure" id="datetime_fig">&#13;
<img alt="inp2 1301" src="assets/inp2_1301.png"/>&#13;
<h6><span class="label">Figure 13-1. </span>Date and time conversions</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Alternative Modules" data-type="sect1"><div class="sect1" id="datetime_other">&#13;
<h1>Alternative Modules</h1>&#13;
&#13;
<p><a data-primary="calendars/clocks" data-secondary="third-party modules for" data-type="indexterm" id="idm45794985417432"/>If you find the standard library modules confusing,&#13;
or lacking a particular conversion that you want,&#13;
there are many third-party alternatives. Here are just a few of them:</p>&#13;
<dl>&#13;
<dt><a href="https://arrow.readthedocs.io"><code>arrow</code></a></dt>&#13;
<dd>&#13;
<p>Combines many date and time functions with a simple API</p>&#13;
</dd>&#13;
<dt><a href="http://labix.org/python-dateutil"><code>dateutil</code></a></dt>&#13;
<dd>&#13;
<p>Parses almost any date format&#13;
and handles relative dates and times well</p>&#13;
</dd>&#13;
<dt><a href="https://pypi.python.org/pypi/iso8601"><code>iso8601</code></a></dt>&#13;
<dd>&#13;
<p>Fills in gaps in the standard library for the ISO8601 format</p>&#13;
</dd>&#13;
<dt><a href="https://github.com/ambitioninc/fleming"><code>fleming</code></a></dt>&#13;
<dd>&#13;
<p>Many time zone functions</p>&#13;
</dd>&#13;
<dt><a href="https://github.com/kennethreitz/maya"><code>maya</code></a></dt>&#13;
<dd>&#13;
<p>Intuitive interface to dates, times, and intervals</p>&#13;
</dd>&#13;
<dt><a href="https://github.com/jeffreystarr/dateinfer"><code>dateinfer</code></a></dt>&#13;
<dd>&#13;
<p>Guesses the right format strings from date/time strings</p>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Coming Up" data-type="sect1"><div class="sect1" id="idm45794985404040">&#13;
<h1>Coming Up</h1>&#13;
&#13;
<p>Files and directories need love, too.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Things to Do" data-type="sect1"><div class="sect1" id="idm45794985381672">&#13;
<h1>Things to Do</h1>&#13;
&#13;
<p>13.1&#13;
<a data-primary="calendars/clocks" data-secondary="practice exercises" data-type="indexterm" id="idm45794985380296"/>Write the current date as a string to the text file <em>today.txt</em>.</p>&#13;
&#13;
<p>13.2&#13;
Read the text file <em>today.txt</em> into the string <code>today_string</code>.</p>&#13;
&#13;
<p>13.3&#13;
Parse the date from <code>today_string</code>.</p>&#13;
&#13;
<p>13.4&#13;
Create a date object of your day of birth.</p>&#13;
&#13;
<p>13.5&#13;
What day of the week was your day of birth?</p>&#13;
&#13;
<p>13.6&#13;
When will you be (or when were you) 10,000 days old?<a data-startref="ix_ch13-times-asciidoc0" data-type="indexterm" id="idm45794985375112"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<div data-type="footnotes"><p data-type="footnote" id="idm45794986403304"><sup><a href="ch13.html#idm45794986403304-marker">1</a></sup> This starting point is roughly when Unix was born, ignoring those pesky leap seconds.</p></div></div></section></body></html>