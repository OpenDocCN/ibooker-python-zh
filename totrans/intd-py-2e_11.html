<html><head></head><body><section data-pdf-bookmark="Chapter 10. Oh Oh: Objects and Classes" data-type="chapter" epub:type="chapter"><div class="chapter" id="ch_objects">&#13;
<h1><span class="label">Chapter 10. </span>Oh Oh: Objects and Classes</h1>&#13;
&#13;
<blockquote>&#13;
<p>No object is mysterious. The mystery is your eye.</p>&#13;
<p data-type="attribution">Elizabeth Bowen</p>&#13;
</blockquote>&#13;
<blockquote>&#13;
<p>Take an object. Do something to it. Do something else to it.</p>&#13;
<p data-type="attribution">Jasper Johns</p>&#13;
</blockquote>&#13;
&#13;
<p>As I’ve mentioned on various pages,&#13;
everything in Python,&#13;
from numbers to functions,&#13;
is an object.&#13;
However, Python hides most of the object machinery&#13;
by means of special syntax.&#13;
You can type <code>num = 7</code>&#13;
to create an object of type integer with the value 7,&#13;
and assign&#13;
an object reference to the name <code>num</code>.&#13;
The only time you need to look inside objects is&#13;
when you want to make your own or&#13;
modify the behavior of existing objects.&#13;
You’ll see how to do both in this chapter.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="What Are Objects?" data-type="sect1"><div class="sect1" id="object_definition">&#13;
<h1>What Are Objects?</h1>&#13;
&#13;
<p><a data-primary="objects" data-secondary="defined" data-type="indexterm" id="idm45794999467672"/>An <em>object</em> is a custom data structure containing both data&#13;
(variables, called <em>attributes</em>)&#13;
and code (functions, called <em>methods</em>).&#13;
It represents a unique instance of some concrete thing.&#13;
Think of objects as nouns&#13;
and their methods as verbs.&#13;
An object represents an individual thing,&#13;
and its methods define how it interacts with&#13;
other things.</p>&#13;
&#13;
<p>For example,&#13;
the integer object with the value&#13;
<code>7</code> is an object that facilitates methods&#13;
such as addition and multiplication,&#13;
as you saw in <a data-type="xref" href="ch03.html#ch_numbers">Chapter 3</a>.&#13;
<code>8</code> is a different object.&#13;
This means there’s an integer class built in somewhere in Python,&#13;
to which both <code>7</code> and <code>8</code> belong.&#13;
The strings <code>'cat'</code> and <code>'duck'</code> are also objects&#13;
in Python, and have string methods that&#13;
you’ve seen in <a data-type="xref" href="ch05.html#ch_strings">Chapter 5</a>,&#13;
such as <code>capitalize()</code> and <code>replace()</code>.</p>&#13;
&#13;
<p>Unlike modules, you can have multiple&#13;
objects (often referred to as <em>instances</em>)&#13;
at the same time, each&#13;
with potentially different attributes.&#13;
They’re like super data structures,&#13;
with code thrown in.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Simple Objects" data-type="sect1"><div class="sect1" id="idm45794999341160">&#13;
<h1>Simple Objects</h1>&#13;
&#13;
<p><a data-primary="objects" data-secondary="simple" data-type="indexterm" id="ix_ch10-objects-asciidoc0"/>Let’s start with basic object classes; we’ll save the discussion of inheritance&#13;
for a few pages.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Define a Class with class" data-type="sect2"><div class="sect2" id="class">&#13;
<h2>Define a Class with class</h2>&#13;
&#13;
<p><a data-primary="objects" data-secondary="class definition for" data-type="indexterm" id="idm45794999336648"/>To create a new object that no one has ever created before,&#13;
you first define a <em>class</em> that indicates what it contains.</p>&#13;
&#13;
<p>In <a data-type="xref" href="ch02.html#ch_names">Chapter 2</a>, I compared an object to a plastic box.&#13;
A <em>class</em> is like the mold that makes that box.&#13;
For instance,&#13;
Python has a built-in class that makes string objects such as&#13;
<code>'cat'</code> and <code>'duck'</code>,&#13;
and the other standard data types—lists,  dictionaries, and so on.&#13;
To create your own custom object in Python,&#13;
you first need to define a class&#13;
by using the <code>class</code> keyword.&#13;
Let’s walk through some simple examples.</p>&#13;
&#13;
<p>Suppose that you want to define objects to represent&#13;
information about cats.<sup><a data-type="noteref" href="ch10.html#idm45794999331256" id="idm45794999331256-marker">1</a></sup>&#13;
Each object will represent one feline.&#13;
You’ll first want to define a class called <code>Cat</code> as the mold.&#13;
In the examples that follow,&#13;
we try more than one version of this class&#13;
as we build up from the simplest class&#13;
to ones that actually do something useful.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>We’re following the naming conventions of Python’s&#13;
<a href="https://oreil.ly/gAJOF">PEP-8</a>.</p>&#13;
</div>&#13;
&#13;
<p>Our first try is the simplest possible class,&#13;
an empty one:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Cat</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">pass</code></pre>&#13;
&#13;
<p>You can also say:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Cat</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">pass</code></pre>&#13;
&#13;
<p>Just as with functions, we needed to say&#13;
<code>pass</code> to indicate that this class was empty.&#13;
This definition is the bare minimum to create&#13;
an object.</p>&#13;
&#13;
<p>You create an object from a class by&#13;
calling the class name as though it&#13;
were a <span class="keep-together">function:</span></p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">a_cat</code> <code class="o">=</code> <code class="n">Cat</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">another_cat</code> <code class="o">=</code> <code class="n">Cat</code><code class="p">()</code></pre>&#13;
&#13;
<p>In this case,&#13;
calling <code>Cat()</code> creates two individual&#13;
objects from the <code>Cat</code> class,&#13;
and we assigned them to the names <code>a_cat</code> and <code>another_cat</code>.&#13;
But our <code>Cat</code> class had no other code,&#13;
so the objects that we created from it&#13;
just sit there and can’t do much else.</p>&#13;
&#13;
<p>Well, they can do a little.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Attributes" data-type="sect2"><div class="sect2" id="attributes">&#13;
<h2>Attributes</h2>&#13;
&#13;
<p><a data-primary="attributes" data-type="indexterm" id="idm45794999277752"/><a data-primary="objects" data-secondary="attributes" data-type="indexterm" id="idm45794999277048"/>An <em>attribute</em> is a variable inside a class or object.&#13;
During and after an object or class is created,&#13;
you can assign attributes to it.&#13;
An attribute can be any other object.&#13;
Let’s make two cat objects again:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Cat</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">pass</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">a_cat</code> <code class="o">=</code> <code class="n">Cat</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">a_cat</code>&#13;
<code class="go">&lt;__main__.Cat object at 0x100cd1da0&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">another_cat</code> <code class="o">=</code> <code class="n">Cat</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">another_cat</code>&#13;
<code class="go">&lt;__main__.Cat object at 0x100cd1e48&gt;</code></pre>&#13;
&#13;
<p>When we defined the <code>Cat</code> class,&#13;
we didn’t specify how to print an object&#13;
from that class.&#13;
Python jumps in and prints something like&#13;
<code>&lt;__main__.Cat object at 0x100cd1da0&gt;</code>.&#13;
In <a data-type="xref" href="#magic_methods">“Magic Methods”</a>, you’ll&#13;
see how to change this default behavior.</p>&#13;
&#13;
<p>Now assign a few attributes to our first object:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">a_cat</code><code class="o">.</code><code class="n">age</code> <code class="o">=</code> <code class="mi">3</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">a_cat</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="s">"Mr. Fuzzybuttons"</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">a_cat</code><code class="o">.</code><code class="n">nemesis</code> <code class="o">=</code> <code class="n">another_cat</code></pre>&#13;
&#13;
<p>Can we access these? We sure hope so:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">a_cat</code><code class="o">.</code><code class="n">age</code>&#13;
<code class="go">3</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">a_cat</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">'Mr. Fuzzybuttons'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">a_cat</code><code class="o">.</code><code class="n">nemesis</code>&#13;
<code class="go">&lt;__main__.Cat object at 0x100cd1e48&gt;</code></pre>&#13;
&#13;
<p>Because <code>nemesis</code> was an attribute referring to&#13;
another <code>Cat</code> object,&#13;
we can use <code>a_cat.nemesis</code> to access it,&#13;
but this other object doesn’t have a <code>name</code> attribute yet:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">a_cat</code><code class="o">.</code><code class="n">nemesis</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="gt">Traceback (most recent call last):</code>&#13;
  File <code class="nb">"&lt;stdin&gt;"</code>, line <code class="m">1</code>, in <code class="n">&lt;module&gt;</code>&#13;
<code class="gr">AttributeError</code>: <code class="n">'Cat' object has no attribute 'name'</code></pre>&#13;
&#13;
<p class="pagebreak-before">Let’s name our archfeline:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">a_cat</code><code class="o">.</code><code class="n">nemesis</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="s">"Mr. Bigglesworth"</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">a_cat</code><code class="o">.</code><code class="n">nemesis</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">'Mr. Bigglesworth'</code></pre>&#13;
&#13;
<p>Even the simplest object like this one can be used&#13;
to store multiple attributes.&#13;
So, you can use multiple objects to store different values,&#13;
instead of using something like a list or dictionary.</p>&#13;
&#13;
<p>When you hear <em>attributes</em>, it usually means object attributes.&#13;
There are also <em>class attributes</em>,&#13;
and you’ll see the differences later in <a data-type="xref" href="#attribute_types">“Class and Object Attributes”</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Methods" data-type="sect2"><div class="sect2" id="methods">&#13;
<h2>Methods</h2>&#13;
&#13;
<p><a data-primary="classes" data-secondary="methods and" data-type="indexterm" id="idm45794999071320"/><a data-primary="functions" data-secondary="methods and" data-type="indexterm" id="idm45794999070120"/><a data-primary="methods" data-type="indexterm" id="idm45794999039368"/><a data-primary="objects" data-secondary="methods and" data-type="indexterm" id="idm45794999038696"/>A <em>method</em> is a function in a class or object.&#13;
A method looks like any other function,&#13;
but can be used in special ways that you’ll see in&#13;
<a data-type="xref" href="#properties">“Properties for Attribute Access”</a> and <a data-type="xref" href="#method_types">“Method Types”</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Initialization" data-type="sect2"><div class="sect2" id="idm45794999035272">&#13;
<h2>Initialization</h2>&#13;
&#13;
<p><a data-primary="__init__ () method" data-type="indexterm" id="idm45794999033672"/><a data-primary="attributes" data-secondary="initialization and" data-type="indexterm" id="idm45794999032968"/><a data-primary="initialization" data-type="indexterm" id="idm45794999032024"/><a data-primary="objects" data-secondary="initialization" data-type="indexterm" id="idm45794999031352"/>If you want to assign object attributes at creation time,&#13;
you need the special&#13;
Python object initialization method <code>__init__()</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Cat</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">pass</code></pre>&#13;
&#13;
<p>This is what you’ll see in real Python class definitions.&#13;
I admit that the <code>__init__()</code> and <code>self</code> look strange.&#13;
<code>__init__()</code> is the special Python name for&#13;
a method that initializes an individual&#13;
object from its class&#13;
definition.<sup><a data-type="noteref" href="ch10.html#idm45794999026920" id="idm45794999026920-marker">2</a></sup>&#13;
The <code>self</code> argument specifies that it refers to&#13;
the individual object itself.</p>&#13;
&#13;
<p>When you define <code>__init__()</code> in a class definition,&#13;
its first parameter should be named <code>self</code>.&#13;
Although <code>self</code> is not a reserved word in Python,&#13;
it’s common usage.&#13;
No one reading&#13;
your code later (including you!)&#13;
will need to guess what you meant if you use <code>self</code>.</p>&#13;
&#13;
<p>But even this second <code>Cat</code> class&#13;
definition didn’t create an&#13;
object that really did anything.&#13;
The third try is the charm&#13;
that really shows how to create a simple&#13;
object in Python and assign one of its attributes.&#13;
This time, we add the parameter <code>name</code> to the&#13;
initialization method:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Cat</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">name</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="n">name</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>Now we can create an object from the <code>Cat</code>&#13;
class by passing a string for the <code>name</code> parameter:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">furball</code> <code class="o">=</code> <code class="n">Cat</code><code class="p">(</code><code class="s">'Grumpy'</code><code class="p">)</code></pre>&#13;
&#13;
<p>Here’s what this line of code does:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Looks up the definition of the <code>Cat</code> class</p>&#13;
</li>&#13;
<li>&#13;
<p><em>Instantiates</em> (creates) a new object in memory</p>&#13;
</li>&#13;
<li>&#13;
<p>Calls the object’s <code>__init__()</code> method,&#13;
passing this newly created&#13;
object as <code>self</code> and the other argument (<code>'Grumpy'</code>)&#13;
as <code>name</code></p>&#13;
</li>&#13;
<li>&#13;
<p>Stores the value of <code>name</code> in the object</p>&#13;
</li>&#13;
<li>&#13;
<p>Returns the new object</p>&#13;
</li>&#13;
<li>&#13;
<p>Attaches the variable <code>furball</code> to the object</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>This new object is like any other object in Python.&#13;
You can use it as an element of a list, tuple, dictionary, or set.&#13;
You can pass it to a function as an argument,&#13;
or return it as a result.</p>&#13;
&#13;
<p>What about the <code>name</code> value that we passed in?&#13;
It was saved with the object as an attribute.&#13;
You can read and write it directly:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="s">'Our latest addition: '</code><code class="p">,</code> <code class="n">furball</code><code class="o">.</code><code class="n">name</code><code class="p">)</code>&#13;
<code class="go">Our latest addition: Grumpy</code></pre>&#13;
&#13;
<p>Remember,&#13;
<em>inside</em> the <code>Cat</code> class definition,&#13;
you access the <code>name</code> attribute as <code>self.name</code>.&#13;
When you create an actual object&#13;
and assign it to a variable like <code>furball</code>,&#13;
you refer to it as <code>furball.name</code>.</p>&#13;
&#13;
<p>It is <em>not</em> necessary to have an <code>__init__()</code>&#13;
method in every class definition;&#13;
it’s used to do anything that’s needed&#13;
to distinguish this object&#13;
from others created from the same class.&#13;
It’s not what some other&#13;
languages would call a “constructor.”&#13;
Python already constructed the object for you.&#13;
Think of <code>__init__()</code> as an <em>initializer</em>.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>You can make many individual objects from a single class.&#13;
But remember that Python implements data as objects,&#13;
so the class itself is an object.&#13;
However, there’s only one class object in your program.&#13;
If you defined <code>class Cat</code> as we did here,&#13;
it’s like the Highlander—there can be only one.<a data-startref="ix_ch10-objects-asciidoc0" data-type="indexterm" id="idm45794998894024"/></p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Inheritance" data-type="sect1"><div class="sect1" id="inheritance">&#13;
<h1>Inheritance</h1>&#13;
&#13;
<p><a data-primary="classes" data-secondary="inheritance" data-type="indexterm" id="ix_ch10-objects-asciidoc1"/><a data-primary="inheritance" data-type="indexterm" id="ix_ch10-objects-asciidoc2"/><a data-primary="objects" data-secondary="inheritance and" data-type="indexterm" id="ix_ch10-objects-asciidoc3"/>When you’re trying to solve some coding problem,&#13;
often you’ll find an existing class that creates&#13;
objects that do almost what you need.&#13;
What can you do?</p>&#13;
&#13;
<p>You could modify this old class,&#13;
but you’ll make it more complicated,&#13;
and you might break something that used to work.</p>&#13;
&#13;
<p>Or you could write a new class,&#13;
cutting and pasting from the old one&#13;
and merging your new code.&#13;
But this means that you have more code to maintain, and&#13;
the parts of the old and new classes that used to work the same&#13;
might drift apart because they’re now in separate places.</p>&#13;
&#13;
<p>One solution is <em>inheritance</em>:&#13;
creating a new class <em>from</em> an existing class,&#13;
but with some additions or changes.&#13;
It’s a good way to reuse code.&#13;
When you use inheritance, the new class&#13;
can automatically use all the code from the old class&#13;
but without you needing to copy any of it.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Inherit from a Parent Class" data-type="sect2"><div class="sect2" id="idm45794998858456">&#13;
<h2>Inherit from a Parent Class</h2>&#13;
&#13;
<p><a data-primary="inheritance" data-secondary="from parent class" data-type="indexterm" id="idm45794998856888"/><a data-primary="parent class" data-type="indexterm" id="idm45794998855752"/>You define only what you need to add or change in the new&#13;
class, and this overrides the behavior of the old class.&#13;
The original class is called a&#13;
<em>parent</em>, <em>superclass</em>, or <em>base class</em>;&#13;
the new class is called a&#13;
<em>child</em>, <em>subclass</em>, or <em>derived class</em>.&#13;
These terms are interchangeable in object-oriented&#13;
programming.</p>&#13;
&#13;
<p>So, let’s inherit something.&#13;
In the next example, we define an empty class called <code>Car</code>.&#13;
Next, we define a subclass of <code>Car</code> called <code>Yugo</code>.<sup><a data-type="noteref" href="ch10.html#idm45794998829960" id="idm45794998829960-marker">3</a></sup>&#13;
You define a subclass by using the same <code>class</code> keyword&#13;
but with the parent class name inside the parentheses&#13;
(<code>class Yugo(Car)</code> here):</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Car</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">pass</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Yugo</code><code class="p">(</code><code class="n">Car</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">pass</code>&#13;
<code class="gp">...</code></pre>&#13;
&#13;
<p>You can check whether a class is derived from another class by using&#13;
<code>issubclass()</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="nb">issubclass</code><code class="p">(</code><code class="n">Yugo</code><code class="p">,</code> <code class="n">Car</code><code class="p">)</code>&#13;
<code class="go">True</code></pre>&#13;
&#13;
<p>Next, create an object from each class:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_car</code> <code class="o">=</code> <code class="n">Car</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_yugo</code> <code class="o">=</code> <code class="n">Yugo</code><code class="p">()</code></pre>&#13;
&#13;
<p>A child class is a specialization of a parent class;&#13;
in object-oriented lingo, <code>Yugo</code> <em>is-a</em> <code>Car</code>.&#13;
The object named <code>give_me_a_yugo</code> is an instance of&#13;
class <code>Yugo</code>, but it also inherits whatever a <code>Car</code> can do.&#13;
In this case,&#13;
<code>Car</code> and <code>Yugo</code> are as useful as deckhands on a submarine,&#13;
so let’s try new class definitions&#13;
that actually do something:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Car</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">exclaim</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"I'm a Car!"</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Yugo</code><code class="p">(</code><code class="n">Car</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">pass</code>&#13;
<code class="gp">...</code></pre>&#13;
&#13;
<p>Finally, make one object from each class&#13;
and call the <code>exclaim</code> method:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_car</code> <code class="o">=</code> <code class="n">Car</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_yugo</code> <code class="o">=</code> <code class="n">Yugo</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_car</code><code class="o">.</code><code class="n">exclaim</code><code class="p">()</code>&#13;
<code class="go">I'm a Car!</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_yugo</code><code class="o">.</code><code class="n">exclaim</code><code class="p">()</code>&#13;
<code class="go">I'm a Car!</code></pre>&#13;
&#13;
<p>Without doing anything special,&#13;
<code>Yugo</code> inherited the <code>exclaim()</code> method from <code>Car</code>.&#13;
In fact, <code>Yugo</code> says that it <em>is</em> a <code>Car</code>,&#13;
which might lead to an identity crisis.&#13;
Let’s see what we can do about that.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>Inheritance is appealing,&#13;
but can be overused.&#13;
Years of object-oriented programming experience&#13;
have shown that too much use of&#13;
inheritance can make programs hard to manage.&#13;
Instead, it’s often recommended to emphasize&#13;
other techniques like&#13;
aggregation and composition.&#13;
We get to these alternatives in this chapter.</p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Override a Method" data-type="sect2"><div class="sect2" id="idm45794998857832">&#13;
<h2>Override a Method</h2>&#13;
&#13;
<p><a data-primary="inheritance" data-secondary="overriding a method" data-type="indexterm" id="idm45794998638984"/><a data-primary="methods" data-secondary="overriding" data-type="indexterm" id="idm45794998637784"/><a data-primary="objects" data-secondary="overriding methods" data-type="indexterm" id="idm45794998636840"/>As you just saw,&#13;
a new class initially inherits everything from its parent class.&#13;
Moving forward,&#13;
you’ll see how to replace or override a parent method.&#13;
<code>Yugo</code> should probably be different from <code>Car</code> in some way;&#13;
otherwise, what’s the point of defining a new class?&#13;
Let’s change how the <code>exclaim()</code> method works&#13;
for a <code>Yugo</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Car</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">exclaim</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"I'm a Car!"</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Yugo</code><code class="p">(</code><code class="n">Car</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">exclaim</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"I'm a Yugo! Much like a Car, but more Yugo-ish."</code><code class="p">)</code>&#13;
<code class="gp">...</code></pre>&#13;
&#13;
<p class="pagebreak-before">Now make two objects from these classes:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_car</code> <code class="o">=</code> <code class="n">Car</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_yugo</code> <code class="o">=</code> <code class="n">Yugo</code><code class="p">()</code></pre>&#13;
&#13;
<p>What do they say?</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_car</code><code class="o">.</code><code class="n">exclaim</code><code class="p">()</code>&#13;
<code class="go">I'm a Car!</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_yugo</code><code class="o">.</code><code class="n">exclaim</code><code class="p">()</code>&#13;
<code class="go">I'm a Yugo! Much like a Car, but more Yugo-ish.</code></pre>&#13;
&#13;
<p>In these examples, we overrode the <code>exclaim()</code> method.&#13;
We can override any methods, including <code>__init__()</code>.&#13;
Here’s another example that uses a <code>Person</code> class.&#13;
Let’s make subclasses that represent doctors&#13;
(<code>MDPerson</code>) and lawyers (<code>JDPerson</code>):</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Person</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">name</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="n">name</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">MDPerson</code><code class="p">(</code><code class="n">Person</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">name</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="s">"Doctor "</code> <code class="o">+</code> <code class="n">name</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">JDPerson</code><code class="p">(</code><code class="n">Person</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">name</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="n">name</code> <code class="o">+</code> <code class="s">", Esquire"</code>&#13;
<code class="gp">...</code></pre>&#13;
&#13;
<p>In these cases,&#13;
the initialization method <code>__init__()</code>&#13;
takes the same arguments as the parent <code>Person</code> class&#13;
but stores the value of <code>name</code>&#13;
differently inside the object instance:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">person</code> <code class="o">=</code> <code class="n">Person</code><code class="p">(</code><code class="s">'Fudd'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">doctor</code> <code class="o">=</code> <code class="n">MDPerson</code><code class="p">(</code><code class="s">'Fudd'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">lawyer</code> <code class="o">=</code> <code class="n">JDPerson</code><code class="p">(</code><code class="s">'Fudd'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">person</code><code class="o">.</code><code class="n">name</code><code class="p">)</code>&#13;
<code class="go">Fudd</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">doctor</code><code class="o">.</code><code class="n">name</code><code class="p">)</code>&#13;
<code class="go">Doctor Fudd</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">lawyer</code><code class="o">.</code><code class="n">name</code><code class="p">)</code>&#13;
<code class="go">Fudd, Esquire</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Add a Method" data-type="sect2"><div class="sect2" id="idm45794998639960">&#13;
<h2>Add a Method</h2>&#13;
&#13;
<p><a data-primary="inheritance" data-secondary="adding a method" data-type="indexterm" id="idm45794998305448"/><a data-primary="methods" data-secondary="adding" data-type="indexterm" id="idm45794998304248"/><a data-primary="objects" data-secondary="adding methods" data-type="indexterm" id="idm45794998303304"/>The child class can also <em>add</em> a method that&#13;
was not present in its parent class.&#13;
Going back to classes <code>Car</code> and <code>Yugo</code>,&#13;
we’ll define the new method <code>need_a_push()</code>&#13;
for class <code>Yugo</code> only:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Car</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">exclaim</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"I'm a Car!"</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Yugo</code><code class="p">(</code><code class="n">Car</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">exclaim</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"I'm a Yugo! Much like a Car, but more Yugo-ish."</code><code class="p">)</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">need_a_push</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"A little help here?"</code><code class="p">)</code>&#13;
<code class="gp">...</code></pre>&#13;
&#13;
<p>Next, make a <code>Car</code> and a <code>Yugo</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_car</code> <code class="o">=</code> <code class="n">Car</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_yugo</code> <code class="o">=</code> <code class="n">Yugo</code><code class="p">()</code></pre>&#13;
&#13;
<p>A <code>Yugo</code> object can react to a <code>need_a_push()</code> method call:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_yugo</code><code class="o">.</code><code class="n">need_a_push</code><code class="p">()</code>&#13;
<code class="go">A little help here?</code></pre>&#13;
&#13;
<p>But a generic <code>Car</code> object cannot:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">give_me_a_car</code><code class="o">.</code><code class="n">need_a_push</code><code class="p">()</code>&#13;
<code class="gt">Traceback (most recent call last):</code>&#13;
  File <code class="nb">"&lt;stdin&gt;"</code>, line <code class="m">1</code>, in <code class="n">&lt;module&gt;</code>&#13;
<code class="gr">AttributeError</code>: <code class="n">'Car' object has no attribute 'need_a_push'</code></pre>&#13;
&#13;
<p>At this point, a <code>Yugo</code> can do something that a <code>Car</code> cannot,&#13;
and the distinct personality of a <code>Yugo</code> can emerge.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Get Help from Your Parent with super()" data-type="sect2"><div class="sect2" id="super">&#13;
<h2>Get Help from Your Parent with super()</h2>&#13;
&#13;
<p><a data-primary="inheritance" data-secondary="calling parent method" data-type="indexterm" id="idm45794998152648"/><a data-primary="objects" data-secondary="calling parent methods" data-type="indexterm" id="idm45794998214424"/><a data-primary="parent method" data-type="indexterm" id="idm45794998213480"/><a data-primary="super() function" data-type="indexterm" id="idm45794998212808"/>We saw how the child class could add or override&#13;
a method from the parent.&#13;
What if it wanted to call that parent method?&#13;
“I’m glad you asked,” says <code>super()</code>.&#13;
Here, we define a new class called <code>EmailPerson</code> that&#13;
represents a <code>Person</code> with an email address.&#13;
First, our familiar <code>Person</code> definition:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Person</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">name</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="n">name</code>&#13;
<code class="gp">...</code></pre>&#13;
&#13;
<p>Notice that the <code>__init__()</code> call in the following subclass&#13;
has an additional&#13;
<code>email</code> parameter:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">EmailPerson</code><code class="p">(</code><code class="n">Person</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">name</code><code class="p">,</code> <code class="n">email</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="nb">super</code><code class="p">()</code><code class="o">.</code><code class="n">__init__</code><code class="p">(</code><code class="n">name</code><code class="p">)</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">email</code> <code class="o">=</code> <code class="n">email</code></pre>&#13;
&#13;
<p>When you define an <code>__init__()</code> method for your class,&#13;
you’re replacing the <code class="keep-together">__init__()</code> method of its parent class,&#13;
and the latter is not called automatically anymore.&#13;
As a result, we need to call it explicitly.&#13;
Here’s what’s happening:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>The <code>super()</code> gets the definition of the parent class, <code>Person</code>.</p>&#13;
</li>&#13;
<li>&#13;
<p>The <code>__init__()</code> method calls the <code>Person.__init__()</code> method.&#13;
It takes care of passing the <code>self</code> argument to the superclass,&#13;
so you just need to give it any optional arguments.&#13;
In our case, the only other argument <code>Person()</code> accepts is <code>name</code>.</p>&#13;
</li>&#13;
<li>&#13;
<p>The <code>self.email = email</code> line is the new code that&#13;
makes this <code>EmailPerson</code> different from a <code>Person</code>.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Moving on, let’s make one of these creatures:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">bob</code> <code class="o">=</code> <code class="n">EmailPerson</code><code class="p">(</code><code class="s">'Bob Frapples'</code><code class="p">,</code> <code class="s">'bob@frapples.com'</code><code class="p">)</code></pre>&#13;
&#13;
<p>We should be able to access both the <code>name</code>&#13;
and <code>email</code> attributes:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">bob</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">'Bob Frapples'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">bob</code><code class="o">.</code><code class="n">email</code>&#13;
<code class="go">'bob@frapples.com'</code></pre>&#13;
&#13;
<p>Why didn’t we just define our new class as follows?</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">EmailPerson</code><code class="p">(</code><code class="n">Person</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">name</code><code class="p">,</code> <code class="n">email</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="n">name</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">email</code> <code class="o">=</code> <code class="n">email</code></pre>&#13;
&#13;
<p>We could have done that,&#13;
but it would have defeated our use of inheritance.&#13;
We used <code>super()</code> to make <code>Person</code> do its work,&#13;
the same as a plain <code>Person</code> object would.&#13;
There’s another benefit:&#13;
if the definition of <code>Person</code> changes in the future,&#13;
using <code>super()</code> will&#13;
ensure that the attributes and methods that&#13;
<code>EmailPerson</code> inherits from <code>Person</code> will reflect the change.</p>&#13;
&#13;
<p>Use <code>super()</code> when the child is doing something its&#13;
own way but still needs something from the parent&#13;
(as in real life).</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Multiple Inheritance" data-type="sect2"><div class="sect2" id="multiple_inheritance">&#13;
<h2>Multiple Inheritance</h2>&#13;
&#13;
<p><a data-primary="inheritance" data-secondary="multiple" data-type="indexterm" id="ix_ch10-objects-asciidoc4"/>You’ve just seen some class examples with no parent class,&#13;
and some with one.&#13;
Actually,&#13;
objects can inherit from multiple parent classes.</p>&#13;
&#13;
<p>If your class refers to a method or attribute that it doesn’t have,&#13;
Python will look in all the parents.&#13;
What if more than one of them has something with that name?&#13;
Who wins?</p>&#13;
&#13;
<p>Unlike inheritance in people,&#13;
where a dominant gene wins no matter who it came from,&#13;
<a data-primary="methods" data-secondary="resolution order" data-type="indexterm" id="idm45794997904744"/>inheritance in Python depends on <em>method resolution order</em>.&#13;
<a data-primary="mro() method" data-type="indexterm" id="idm45794997903256"/>Each Python class has a special method called <code>mro()</code>&#13;
that returns a list of the classes that would&#13;
be visited to find a method or attribute for an object&#13;
of that class.&#13;
A similar attribute, called <code>__mro__</code>,&#13;
is a tuple of those classes.&#13;
Like a sudden-death playoff, the first one wins.</p>&#13;
&#13;
<p>Here, we define a top <code>Animal</code> class,&#13;
two child classes (<code>Horse</code> and <code>Donkey</code>), and then two derived from these:<sup><a data-type="noteref" href="ch10.html#idm45794997899784" id="idm45794997899784-marker">4</a></sup></p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Animal</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">says</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="go">            return 'I speak!'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Horse</code><code class="p">(</code><code class="n">Animal</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">says</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="s">'Neigh!'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Donkey</code><code class="p">(</code><code class="n">Animal</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">says</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="s">'Hee-haw!'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Mule</code><code class="p">(</code><code class="n">Donkey</code><code class="p">,</code> <code class="n">Horse</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">pass</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Hinny</code><code class="p">(</code><code class="n">Horse</code><code class="p">,</code> <code class="n">Donkey</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">pass</code>&#13;
<code class="gp">...</code></pre>&#13;
&#13;
<p>If we look for a method or attribute of a <code>Mule</code>,&#13;
Python will look at the following things, in this order:</p>&#13;
<ol>&#13;
<li>&#13;
<p>The object itself (of type <code>Mule</code>)</p>&#13;
</li>&#13;
<li>&#13;
<p>The object’s class (<code>Mule</code>)</p>&#13;
</li>&#13;
<li>&#13;
<p>The class’s first parent class (<code>Donkey</code>)</p>&#13;
</li>&#13;
<li>&#13;
<p>The class’s second parent class (<code>Horse</code>)</p>&#13;
</li>&#13;
<li>&#13;
<p>The grandparent class (<code>Animal</code>) class</p>&#13;
</li>&#13;
&#13;
</ol>&#13;
&#13;
<p>It’s much the same for a <code>Hinny</code>,&#13;
but with <code>Horse</code> before <code>Donkey</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">Mule</code><code class="o">.</code><code class="n">mro</code><code class="p">()</code>&#13;
<code class="go">[&lt;class '__main__.Mule'&gt;, &lt;class '__main__.Donkey'&gt;,</code>&#13;
<code class="go">&lt;class '__main__.Horse'&gt;, &lt;class '__main__.Animal'&gt;,</code>&#13;
<code class="go">&lt;class 'object'&gt;]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">Hinny</code><code class="o">.</code><code class="n">mro</code><code class="p">()</code>&#13;
<code class="go">[&lt;class '__main__.Hinny'&gt;, &lt;class '__main__.Horse'&gt;,</code>&#13;
<code class="go">&lt;class '__main__.Donkey'&gt;, &lt;class '__main__.Animal'&gt;,</code>&#13;
<code class="go">class 'object'&gt;]</code></pre>&#13;
&#13;
<p>So what do these fine beasts say?</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">mule</code> <code class="o">=</code> <code class="n">Mule</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">hinny</code> <code class="o">=</code> <code class="n">Hinny</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">mule</code><code class="o">.</code><code class="n">says</code><code class="p">()</code>&#13;
<code class="go">'hee-haw'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">hinny</code><code class="o">.</code><code class="n">says</code><code class="p">()</code>&#13;
<code class="go">'neigh'</code></pre>&#13;
&#13;
<p>We listed the parent classes in (father, mother) order,&#13;
so they talk like their dads.</p>&#13;
&#13;
<p>If the <code>Horse</code> and <code>Donkey</code> did not have a <code>says()</code> method, the mule or hinny would have used the grandparent&#13;
<code>Animal</code> class’s&#13;
<code>says()</code> method,&#13;
and returned <code>'I speak!'</code>.<a data-startref="ix_ch10-objects-asciidoc4" data-type="indexterm" id="idm45794997763176"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Mixins" data-type="sect2"><div class="sect2" id="mixins">&#13;
<h2>Mixins</h2>&#13;
&#13;
<p><a data-primary="inheritance" data-secondary="mixins" data-type="indexterm" id="idm45794997761272"/><a data-primary="mixins" data-type="indexterm" id="idm45794997760296"/>You may include an extra parent class in your class definition,&#13;
but as a helper only.&#13;
That is,&#13;
it doesn’t share any methods with the other parent classes,&#13;
and avoids the method resolution ambiguity that I mentioned&#13;
in the previous section.</p>&#13;
&#13;
<p>Such a parent class is sometimes called a <em>mixin</em> class.&#13;
Uses might include “side” tasks like logging.&#13;
Here’s a mixin that pretty-prints an object’s attributes:<a data-startref="ix_ch10-objects-asciidoc3" data-type="indexterm" id="idm45794997758312"/><a data-startref="ix_ch10-objects-asciidoc2" data-type="indexterm" id="idm45794997757640"/><a data-startref="ix_ch10-objects-asciidoc1" data-type="indexterm" id="idm45794997681864"/></p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">PrettyMixin</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">dump</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="kn">import</code> <code class="nn">pprint</code>&#13;
<code class="gp">... </code>        <code class="n">pprint</code><code class="o">.</code><code class="n">pprint</code><code class="p">(</code><code class="nb">vars</code><code class="p">(</code><code class="bp">self</code><code class="p">))</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Thing</code><code class="p">(</code><code class="n">PrettyMixin</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">pass</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">t</code> <code class="o">=</code> <code class="n">Thing</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">t</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="s">"Nyarlathotep"</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">t</code><code class="o">.</code><code class="n">feature</code> <code class="o">=</code> <code class="s">"ichor"</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">t</code><code class="o">.</code><code class="n">age</code> <code class="o">=</code> <code class="s">"eldritch"</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">t</code><code class="o">.</code><code class="n">dump</code><code class="p">()</code>&#13;
<code class="go">{'age': 'eldritch', 'feature': 'ichor', 'name': 'Nyarlathotep'}</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="In self Defense" data-type="sect1"><div class="sect1" id="self">&#13;
<h1>In self Defense</h1>&#13;
&#13;
<p><a data-primary="attributes" data-secondary="finding with self argument" data-type="indexterm" id="idm45794997589208"/><a data-primary="methods" data-secondary="finding with self argument" data-type="indexterm" id="idm45794997588264"/><a data-primary="objects" data-secondary="finding attributes/methods" data-type="indexterm" id="idm45794997587352"/><a data-primary="objects" data-secondary="self argument" data-type="indexterm" id="idm45794997586440"/><a data-primary="self argument" data-type="indexterm" id="idm45794997585496"/>One criticism of Python&#13;
(besides the use of whitespace)&#13;
is the need to include <code>self</code> as the first&#13;
argument to instance methods&#13;
(the kind of method you’ve seen in the previous examples).&#13;
Python uses the <code>self</code>&#13;
argument to find the right object’s attributes and methods.&#13;
For an example, I’ll show how you would&#13;
call an object’s method,&#13;
and what Python actually does behind the scenes.</p>&#13;
&#13;
<p>Remember class <code>Car</code> from earlier examples?&#13;
Let’s call its <code>exclaim()</code> method again:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">a_car</code> <code class="o">=</code> <code class="n">Car</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">a_car</code><code class="o">.</code><code class="n">exclaim</code><code class="p">()</code>&#13;
<code class="go">I'm a Car!</code></pre>&#13;
&#13;
<p>Here’s what Python actually does, under the hood:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Look up the class (<code>Car</code>) of the object <code>a_car</code></p>&#13;
</li>&#13;
<li>&#13;
<p>Pass the object <code>a_car</code> to the <code>exclaim()</code> method&#13;
of the <code>Car</code> class as the <code>self</code> parameter</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Just for fun,&#13;
you can even run it this way yourself and it will&#13;
work the same as the normal (<code>a_car.exclaim()</code>) syntax:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">Car</code><code class="o">.</code><code class="n">exclaim</code><code class="p">(</code><code class="n">a_car</code><code class="p">)</code>&#13;
<code class="go">I'm a Car!</code></pre>&#13;
&#13;
<p>However, there’s never a reason to use that lengthier style.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Attribute Access" data-type="sect1"><div class="sect1" id="attribute_access">&#13;
<h1>Attribute Access</h1>&#13;
&#13;
<p><a data-primary="attributes" data-secondary="accessing" data-type="indexterm" id="ix_ch10-objects-asciidoc5"/><a data-primary="objects" data-secondary="accessing attributes" data-type="indexterm" id="ix_ch10-objects-asciidoc6"/><a data-primary="properties" data-secondary="getting/setting attribute values" data-type="indexterm" id="ix_ch10-objects-asciidoc7"/><a data-primary="values" data-secondary="getting/setting for attributes" data-type="indexterm" id="ix_ch10-objects-asciidoc8"/>In Python, object attributes and methods are normally&#13;
public, and you’re expected to behave yourself&#13;
(this is sometimes called a “consenting adults” policy).&#13;
Let’s compare the direct approach with some alternatives.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Direct Access" data-type="sect2"><div class="sect2" id="idm45794997559048">&#13;
<h2>Direct Access</h2>&#13;
&#13;
<p>As you’ve seen, you can get and set attribute values&#13;
directly:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Duck</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">input_name</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="n">input_name</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code> <code class="o">=</code> <code class="n">Duck</code><code class="p">(</code><code class="s">'Daffy'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">'Daffy'</code></pre>&#13;
&#13;
<p>But what if someone misbehaves?</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="s">'Daphne'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">'Daphne'</code></pre>&#13;
&#13;
<p>The next two sections show ways to get some privacy&#13;
for attributes that you don’t want anyone to stomp&#13;
by accident.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Getters and Setters" data-type="sect2"><div class="sect2" id="getters_setters">&#13;
<h2>Getters and Setters</h2>&#13;
&#13;
<p><a data-primary="attributes" data-secondary="getters and setters" data-type="indexterm" id="idm45794997428648"/><a data-primary="getter methods" data-type="indexterm" id="idm45794997427672"/><a data-primary="setter methods" data-type="indexterm" id="idm45794997427000"/>Some object-oriented languages support private object attributes&#13;
that can’t be accessed directly from the outside.&#13;
Programmers then may need to write <em>getter</em> and <em>setter</em> methods&#13;
to read and write the values of such private attributes.</p>&#13;
&#13;
<p><a data-primary="objects" data-secondary="private attributes" data-type="indexterm" id="idm45794997424904"/>Python doesn’t have private attributes,&#13;
but you can write getters and setters&#13;
with obfuscated attribute names to get a little privacy.&#13;
(The best solution is to use <em>properties</em>,&#13;
described in the next section.)</p>&#13;
&#13;
<p>In the following example, we define a <code>Duck</code> class with a&#13;
single instance attribute called <code>hidden_name</code>.&#13;
We don’t want people to access this directly,&#13;
so we define two methods:&#13;
a getter (<code>get_name()</code>) and a setter (<code>set_name()</code>).&#13;
Each is accessed by a property called <code>name</code>.&#13;
I’ve added a <code>print()</code> statement to each method to show&#13;
when it’s being called:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Duck</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">input_name</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">hidden_name</code> <code class="o">=</code> <code class="n">input_name</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">get_name</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">'inside the getter'</code><code class="p">)</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">hidden_name</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">set_name</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">input_name</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">'inside the setter'</code><code class="p">)</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">hidden_name</code> <code class="o">=</code> <code class="n">input_name</code></pre>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">don</code> <code class="o">=</code> <code class="n">Duck</code><code class="p">(</code><code class="s">'Donald'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">don</code><code class="o">.</code><code class="n">get_name</code><code class="p">()</code>&#13;
<code class="go">inside the getter</code>&#13;
<code class="go">'Donald'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">don</code><code class="o">.</code><code class="n">set_name</code><code class="p">(</code><code class="s">'Donna'</code><code class="p">)</code>&#13;
<code class="go">inside the setter</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">don</code><code class="o">.</code><code class="n">get_name</code><code class="p">()</code>&#13;
<code class="go">inside the getter</code>&#13;
<code class="go">'Donna'</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Properties for Attribute Access" data-type="sect2"><div class="sect2" id="properties">&#13;
<h2>Properties for Attribute Access</h2>&#13;
&#13;
<p><a data-primary="attributes" data-secondary="properties for access" data-type="indexterm" id="ix_ch10-objects-asciidoc9"/><a data-primary="properties" data-secondary="for attribute privacy" data-type="indexterm" id="ix_ch10-objects-asciidoc10"/>The Pythonic solution for attribute privacy is to&#13;
use <em>properties</em>.</p>&#13;
&#13;
<p>There are two ways to do this.&#13;
The first way is to add <code>name = property(get_name, set_name)</code>&#13;
as the final line of our previous <code>Duck</code> class definition:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Duck</code><code class="p">():</code>&#13;
<code class="gp">&gt;&gt;&gt; </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">input_name</code><code class="p">):</code>&#13;
<code class="gp">&gt;&gt;&gt; </code>        <code class="bp">self</code><code class="o">.</code><code class="n">hidden_name</code> <code class="o">=</code> <code class="n">input_name</code>&#13;
<code class="gp">&gt;&gt;&gt; </code>    <code class="k">def</code> <code class="nf">get_name</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">&gt;&gt;&gt; </code>        <code class="k">print</code><code class="p">(</code><code class="s">'inside the getter'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code>        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">hidden_name</code>&#13;
<code class="gp">&gt;&gt;&gt; </code>    <code class="k">def</code> <code class="nf">set_name</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">input_name</code><code class="p">):</code>&#13;
<code class="gp">&gt;&gt;&gt; </code>        <code class="k">print</code><code class="p">(</code><code class="s">'inside the setter'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code>        <code class="bp">self</code><code class="o">.</code><code class="n">hidden_name</code> <code class="o">=</code> <code class="n">input_name</code>&#13;
<code class="gp">&gt;&gt;&gt; </code>    <code class="n">name</code> <code class="o">=</code> <code class="nb">property</code><code class="p">(</code><code class="n">get_name</code><code class="p">,</code> <code class="n">set_name</code><code class="p">)</code></pre>&#13;
&#13;
<p>The old getter and setter still work:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">don</code> <code class="o">=</code> <code class="n">Duck</code><code class="p">(</code><code class="s">'Donald'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">don</code><code class="o">.</code><code class="n">get_name</code><code class="p">()</code>&#13;
<code class="go">inside the getter</code>&#13;
<code class="go">'Donald'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">don</code><code class="o">.</code><code class="n">set_name</code><code class="p">(</code><code class="s">'Donna'</code><code class="p">)</code>&#13;
<code class="go">inside the setter</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">don</code><code class="o">.</code><code class="n">get_name</code><code class="p">()</code>&#13;
<code class="go">inside the getter</code>&#13;
<code class="go">'Donna'</code></pre>&#13;
&#13;
<p>But now you can also use the property <code>name</code> to get and&#13;
set the hidden name:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">don</code> <code class="o">=</code> <code class="n">Duck</code><code class="p">(</code><code class="s">'Donald'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">don</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">inside the getter</code>&#13;
<code class="go">'Donald'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">don</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="s">'Donna'</code>&#13;
<code class="go">inside the setter</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">don</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">inside the getter</code>&#13;
<code class="go">'Donna'</code></pre>&#13;
&#13;
<p>In the second method, you add some decorators&#13;
and replace&#13;
the method names <code>get_name</code> and <code>set_name</code>&#13;
with <code>name</code>:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><code>@property</code>, which goes before the getter method</p>&#13;
</li>&#13;
<li>&#13;
<p><code>@<em>name</em>.setter</code>, which goes before the setter method</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Here’s how they actually look in the code:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Duck</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">input_name</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">hidden_name</code> <code class="o">=</code> <code class="n">input_name</code>&#13;
<code class="gp">... </code>    <code class="nd">@property</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">name</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">'inside the getter'</code><code class="p">)</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">hidden_name</code>&#13;
<code class="gp">... </code>    <code class="nd">@name.setter</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">name</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">input_name</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">'inside the setter'</code><code class="p">)</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">hidden_name</code> <code class="o">=</code> <code class="n">input_name</code></pre>&#13;
&#13;
<p>You can still access <code>name</code> as though&#13;
it were an attribute:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code> <code class="o">=</code> <code class="n">Duck</code><code class="p">(</code><code class="s">'Howard'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">inside the getter</code>&#13;
<code class="go">'Howard'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="s">'Donald'</code>&#13;
<code class="go">inside the setter</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">inside the getter</code>&#13;
<code class="go">'Donald'</code></pre>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>If anyone guessed that we called our attribute&#13;
<code>hidden_name</code>, they could still read and write it directly&#13;
as <code>fowl.hidden_name</code>.&#13;
In <a data-type="xref" href="#name_mangling">“Name Mangling for Privacy”</a>, you’ll see&#13;
how Python provides a special way to&#13;
hide attribute names.<a data-startref="ix_ch10-objects-asciidoc10" data-type="indexterm" id="idm45794996852808"/><a data-startref="ix_ch10-objects-asciidoc9" data-type="indexterm" id="idm45794996852168"/></p>&#13;
</div>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Properties for Computed Values" data-type="sect2"><div class="sect2" id="idm45794997233192">&#13;
<h2>Properties for Computed Values</h2>&#13;
&#13;
<p><a data-primary="attributes" data-secondary="properties for computed values" data-type="indexterm" id="idm45794996849864"/><a data-primary="computed values" data-type="indexterm" id="idm45794996848872"/><a data-primary="properties" data-secondary="computed values returned by" data-type="indexterm" id="idm45794996900520"/><a data-primary="values" data-secondary="computed" data-type="indexterm" id="idm45794996899560"/><a data-primary="values" data-secondary="returned by property" data-type="indexterm" id="idm45794996898616"/>In the previous examples,&#13;
we used the <code>name</code> property to refer to&#13;
a single attribute (<code>hidden_name</code>)&#13;
stored within the object.</p>&#13;
&#13;
<p>A property can also return a <em>computed value</em>.&#13;
Let’s define a <code>Circle</code> class that has a <code>radius</code>&#13;
attribute and a computed <code>diameter</code> property:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Circle</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">radius</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">radius</code> <code class="o">=</code> <code class="n">radius</code>&#13;
<code class="gp">... </code>    <code class="nd">@property</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">diameter</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="mi">2</code> <code class="o">*</code> <code class="bp">self</code><code class="o">.</code><code class="n">radius</code>&#13;
<code class="gp">...</code></pre>&#13;
&#13;
<p>Create a <code>Circle</code> object with an initial value for its&#13;
<code>radius</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">c</code> <code class="o">=</code> <code class="n">Circle</code><code class="p">(</code><code class="mi">5</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">c</code><code class="o">.</code><code class="n">radius</code>&#13;
<code class="go">5</code></pre>&#13;
&#13;
<p>We can refer to <code>diameter</code>&#13;
as if it were an attribute such as <code>radius</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">c</code><code class="o">.</code><code class="n">diameter</code>&#13;
<code class="go">10</code></pre>&#13;
&#13;
<p>Here’s the fun part:&#13;
we can change the <code>radius</code> attribute at any time,&#13;
and the diameter property will be computed from the current&#13;
value of <code>radius</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">c</code><code class="o">.</code><code class="n">radius</code> <code class="o">=</code> <code class="mi">7</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">c</code><code class="o">.</code><code class="n">diameter</code>&#13;
<code class="go">14</code></pre>&#13;
&#13;
<p>If you don’t specify a setter property for an attribute,&#13;
you can’t set it from the outside.&#13;
This is handy for read-only attributes:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">c</code><code class="o">.</code><code class="n">diameter</code> <code class="o">=</code> <code class="mi">20</code>&#13;
<code class="gt">Traceback (most recent call last):</code>&#13;
  File <code class="nb">"&lt;stdin&gt;"</code>, line <code class="m">1</code>, in <code class="n">&lt;module&gt;</code>&#13;
<code class="gr">AttributeError</code>: <code class="n">can't set attribute</code></pre>&#13;
&#13;
<p>There’s one more advantage of using a property over direct&#13;
attribute access:&#13;
if you ever change the definition of the attribute,&#13;
you need to fix only the code within&#13;
the class definition,&#13;
not in all the callers.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Name Mangling for Privacy" data-type="sect2"><div class="sect2" id="name_mangling">&#13;
<h2>Name Mangling for Privacy</h2>&#13;
&#13;
<p><a data-primary="__ (double underscores)" data-type="indexterm" id="idm45794996695768"/><a data-primary="attributes" data-secondary="name mangling for privacy" data-type="indexterm" id="idm45794996695064"/><a data-primary="double underscore (__)" data-type="indexterm" id="idm45794996694152"/>In the <code>Duck</code> class example a little earlier,&#13;
we called our (not completely)&#13;
hidden attribute <code>hidden_name</code>.&#13;
Python has a naming convention for attributes that&#13;
should not be visible outside of their class definition:&#13;
begin with two underscores (<code>__</code>).</p>&#13;
&#13;
<p>Let’s rename <code>hidden_name</code> to <code>__name</code>, as demonstrated here:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Duck</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">input_name</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">__name</code> <code class="o">=</code> <code class="n">input_name</code>&#13;
<code class="gp">... </code>    <code class="nd">@property</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">name</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">'inside the getter'</code><code class="p">)</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">__name</code>&#13;
<code class="gp">... </code>    <code class="nd">@name.setter</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">name</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">input_name</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">'inside the setter'</code><code class="p">)</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">__name</code> <code class="o">=</code> <code class="n">input_name</code>&#13;
<code class="gp">...</code></pre>&#13;
&#13;
<p>Take a moment to see whether everything still works:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code> <code class="o">=</code> <code class="n">Duck</code><code class="p">(</code><code class="s">'Howard'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">inside the getter</code>&#13;
<code class="go">'Howard'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="s">'Donald'</code>&#13;
<code class="go">inside the setter</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">inside the getter</code>&#13;
<code class="go">'Donald'</code></pre>&#13;
&#13;
<p>Looks good.&#13;
And you can’t access the <code>__name</code> attribute:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code><code class="o">.</code><code class="n">__name</code>&#13;
<code class="gt">Traceback (most recent call last):</code>&#13;
  File <code class="nb">"&lt;stdin&gt;"</code>, line <code class="m">1</code>, in <code class="n">&lt;module&gt;</code>&#13;
<code class="gr">AttributeError</code>: <code class="n">'Duck' object has no attribute '__name'</code></pre>&#13;
&#13;
<p>This naming convention doesn’t make it completely private,&#13;
but Python does <em>mangle</em> the&#13;
attribute name to make it unlikely for external code to&#13;
stumble upon it.&#13;
If you’re curious and promise not to tell&#13;
everyone,<sup><a data-type="noteref" href="ch10.html#idm45794996488440" id="idm45794996488440-marker">5</a></sup>&#13;
here’s what it becomes:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">fowl</code><code class="o">.</code><code class="n">_Duck__name</code>&#13;
<code class="go">'Donald'</code></pre>&#13;
&#13;
<p>Notice that it didn’t print <code>inside the getter</code>.&#13;
Although this isn’t perfect protection, name mangling&#13;
discourages accidental or intentional direct access to the&#13;
attribute.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Class and Object Attributes" data-type="sect2"><div class="sect2" id="attribute_types">&#13;
<h2>Class and Object Attributes</h2>&#13;
&#13;
<p><a data-primary="attributes" data-secondary="class and object" data-type="indexterm" id="idm45794996454664"/><a data-primary="classes" data-secondary="attribute assignment" data-type="indexterm" id="idm45794996453688"/><a data-primary="objects" data-secondary="class attribute assignment and" data-type="indexterm" id="idm45794996452744"/>You can assign attributes to classes,&#13;
and they’ll be inherited by their child objects:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Fruit</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="n">color</code> <code class="o">=</code> <code class="s">'red'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">blueberry</code> <code class="o">=</code> <code class="n">Fruit</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">Fruit</code><code class="o">.</code><code class="n">color</code>&#13;
<code class="go">'red'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">blueberry</code><code class="o">.</code><code class="n">color</code>&#13;
<code class="go">'red'</code></pre>&#13;
&#13;
<p>But if you change the value of the attribute&#13;
in the child object,&#13;
it doesn’t affect the class attribute:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">blueberry</code><code class="o">.</code><code class="n">color</code> <code class="o">=</code> <code class="s">'blue'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">blueberry</code><code class="o">.</code><code class="n">color</code>&#13;
<code class="go">'blue'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">Fruit</code><code class="o">.</code><code class="n">color</code>&#13;
<code class="go">'red'</code></pre>&#13;
&#13;
<p>If you change the class attribute later,&#13;
it won’t affect existing child objects:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">Fruit</code><code class="o">.</code><code class="n">color</code> <code class="o">=</code> <code class="s">'orange'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">Fruit</code><code class="o">.</code><code class="n">color</code>&#13;
<code class="go">'orange'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">blueberry</code><code class="o">.</code><code class="n">color</code>&#13;
<code class="go">'blue'</code></pre>&#13;
&#13;
<p>But it will affect new ones:<a data-startref="ix_ch10-objects-asciidoc8" data-type="indexterm" id="idm45794996348696"/><a data-startref="ix_ch10-objects-asciidoc7" data-type="indexterm" id="idm45794996348200"/><a data-startref="ix_ch10-objects-asciidoc6" data-type="indexterm" id="idm45794996347592"/><a data-startref="ix_ch10-objects-asciidoc5" data-type="indexterm" id="idm45794996346936"/></p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">new_fruit</code> <code class="o">=</code> <code class="n">Fruit</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">new_fruit</code><code class="o">.</code><code class="n">color</code>&#13;
<code class="go">'orange'</code></pre>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Method Types" data-type="sect1"><div class="sect1" id="method_types">&#13;
<h1>Method Types</h1>&#13;
&#13;
<p><a data-primary="classes" data-secondary="method types" data-type="indexterm" id="ix_ch10-objects-asciidoc11"/><a data-primary="methods" data-secondary="method types" data-type="indexterm" id="ix_ch10-objects-asciidoc12"/><a data-primary="objects" data-secondary="method types" data-type="indexterm" id="ix_ch10-objects-asciidoc13"/>Some methods&#13;
are part of the class itself,&#13;
some are part of the objects&#13;
that are created from that class,&#13;
and some are none of the above:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>If there’s no preceding decorator,&#13;
it’s an <em>instance method</em>, and its first argument should&#13;
be <code>self</code> to refer to the individual object itself.</p>&#13;
</li>&#13;
<li>&#13;
<p>If there’s a preceding <code>@classmethod</code> decorator, it’s a <em>class method</em>, and its&#13;
first argument should be <code>cls</code> (or anything, just&#13;
not the reserved word <code>class</code>),&#13;
referring to the class itself.</p>&#13;
</li>&#13;
<li>&#13;
<p>If there’s a preceding <code>@staticmethod</code> decorator, it’s a <em>static method</em>,&#13;
and its first argument isn’t an object or class.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>The following sections have some details.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Instance Methods" data-type="sect2"><div class="sect2" id="instance_methods">&#13;
<h2>Instance Methods</h2>&#13;
&#13;
<p><a data-primary="instance methods" data-type="indexterm" id="idm45794996272968"/><a data-primary="methods" data-secondary="instance methods" data-type="indexterm" id="idm45794996272264"/>When you see an initial&#13;
<code>self</code> argument in methods&#13;
within a class definition,&#13;
it’s an <em>instance method</em>.&#13;
These are the types of methods&#13;
that you would normally write&#13;
when creating your own classes.&#13;
The first parameter of an instance method is <code>self</code>,&#13;
and Python passes the object to the method&#13;
when you call it.&#13;
These are the ones that you’ve seen so far.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Class Methods" data-type="sect2"><div class="sect2" id="class_methods">&#13;
<h2>Class Methods</h2>&#13;
&#13;
<p><a data-primary="classes" data-secondary="class methods" data-type="indexterm" id="idm45794996267736"/><a data-primary="methods" data-secondary="class methods" data-type="indexterm" id="idm45794996266568"/>In contrast, a <em>class method</em> affects the class as a whole.&#13;
Any change you make to the class&#13;
affects all of its objects.&#13;
Within a class definition,&#13;
a preceding <code>@classmethod</code> decorator&#13;
indicates that that following function is a class method.&#13;
Also, the first parameter to the method&#13;
is the class itself.&#13;
The Python tradition is to&#13;
call the parameter <code>cls</code>, because <code>class</code> is a reserved&#13;
word and can’t be used here.&#13;
Let’s define a class method for <code>A</code> that counts how many&#13;
object instances have been made from it:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">A</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="n">count</code> <code class="o">=</code> <code class="mi">0</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="n">A</code><code class="o">.</code><code class="n">count</code> <code class="o">+=</code> <code class="mi">1</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">exclaim</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"I'm an A!"</code><code class="p">)</code>&#13;
<code class="gp">... </code>    <code class="nd">@classmethod</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">kids</code><code class="p">(</code><code class="n">cls</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"A has"</code><code class="p">,</code> <code class="n">cls</code><code class="o">.</code><code class="n">count</code><code class="p">,</code> <code class="s">"little objects."</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">&gt;&gt;&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">easy_a</code> <code class="o">=</code> <code class="n">A</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">breezy_a</code> <code class="o">=</code> <code class="n">A</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">wheezy_a</code> <code class="o">=</code> <code class="n">A</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">A</code><code class="o">.</code><code class="n">kids</code><code class="p">()</code>&#13;
<code class="go">A has 3 little objects.</code></pre>&#13;
&#13;
<p>Notice that we referred to <code>A.count</code> (the class attribute)&#13;
in <code>__init__()</code>&#13;
rather than <code>self.count</code>&#13;
(which would be an&#13;
object instance attribute).&#13;
In the <code>kids()</code> method, we used <code>cls.count</code>,&#13;
but we could just as well have used <code>A.count</code>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Static Methods" data-type="sect2"><div class="sect2" id="static_methods">&#13;
<h2>Static Methods</h2>&#13;
&#13;
<p><a data-primary="methods" data-secondary="static methods" data-type="indexterm" id="idm45794996161016"/><a data-primary="static methods" data-type="indexterm" id="idm45794996159816"/>A third type of method in a class definition&#13;
affects neither the class nor its objects;&#13;
it’s just in there for convenience&#13;
instead of floating around on its own.&#13;
It’s a <em>static method</em>, preceded by a&#13;
<code>@staticmethod</code> decorator,&#13;
with no initial <code>self</code> or <code>cls</code> parameter.&#13;
Here’s an example that serves as a commercial&#13;
for the class <code>CoyoteWeapon</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">CoyoteWeapon</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="nd">@staticmethod</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">commercial</code><code class="p">():</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">'This CoyoteWeapon has been brought to you by Acme'</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">&gt;&gt;&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">CoyoteWeapon</code><code class="o">.</code><code class="n">commercial</code><code class="p">()</code>&#13;
<code class="go">This CoyoteWeapon has been brought to you by Acme</code></pre>&#13;
&#13;
<p>Notice that we didn’t need to create an object from class&#13;
<code>CoyoteWeapon</code> to access this method.&#13;
Very class-y.<a data-startref="ix_ch10-objects-asciidoc13" data-type="indexterm" id="idm45794996145080"/><a data-startref="ix_ch10-objects-asciidoc12" data-type="indexterm" id="idm45794996144472"/><a data-startref="ix_ch10-objects-asciidoc11" data-type="indexterm" id="idm45794996143864"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Duck Typing" data-type="sect1"><div class="sect1" id="duck_typing">&#13;
<h1>Duck Typing</h1>&#13;
&#13;
<p><a data-primary="duck typing" data-type="indexterm" id="idm45794996127880"/><a data-primary="objects" data-secondary="polymorphism in" data-type="indexterm" id="idm45794996127176"/><a data-primary="polymorphism" data-type="indexterm" id="idm45794996126232"/>Python has a loose implementation of&#13;
<em>polymorphism</em>;&#13;
it applies the same operation&#13;
to different objects,&#13;
based on the method’s name and arguments,&#13;
regardless of their class.</p>&#13;
&#13;
<p>Let’s use the same <code>__init__()</code> initializer for all&#13;
three <code>Quote</code> classes now,&#13;
but add two new functions:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><code>who()</code> just returns the value of the saved <code>person</code> string</p>&#13;
</li>&#13;
<li>&#13;
<p><code>says()</code> returns the saved <code>words</code> string with&#13;
the specific punctuation</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>And here they are in action:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Quote</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">person</code><code class="p">,</code> <code class="n">words</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">person</code> <code class="o">=</code> <code class="n">person</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">words</code> <code class="o">=</code> <code class="n">words</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">who</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">person</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">says</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">words</code> <code class="o">+</code> <code class="s">'.'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">QuestionQuote</code><code class="p">(</code><code class="n">Quote</code><code class="p">):</code>&#13;
<code class="gp">... </code>     <code class="k">def</code> <code class="nf">says</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>         <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">words</code> <code class="o">+</code> <code class="s">'?'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">ExclamationQuote</code><code class="p">(</code><code class="n">Quote</code><code class="p">):</code>&#13;
<code class="gp">... </code>     <code class="k">def</code> <code class="nf">says</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>         <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">words</code> <code class="o">+</code> <code class="s">'!'</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>We didn’t&#13;
change how <code>QuestionQuote</code> or <code>ExclamationQuote</code>&#13;
were initialized,&#13;
so we didn’t override their <code>__init__()</code> methods.&#13;
Python then automatically calls the <code>__init__()</code> method of&#13;
the parent class <code>Quote</code> to store the&#13;
instance variables <code>person</code> and <code>words</code>.&#13;
That’s why we can access <code>self.words</code> in objects&#13;
created from the subclasses <code>QuestionQuote</code> and&#13;
<code>ExclamationQuote</code>.</p>&#13;
&#13;
<p>Next up, let’s make some objects:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">hunter</code> <code class="o">=</code> <code class="n">Quote</code><code class="p">(</code><code class="s">'Elmer Fudd'</code><code class="p">,</code> <code class="s">"I'm hunting wabbits"</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">hunter</code><code class="o">.</code><code class="n">who</code><code class="p">(),</code> <code class="s">'says:'</code><code class="p">,</code> <code class="n">hunter</code><code class="o">.</code><code class="n">says</code><code class="p">())</code>&#13;
<code class="go">Elmer Fudd says: I'm hunting wabbits.</code></pre>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">hunted1</code> <code class="o">=</code> <code class="n">QuestionQuote</code><code class="p">(</code><code class="s">'Bugs Bunny'</code><code class="p">,</code> <code class="s">"What's up, doc"</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">hunted1</code><code class="o">.</code><code class="n">who</code><code class="p">(),</code> <code class="s">'says:'</code><code class="p">,</code> <code class="n">hunted1</code><code class="o">.</code><code class="n">says</code><code class="p">())</code>&#13;
<code class="go">Bugs Bunny says: What's up, doc?</code></pre>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">hunted2</code> <code class="o">=</code> <code class="n">ExclamationQuote</code><code class="p">(</code><code class="s">'Daffy Duck'</code><code class="p">,</code> <code class="s">"It's rabbit season"</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">hunted2</code><code class="o">.</code><code class="n">who</code><code class="p">(),</code> <code class="s">'says:'</code><code class="p">,</code> <code class="n">hunted2</code><code class="o">.</code><code class="n">says</code><code class="p">())</code>&#13;
<code class="go">Daffy Duck says: It's rabbit season!</code></pre>&#13;
&#13;
<p>Three different versions of the <code>says()</code>&#13;
method provide different behavior for the three classes.&#13;
This is traditional polymorphism in object-oriented languages.&#13;
Python goes a little further&#13;
and lets you run the <code>who()</code> and <code>says()</code> methods&#13;
of <em>any</em> objects that have them.&#13;
Let’s define a class called <code>BabblingBrook</code>&#13;
that has no relation&#13;
to our previous woodsy hunter and huntees&#13;
(descendants of the <code>Quote</code> class):</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">BabblingBrook</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">who</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="s">'Brook'</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">says</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="s">'Babble'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">brook</code> <code class="o">=</code> <code class="n">BabblingBrook</code><code class="p">()</code></pre>&#13;
&#13;
<p>Now run the <code>who()</code> and <code>says()</code> methods of various objects,&#13;
one (<code>brook</code>) completely unrelated to the others:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">def</code> <code class="nf">who_says</code><code class="p">(</code><code class="n">obj</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">obj</code><code class="o">.</code><code class="n">who</code><code class="p">(),</code> <code class="s">'says'</code><code class="p">,</code> <code class="n">obj</code><code class="o">.</code><code class="n">says</code><code class="p">())</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">who_says</code><code class="p">(</code><code class="n">hunter</code><code class="p">)</code>&#13;
<code class="go">Elmer Fudd says I'm hunting wabbits.</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">who_says</code><code class="p">(</code><code class="n">hunted1</code><code class="p">)</code>&#13;
<code class="go">Bugs Bunny says What's up, doc?</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">who_says</code><code class="p">(</code><code class="n">hunted2</code><code class="p">)</code>&#13;
<code class="go">Daffy Duck says It's rabbit season!</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">who_says</code><code class="p">(</code><code class="n">brook</code><code class="p">)</code>&#13;
<code class="go">Brook says Babble</code></pre>&#13;
&#13;
<p>This behavior is sometimes called <em>duck typing</em>,&#13;
after the old saying:</p>&#13;
<blockquote>&#13;
<p>If it walks like a duck and quacks like a duck,&#13;
it’s a duck.</p>&#13;
<p data-type="attribution">A Wise Person</p>&#13;
</blockquote>&#13;
&#13;
<p>Who are we to argue with a wise saying about ducks?</p>&#13;
&#13;
<figure><div class="figure" id="fig_duck_typing">&#13;
<img alt="inp2 1001" src="assets/inp2_1001.png"/>&#13;
<h6><span class="label">Figure 10-1. </span>Duck typing is not hunt-and-peck</h6>&#13;
</div></figure>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Magic Methods" data-type="sect1"><div class="sect1" id="magic_methods">&#13;
<h1>Magic Methods</h1>&#13;
&#13;
<p><a data-primary="magic methods" data-type="indexterm" id="ix_ch10-objects-asciidoc14"/><a data-primary="methods" data-secondary="magic methods" data-type="indexterm" id="ix_ch10-objects-asciidoc15"/><a data-primary="objects" data-secondary="magic methods" data-type="indexterm" id="ix_ch10-objects-asciidoc16"/><a data-primary="objects" data-secondary="special methods" data-type="indexterm" id="ix_ch10-objects-asciidoc17"/><a data-primary="special (magic) methods" data-type="indexterm" id="ix_ch10-objects-asciidoc18"/>You can now create and use basic objects.&#13;
What you’ll learn in this section might surprise you—in a good way.</p>&#13;
&#13;
<p>When you type something such as <code>a = 3 + 8</code>,&#13;
how do the integer objects with values <code>3</code> and <code>8</code>&#13;
know how to implement <code>+</code>?&#13;
Or, if you type <code>name = "Daffy" + " " + "Duck"</code>,&#13;
how does Python know that <code>+</code> now means to&#13;
concatenate these strings?&#13;
And how do <code>a</code> and <code>name</code>&#13;
know how to use <code>=</code> to get the result?&#13;
You can get at these operators&#13;
by using Python’s <em>special methods</em>&#13;
(or, more dramatically, <em>magic methods</em>).</p>&#13;
&#13;
<p id="dunder"><a data-primary="__ (double underscores)" data-type="indexterm" id="idm45794995647400"/><a data-primary="double underscore (__)" data-type="indexterm" id="idm45794995646696"/>The names of these methods&#13;
begin and end with double underscores (<code>__</code>).&#13;
Why?&#13;
They’re very unlikely to have been chosen&#13;
by programmers as variable names.&#13;
You’ve already seen one: <code>__init__()</code>&#13;
initializes a newly created object from its class&#13;
definition and any arguments that were passed in.&#13;
You’ve also seen (<a data-type="xref" href="#name_mangling">“Name Mangling for Privacy”</a>)&#13;
how “dunder” naming helps to mangle class attribute names&#13;
as well as methods.</p>&#13;
&#13;
<p>Suppose that you have a simple <code>Word</code> class,&#13;
and you want an&#13;
<code>equals()</code> method that compares two words&#13;
but ignores case.&#13;
That is, a <code>Word</code> containing the value&#13;
<code>'ha'</code> would be considered equal to one containing <code>'HA'</code>.</p>&#13;
&#13;
<p>The example that follows is a first attempt,&#13;
with a normal method we’re calling <code>equals()</code>.&#13;
<code>self.text</code> is the text string that this <code>Word</code>&#13;
object contains,&#13;
and the <code>equals()</code> method compares it with&#13;
the text string of <code>word2</code> (another <code>Word</code> object):</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Word</code><code class="p">():</code>&#13;
<code class="gp">... </code>   <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">text</code><code class="p">):</code>&#13;
<code class="gp">... </code>       <code class="bp">self</code><code class="o">.</code><code class="n">text</code> <code class="o">=</code> <code class="n">text</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">... </code>   <code class="k">def</code> <code class="nf">equals</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">word2</code><code class="p">):</code>&#13;
<code class="gp">... </code>       <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">text</code><code class="o">.</code><code class="n">lower</code><code class="p">()</code> <code class="o">==</code> <code class="n">word2</code><code class="o">.</code><code class="n">text</code><code class="o">.</code><code class="n">lower</code><code class="p">()</code>&#13;
<code class="gp">...</code></pre>&#13;
&#13;
<p>Then, make three <code>Word</code> objects from three different&#13;
text strings:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">first</code> <code class="o">=</code> <code class="n">Word</code><code class="p">(</code><code class="s">'ha'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">second</code> <code class="o">=</code> <code class="n">Word</code><code class="p">(</code><code class="s">'HA'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">third</code> <code class="o">=</code> <code class="n">Word</code><code class="p">(</code><code class="s">'eh'</code><code class="p">)</code></pre>&#13;
&#13;
<p>When strings <code>'ha'</code> and <code>'HA'</code> are compared to lowercase,&#13;
they should be equal:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">first</code><code class="o">.</code><code class="n">equals</code><code class="p">(</code><code class="n">second</code><code class="p">)</code>&#13;
<code class="go">True</code></pre>&#13;
&#13;
<p>But the string <code>'eh'</code> will not match <code>'ha'</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">first</code><code class="o">.</code><code class="n">equals</code><code class="p">(</code><code class="n">third</code><code class="p">)</code>&#13;
<code class="go">False</code></pre>&#13;
&#13;
<p>We defined the method <code>equals()</code> to do this&#13;
lowercase conversion and comparison.&#13;
It would be nice to just say <code>if first == second</code>,&#13;
just like Python’s built-in types.&#13;
So, let’s do that.&#13;
We change the <code>equals()</code> method to the special&#13;
name <code>__eq__()</code> (you’ll see why in a moment):</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Word</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">text</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">text</code> <code class="o">=</code> <code class="n">text</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__eq__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">word2</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">text</code><code class="o">.</code><code class="n">lower</code><code class="p">()</code> <code class="o">==</code> <code class="n">word2</code><code class="o">.</code><code class="n">text</code><code class="o">.</code><code class="n">lower</code><code class="p">()</code>&#13;
<code class="gp">...</code></pre>&#13;
&#13;
<p>Let’s see whether it works:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">first</code> <code class="o">=</code> <code class="n">Word</code><code class="p">(</code><code class="s">'ha'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">second</code> <code class="o">=</code> <code class="n">Word</code><code class="p">(</code><code class="s">'HA'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">third</code> <code class="o">=</code> <code class="n">Word</code><code class="p">(</code><code class="s">'eh'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">first</code> <code class="o">==</code> <code class="n">second</code>&#13;
<code class="go">True</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">first</code> <code class="o">==</code> <code class="n">third</code>&#13;
<code class="go">False</code></pre>&#13;
&#13;
<p>Magic!&#13;
All we needed was the Python’s special method name&#13;
for testing equality, <code>__eq__()</code>.&#13;
Tables <a data-type="xref" data-xrefstyle="select:labelnumber" href="#magic_comparison_table">10-1</a> and&#13;
<a data-type="xref" data-xrefstyle="select:labelnumber" href="#magic_math_table">10-2</a> list the names of the most useful magic methods.</p>&#13;
<table id="magic_comparison_table">&#13;
<caption><span class="label">Table 10-1. </span>Magic methods for comparison</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Method</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><code>__eq__(</code> <em>self</em>, <em>other</em> <code>)</code></p></td>&#13;
<td><p><em>self</em> <code>==</code> <em>other</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>__ne__(</code> <em>self</em>, <em>other</em> <code>)</code></p></td>&#13;
<td><p><em>self</em> <code>!=</code> <em>other</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>__lt__(</code> <em>self</em>, <em>other</em> <code>)</code></p></td>&#13;
<td><p><em>self</em> <code>&lt;</code> <em>other</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>__gt__(</code> <em>self</em>, <em>other</em> <code>)</code></p></td>&#13;
<td><p><em>self</em> <code>&gt;</code> <em>other</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>__le__(</code> <em>self</em>,  <em>other</em> <code>)</code></p></td>&#13;
<td><p><em>self</em> <code>&lt;=</code> <em>other</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>__ge__(</code> <em>self</em>, <em>other</em> <code>)</code></p></td>&#13;
<td><p><em>self</em> <code>&gt;=</code> <em>other</em></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<table id="magic_math_table">&#13;
<caption><span class="label">Table 10-2. </span>Magic methods for math</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Method</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><code>__add__(</code> <em>self</em>, <em>other</em> <code>)</code></p></td>&#13;
<td><p><em>self</em> <code>+</code> <em>other</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>__sub__(</code> <em>self</em>, <em>other</em> <code>)</code></p></td>&#13;
<td><p><em>self</em> <code>–</code> <em>other</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>__mul__(</code> <em>self</em>, <em>other</em> <code>)</code></p></td>&#13;
<td><p><em>self</em> <code>*</code> <em>other</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>__floordiv__(</code> <em>self</em>, <em>other</em> <code>)</code></p></td>&#13;
<td><p><em>self</em> <code>//</code> <em>other</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>__truediv__(</code> <em>self</em>, <em>other</em> <code>)</code></p></td>&#13;
<td><p><em>self</em> <code>/</code> <em>other</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>__mod__(</code> <em>self</em>, <em>other</em> <code>)</code></p></td>&#13;
<td><p><em>self</em> <code>%</code> <em>other</em></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>__pow__(</code> <em>self</em>, <em>other</em> <code>)</code></p></td>&#13;
<td><p><em>self</em> <code>**</code> <em>other</em></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p>You aren’t restricted to use the math operators&#13;
such as <code>+</code> (magic method <code>__add__()</code>)&#13;
and <code>–</code> (magic method <code>__sub__()</code>)&#13;
with numbers.&#13;
For instance,&#13;
Python string objects use <code>+</code> for concatenation&#13;
and <code>*</code> for duplication.&#13;
There are many more, documented online at&#13;
<a href="http://bit.ly/pydocs-smn">Special method names</a>.&#13;
The most common among them are presented in&#13;
<a data-type="xref" href="#magic_other_table">Table 10-3</a>.</p>&#13;
<table id="magic_other_table">&#13;
<caption><span class="label">Table 10-3. </span>Other, miscellaneous magic methods</caption>&#13;
<thead>&#13;
<tr>&#13;
<th>Method</th>&#13;
<th>Description</th>&#13;
</tr>&#13;
</thead>&#13;
<tbody>&#13;
<tr>&#13;
<td><p><code>__str__(</code> <em>self</em> <code>)</code></p></td>&#13;
<td><p><code>str(</code> <em>self</em> <code>)</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>__repr__(</code> <em>self</em> <code>)</code></p></td>&#13;
<td><p><code>repr(</code> <em>self</em> <code>)</code></p></td>&#13;
</tr>&#13;
<tr>&#13;
<td><p><code>__len__(</code> <em>self</em> <code>)</code></p></td>&#13;
<td><p><code>len(</code> <em>self</em> <code>)</code></p></td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
&#13;
<p><a data-primary="__str__ () method" data-type="indexterm" id="idm45794995210120"/>Besides <code>__init__()</code>,&#13;
you might find yourself using <code>__str__()</code> the most in your&#13;
own methods.&#13;
It’s how you print your object.&#13;
It’s used by <code>print()</code>, <code>str()</code>, and the string formatters, which you can read about in <a data-type="xref" href="ch05.html#ch_strings">Chapter 5</a>.&#13;
The interactive interpreter uses the <code>__repr__()</code> function to echo&#13;
variables to output.&#13;
If you fail to define either <code>__str__()</code> or <code>__repr__()</code>,&#13;
you get Python’s default&#13;
string version of your object:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">first</code> <code class="o">=</code> <code class="n">Word</code><code class="p">(</code><code class="s">'ha'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">first</code>&#13;
<code class="go">&lt;__main__.Word object at 0x1006ba3d0&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">first</code><code class="p">)</code>&#13;
<code class="go">&lt;__main__.Word object at 0x1006ba3d0&gt;</code></pre>&#13;
&#13;
<p>Let’s add both <code>__str__()</code> and <code>__repr__()</code>&#13;
methods to the <code>Word</code> class&#13;
to make it <span class="keep-together">prettier:</span></p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Word</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">text</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">text</code> <code class="o">=</code> <code class="n">text</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__eq__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">word2</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">text</code><code class="o">.</code><code class="n">lower</code><code class="p">()</code> <code class="o">==</code> <code class="n">word2</code><code class="o">.</code><code class="n">text</code><code class="o">.</code><code class="n">lower</code><code class="p">()</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__str__</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">text</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__repr__</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="s">'Word("'</code>  <code class="o">+</code> <code class="bp">self</code><code class="o">.</code><code class="n">text</code>  <code class="o">+</code> <code class="s">'")'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">first</code> <code class="o">=</code> <code class="n">Word</code><code class="p">(</code><code class="s">'ha'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">first</code>          <code class="c"># uses __repr__</code>&#13;
<code class="go">Word("ha")</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">first</code><code class="p">)</code>   <code class="c"># uses __str__</code>&#13;
<code class="go">ha</code></pre>&#13;
&#13;
<p>To explore even more special methods,&#13;
check out the <a href="http://bit.ly/pydocs-smn">Python documentation</a>.<a data-startref="ix_ch10-objects-asciidoc18" data-type="indexterm" id="idm45794995193592"/><a data-startref="ix_ch10-objects-asciidoc17" data-type="indexterm" id="idm45794995048376"/><a data-startref="ix_ch10-objects-asciidoc16" data-type="indexterm" id="idm45794995047768"/><a data-startref="ix_ch10-objects-asciidoc15" data-type="indexterm" id="idm45794995047128"/><a data-startref="ix_ch10-objects-asciidoc14" data-type="indexterm" id="idm45794995046488"/></p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Aggregation and Composition" data-type="sect1"><div class="sect1" id="aggregation_composition">&#13;
<h1>Aggregation and Composition</h1>&#13;
&#13;
<p><a data-primary="aggregation" data-type="indexterm" id="idm45794995182776"/><a data-primary="classes" data-secondary="aggregation and composition" data-type="indexterm" id="idm45794995044104"/><a data-primary="classes" data-secondary="composition" data-type="indexterm" id="idm45794995043096"/><a data-primary="composition" data-type="indexterm" id="idm45794995042152"/><a data-primary="objects" data-secondary="composition" data-type="indexterm" id="idm45794995041480"/>Inheritance is a good technique to use when you want&#13;
a child class to act like its parent class&#13;
most of the time (when child <em>is-a</em> parent).&#13;
It’s tempting to build elaborate inheritance hierarchies,&#13;
but sometimes <em>composition</em> or <em>aggregation</em>&#13;
make more sense.&#13;
What’s the difference?&#13;
In composition, one thing is part of another.&#13;
A duck <em>is-a</em> bird (inheritance),&#13;
but <em>has-a</em> tail (composition).&#13;
A tail is not a kind of duck,&#13;
but part of a duck.&#13;
In this next example,&#13;
let’s make <code>bill</code> and <code>tail</code> objects&#13;
and provide them to a new <code>duck</code> object:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Bill</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">description</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">description</code> <code class="o">=</code> <code class="n">description</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Tail</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">length</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">length</code> <code class="o">=</code> <code class="n">length</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Duck</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">bill</code><code class="p">,</code> <code class="n">tail</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">bill</code> <code class="o">=</code> <code class="n">bill</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">tail</code> <code class="o">=</code> <code class="n">tail</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">about</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">'This duck has a'</code><code class="p">,</code> <code class="bp">self</code><code class="o">.</code><code class="n">bill</code><code class="o">.</code><code class="n">description</code><code class="p">,</code>&#13;
<code class="gp">... </code>            <code class="s">'bill and a'</code><code class="p">,</code> <code class="bp">self</code><code class="o">.</code><code class="n">tail</code><code class="o">.</code><code class="n">length</code><code class="p">,</code> <code class="s">'tail'</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">a_tail</code> <code class="o">=</code> <code class="n">Tail</code><code class="p">(</code><code class="s">'long'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">a_bill</code> <code class="o">=</code> <code class="n">Bill</code><code class="p">(</code><code class="s">'wide orange'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">duck</code> <code class="o">=</code> <code class="n">Duck</code><code class="p">(</code><code class="n">a_bill</code><code class="p">,</code> <code class="n">a_tail</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">duck</code><code class="o">.</code><code class="n">about</code><code class="p">()</code>&#13;
<code class="go">This duck has a wide orange bill and a long tail</code></pre>&#13;
&#13;
<p>Aggregation expresses relationships,&#13;
but is a little looser: one thing <em>uses</em> another,&#13;
but both exist independently.&#13;
A duck <em>uses</em> a lake,&#13;
but one is not a part of the other.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="When to Use Objects or Something Else" data-type="sect1"><div class="sect1" id="objects_vs">&#13;
<h1>When to Use Objects or Something Else</h1>&#13;
&#13;
<p><a data-primary="classes" data-secondary="modules and objects versus" data-type="indexterm" id="idm45794994915624"/><a data-primary="modules" data-secondary="classes and objects versus" data-type="indexterm" id="idm45794994914792"/><a data-primary="objects" data-secondary="classes versus" data-type="indexterm" id="idm45794994913880"/><a data-primary="objects" data-secondary="modules versus" data-type="indexterm" id="idm45794994912936"/>Here are some guidelines for deciding whether to put your code&#13;
and data in a class,&#13;
module&#13;
(discussion coming in <a data-type="xref" href="ch11.html#ch_modules">Chapter 11</a>),&#13;
or something entirely different:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Objects are most useful when you need a number&#13;
of individual instances that have similar behavior (methods),&#13;
but differ in their internal states (attributes).</p>&#13;
</li>&#13;
<li>&#13;
<p>Classes support inheritance, modules don’t.</p>&#13;
</li>&#13;
<li>&#13;
<p>If you want only one of something,&#13;
a module might be best.&#13;
No matter how many times a Python module is&#13;
referenced in a program, only one copy is loaded.&#13;
(Java and C++ programmers:&#13;
you can use a Python module as a <em>singleton</em>.)</p>&#13;
</li>&#13;
<li>&#13;
<p>If you have a number of variables that contain multiple values&#13;
and can be passed as arguments to multiple functions,&#13;
it might be better to define them as classes.&#13;
For example, you might use a dictionary&#13;
with keys such as <code>size</code> and <code>color</code>&#13;
to represent a color image.&#13;
You could create a different dictionary&#13;
for each image in your program,&#13;
and pass them as arguments to functions&#13;
such as <code>scale()</code> or <code>transform()</code>.&#13;
This can get messy as you add keys and functions.&#13;
It’s more coherent to define an <code>Image</code> class&#13;
with attributes <code>size</code> or <code>color</code> and methods&#13;
<code>scale()</code> and <code>transform()</code>.&#13;
Then, all the data and methods for a color image&#13;
are defined in one place.</p>&#13;
</li>&#13;
<li>&#13;
<p>Use the simplest solution to the problem.&#13;
A dictionary, list, or tuple is simpler, smaller, and faster&#13;
than a module,&#13;
which is usually simpler than a class.</p>&#13;
&#13;
<p>Guido’s advice:</p>&#13;
<blockquote>&#13;
<p>Avoid overengineering datastructures.&#13;
Tuples are better than objects&#13;
(try namedtuple, too, though).&#13;
Prefer simple fields over getter/setter functions…Built-in datatypes are your friends.&#13;
Use more numbers, strings, tuples, lists, sets, dicts.&#13;
Also check out the collections library, especially deque.</p>&#13;
<p data-type="attribution">Guido van Rossum</p>&#13;
</blockquote>&#13;
</li>&#13;
<li>&#13;
<p>A newer alternative is the <em>dataclass</em>,&#13;
in <a data-type="xref" href="#dataclasses_ref">“Dataclasses”</a>.</p>&#13;
</li>&#13;
</ul>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Named Tuples" data-type="sect1"><div class="sect1" id="named_tuples">&#13;
<h1>Named Tuples</h1>&#13;
&#13;
<p><a data-primary="named tuples" data-type="indexterm" id="idm45794994893720"/><a data-primary="objects" data-secondary="named tuples" data-type="indexterm" id="idm45794994892856"/><a data-primary="tuples" data-secondary="named tuples" data-type="indexterm" id="idm45794994891912"/>Because Guido just mentioned them and I haven’t yet,&#13;
this is a good place to talk about <em>named tuples</em>.&#13;
A named tuple is a subclass of tuples with which you can access&#13;
values by name (with <em><code>.name</code></em>)&#13;
as well as by position&#13;
(with <code>[</code> <em><code>offset</code></em> <code>]</code>).</p>&#13;
&#13;
<p>Let’s take the example from the previous section and&#13;
convert the <code>Duck</code> class to a named tuple,&#13;
with <code>bill</code> and <code>tail</code> as simple string attributes.&#13;
We’ll call the <code>namedtuple</code> function with two arguments:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>The name</p>&#13;
</li>&#13;
<li>&#13;
<p>A string of the field names, separated by spaces</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Named tuples are not automatically supplied with Python,&#13;
so you need to load a module before using them.&#13;
We do that in the first line of the following example:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">namedtuple</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">Duck</code> <code class="o">=</code> <code class="n">namedtuple</code><code class="p">(</code><code class="s">'Duck'</code><code class="p">,</code> <code class="s">'bill tail'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">duck</code> <code class="o">=</code> <code class="n">Duck</code><code class="p">(</code><code class="s">'wide orange'</code><code class="p">,</code> <code class="s">'long'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">duck</code>&#13;
<code class="go">Duck(bill='wide orange', tail='long')</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">duck</code><code class="o">.</code><code class="n">bill</code>&#13;
<code class="go">'wide orange'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">duck</code><code class="o">.</code><code class="n">tail</code>&#13;
<code class="go">'long'</code></pre>&#13;
&#13;
<p>You can also make a named tuple from a dictionary:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">parts</code> <code class="o">=</code> <code class="p">{</code><code class="s">'bill'</code><code class="p">:</code> <code class="s">'wide orange'</code><code class="p">,</code> <code class="s">'tail'</code><code class="p">:</code> <code class="s">'long'</code><code class="p">}</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">duck2</code> <code class="o">=</code> <code class="n">Duck</code><code class="p">(</code><code class="o">**</code><code class="n">parts</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">duck2</code>&#13;
<code class="go">Duck(bill='wide orange', tail='long')</code></pre>&#13;
&#13;
<p><a data-primary="** (asterisks)" data-secondary="keyword arguments with" data-type="indexterm" id="idm45794994849384"/><a data-primary="asterisks (**)" data-secondary="keyword arguments with" data-type="indexterm" id="idm45794994734488"/><a data-primary="keyword arguments" data-secondary="in named tuples" data-type="indexterm" id="idm45794994733576"/>In the preceding code, take a look at <code>**parts</code>.&#13;
This is a <em>keyword argument</em>.&#13;
It extracts&#13;
the keys and values from the <code>parts</code> dictionary&#13;
and supplies them as arguments to <code>Duck()</code>.&#13;
It has the same effect as:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">duck2</code> <code class="o">=</code> <code class="n">Duck</code><code class="p">(</code><code class="n">bill</code> <code class="o">=</code> <code class="s">'wide orange'</code><code class="p">,</code> <code class="n">tail</code> <code class="o">=</code> <code class="s">'long'</code><code class="p">)</code></pre>&#13;
&#13;
<p>Named tuples are immutable,&#13;
but you can replace one or more fields&#13;
and return another named tuple:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">duck3</code> <code class="o">=</code> <code class="n">duck2</code><code class="o">.</code><code class="n">_replace</code><code class="p">(</code><code class="n">tail</code><code class="o">=</code><code class="s">'magnificent'</code><code class="p">,</code> <code class="n">bill</code><code class="o">=</code><code class="s">'crushing'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">duck3</code>&#13;
<code class="go">Duck(bill='crushing', tail='magnificent')</code></pre>&#13;
&#13;
<p>We could have defined <code>duck</code> as a dictionary:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">duck_dict</code> <code class="o">=</code> <code class="p">{</code><code class="s">'bill'</code><code class="p">:</code> <code class="s">'wide orange'</code><code class="p">,</code> <code class="s">'tail'</code><code class="p">:</code> <code class="s">'long'</code><code class="p">}</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">duck_dict</code>&#13;
<code class="go">{'tail': 'long', 'bill': 'wide orange'}</code></pre>&#13;
&#13;
<p>You can add fields to a dictionary:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">duck_dict</code><code class="p">[</code><code class="s">'color'</code><code class="p">]</code> <code class="o">=</code> <code class="s">'green'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">duck_dict</code>&#13;
<code class="go">{'color': 'green', 'tail': 'long', 'bill': 'wide orange'}</code></pre>&#13;
&#13;
<p>But not to a named tuple:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">duck</code><code class="o">.</code><code class="n">color</code> <code class="o">=</code> <code class="s">'green'</code>&#13;
<code class="gt">Traceback (most recent call last):</code>&#13;
  File <code class="nb">"&lt;stdin&gt;"</code>, line <code class="m">1</code>, in <code class="n">&lt;module&gt;</code>&#13;
<code class="gr">AttributeError</code>: <code class="n">'Duck' object has no attribute 'color'</code></pre>&#13;
&#13;
<p>To recap, here are some of the pros of a named tuple:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>It looks and acts like an immutable object.</p>&#13;
</li>&#13;
<li>&#13;
<p>It is more space and time efficient than objects.</p>&#13;
</li>&#13;
<li>&#13;
<p>You can access attributes by using dot notation&#13;
instead of dictionary-style square brackets.</p>&#13;
</li>&#13;
<li>&#13;
<p>You can use it as a dictionary key.</p>&#13;
</li>&#13;
</ul>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Dataclasses" data-type="sect1"><div class="sect1" id="dataclasses_ref">&#13;
<h1>Dataclasses</h1>&#13;
&#13;
<p><a data-primary="dataclasses" data-type="indexterm" id="idm45794994534552"/><a data-primary="Python 3" data-secondary="dataclasses" data-type="indexterm" id="idm45794994533848"/>Many people like to create objects mainly to store data&#13;
(as object attributes), not so much behavior (methods).&#13;
You just saw how named tuples can be an alternative data store.&#13;
Python 3.7 introduced <em>dataclasses</em>.</p>&#13;
&#13;
<p>Here’s a plain old object with a single <code>name</code> attribute:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="go">&gt;&gt; class TeenyClass():</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">name</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="n">name</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">teeny</code> <code class="o">=</code> <code class="n">TeenyClass</code><code class="p">(</code><code class="s">'itsy'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">teeny</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">'itsy'</code></pre>&#13;
&#13;
<p>Doing the same with a dataclass looks a little different:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">dataclasses</code> <code class="kn">import</code> <code class="n">dataclass</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="nd">@dataclass</code>&#13;
<code class="gp">... </code><code class="k">class</code> <code class="nc">TeenyDataClass</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="n">name</code><code class="p">:</code> <code class="nb">str</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">teeny</code> <code class="o">=</code> <code class="n">TeenyDataClass</code><code class="p">(</code><code class="s">'bitsy'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">teeny</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">'bitsy'</code></pre>&#13;
&#13;
<p>Besides needing a <code>@dataclass</code> decorator,&#13;
you define&#13;
the class’s attributes using&#13;
<a href="https://oreil.ly/NyGfE"><em>variable annotations</em></a>&#13;
of the form&#13;
<code><em>name</em>: <em>type</em></code>&#13;
or&#13;
<code><em>name</em>: <em>type</em> = <em>val</em></code>,&#13;
like <code>color: str</code>&#13;
or <code>color: str = "red"</code>.&#13;
The <code><em>type</em></code> can be any Python object type,&#13;
including classes you’ve created,&#13;
not just the built-in ones&#13;
like <code>str</code> or <code>int</code>.</p>&#13;
&#13;
<p>When you’re creating the dataclass object,&#13;
you provide the arguments in the order in which they were specified in&#13;
the class,&#13;
or use named arguments in any order:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">dataclasses</code> <code class="kn">import</code> <code class="n">dataclass</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="nd">@dataclass</code>&#13;
<code class="gp">... </code><code class="k">class</code> <code class="nc">AnimalClass</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="n">name</code><code class="p">:</code> <code class="nb">str</code>&#13;
<code class="gp">... </code>    <code class="n">habitat</code><code class="p">:</code> <code class="nb">str</code>&#13;
<code class="gp">... </code>    <code class="n">teeth</code><code class="p">:</code> <code class="nb">int</code> <code class="o">=</code> <code class="mi">0</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">snowman</code> <code class="o">=</code> <code class="n">AnimalClass</code><code class="p">(</code><code class="s">'yeti'</code><code class="p">,</code> <code class="s">'Himalayas'</code><code class="p">,</code> <code class="mi">46</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">duck</code> <code class="o">=</code> <code class="n">AnimalClass</code><code class="p">(</code><code class="n">habitat</code><code class="o">=</code><code class="s">'lake'</code><code class="p">,</code> <code class="n">name</code><code class="o">=</code><code class="s">'duck'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">snowman</code>&#13;
<code class="go">AnimalClass(name='yeti', habitat='Himalayas', teeth=46)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">duck</code>&#13;
<code class="go">AnimalClass(name='duck', habitat='lake', teeth=0)</code></pre>&#13;
&#13;
<p><code>AnimalClass</code> defined a default value for its <code>teeth</code> attribute,&#13;
so we didn’t need to provide it when making a <code>duck</code>.</p>&#13;
&#13;
<p>You can refer to the object attributes like any other object’s:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">duck</code><code class="o">.</code><code class="n">habitat</code>&#13;
<code class="go">'lake'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">snowman</code><code class="o">.</code><code class="n">teeth</code>&#13;
<code class="go">46</code></pre>&#13;
&#13;
<p>There’s a lot more to dataclasses.&#13;
See this&#13;
<a href="https://oreil.ly/czTf-">guide</a>&#13;
or the official (heavy)&#13;
<a href="https://oreil.ly/J19Yl">docs</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Attrs" data-type="sect1"><div class="sect1" id="attrs">&#13;
<h1>Attrs</h1>&#13;
&#13;
<p><a data-primary="attrs package" data-type="indexterm" id="idm45794994245400"/>You’ve seen how to create classes and add attributes,&#13;
and how they can involve a lot of typing—things like defining <code>__init__()</code>,&#13;
assigning its arguments to <code>self</code> counterparts,&#13;
and creating all those dunder methods&#13;
like <code>__str__()</code>.&#13;
Named tuples and dataclasses are alternatives in&#13;
the standard library that may be easier&#13;
when you mainly want to create a data collection.</p>&#13;
&#13;
<p><a href="https://oreil.ly/QbbI1">The One Python Library Everyone Needs</a>&#13;
compares plain classes, named tuples, and dataclasses.&#13;
It recommends the third-party package&#13;
<a href="https://oreil.ly/Rdwlx"><code>attrs</code></a> for many reasons—less typing, data validation, and more.&#13;
Take a look and see whether you prefer it to the&#13;
built-in solutions.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Coming Up" data-type="sect1"><div class="sect1" id="idm45794994284232">&#13;
<h1>Coming Up</h1>&#13;
&#13;
<p>In the next chapter, you’ll step up a level in code structures to&#13;
Python <em>modules</em> and <em>packages</em>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Things to Do" data-type="sect1"><div class="sect1" id="idm45794994281816">&#13;
<h1>Things to Do</h1>&#13;
&#13;
<p>10.1&#13;
<a data-primary="classes" data-secondary="practice exercises" data-type="indexterm" id="idm45794994280056"/><a data-primary="objects" data-secondary="practice exercises" data-type="indexterm" id="idm45794994279048"/>Make a class called <code>Thing</code> with no contents and print it.&#13;
Then, create an object called <code>example</code> from this class&#13;
and also print it.&#13;
Are the printed values the same or different?</p>&#13;
&#13;
<p>10.2&#13;
Make a new class called <code>Thing2</code> and assign the value&#13;
<code>'abc'</code> to a class attribute called <code>letters</code>.&#13;
Print <code>letters</code>.</p>&#13;
&#13;
<p>10.3&#13;
Make yet another class called, of course, <code>Thing3</code>.&#13;
This time, assign the value <code>'xyz'</code> to an&#13;
instance (object) attribute called <code>letters</code>.&#13;
Print <code>letters</code>.&#13;
Do you need to make an object from the class to do this?</p>&#13;
&#13;
<p>10.4&#13;
Make a class called <code>Element</code>, with instance attributes <code>name</code>, <code>symbol</code>, and <code>number</code>. Create an object of this class with the values <code>'Hydrogen'</code>, <code>'H'</code>, and <code>1</code>.</p>&#13;
&#13;
<p>10.5&#13;
Make a dictionary with these keys and values:&#13;
<code>'name': 'Hydrogen', 'symbol': 'H', 'number': 1</code>.&#13;
Then, create an object called <code>hydrogen</code>&#13;
from class <code>Element</code> using this dictionary.</p>&#13;
&#13;
<p>10.6&#13;
For the <code>Element</code> class,&#13;
define a method called <code>dump()</code>&#13;
that prints the values of the object’s attributes&#13;
(<code>name</code>, <code>symbol</code>, and <code>number</code>).&#13;
Create the <code>hydrogen</code> object from this new definition and&#13;
use <code>dump()</code> to print its attributes.</p>&#13;
&#13;
<p>10.7&#13;
Call <code>print(hydrogen)</code>.&#13;
In the definition of <code>Element</code>,&#13;
change the name of the method <code>dump</code> to <code>__str__</code>,&#13;
create a new <code>hydrogen</code> object,&#13;
and call <code>print(hydrogen)</code> again.</p>&#13;
&#13;
<p>10.8&#13;
Modify <code>Element</code> to make the attributes&#13;
<code>name</code>, <code>symbol</code>, and <code>number</code> private.&#13;
Define a getter property for each to return its value.</p>&#13;
&#13;
<p>10.9&#13;
Define three classes:&#13;
<code>Bear</code>, <code>Rabbit</code>, and <code>Octothorpe</code>.&#13;
For each, define only one method: <code>eats()</code>.&#13;
This should return&#13;
<code>'berries'</code> (<code>Bear</code>),&#13;
<code>'clover'</code> (<code>Rabbit</code>),&#13;
or <code class="keep-together">'campers'</code> (<code>Octothorpe</code>).&#13;
Create one object from each and print what it eats.</p>&#13;
&#13;
<p>10.10&#13;
Define these classes:&#13;
<code>Laser</code>, <code>Claw</code>, and <code>SmartPhone</code>.&#13;
Each has only one method: <code>does()</code>.&#13;
This returns&#13;
<code>'disintegrate'</code> (<code>Laser</code>),&#13;
<code>'crush'</code> (<code>Claw</code>),&#13;
or <code>'ring'</code> (<code>SmartPhone</code>).&#13;
Then, define the class <code>Robot</code> that has one instance&#13;
(object) of each of these.&#13;
Define a <code>does()</code> method for the <code>Robot</code>&#13;
that prints what its component objects do.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<div data-type="footnotes"><p data-type="footnote" id="idm45794999331256"><sup><a href="ch10.html#idm45794999331256-marker">1</a></sup> Or even if you don’t want to.</p><p data-type="footnote" id="idm45794999026920"><sup><a href="ch10.html#idm45794999026920-marker">2</a></sup> You’ll see many examples of double underscores in Python names; to save syllables, some people pronounce them as <em>dunder</em>.</p><p data-type="footnote" id="idm45794998829960"><sup><a href="ch10.html#idm45794998829960-marker">3</a></sup> An inexpensive but not-so-good car from the ’80s.</p><p data-type="footnote" id="idm45794997899784"><sup><a href="ch10.html#idm45794997899784-marker">4</a></sup> A mule has a father donkey and mother horse; a hinny has a father horse and mother donkey.</p><p data-type="footnote" id="idm45794996488440"><sup><a href="ch10.html#idm45794996488440-marker">5</a></sup> Can you keep a secret? Apparently, I can’t.</p></div></div></section></body></html>