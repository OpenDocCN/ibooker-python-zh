<html><head></head><body><section data-pdf-bookmark="Chapter 2. Modern Python" data-type="chapter" epub:type="chapter"><div class="chapter" id="ch02">&#13;
<h1><span class="label">Chapter 2. </span>Modern Python</h1>&#13;
&#13;
<blockquote>&#13;
<p>It’s all in a day’s work for Confuse-a-Cat.</p>&#13;
<p data-type="attribution">Monty Python</p>&#13;
</blockquote>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Preview" data-type="sect1"><div class="sect1" id="id13">&#13;
<h1>Preview</h1>&#13;
&#13;
<p><a data-primary="Python" data-type="indexterm" id="icd005"/>Python evolves to keep up with our changing technical world.&#13;
This chapter discusses specific Python features&#13;
that apply to issues in the previous chapter,&#13;
and a few extras:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Tools</p>&#13;
</li>&#13;
<li>&#13;
<p>APIs and services</p>&#13;
</li>&#13;
<li>&#13;
<p>Variables and type hinting</p>&#13;
</li>&#13;
<li>&#13;
<p>Data structures</p>&#13;
</li>&#13;
<li>&#13;
<p>Web frameworks</p>&#13;
</li>&#13;
</ul>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Tools" data-type="sect1"><div class="sect1" id="id297">&#13;
<h1>Tools</h1>&#13;
&#13;
<p>Every computing language has the following:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>The core language and built-in standard packages</p>&#13;
</li>&#13;
<li>&#13;
<p>Ways to add external packages</p>&#13;
</li>&#13;
<li>&#13;
<p>Recommended external packages</p>&#13;
</li>&#13;
<li>&#13;
<p>An environment of development tools</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>The following sections&#13;
list the Python tools required or recommended&#13;
for this book.</p>&#13;
&#13;
<p>These may change over time!&#13;
Python packaging and development tools are&#13;
moving targets,&#13;
and better solutions come along now and then.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Getting Started" data-type="sect1"><div class="sect1" id="id298">&#13;
<h1>Getting Started</h1>&#13;
&#13;
<p>You should be able to write and run a Python program like&#13;
<a data-type="xref" href="#ex-2-1">Example 2-1</a>.</p>&#13;
<div data-type="example" id="ex-2-1">&#13;
<h5><span class="label">Example 2-1. </span>The Python program that goes like this: <span class="plain">this.py</span></h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="k">def</code> <code class="nf">paid_promotion</code><code class="p">():</code>&#13;
    <code class="nb">print</code><code class="p">(</code><code class="s2">"(that calls this function!)"</code><code class="p">)</code>&#13;
&#13;
<code class="nb">print</code><code class="p">(</code><code class="s2">"This is the program"</code><code class="p">)</code>&#13;
<code class="n">paid_promotion</code><code class="p">()</code>&#13;
<code class="nb">print</code><code class="p">(</code><code class="s2">"that goes like this."</code><code class="p">)</code></pre></div>&#13;
&#13;
<p>To execute this program from the command line&#13;
in a text window or terminal,&#13;
I’ll use the convention of a <code>$</code> <em>prompt</em>&#13;
(your system begging you to type something, already).&#13;
What you type after the prompt is shown in <strong><code>bold print</code></strong>.&#13;
If you saved <a data-type="xref" href="#ex-2-1">Example 2-1</a> to a file named <em>this.py</em>, you can run it as shown in <a data-type="xref" href="#ex-2-2">Example 2-2</a>.</p>&#13;
<div data-type="example" id="ex-2-2">&#13;
<h5><span class="label">Example 2-2. </span>Test <span class="plain">this.py</span></h5>&#13;
&#13;
<pre data-type="programlisting">$ <strong>python this.py</strong>&#13;
This is the program&#13;
(that calls this function!)&#13;
that goes like this.</pre></div>&#13;
&#13;
<p>Some code examples use the interactive Python interpreter,&#13;
which is what you get if you just type <strong><code>python</code></strong>:</p>&#13;
&#13;
<pre data-type="programlisting">$ <strong>python</strong>&#13;
Python 3.9.1 (v3.9.1:1e5d33e9b9, Dec  7 2020, 12:10:52)&#13;
[Clang 6.0 (clang-600.0.57)] on darwin&#13;
Type "help", "copyright", "credits" or "license" for more information.&#13;
&gt;&gt;&gt;</pre>&#13;
&#13;
<p>The first few lines are specific to your operating system and&#13;
Python version.&#13;
The <code>&gt;&gt;&gt;</code> is your prompt here.&#13;
A handy extra feature of the interactive interpreter&#13;
is that it will print the value&#13;
of a variable for you if you type its name:</p>&#13;
&#13;
<pre data-type="programlisting">&gt;&gt;&gt; <strong>wrong_answer = 43</strong>&#13;
&gt;&gt;&gt; <strong>wrong_answer</strong>&#13;
43</pre>&#13;
&#13;
<p class="pagebreak-before">This also works for expressions:</p>&#13;
&#13;
<pre data-type="programlisting">&gt;&gt;&gt; <strong>wrong_answer = 43</strong>&#13;
&gt;&gt;&gt; <strong>wrong_answer - 3</strong>&#13;
40</pre>&#13;
&#13;
<p>If you’re fairly new to Python&#13;
or would like a quick review,&#13;
read the next few sections.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Python Itself" data-type="sect2"><div class="sect2" id="id14">&#13;
<h2>Python Itself</h2>&#13;
&#13;
<p><a data-primary="Python" data-secondary="versions of" data-type="indexterm" id="id407"/>You will need, as a bare minimum, Python 3.7.&#13;
This includes features like type hints and asyncio,&#13;
which are core requirements for FastAPI.&#13;
I recommend using at least Python 3.9,&#13;
which will have a longer support lifetime.&#13;
The standard source for <a data-primary="Python Software Foundation" data-type="indexterm" id="id408"/>Python is the&#13;
<a href="https://www.python.org">Python Software Foundation</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Package Management" data-type="sect2"><div class="sect2" id="id15">&#13;
<h2>Package Management</h2>&#13;
&#13;
<p><a data-primary="Python" data-secondary="packages" data-type="indexterm" id="id409"/>You will want to download external Python packages&#13;
and install them safely on your computer.&#13;
The classic tool for this is<a data-primary="pip" data-type="indexterm" id="id410"/>&#13;
<a href="https://pip.pypa.io">pip</a>.</p>&#13;
&#13;
<p>But how do you download this downloader?&#13;
If you installed Python from the Python Software Foundation,&#13;
you should already have pip.&#13;
If not, follow the instructions at the pip site to get it.&#13;
Throughout this book,&#13;
as I introduce a new Python package,&#13;
I’ll include the pip command&#13;
to download it.</p>&#13;
&#13;
<p>Although you can do a lot with plain old pip, you’ll likely also want to use virtual environments&#13;
and consider an alternative tool like Poetry.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Virtual Environments" data-type="sect2"><div class="sect2" id="id16">&#13;
<h2>Virtual Environments</h2>&#13;
&#13;
<p><a data-primary="Python" data-secondary="virtual environments" data-type="indexterm" id="icd006"/>Pip <a data-primary="virtual environments" data-type="indexterm" id="icd007"/>will download and install packages, but where should it put them?&#13;
Although standard Python and its included libraries are usually&#13;
installed in a standard place on your operating system,&#13;
you may not (and probably should not)&#13;
be able to change anything there.&#13;
Pip uses a default directory other than the system one,&#13;
so you won’t step on your system’s standard Python files.&#13;
You can change this; see the pip site for&#13;
details for your operating system.</p>&#13;
&#13;
<p>But it’s common to work with multiple versions of Python,&#13;
or make installations specific to a project, so you know exactly&#13;
which packages are in there.&#13;
To do this, Python supports <em>virtual environments</em>.&#13;
These are just directories&#13;
(<em>folders</em> in the non-Unix world)&#13;
into which pip writes downloaded packages.&#13;
When you <em>activate</em> a virtual environment, your shell&#13;
(main system command interpreter) looks there first when&#13;
loading Python modules.</p>&#13;
&#13;
<p>The program for this is<a data-primary="venv" data-type="indexterm" id="id411"/>&#13;
<a href="https://oreil.ly/9kv5T">venv</a>,&#13;
and it’s been included&#13;
with standard Python since <span class="keep-together">version 3.4</span>.</p>&#13;
&#13;
<p>Let’s make a virtual environment called <code>venv1</code>.&#13;
You can run the venv module as a standalone program:</p>&#13;
&#13;
<pre data-type="programlisting">$ <strong>venv venv1</strong></pre>&#13;
&#13;
<p>Or as a Python module:</p>&#13;
&#13;
<pre data-type="programlisting">$ <strong>python -m venv venv1</strong></pre>&#13;
&#13;
<p>To make this your current Python environment,&#13;
run this shell command&#13;
(on Linux or Mac; see the venv docs for Windows and others):</p>&#13;
&#13;
<pre data-type="programlisting">$ <strong>source venv1/bin/activate</strong></pre>&#13;
&#13;
<p>Now, anytime you run <code>pip install</code>,&#13;
it will install packages under <code>venv1</code>.&#13;
And when you run Python programs,&#13;
that’s where your Python interpreter and modules will be found.</p>&#13;
&#13;
<p>To <em>de</em>activate your virtual environment,&#13;
press Control-D (Linux or Mac), or type <span class="keep-together"><code><strong>deactivate</strong></code></span> (Windows).</p>&#13;
&#13;
<p>You can create alternative environments like <code>venv2</code>,&#13;
and deactivate/activate to step between them&#13;
(although I hope you have more naming imagination<a data-primary="Python" data-secondary="virtual environments" data-startref="icd006" data-type="indexterm" id="id412"/> than <a data-primary="virtual environments" data-startref="icd007" data-type="indexterm" id="id413"/>me).</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Poetry" data-type="sect2"><div class="sect2" id="id17">&#13;
<h2>Poetry</h2>&#13;
&#13;
<p><a data-primary="Poetry" data-type="indexterm" id="id414"/>This combination of pip and venv is&#13;
so common that people started combining them to save steps&#13;
and avoid that <code>source</code> shell wizardry.&#13;
One such package is<a data-primary="Pipenv" data-type="indexterm" id="id415"/>&#13;
<a href="https://pipenv.pypa.io">Pipenv</a>,&#13;
but a newer rival called&#13;
<a href="https://python-poetry.org">Poetry</a>&#13;
is becoming more popular.</p>&#13;
&#13;
<p>Having used pip, Pipenv, and Poetry,&#13;
I now prefer Poetry.&#13;
Get it with <code>pip install poetry</code>.&#13;
Poetry has many subcommands, such as <code>poetry add</code>&#13;
to add a package to your virtual environment,&#13;
<code>poetry install</code> to actually download and install it,&#13;
and so on.&#13;
Check the Poetry site or run the <code>poetry</code> command for help.</p>&#13;
&#13;
<p>Besides downloading single packages,&#13;
<a data-primary="pip" data-type="indexterm" id="id416"/>pip and Poetry manage multiple packages in configuration files:&#13;
<em>requirements.txt</em> for pip, and <em>pyproject.toml</em> for Poetry.&#13;
Poetry and pip don’t just download packages, but also manage the&#13;
tricky dependencies that packages may have on other packages.&#13;
You can specify desired package versions as&#13;
minima, maxima, ranges, or exact values (also known as <em>pinning</em>).&#13;
This can be important as your project grows&#13;
and the packages that it&#13;
depends on change.&#13;
You may need a minimum version of a package if&#13;
a feature that you use first appeared there,&#13;
or a maximum if a feature was dropped.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="pagebreak-before less_space" data-pdf-bookmark="Source Formatting" data-type="sect2"><div class="sect2" id="id18">&#13;
<h2>Source Formatting</h2>&#13;
&#13;
<p><a data-primary="Python" data-secondary="source formatting" data-type="indexterm" id="id417"/>Source <a data-primary="source formatting" data-type="indexterm" id="id418"/>formatting is less important than the topics of the previous sections but still helpful.&#13;
Avoid code formatting (<em>bikeshedding</em>) arguments&#13;
with a tool that&#13;
massages source into a standard, nonweird&#13;
format.&#13;
One good choice is<a data-primary="Black" data-type="indexterm" id="id419"/>&#13;
<a href="https://black.readthedocs.io">Black</a>.&#13;
Install it with <code>pip install black</code>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Testing" data-type="sect2"><div class="sect2" id="id19">&#13;
<h2>Testing</h2>&#13;
&#13;
<p><a data-primary="Python" data-secondary="testing" data-type="indexterm" id="id420"/>Testing <a data-primary="testing" data-type="indexterm" id="id421"/>is covered in detail in <a data-type="xref" href="ch12.html#ch12">Chapter 12</a>.&#13;
Although the standard Python test package is unittest,&#13;
the industrial-strength Python test package used by&#13;
most Python developers is<a data-primary="pytest" data-type="indexterm" id="id422"/>&#13;
<a href="https://docs.pytest.org">pytest</a>.&#13;
Install it with <code>pip install pytest</code>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Source Control and Continuous Integration" data-type="sect2"><div class="sect2" id="id20">&#13;
<h2>Source Control and Continuous Integration</h2>&#13;
&#13;
<p><a data-primary="Python" data-secondary="source control" data-type="indexterm" id="id423"/>The <a data-primary="source control" data-type="indexterm" id="id424"/>almost-universal solution for source control now is<a data-primary="Git" data-type="indexterm" id="id425"/> <em>Git</em>,&#13;
with storage repositories (<em>repos</em>) at sites like&#13;
GitHub and GitLab.&#13;
Using Git isn’t specific to Python or FastAPI,&#13;
but you’ll likely spend a lot of your development time with Git.&#13;
<a data-primary="pre-commit tool" data-type="indexterm" id="id426"/>The <a href="https://pre-commit.com">pre-commit</a> tool&#13;
runs various tests on your local machine&#13;
(such as <code>black</code> and <code>pytest</code>)&#13;
before committing to Git.&#13;
After pushing to a remote Git repo,&#13;
more <a data-primary="CI (continuous integration)" data-type="indexterm" id="id427"/>continuous integration (CI) tests may be run there.</p>&#13;
&#13;
<p><a data-type="xref" href="ch12.html#ch12">Chapter 12</a> and <a data-type="xref" href="ch13.html#troubleshooting">“Troubleshooting”</a> have more details.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Web Tools" data-type="sect2"><div class="sect2" id="id175">&#13;
<h2>Web Tools</h2>&#13;
&#13;
<p><a data-type="xref" href="ch03.html#ch03">Chapter 3</a> shows how to install and use the main Python web tools&#13;
used in this book:</p>&#13;
<dl>&#13;
<dt>FastAPI<a data-primary="FastAPI" data-secondary="defined" data-type="indexterm" id="id428"/></dt>&#13;
<dd>&#13;
<p>The web framework itself</p>&#13;
</dd>&#13;
<dt>Uvicorn<a data-primary="Uvicorn" data-secondary="defined" data-type="indexterm" id="id429"/></dt>&#13;
<dd>&#13;
<p>An asynchronous web server</p>&#13;
</dd>&#13;
<dt>HTTPie<a data-primary="HTTPie" data-secondary="defined" data-type="indexterm" id="id430"/></dt>&#13;
<dd>&#13;
<p>A text web client, similar to curl</p>&#13;
</dd>&#13;
<dt>Requests<a data-primary="Requests package" data-secondary="defined" data-type="indexterm" id="id431"/></dt>&#13;
<dd>&#13;
<p>A synchronous web client package</p>&#13;
</dd>&#13;
<dt><a data-primary="HTTPX" data-secondary="defined" data-type="indexterm" id="id432"/>HTTPX</dt>&#13;
<dd>&#13;
<p>A synchronous/asynchronous web client package</p>&#13;
</dd>&#13;
</dl>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="APIs and Services" data-type="sect1"><div class="sect1" id="id21">&#13;
<h1>APIs and Services</h1>&#13;
&#13;
<p><a data-primary="Python" data-secondary="APIs and services" data-type="indexterm" id="id433"/>Python’s <a data-primary="services" data-type="indexterm" id="id434"/>modules <a data-primary="APIs (application programming interfaces)" data-secondary="in Python" data-type="indexterm" id="id435"/>and packages are essential for creating large&#13;
applications that don’t become&#13;
<a href="https://oreil.ly/zzX5T">“big balls of mud”</a>.&#13;
Even in a single-process web service,&#13;
you can maintain the separation discussed in <a data-type="xref" href="ch01.html#ch01">Chapter 1</a>&#13;
by the careful design of modules and imports.</p>&#13;
&#13;
<p>Python’s built-in data structures are extremely flexible,&#13;
and very tempting to use everywhere.&#13;
But in the coming chapters, you’ll see that&#13;
we can define higher-level <em>models</em> to make our&#13;
interlayer communication cleaner.&#13;
These models rely on a fairly recent Python addition&#13;
called <em>type hinting</em>.&#13;
Let’s get into that,&#13;
but first with a brief aside on how Python handles <em>variables</em>.&#13;
This won’t hurt.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Variables Are Names" data-type="sect1"><div class="sect1" id="id22">&#13;
<h1>Variables Are Names</h1>&#13;
&#13;
<p><a data-primary="objects" data-type="indexterm" id="icd009"/>The <a data-primary="Python" data-secondary="objects" data-type="indexterm" id="icd008"/>term <em>object</em> has many definitions in the software world—maybe too many.&#13;
In Python, an object is&#13;
a data structure that wraps every distinct piece of data&#13;
in the program,&#13;
from an integer like <code>5</code>, to a function,&#13;
to anything that you might define.&#13;
It specifies, among other bookkeeping info, the following:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>A unique <em>identity</em> value</p>&#13;
</li>&#13;
<li>&#13;
<p>The low-level <em>type</em> that matches the hardware</p>&#13;
</li>&#13;
<li>&#13;
<p>The specific <em>value</em> (physical bits)</p>&#13;
</li>&#13;
<li>&#13;
<p>A <em>reference count</em> of the number of variables that refer to it</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>Python is <em>strongly typed</em> at the object level&#13;
(its <em>type</em> doesn’t change, although its <em>value</em> might).&#13;
An object is termed <em>mutable</em> if its value may be changed,&#13;
<em>immutable</em> if not.</p>&#13;
&#13;
<p>But <a data-primary="variables" data-type="indexterm" id="id436"/>at <a data-primary="Python" data-secondary="variables" data-type="indexterm" id="id437"/>the <em>variable</em> level,&#13;
Python differs from many other computing languages,&#13;
and this can be confusing. In many other languages,&#13;
a <em>variable</em> is essentially a direct pointer to an area of memory&#13;
that contains a raw <em>value</em>,&#13;
stored in bits that follow the computer’s hardware design.&#13;
If you assign a new value to that variable,&#13;
the language overwrites the previous value in memory with the new one.</p>&#13;
&#13;
<p>That’s direct and fast.&#13;
The compiler keeps track of what goes where.&#13;
It’s one reason languages like C are faster than Python.&#13;
As a developer, you need to ensure that&#13;
you assign only values of the correct type to each variable.</p>&#13;
&#13;
<p>Now, here’s the big difference with Python:&#13;
a Python variable is just a <em>name</em> that&#13;
is temporarily associated with a higher-level&#13;
<em>object</em> in memory. If you assign a new value to a variable&#13;
that refers to an immutable object,&#13;
you’re actually creating a new object that&#13;
contains that value,&#13;
and then getting the name to refer to that new object.&#13;
The old object (that the name used to refer to)&#13;
is then free,&#13;
and its memory can be reclaimed if no other&#13;
names are still referring to it&#13;
(i.e., its reference count is 0).</p>&#13;
&#13;
<p>In&#13;
<em>Introducing Python</em> (O’Reilly),&#13;
I compare objects to plastic boxes sitting on&#13;
memory shelves,&#13;
and names/variables to sticky notes&#13;
on these boxes.&#13;
Or you can picture names as tags&#13;
attached by strings to those boxes.</p>&#13;
&#13;
<p>Usually, when you use a name,&#13;
you assign it to one object, and it stays attached.&#13;
Such simple consistency helps you understand your code.&#13;
A variable’s <em>scope</em> is the area of code in which a name refers to&#13;
the same object—such as within a function.&#13;
You can use the same name in different scopes,&#13;
but each one refers to a different object.</p>&#13;
&#13;
<p>Although you can make a variable refer to&#13;
different objects throughout a Python program,&#13;
that isn’t necessarily a good practice.&#13;
Without looking, you don’t know if name <code>x</code> on line 100&#13;
is in the same scope as name <code>x</code> on line 20.&#13;
(By the way, <code>x</code> is a terrible name.&#13;
We should pick names that actually confer <a data-primary="objects" data-startref="icd009" data-type="indexterm" id="id438"/>some<a data-primary="Python" data-secondary="objects" data-startref="icd008" data-type="indexterm" id="id439"/> meaning.)</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Type Hints" data-type="sect1"><div class="sect1" id="id23">&#13;
<h1>Type Hints</h1>&#13;
&#13;
<p>All <a data-primary="Python" data-secondary="type hinting" data-type="indexterm" id="id440"/>of <a data-primary="type hinting" data-type="indexterm" id="id441"/>this background has a point.</p>&#13;
&#13;
<p>Python 3.6 added <em>type hints</em> to declare the type of object&#13;
to which a variable refers.&#13;
These are <em>not</em> enforced by the Python interpreter as it’s running!&#13;
Instead, they can be used by various tools to ensure that&#13;
your use of a variable is consistent.&#13;
The standard type checker is called <a data-primary="mypy" data-type="indexterm" id="id442"/><em>mypy</em>,&#13;
and I’ll show you how it’s used later.</p>&#13;
&#13;
<p>A type hint may seem like just a nice thing, like many lint&#13;
tools used by programmers to avoid mistakes.&#13;
For instance, it may remind you that&#13;
your variable <code>count</code> refers to a Python object of type <code>int</code>.&#13;
But hints,&#13;
although they’re optional and unenforced notes&#13;
(literally, hints),&#13;
turn out to have unexpected uses.&#13;
Later in this book, you’ll see how FastAPI adapted&#13;
the Pydantic package to make clever use of&#13;
type hinting.</p>&#13;
&#13;
<p>The addition of type declarations&#13;
may be a trend in other, formerly typeless, languages.&#13;
For example,&#13;
many JavaScript&#13;
developers have moved to&#13;
<a href="https://www.typescriptlang.org">TypeScript</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Data Structures" data-type="sect1"><div class="sect1" id="id299">&#13;
<h1>Data Structures</h1>&#13;
&#13;
<p>You’ll get details on Python and data structures&#13;
in <a data-type="xref" href="ch05.html#ch05">Chapter 5</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Web Frameworks" data-type="sect1"><div class="sect1" id="id24">&#13;
<h1>Web Frameworks</h1>&#13;
&#13;
<p><a data-primary="Python" data-secondary="web frameworks" data-type="indexterm" id="icd010"/>Among<a data-primary="web frameworks" data-type="indexterm" id="icd011"/> other things, a web framework translates between&#13;
HTTP bytes and Python data structures.&#13;
It can save you a lot of effort.&#13;
On the other hand, if part of it doesn’t work&#13;
as you need it to,&#13;
you may need to hack a solution.&#13;
As the saying goes, don’t reinvent the wheel—unless you can’t get a round one.</p>&#13;
&#13;
<p>The <a data-primary="WSGI (Web Server Gateway Interface)" data-type="indexterm" id="id443"/><a href="https://wsgi.readthedocs.io">Web Server Gateway Interface (WSGI)</a> is a synchronous Python&#13;
<a href="https://peps.python.org/pep-3333">standard specification</a>&#13;
to connect application code to web servers.&#13;
Traditional Python web <span class="keep-together">frameworks</span> are all built on WSGI.&#13;
But synchronous communication may mean busy waiting for&#13;
something that’s <em>much</em> slower than the CPU,&#13;
like a disk or network.&#13;
Then you’ll look for better <a data-primary="concurrency" data-type="indexterm" id="id444"/><em>concurrency</em>.&#13;
Concurrency has become more important in recent years.&#13;
As a result, the Python<a data-primary="ASGI (Asynchronous Server Gateway Interface)" data-type="indexterm" id="id445"/>&#13;
<a href="https://asgi.readthedocs.io">Asynchronous Server Gateway Interface (ASGI) specification</a>&#13;
was developed.&#13;
<a data-type="xref" href="ch04.html#ch04">Chapter 4</a> talks about this.</p>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Django" data-type="sect2"><div class="sect2" id="id25">&#13;
<h2>Django</h2>&#13;
&#13;
<p><a data-primary="Django" data-secondary="defined" data-type="indexterm" id="id446"/><a href="https://www.djangoproject.com">Django</a>&#13;
is a full-featured web framework&#13;
that tags itself as&#13;
“the web framework for perfectionists with deadlines.”&#13;
It was announced by&#13;
Adrian Holovaty<a data-primary="Holovaty, Adrian" data-type="indexterm" id="id447"/>&#13;
and&#13;
Simon <span class="keep-together">Willison</span><a data-primary="Willison, Simon" data-type="indexterm" id="id448"/>&#13;
in 2003,&#13;
and named after&#13;
Django Reinhardt,&#13;
a 20th-century Belgian jazz guitarist.&#13;
Django is often used for database-backed corporate sites.&#13;
I include more details on Django in <a data-type="xref" href="ch07.html#ch07">Chapter 7</a>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Flask" data-type="sect2"><div class="sect2" id="id26">&#13;
<h2>Flask</h2>&#13;
&#13;
<p><a data-primary="Flask" data-type="indexterm" id="id449"/>In contrast,&#13;
<a href="https://flask.palletsprojects.com">Flask</a>,&#13;
introduced by Armin Ronacher<a data-primary="Ronacher, Armin" data-type="indexterm" id="id450"/> in 2010,&#13;
is a <em>microframework</em>.&#13;
<a data-type="xref" href="ch07.html#ch07">Chapter 7</a> has more information on Flask&#13;
and how it compares with Django and <span class="keep-together">FastAPI</span>.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="FastAPI" data-type="sect2"><div class="sect2" id="id27">&#13;
<h2>FastAPI</h2>&#13;
&#13;
<p><a data-primary="FastAPI" data-secondary="rise of" data-type="indexterm" id="id451"/>After meeting other suitors at the ball,&#13;
we finally encounter the intriguing FastAPI,&#13;
the subject of this book.&#13;
Although FastAPI was published by&#13;
Sebastián Ramírez<a data-primary="Ramírez, Sebastián" data-type="indexterm" id="id452"/>&#13;
in 2018,&#13;
it has already climbed to&#13;
the third place&#13;
of Python web frameworks,&#13;
behind Flask and Django,&#13;
and is growing faster.&#13;
A 2022&#13;
<a href="https://oreil.ly/36WTQ">comparison</a>&#13;
shows that it may pass them at some point.</p>&#13;
<div data-type="note" epub:type="note"><h6>Note</h6>&#13;
<p>As of the end of October 2023, here are the GitHub star counts:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Django: 73.8 thousand</p>&#13;
</li>&#13;
<li>&#13;
<p>Flask: 64.8 thousand</p>&#13;
</li>&#13;
<li>&#13;
<p>FastAPI: 64 thousand</p>&#13;
</li>&#13;
</ul>&#13;
</div>&#13;
&#13;
<p class="pagebreak-before">After careful investigation into&#13;
<a href="https://oreil.ly/JDDOm">alternatives</a>,&#13;
Ramírez came up&#13;
with a&#13;
<a href="https://oreil.ly/zJFTX">design</a>&#13;
that was heavily based on two third-party Python packages:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p><em>Starlette</em> for web details</p>&#13;
</li>&#13;
<li>&#13;
<p><em>Pydantic</em> for data details</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>And he added his own ingredients&#13;
and special sauces to the final product.&#13;
You’ll see what I mean in the <a data-primary="web frameworks" data-startref="icd011" data-type="indexterm" id="id453"/>next <a data-primary="Python" data-secondary="web frameworks" data-startref="icd010" data-type="indexterm" id="id454"/>chapter<a data-primary="Python" data-startref="icd005" data-type="indexterm" id="id455"/>.</p>&#13;
</div></section>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="Review" data-type="sect1"><div class="sect1" id="id300">&#13;
<h1>Review</h1>&#13;
&#13;
<p>This chapter covered a lot of ground&#13;
related to today’s Python:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Useful tools for a Python web developer</p>&#13;
</li>&#13;
<li>&#13;
<p>The prominence of APIs and services</p>&#13;
</li>&#13;
<li>&#13;
<p>Python’s type hinting, objects, and variables</p>&#13;
</li>&#13;
<li>&#13;
<p>Data structures for web services</p>&#13;
</li>&#13;
<li>&#13;
<p>Web frameworks</p>&#13;
</li>&#13;
</ul>&#13;
</div></section>&#13;
</div></section></body></html>