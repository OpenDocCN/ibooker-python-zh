<html><head></head><body>
<div id="sbo-rt-content"><section data-nutshell-tab="Numeric Processing" data-pdf-bookmark="Chapter 16. Numeric Processing" data-type="chapter" epub:type="chapter"><div class="chapter" id="numeric_processing">
<h1><span class="label">Chapter 16. </span>Numeric Processing</h1>
<p>You can perform some numeric computations with operators (covered in <a data-type="xref" href="ch03.xhtml#numeric_operations">“Numeric Operations”</a>) and built-in functions (covered in <a data-type="xref" href="ch08.xhtml#built_in_functions">“Built-in Functions”</a>). Python also provides modules that support additional numeric computations, covered in this chapter: <span class="code">math</span> and <span class="code">cmath</span>, <span class="code">statistics</span>, <span class="code">operator</span>, <span class="code">random</span> and <span class="code">secrets</span>, <span class="code">fractions</span>, and <span class="code">decimal</span>. Numeric processing often requires, more specifically, the processing of <em>arrays</em> of numbers; this topic is covered in <a data-type="xref" href="#array_processing">“Array Processing”</a>, focusing on the standard library module <span class="code">array</span> and popular third-party extension NumPy. Finally, <a data-type="xref" href="#additional_numeric_packages">“Additional numeric packages”</a> lists several additional numeric processing packages produced by the Python community. Most examples in this chapter assume you’ve imported the appropriate module; <strong><span class="code">import</span></strong> statements are only included where the situation might be unclear.</p>
<section data-pdf-bookmark="Floating-Point Values" data-type="sect1"><div class="sect1" id="floating_point_values">
<h1>Floating-Point Values</h1>
<p>Python<a contenteditable="false" data-primary="numeric processing" data-secondary="floating-point values" data-type="indexterm" id="NPfloat16"/><a contenteditable="false" data-primary="floating-point numbers" data-secondary="numeric processing of" data-type="indexterm" id="FPNnumeric16"/> represents real numeric values (that is, those that are not integers) using variables of type <span class="code">float</span>. Unlike integers, computers can rarely represent <span class="code">float</span>s exactly, due to their internal implementation as a fixed-size binary integer<a contenteditable="false" data-primary="significand" data-type="indexterm" id="idm44924500857216"/> <em>significand</em> (often incorrectly called “mantissa”) and a fixed-size binary integer exponent. <span class="code">float</span>s have several limitations (some of which can lead to unexpected results).</p>
<p>For most everyday applications, <span class="code">float</span>s are sufficient for arithmetic, but they are limited in the number of decimal places they can represent:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">f</code><code> </code><code class="o">=</code><code> </code><code class="mf">1.1</code><code> </code><code class="o">+</code><code> </code><code class="mf">2.2</code><code> </code><code class="o">-</code><code> </code><code class="mf">3.3</code><code>  </code><em><code class="c1"># f should be equal to 0</code></em><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">f</code></pre>
<pre data-type="programlisting">
<strong>4.440892098500626e-16</strong></pre>
<p>They are also limited in the range of integer values they can accurately store (in the sense of being able to distinguish one from the next largest or smallest integer value):</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">f</code> <code class="o">=</code> <code class="mi">2</code> <code class="o">**</code> <code class="mi">53</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">f</code></pre>
<pre data-type="programlisting">
<strong>9007199254740992</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">f</code> <code class="o">+</code> <code class="mi">1</code></pre>
<pre data-type="programlisting">
<strong>9007199254740993</strong>    <em># integer arithmetic is not bounded</em></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">f</code> <code class="o">+</code> <code class="mf">1.0</code></pre>
<pre data-type="programlisting">
<strong>9007199254740992.0</strong>  <em># float conversion loses integer precision at 2**53</em></pre>
<p>Always keep in mind that <span class="code">float</span>s are not entirely precise, due to their internal representation in the computer. The same consideration applies to <span class="code">complex</span> numbers.</p>
<div data-type="warning" epub:type="warning">
<h1>Don’t Use == Between Floating-Point or Complex Numbers</h1>
<p>Given<a contenteditable="false" data-primary="== (equal to operator)" data-type="indexterm" id="idm44924500766352"/><a contenteditable="false" data-primary="equal to operator (==)" data-type="indexterm" id="idm44924500765216"/> that floating-point numbers and operations only approximate the behavior of mathematical “real numbers,” it seldom makes sense to check two <span class="code">float</span>s <span class="code"><em>x</em></span> and <span class="code"><em>y</em></span> for exact equality. Tiny variations in how each was computed can easily result in unexpected differences.</p>
</div>
<p>For testing floating-point or complex numbers for equality, use the function<a contenteditable="false" data-primary="isclose (math module)" data-type="indexterm" id="idm44924500732400"/> <span class="code">isclose</span> exported by the built-in module <span class="code">math</span>. The following code illustrates why:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="kn">import</code></strong><code> </code><code class="nn">math</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">f</code><code> </code><code class="o">=</code><code> </code><code class="mf">1.1</code><code> </code><code class="o">+</code><code> </code><code class="mf">2.2</code><code> </code><code class="o">-</code><code> </code><code class="mf">3.3</code><code>  </code><em><code class="c1"># f intuitively equal to 0</code></em><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">f</code><code> </code><code class="o">==</code><code> </code><code class="mi">0</code></pre>
<pre data-type="programlisting">
<strong>False</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">f</code></pre>
<pre data-type="programlisting">
<strong>4.440892098500626e-16</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><em><code class="c1"># default tolerance fine for this comparison</code></em><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">math</code><code class="o">.</code><code class="n">isclose</code><code class="p">(</code><code class="o">-</code><code class="mi">1</code><code class="p">,</code><code> </code><code class="n">f</code><code class="o">-</code><code class="mi">1</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>True</strong></pre>
<p>For some values, you may have to set the tolerance value explicitly (this is <em>always</em> necessary when you’re comparing with <span class="code">0</span>):</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><em><code class="c1"># near-0 comparison with default tolerances</code></em><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">math</code><code class="o">.</code><code class="n">isclose</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code> </code><code class="n">f</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>False</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><em><code class="c1"># must use abs_tol for comparison with 0</code></em><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">math</code><code class="o">.</code><code class="n">isclose</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code> </code><code class="n">f</code><code class="p">,</code><code> </code><code class="n">abs_tol</code><code class="o">=</code><code class="mf">1e-15</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>True</strong></pre>
<p>You can also use <span class="code">isclose</span> for safe looping.</p>
<div data-type="warning" epub:type="warning">
<h1>Don’t Use a float as a Loop Control Variable</h1>
<p>A<a contenteditable="false" data-primary="loops" data-secondary="floating-point values and" data-type="indexterm" id="idm44924500548240"/> common error is to use a floating-point value as the control variable of a loop, assuming that it will eventually equal some ending value, such as <span class="code">0</span>. Instead, it most likely will end up looping forever.</p>
</div>
<p>The following loop, expected to loop five times and then end, will in fact loop forever:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">f</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="k">while</code></strong><code> </code><code class="n">f</code><code> </code><code class="o">!=</code><code> </code><code class="mi">0</code><code class="p">:</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><strong><code>    </code></strong><code> </code><code class="n">f</code><code> </code><code class="o">-</code><code class="o">=</code><code> </code><code class="mf">0.2</code><code> </code></pre>
<p>Even though <span class="code">f</span> started as an <span class="code">int</span>, it’s now a <span class="code">float</span>. This code shows why:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="mi">1</code><code class="o">-</code><code class="mf">0.2</code><code class="o">-</code><code class="mf">0.2</code><code class="o">-</code><code class="mf">0.2</code><code class="o">-</code><code class="mf">0.2</code><code class="o">-</code><code class="mf">0.2</code><code>  </code><em><code class="c1"># should be 0, but...</code></em></pre>
<pre data-type="programlisting">
<strong>5.551115123125783e-17</strong></pre>
<p>Even using the inequality operator <span class="code">&gt;</span> results in incorrect behavior, looping six times instead of five (since the residual <span class="code">float</span> value is still greater than <span class="code">0</span>):</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">f</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">count</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="k">while</code></strong><code> </code><code class="n">f</code><code> </code><code class="o">&gt;</code><code> </code><code class="mi">0</code><code class="p">:</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>     </code><code class="n">count</code><code> </code><code class="o">+</code><code class="o">=</code><code> </code><code class="mi">1</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>     </code><code class="n">f</code><code> </code><code class="o">-</code><code class="o">=</code><code> </code><code class="mf">0.2</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="nb">print</code><code class="p">(</code><code class="n">count</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>6</strong>   <em># one loop too many!</em></pre>
<p>If instead you use <span class="code">math.isclose</span> for comparing <span class="code"><em>f</em></span> with <span class="code">0</span>, the <span class="code"><strong>for</strong></span> loop repeats the correct number of times:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">f</code><code> </code><code class="o">=</code><code> </code><code class="mi">1</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">count</code><code> </code><code class="o">=</code><code> </code><code class="mi">0</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="k">while</code><code> </code><code class="ow">not</code></strong><code> </code><code class="n">math</code><code class="o">.</code><code class="n">isclose</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code class="n">f</code><code class="p">,</code><code class="n">abs_tol</code><code class="o">=</code><code class="mf">1e-15</code><code class="p">)</code><code class="p">:</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>     </code><code class="n">count</code><code> </code><code class="o">+</code><code class="o">=</code><code> </code><code class="mi">1</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>     </code><code class="n">f</code><code> </code><code class="o">-</code><code class="o">=</code><code> </code><code class="mf">0.2</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="nb">print</code><code class="p">(</code><code class="n">count</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>5</strong>   <em># just right this time!</em></pre>
<p>In general, try to use an <span class="code">int</span> for a loop’s control variable, rather than a <span class="code">float</span>.</p>
<p>Finally, mathematical operations that result in very large <span class="code">float</span>s will often cause an <span class="code">OverflowError</span>, or Python may return them as <span class="code">inf</span> <span class="code">(</span>infinity). The maximum <span class="code">float</span> value usable on your computer is <span class="code">sys.float_info.max</span>: on 64-bit computers, it’s <span class="code">1.7976931348623157e+308</span>. This may cause unexpected results when doing math using very large numbers. When you need to work with very large numbers, we recommend using the <span class="code">decimal</span> module or third-party <a href="https://oreil.ly/JWoAx"><span class="code">gmpy</span></a> instead.<a contenteditable="false" data-primary="" data-startref="FPNnumeric16" data-type="indexterm" id="idm44924500263936"/><a contenteditable="false" data-primary="" data-startref="FPNnumeric16" data-type="indexterm" id="idm44924500262720"/></p>
</div></section>
<section data-pdf-bookmark="The math and cmath Modules" data-type="sect1"><div class="sect1" id="the_math_and_cmath_modules">
<h1>The math and cmath Modules</h1>
<p>The<a contenteditable="false" data-primary="numeric processing" data-secondary="math and cmath modules" data-type="indexterm" id="NPmath16"/><a contenteditable="false" data-primary="math module" data-type="indexterm" id="mathmod16"/><a contenteditable="false" data-primary="cmath module" data-type="indexterm" id="cmathmod16"/><a contenteditable="false" data-primary="standard library modules" data-secondary="math and cmath" data-type="indexterm" id="idm44924500256880"/> <span class="code">math</span> module supplies mathematical functions for working with floating-point numbers; the <span class="code">cmath</span> module supplies equivalent functions for complex numbers. For example, <span class="code">math.sqrt(-1)</span> raises an exception, but <span class="code">cmath.sqrt(-1)</span> returns <span class="code">1j</span>.</p>
<p>Just like for any other module, the cleanest, most readable way to use these is to have, for example, <span class="code"><strong>import</strong></span> <span class="code">math</span> at the top of your code, and explicitly call, say, <span class="code">math.sqrt</span> afterward. However, if your code includes a large number of calls to the modules’ well-known mathematical functions, you might (though it may lose some clarity and readability) either use <span class="code"><strong>from</strong></span> <span class="code">math</span> <span class="code"><strong>import</strong></span> <span class="code">*</span>, or use <span class="code"><strong>from</strong></span> <span class="code">math</span> <span class="code"><strong>import</strong></span> <span class="code">sqrt</span>, and afterward just call <span class="code">sqrt</span>.</p>
<p>Each module exposes three <span class="code">float</span> attributes bound to the values of fundamental mathematical constants, <span class="code">e</span>, <span class="code">pi</span>, and <a href="https://oreil.ly/2Sbrf">tau</a>, and a variety of functions, including those shown in <a data-type="xref" href="#methods_and_attributes_of_the_math_and">Table 16-1</a>. The <span class="code">math</span> and <span class="code">cmath</span> modules are not fully symmetric, so for each method the table indicates whether it is in <span class="code">math</span>, <span class="code">cmath</span>, or both. All examples assume you have imported the appropriate module.</p>
<table class="border" id="methods_and_attributes_of_the_math_and">
<caption><span class="label">Table 16-1. </span>Methods and attributes of the <span class="code">math</span> and <span class="code">cmath</span> modules</caption>
<thead>
<tr>
<th class="width-15"> </th>
<th> </th>
<th>math</th>
<th>cmath</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="code">acos</span>, <span class="code">asin</span>, <span class="code">atan</span>, <span class="code">cos</span>, <span class="code">sin</span>, <span class="code">tan</span></td>
<td><span class="code">acos(<em>x</em>)</span>, etc.<br/>
			Return<a contenteditable="false" data-primary="tan (math module)" data-type="indexterm" id="idm44924500221696"/><a contenteditable="false" data-primary="cos (math module)" data-type="indexterm" id="idm44924500220592"/><a contenteditable="false" data-primary="sin (math module)" data-type="indexterm" id="idm44924500219488"/> the trigonometric functions arccosine, arcsine, arctangent, cosine, sine, or tangent, respectively, of <span class="code"><em>x</em></span>, given in radians.</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">acosh</span>, <span class="code">asinh</span>, <span class="code">atanh</span>, <span class="code">cosh</span>, <span class="code">sinh</span>, <span class="code">tanh</span></td>
<td><span class="code">acosh(<em>x</em>)</span>, etc.<br/>
			Return the arc hyperbolic cosine, arc hyperbolic sine, arc hyperbolic tangent, hyperbolic cosine, hyperbolic sine, or hyperbolic tangent, respectively, of <span class="code"><em>x</em></span>, given in radians.</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">atan2</span></td>
<td><span class="code">atan2(<em>y, x</em>)</span><br/>
			Like <span class="code">atan(<em>y</em>/<em>x</em>)</span>, except that <span class="code">atan2</span> properly takes into account the signs of both arguments. For example:
			<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">math</code><code class="o">.</code><code class="n">atan</code><code class="p">(</code><code class="o">-</code><code class="mf">1.</code><code class="o">/-</code><code class="mf">1.</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>0.7853981633974483</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">math</code><code class="o">.</code><code class="n">atan2</code><code class="p">(</code><code class="o">-</code><code class="mf">1.</code><code class="p">,</code> <code class="o">-</code><code class="mf">1.</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>-2.356194490192345</strong></pre>
			When <em>x</em> equals 0, <span class="code">atan2</span> returns <span class="code">π/2</span>, while dividing by <em>x</em> would raise <span class="code">ZeroDivisionError</span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">cbrt</span></td>
<td><span class="code">cbrt(x)</span><br/>
<span class="version">3.11+</span> Returns the cube root of <span class="code"><em>x</em></span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">ceil</span></td>
<td><span class="code">ceil(<em>x</em>)</span><br/>
			Returns <span class="code">float(<em>i</em>)</span>, where <span class="code"><em>i</em></span> is the smallest integer such that <span class="code"><em>i</em></span><span class="code">&gt;=</span><span class="code"><em>x</em></span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">comb</span></td>
<td><span class="code">comb(<em>n</em>,</span> <span class="code"><em>k</em></span><span class="code">)</span><br/>
<span class="version">3.8+</span> Returns<a contenteditable="false" data-primary="comb (math module)" data-type="indexterm" id="idm44924500112096"/> the number of <em>combinations</em> of <span class="code"><em>n</em></span> items taken <span class="code"><em>k</em></span> items at a time, regardless of order. When counting the number of combinations taken from three items <em>A</em>, <em>B</em>, and <em>C</em>, two at a time, <span class="code">comb(3, 2)</span> returns <span class="code">3</span> because, for example, <em>A</em>-<em>B</em> and <em>B</em>-<em>A</em> are considered the <em>same</em> combination (contrast this with <span class="code">perm</span>, later in this table). Raises <span class="code">ValueError</span> when <span class="code"><em>k</em></span> or <span class="code"><em>n</em></span> is negative; raises <span class="code">TypeError</span> when <span class="code"><em>k</em></span> or <span class="code"><em>n</em></span> is not an <span class="code">int</span>. When <span class="code"><em>k</em></span><span class="code">&gt;</span><span class="code"><em>n</em></span>, just returns <span class="code">0</span>, raising no exceptions.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">copysign</span></td>
<td><span class="code">copysign(<em>x</em>,</span> <span class="code"><em>y</em></span><span class="code">)</span><br/>
			Returns<a contenteditable="false" data-primary="copysign (math module)" data-type="indexterm" id="idm44924500089952"/> the absolute value of <span class="code"><em>x</em></span> with the sign of <span class="code"><em>y</em></span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">degrees</span></td>
<td><span class="code">degrees(<em>x</em>)</span><br/>
			Returns the degree measure of the angle <span class="code"><em>x</em></span> given in radians.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">dist</span></td>
<td><span class="code">dist(<em>pt0</em>,</span> <span class="code"><em>pt1</em></span><span class="code">)</span><br/>
<span class="version">3.8+</span> Returns<a contenteditable="false" data-primary="dist (math module)" data-type="indexterm" id="idm44924500075888"/> the Euclidean distance between two <em>n</em>-dimensional points, where each point is represented as a sequence of values (coordinates). Raises <span class="code">ValueError</span> if <span class="code"><em>pt0</em></span> and <span class="code"><em>pt1</em></span> are sequences of different lengths.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">e</span></td>
<td>The mathematical constant <span class="code"><em>e</em></span> (2.718281828459045).</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">erf</span></td>
<td><span class="code">erf(<em>x</em>)</span><br/>
			Returns the error function of <span class="code"><em>x</em></span> as used in statistical calculations.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">erfc</span></td>
<td><span class="code">erfc(<em>x</em>)</span><br/>
			Returns the complementary error function at <span class="code"><em>x</em></span>, defined as <span class="code">1.0 - erf(<em>x</em>)</span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">exp</span></td>
<td><span class="code">exp(<em>x</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="exp (math module)" data-type="indexterm" id="idm44924500052960"/> <span class="code">eˣ</span>.</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">exp2</span></td>
<td><span class="code">exp2(<em>x</em>)</span><br/>
<span class="version">3.11+</span> Returns <span class="code">2ˣ</span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">expm1</span></td>
<td><span class="code">expm1(<em>x</em>)</span><br/>
			Returns <span class="code">eˣ - 1</span>. Inverse of <span class="code">log1p</span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">fabs</span></td>
<td><span class="code">fabs(<em>x</em>)</span><br/>
			Returns the absolute value of <span class="code"><em>x</em></span>. Always returns a <span class="code">float</span>, even if <span class="code"><em>x</em></span> is an <span class="code">int</span> (unlike the built-in <span class="code">abs</span> function).</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">factorial</span></td>
<td><span class="code">factorial(<em>x</em>)</span><br/>
			Returns the factorial of <span class="code"><em>x</em></span>. Raises <span class="code">ValueError</span> when <span class="code"><em>x</em></span> is negative, and <span class="code">TypeError</span> when <span class="code"><em>x</em></span> is not integral.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">floor</span></td>
<td><span class="code">floor(<em>x</em>)</span><br/>
			Returns <span class="code">float(<em>i</em>)</span>, where <span class="code"><em>i</em></span> is the greatest integer such that <span class="code"><em>i</em></span><span class="code">&lt;=</span><span class="code"><em>x</em></span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">fmod</span></td>
<td><span class="code">fmod(<em>x, y</em>)</span><br/>
			Returns the <span class="code">float</span> <span class="code"><em>r</em></span>, with the same sign as <span class="code"><em>x</em></span>, such that <span class="code"><em>r</em></span><span class="code">==<em>x</em>-<em>n</em>*<em>y</em></span> for some integer <span class="code"><em>n</em></span>, and <span class="code">abs(</span><span class="code"><em>r</em>)&lt;abs(<em>y</em>)</span>. Like <span class="code"><em>x</em></span><span class="code">%</span><span class="code"><em>y</em></span>, except that, when <span class="code"><em>x</em></span> and <span class="code"><em>y</em></span> differ in sign, <span class="code"><em>x%y</em></span> has the same sign as <span class="code"><em>y</em></span>, not the same sign as <span class="code"><em>x</em></span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">frexp</span></td>
<td><span class="code">frexp(<em>x</em>)</span><br/>
			Returns a pair <span class="code">(<em>m</em>,</span> <span class="code"><em>e</em></span><span class="code">)</span> where <span class="code"><em>m</em></span> is a floating-point number and <span class="code"><em>e</em></span> is an integer such that <span class="code"><em>x</em></span><span class="code">==<em>m</em>*(2**e)</span> and <span class="code">0.5&lt;=abs(<em>m</em>)&lt;1</span>,<sup><a data-type="noteref" href="ch16.xhtml#ch01fn120" id="ch01fn120-marker">a</a></sup> except that <span class="code">frexp(0)</span> returns <span class="code">(0.0, 0)</span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">fsum</span></td>
<td><span class="code">fsum(<em>iterable</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="fsum (math module)" data-type="indexterm" id="idm44924499978288"/> the floating-point sum of the values in <span class="code"><em>iterable</em></span> to greater precision than the <span class="code">sum</span> built-in function.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">gamma</span></td>
<td><span class="code">gamma(<em>x</em>)</span><br/>
			Returns the Gamma function evaluated at <span class="code"><em>x</em></span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">gcd</span></td>
<td><span class="code">gcd(<em>x, y</em>)</span><br/>
			Returns the greatest common divisor of <span class="code"><em>x</em></span> and <span class="code"><em>y</em></span>. When <span class="code"><em>x</em></span> and <span class="code"><em>y</em></span> are both zero, returns <span class="code">0</span>. (<span class="version">3.9+</span> <span class="code">gcd</span> can accept any number of values; <span class="code">gcd()</span> without arguments returns <span class="code">0</span>.)</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">hypot</span></td>
<td><span class="code">hypot(<em>x, y</em>)</span><br/>
			Returns <span class="code">sqrt(<em>x</em>*<em>x</em>+<em>y</em>*<em>y</em>)</span>. (<span class="version">3.8+</span> <span class="code">hypot</span> can accept any number of values, to compute a hypotenuse length in <em>n</em> dimensions.)</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">inf</span></td>
<td>A floating-point positive infinity, like <span class="code">float('inf')</span>.</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">infj</span></td>
<td>A<a contenteditable="false" data-primary="infj (cmath module)" data-type="indexterm" id="idm44924499944240"/> <span class="code">complex</span> imaginary infinity, equal to <span class="code">complex(0, float('inf'))</span>.</td>
<td> </td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">isclose</span></td>
<td><span class="code">isclose(<em>x</em>,</span> <span class="code"><em>y</em></span><span class="code">, rel_tol=1e-09, abs_tol=0.0)</span> Returns<a contenteditable="false" data-primary="isclose (math module)" data-type="indexterm" id="idm44924499935616"/> <span class="code"><strong>True</strong></span> when <span class="code"><em>x</em></span> and <span class="code"><em>y</em></span> are approximately equal, within relative tolerance <span class="code">rel_tol</span>, with minimum absolute tolerance of <span class="code">abs_tol</span>; otherwise, returns <span class="code"><strong>False</strong></span>. Default is <span class="code">rel_tol</span> within nine decimal digits. <span class="code">rel_tol</span> must be greater than <span class="code">0</span>. <span class="code">abs_tol</span> is used for comparisons near zero: it must be at least <span class="code">0.0</span>. <span class="code">NaN</span> is not considered close to any value (including <span class="code">NaN</span> itself); each of <span class="code">-inf</span> and <span class="code">inf</span> is only considered close to itself. Except for behavior at +/– <span class="code">inf</span>, <span class="code">isclose</span> is like:
			<pre data-code-language="python" data-type="programlisting">
<code class="nb">abs</code><code class="p">(</code><code class="n">x</code><code class="o">-</code><code class="n">y</code><code class="p">)</code> <code class="o">&lt;=</code> <code class="nb">max</code><code class="p">(</code><code class="n">rel_tol</code><code class="o">*</code><code class="nb">max</code><code class="p">(</code><code class="nb">abs</code><code class="p">(</code><code class="n">x</code><code class="p">),</code> 
                <code class="nb">abs</code><code class="p">(</code><code class="n">y</code><code class="p">)),</code><code class="n">abs_tol</code><code class="p">)</code></pre>
</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">isfinite</span></td>
<td><span class="code">isfinite(<em>x</em>)</span><br/>
			Returns <span class="code"><strong>True</strong></span> when <span class="code"><em>x</em></span> (in <span class="code">cmath</span>, both the real and imaginary parts of <span class="code"><em>x</em></span>) is neither infinity nor <span class="code">NaN</span>; otherwise, returns <span class="code"><strong>False</strong></span>.</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">isinf</span></td>
<td><span class="code">isinf(<em>x</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="inf (math module)" data-type="indexterm" id="idm44924499886800"/> <span class="code"><strong>True</strong></span> when <span class="code"><em>x</em></span> (in <span class="code">cmath</span>, either the real or imaginary part of <span class="code"><em>x</em></span>, or both) is positive or negative infinity; otherwise, returns <span class="code"><strong>False</strong></span>.</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">isnan</span></td>
<td><span class="code">isnan(<em>x</em>)</span><br/>
			Returns <span class="code"><strong>True</strong></span> when <span class="code"><em>x</em></span> (in <span class="code">cmath</span>, either the real or imaginary part of <span class="code"><em>x</em></span>, or both) is <span class="code">NaN</span>; otherwise, returns <span class="code"><strong>False</strong></span>.</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">isqrt</span></td>
<td><span class="code">isqrt(<em>x</em>)</span><br/>
<span class="version">3.8+</span> Returns <span class="code">int(sqrt(<em>x</em>))</span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">lcm</span></td>
<td><span class="code">lcm(<em>x</em>, ...)</span><br/>
<span class="version">3.9+</span> Returns the least common multiple of the given <span class="code">int</span>s. If not all values are <span class="code">int</span>s, raises <span class="code">TypeError</span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">ldexp</span></td>
<td><span class="code">ldexp(<em>x, i</em>)</span><br/>
			Returns <span class="code"><em>x</em></span><span class="code">*(<em>2</em>**<em>i</em>)</span> (<span class="code"><em>i</em></span> must be an <span class="code">int</span>; when <span class="code"><em>i</em></span> is a <span class="code">float</span>, <span class="code">ldexp</span> raises <span class="code">TypeError</span>). Inverse of <span class="code">frexp</span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">lgamma</span></td>
<td><span class="code">lgamma(<em>x</em>)</span><br/>
			Returns the natural logarithm of the absolute value of the Gamma function evaluated at <span class="code"><em>x</em></span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">log</span></td>
<td><span class="code">log(<em>x</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="log (math module)" data-type="indexterm" id="idm44924499812576"/> the natural logarithm of <span class="code"><em>x</em></span>.</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">log10</span></td>
<td><span class="code">log10(<em>x</em>)</span><br/>
			Returns the base-10 logarithm of <span class="code"><em>x</em></span>.</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">log1p</span></td>
<td><span class="code">log1p(<em>x</em>)</span><br/>
			Returns the natural logarithm of <span class="code">1+</span><span class="code"><em>x</em></span>. Inverse of <span class="code">expm1</span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">log2</span></td>
<td><span class="code">log2(<em>x</em>)</span><br/>
			Returns the base-2 logarithm of <span class="code"><em>x</em></span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">modf</span></td>
<td><span class="code">modf(<em>x</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="modf (math module)" data-type="indexterm" id="idm44924499789696"/> a pair <span class="code">(<em>f</em>,</span> <span class="code"><em>i</em></span><span class="code">)</span> with the fractional and integer parts of <span class="code"><em>x</em></span>, meaning two <span class="code">float</span>s with the same sign as <span class="code"><em>x</em></span> such that <span class="code"><em>i</em></span><span class="code">==int(<em>i</em>)</span> and <span class="code"><em>x</em></span><span class="code">==<em>f</em>+</span><span class="code"><em>i</em></span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">nan</span></td>
<td><span class="code">nan</span><br/>
			A<a contenteditable="false" data-primary="nan (math module)" data-type="indexterm" id="idm44924499775600"/> floating-point “Not a Number” (<span class="code">NaN</span>) value, like <span class="code">float('nan')</span> or <span class="code">complex('nan')</span>.</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">nanj</span></td>
<td>A<a contenteditable="false" data-primary="nanj (cmath module)" data-type="indexterm" id="idm44924499769184"/> complex number with a <span class="code">0.0</span> real part and floating-point “Not a Number” (<span class="code">NaN</span>) imaginary part.</td>
<td> </td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">nextafter</span></td>
<td><span class="code">nextafter(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span><br/>
<span class="version">3.9+</span> Returns<a contenteditable="false" data-primary="nextafter (math module)" data-type="indexterm" id="idm44924499760112"/> the next higher or lower <span class="code">float</span> value from <span class="code"><em>a</em></span> in the direction of <span class="code"><em>b</em></span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">perm</span></td>
<td><span class="code">perm(<em>n</em>,</span> <span class="code"><em>k</em></span><span class="code">)</span><br/>
<span class="version">3.8+</span> Returns<a contenteditable="false" data-primary="perm (math module)" data-type="indexterm" id="idm44924499749760"/> the number of <em>permutations</em> of <span class="code"><em>n</em></span> items taken <span class="code"><em>k</em></span> items at a time, where selections of the same items but in differing order are counted separately. When counting the number of permutations of three items <em>A</em>, <em>B</em>, and <em>C</em>, taken two at a time, <span class="code">perm(3, 2)</span> returns <span class="code">6</span>, because, for example, <em>A</em>-<em>B</em> and <em>B</em>-<em>A</em> are considered to be different permutations (contrast this with <span class="code">comb</span>, earlier in this table). Raises <span class="code">ValueError</span> when <span class="code"><em>k</em></span> or <span class="code"><em>n</em></span> is negative; raises <span class="code">TypeError</span> when <span class="code"><em>k</em></span> or <span class="code"><em>n</em></span> is not an <span class="code">int</span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">pi</span></td>
<td>The mathematical constant <em>π</em>, 3.141592653589793.</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">phase</span></td>
<td><span class="code">phase(<em>x</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="phase (cmath module)" data-type="indexterm" id="idm44924499728848"/> the <em>phase</em> of <span class="code"><em>x</em></span>, a <span class="code">float</span> in the range (<em>–π</em>, <em>π</em>)<em>.</em> Like <span class="code">math.atan2(<em>x</em>.imag,</span> <span class="code"><em>x</em></span><span class="code">.real)</span>. See “Conversions to and from polar coordinates” in the <a href="https://oreil.ly/gXdbT">online docs</a> for details.</td>
<td> </td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">polar</span></td>
<td><span class="code">polar(<em>x</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="polar (cmath module)" data-type="indexterm" id="idm44924499716864"/> the polar coordinate representation of <span class="code"><em>x</em></span>, as a pair <span class="code">(<em>r</em>,</span> <span class="code"><em>phi</em></span><span class="code">)</span> where <span class="code"><em>r</em></span> is the modulus of <span class="code"><em>x</em></span> and <span class="code"><em>phi</em></span> is the phase of <span class="code"><em>x</em></span>. Like <span class="code">(abs(<em>x</em>), cmath.phase(<em>x</em>))</span>. See “Conversions to and from polar coordinates” in the <a href="https://oreil.ly/gXdbT">online docs</a> for details.</td>
<td> </td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">pow</span></td>
<td><span class="code">pow(<em>x, y</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="pow (math module)" data-type="indexterm" id="idm44924499702352"/> <span class="code">float(<em>x</em>)**float(<em>y</em>)</span>. For large <span class="code">int</span> values of <span class="code"><em>x</em></span> and <span class="code"><em>y</em></span>, to avoid <span class="code">OverflowError</span> exceptions, use <span class="code"><em>x</em></span><span class="code">**</span><span class="code"><em>y</em></span> or the <span class="code">pow</span> built-in function instead (which does not convert to <span class="code">float</span>s).</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">prod</span></td>
<td><span class="code">prod(<em>seq</em>, start=1)</span><br/>
<span class="version">3.8+</span> Returns the product of all values in the sequence, beginning with the given <span class="code">start</span> value, which defaults to <span class="code">1</span>. If <span class="code"><em>seq</em></span> is empty, returns the start value.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">radians</span></td>
<td><span class="code">radians(<em>x</em>)</span><br/>
			Returns the radian measure of the angle <span class="code"><em>x</em></span> given in degrees.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">rect</span></td>
<td><span class="code">rect(<em>r</em>,</span> <span class="code"><em>phi</em></span><span class="code">)</span><br/>
			Returns<a contenteditable="false" data-primary="rect (cmath module)" data-type="indexterm" id="idm44924499675088"/> the <span class="code">complex</span> value representing the polar coordinates <span class="code">(<em>r</em>,</span> <span class="code"><em>phi</em></span><span class="code">)</span> converted to rectangular coordinates as <span class="code">(<em>x</em></span> <span class="code">+</span> <span class="code"><em>yj</em>)</span>.</td>
<td> </td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">remainder</span></td>
<td><span class="code">remainder(<em>x</em>,</span> <span class="code"><em>y</em></span><span class="code">)</span><br/>
			Returns<a contenteditable="false" data-primary="remainder (math module)" data-type="indexterm" id="idm44924499662336"/> the signed remainder from dividing <span class="code"><em>x</em></span><span class="code">/</span><span class="code"><em>y</em></span> (the result may be negative if <span class="code"><em>x</em></span> or <span class="code"><em>y</em></span> is negative).</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">sqrt</span></td>
<td><span class="code">sqrt(<em>x</em>)</span><br/>
			Returns the square root of <span class="code"><em>x</em></span>.</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">tau</span></td>
<td>The mathematical constant <em>τ</em> = 2<em>π</em>, or 6.283185307179586.</td>
<td class="center">✓</td>
<td class="center">✓</td>
</tr>
<tr>
<td><span class="code">trunc</span></td>
<td><span class="code">trunc(<em>x</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="trunc (math module)" data-type="indexterm" id="idm44924499644240"/> <span class="code"><em>x</em></span> truncated to an <span class="code">int</span>.</td>
<td class="center">✓</td>
<td> </td>
</tr>
<tr>
<td><span class="code">ulp</span></td>
<td><span class="code">ulp(<em>x</em>)</span><br/>
<span class="version">3.9+</span> Returns the least significant bit of floating-point value <span class="code"><em>x</em></span>. For positive values, equals <span class="code">math.nextafter(<em>x</em>,</span> <span class="code"><em>x</em></span><span class="code">+1) - x</span>. For negative values, equals <span class="code">ulp(-<em>x</em>)</span>. If <span class="code"><em>x</em></span> is <span class="code">NaN</span> or <span class="code">inf</span>, returns <span class="code"><em>x</em></span>. <span class="code">ulp</span> stands for <a href="https://oreil.ly/6cN99"><em>unit of least precision</em></a>.<a contenteditable="false" data-primary="" data-startref="NPmath16" data-type="indexterm" id="idm44924499627104"/><a contenteditable="false" data-primary="" data-startref="mathmod16" data-type="indexterm" id="idm44924499625728"/><a contenteditable="false" data-primary="" data-startref="cmathmod16" data-type="indexterm" id="idm44924499624352"/></td>
<td class="center">✓</td>
<td> </td>
</tr>
</tbody>
<tbody><tr class="footnotes"><td colspan="4"><p data-type="footnote" id="ch01fn120"><sup><a href="ch16.xhtml#ch01fn120-marker">a</a></sup> Formally, <span class="code"><em>m</em></span> is the significand, and <span class="code"><em>e</em></span> is the exponent. Used to render a cross-platform portable representation of a floating-point value.</p></td></tr></tbody></table>
</div></section>
<section data-pdf-bookmark="The statistics Module" data-type="sect1"><div class="sect1" id="the_statistics_module">
<h1>The statistics Module</h1>
<p>The<a contenteditable="false" data-primary="numeric processing" data-secondary="statistics module" data-type="indexterm" id="idm44924499620880"/><a contenteditable="false" data-primary="statistics module" data-type="indexterm" id="idm44924499619504"/><a contenteditable="false" data-primary="standard library modules" data-secondary="statistics" data-type="indexterm" id="idm44924499618368"/> <span class="code">statistics</span> module supplies the class <span class="code">NormalDist</span> to perform distribution analytics, and the functions listed in <a data-type="xref" href="#functions_of_the_statistics_module">Table 16-2</a> to compute common statistics.</p>
<table class="border" id="functions_of_the_statistics_module">
<caption class="width-full"><span class="label">Table 16-2. </span>Functions of the <span class="code">statistics</span> module (with functions added in versions 3.8 and 3.10)</caption>
<thead>
<tr>
<th> </th>
<th><span class="version">3.8+</span></th>
<th><span class="version">3.10+</span></th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="code">harmonic_mean</span><br/>
<span class="code">mean</span><br/>
<span class="code">median</span><br/>
<span class="code">median_grouped</span><br/>
<span class="code">median_high</span><br/>
<span class="code">median_low</span><br/>
<span class="code">mode</span><br/>
<span class="code">pstdev</span><br/>
<span class="code">pvariance</span><br/>
<span class="code">stdev</span><br/>
<span class="code">variance</span></td>
<td><span class="code">fmean</span><br/>
<span class="code">geometric_mean</span><br/>
<span class="code">multimode</span><br/>
<span class="code">quantiles</span><br/>
<span class="code">NormalDist</span></td>
<td><span class="code">correlation</span><br/>
<span class="code">covariance</span><br/>
<span class="code">linear_regression</span></td>
</tr>
</tbody>
</table>
<p>The <a href="https://oreil.ly/CY8Pi">online docs</a> contain detailed information on the signatures and use of these functions.</p>
</div></section>
<section data-pdf-bookmark="The operator Module" data-type="sect1"><div class="sect1" id="the_operator_module">
<h1>The operator Module</h1>
<p>The<a contenteditable="false" data-primary="numeric processing" data-secondary="operator module" data-type="indexterm" id="NPoperator16"/><a contenteditable="false" data-primary="operator module" data-type="indexterm" id="opmod16"/><a contenteditable="false" data-primary="standard library modules" data-secondary="operator" data-type="indexterm" id="idm44924499585568"/> <span class="code">operator</span> module supplies functions that are equivalent to Python’s operators. These functions are handy in cases where callables must be stored, passed as arguments, or returned as function results. The functions in <span class="code">operator</span> have the same names as the corresponding special methods (covered in <a data-type="xref" href="ch04.xhtml#special_methods">“Special Methods”</a>). Each function is available with two names, with and<a contenteditable="false" data-primary="dunder (double underscore)" data-secondary="operator module" data-type="indexterm" id="idm44924499581584"/> without “dunder” (leading and trailing double underscores): for example, both <span class="code">operator.add(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span> and <span class="code">operator.__add__(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span> return <span class="code"><em>a + b</em></span>.</p>
<p>Matrix multiplication<a contenteditable="false" data-primary="matrix multiplication" data-type="indexterm" id="idm44924499573760"/><a contenteditable="false" data-primary="at sign (@)" data-secondary="matrix multiplication" data-type="indexterm" id="idm44924499572656"/><a contenteditable="false" data-primary="@ (commercial at sign)" data-secondary="matrix multiplication" data-type="indexterm" id="idm44924499571248"/> support has been added for the infix operator <span class="code">@</span>, but you must implement it by defining your own <span class="code">__matmul__</span>, <span class="code">__rmatmul__</span>, and/or <span class="code">__imatmul__</span> methods; NumPy currently supports <span class="code">@</span> (but, as of this writing, not yet <span class="code">@=</span>) for matrix multiplication.</p>
<p><a data-type="xref" href="#functions_supplied_by_the_operator_modu">Table 16-3</a> lists some of the functions supplied by the <span class="code">operator</span> module. For detailed information on these functions and their use, see the <a href="https://oreil.ly/WrtUH">online docs</a>.</p>
<table class="border pagebreak-before" id="functions_supplied_by_the_operator_modu">
<caption class="less_space"><span class="label">Table 16-3. </span>Functions supplied by the <span class="code">operator</span> module</caption>
<thead>
<tr>
<th>Function</th>
<th>Signature</th>
<th>Behaves like</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="code">abs</span></td>
<td><span class="code">abs(<em>a</em>)</span></td>
<td><span class="code">abs(<em>a</em>)</span></td>
</tr>
<tr>
<td><span class="code">add</span></td>
<td><span class="code">add(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">+</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">and_</span></td>
<td><span class="code">and_(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">&amp;</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">concat</span></td>
<td><span class="code">concat(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">+</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">contains</span></td>
<td><span class="code">contains(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>b</em></span> <span class="code"><strong>in</strong></span> <span class="code"><em>a</em></span></td>
</tr>
<tr>
<td><span class="code">countOf</span></td>
<td><span class="code">countOf(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span><span class="code">.count(<em>b</em>)</span></td>
</tr>
<tr>
<td><span class="code">delitem</span></td>
<td><span class="code">delitem(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><strong>del</strong></span> <span class="code"><em>a</em></span><span class="code">[<em>b</em>]</span></td>
</tr>
<tr>
<td><span class="code">delslice</span></td>
<td><span class="code">delslice(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">,</span> <span class="code"><em>c</em></span><span class="code">)</span></td>
<td><span class="code"><strong>del</strong></span> <span class="code"><em>a</em></span><span class="code">[<em>b</em>:<em>c</em>]</span></td>
</tr>
<tr>
<td><span class="code">eq</span></td>
<td><span class="code">eq(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">==</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">floordiv</span></td>
<td><span class="code">floordiv(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">//</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">ge</span></td>
<td><span class="code">ge(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">&gt;=</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">getitem</span></td>
<td><span class="code">getitem(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span><span class="code">[<em>b</em>]</span></td>
</tr>
<tr>
<td><span class="code">getslice</span></td>
<td><span class="code">getslice(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">,</span> <span class="code"><em>c</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span><span class="code">[<em>b</em>:<em>c</em>]</span></td>
</tr>
<tr>
<td><span class="code">gt</span></td>
<td><span class="code">gt(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">&gt;</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">index</span></td>
<td><span class="code">index(<em>a</em>)</span></td>
<td><span class="code"><em>a</em></span><span class="code">.__index__()</span></td>
</tr>
<tr>
<td><span class="code">indexOf</span></td>
<td><span class="code">indexOf(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span><span class="code">.index(<em>b</em>)</span></td>
</tr>
<tr>
<td><span class="code">invert</span>, <span class="code">inv</span></td>
<td><span class="code">invert(<em>a</em>)</span><em>,</em> <span class="code">inv(<em>a</em>)</span></td>
<td><span class="code">~</span><span class="code"><em>a</em></span></td>
</tr>
<tr>
<td><span class="code">is_</span></td>
<td><span class="code">is_(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code"><strong>is</strong></span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">is_not</span></td>
<td><span class="code">is_not(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code"><strong>is not</strong></span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">le</span></td>
<td><span class="code">le(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">&lt;=</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">lshift</span></td>
<td><span class="code">lshift(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">&lt;&lt;</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">lt</span></td>
<td><span class="code">lt(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">&lt;</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">matmul</span></td>
<td><span class="code">matmul(<em>m1</em>,</span> <span class="code"><em>m2</em></span><span class="code">)</span></td>
<td><span class="code"><em>m1</em></span> <span class="code">@</span> <span class="code"><em>m2</em></span></td>
</tr>
<tr>
<td><span class="code">mod</span></td>
<td><span class="code">mod(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">%</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">mul</span></td>
<td><span class="code">mul(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">*</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">ne</span></td>
<td><span class="code">ne(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">!=</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">neg</span></td>
<td><span class="code">neg(<em>a</em>)</span></td>
<td><span class="code"><em>-a</em></span></td>
</tr>
<tr>
<td><span class="code">not_</span></td>
<td><span class="code">not_(<em>a</em>)</span></td>
<td><span class="code"><strong>not</strong></span> <span class="code"><em>a</em></span></td>
</tr>
<tr>
<td><span class="code">or_</span></td>
<td><span class="code">or_(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">|</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">pos</span></td>
<td><span class="code">pos(<em>a</em>)</span></td>
<td><span class="code">+</span><span class="code"><em>a</em></span></td>
</tr>
<tr>
<td><span class="code">pow</span></td>
<td><span class="code">pow(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code">a ** b</span></td>
</tr>
<tr>
<td><span class="code">repeat</span></td>
<td><span class="code">repeat(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">*</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">rshift</span></td>
<td><span class="code">rshift(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">&gt;&gt;</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">setitem</span></td>
<td><span class="code">setitem(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">,</span> <span class="code"><em>c</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span><span class="code">[<em>b</em>] =</span> <span class="code"><em>c</em></span></td>
</tr>
<tr>
<td><span class="code">setslice</span></td>
<td><span class="code">setslice(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">,</span> <span class="code"><em>c</em></span><span class="code">,</span> <span class="code"><em>d</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span><span class="code">[<em>b</em>:<em>c</em>] =</span> <span class="code"><em>d</em></span></td>
</tr>
<tr>
<td><span class="code">sub</span></td>
<td><span class="code">sub(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">-</span> <span class="code"><em>b</em></span></td>
</tr>
<tr>
<td><span class="code">truediv</span></td>
<td><span class="code">truediv(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a/b</em></span> <span class="code"><em># no truncation</em></span></td>
</tr>
<tr>
<td><span class="code">truth</span></td>
<td><span class="code">truth(<em>a</em>)</span></td>
<td><span class="code">bool(<em>a</em>)</span>, <span class="code"><strong>not not</strong></span> <span class="code">a</span></td>
</tr>
<tr>
<td><span class="code">xor</span></td>
<td><span class="code">xor(<em>a</em>,</span> <span class="code"><em>b</em></span><span class="code">)</span></td>
<td><span class="code"><em>a</em></span> <span class="code">^</span> <span class="code"><em>b</em></span></td>
</tr>
</tbody>
</table>
<p>The <span class="code">operator</span> module also supplies additional<a contenteditable="false" data-primary="higher-order functions" data-type="indexterm" id="idm44924499309360"/><a contenteditable="false" data-primary="functions" data-secondary="higher-order functions" data-type="indexterm" id="idm44924499308256"/> higher-order functions, listed in <a data-type="xref" href="#higher_order_functions_supplied_by_the">Table 16-4</a>. Three of these functions, <span class="code">attrgetter</span>, <span class="code">itemgetter</span>, and <span class="code">methodcaller</span>, return functions suitable for passing as named argument <span class="code">key</span> to the <span class="code">sort</span> method of lists, the <span class="code">sorted</span>, <span class="code">min</span>, and <span class="code">max</span> built-in functions, and several functions in standard library modules, such as <span class="code">heapq</span> and <span class="code">itertools</span> (discussed in <a data-type="xref" href="ch08.xhtml#core_built_ins_and_standard_library_mod">Chapter 8</a>).</p>
<table class="border" id="higher_order_functions_supplied_by_the">
<caption><span class="label">Table 16-4. </span>Higher-order functions supplied by the <span class="code">operator</span> module</caption>
<tbody>
<tr>
<td class="width-15"><span class="code">attrgetter</span></td>
<td><span class="code">attrgetter(<em>attr</em>)</span>,<br/>
<span class="code">attrgetter(*<em>attrs</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="attrgetter (operator module)" data-type="indexterm" id="idm44924499290560"/> a callable <span class="code"><em>f</em></span> such that <span class="code"><em>f</em></span><span class="code">(<em>o</em>)</span> is the same as <span class="code">getattr(<em>o</em>,</span> <span class="code"><em>attr</em></span><span class="code">)</span>. The string <span class="code"><em>attr</em></span> can include dots (<span class="code">.</span>), in which case the callable result of <span class="code">attrgetter</span> calls <span class="code">getattr</span> repeatedly. For example, <span class="code">operator.attrgetter('a.b')</span> is equivalent to <span class="code"><strong>lambda</strong></span> <span class="code"><em>o</em></span><span class="code">: getattr(getattr(<em>o</em>, 'a'), 'b')</span>.<br/>
			When you call <span class="code">attrgetter</span> with multiple arguments, the resulting callable extracts each attribute thus named and returns the resulting tuple of values.</td>
</tr>
<tr>
<td><span class="code">itemgetter</span></td>
<td><span class="code">itemgetter(<em>key</em>)</span>,<br/>
<span class="code">itemgetter(<em>*keys</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="itemgetter (operator module)" data-type="indexterm" id="idm44924499272144"/> a callable <span class="code"><em>f</em></span> such that <span class="code"><em>f</em></span><span class="code">(<em>o</em>)</span> is the same as <span class="code">getitem(<em>o</em>,</span> <span class="code"><em>key</em></span><span class="code">)</span>.<br/>
			When you call <span class="code">itemgetter</span> with multiple arguments, the resulting callable extracts each item thus keyed and returns the resulting tuple of values.<br/>
			For example, say that <span class="code"><em>L</em></span> is a list of lists, with each sublist at least three items long: you want to sort <span class="code"><em>L</em></span>, in place, based on the third item of each sublist, with sublists having equal third items sorted by their first items. The simplest way to do this is:
			<pre data-code-language="python" data-type="programlisting">
<code class="n">L</code><code class="o">.</code><code class="n">sort</code><code class="p">(</code><code class="n">key</code><code class="o">=</code><code class="n">operator</code><code class="o">.</code><code class="n">itemgetter</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="mi">0</code><code class="p">))</code></pre>
</td>
</tr>
<tr>
<td><span class="code">length_hint</span></td>
<td><span class="code">length_hint(<em>iterable</em>, default=0)</span><br/>
			Used to try to preallocate storage for items in <span class="code"><em>iterable</em></span>. Calls object <span class="code"><em>iterable</em></span>’s <span class="code">__len__</span> method to try to get an exact length. If <span class="code">__len__</span> is not implemented, then Python tries calling <span class="code"><em>iterable</em></span>’s <span class="code">__length_hint__</span> method. If this is also not implemented, <span class="code">length_hint</span> returns the given <span class="code">default</span>. Any mistake in using this “hint” helper may result in a performance issue, but not in silent, incorrect behavior.</td>
</tr>
<tr>
<td><span class="code">met⁠h⁠o⁠d​c⁠a⁠l⁠ler</span></td>
<td><span class="code">methodcaller(<em>methodname</em>, args...)</span><br/>
			Returns<a contenteditable="false" data-primary="methodcaller (operator module)" data-type="indexterm" id="idm44924499229200"/> a callable <span class="code"><em>f</em></span> such that <span class="code"><em>f</em></span><span class="code">(<em>o</em>)</span> is the same as <span class="code">o.<em>methodname</em>(args, ...).</span> The optional <span class="code">args</span> may be given as positional or named arguments.<a contenteditable="false" data-primary="" data-startref="NPoperator16" data-type="indexterm" id="idm44924499223408"/><a contenteditable="false" data-primary="" data-startref="opmod16" data-type="indexterm" id="idm44924499222032"/></td>
</tr>
</tbody>
</table>
</div></section>
<section data-pdf-bookmark="Random and Pseudorandom Numbers" data-type="sect1"><div class="sect1" id="random_and_pseudorandom_numbers">
<h1>Random and Pseudorandom Numbers</h1>
<p>The<a contenteditable="false" data-primary="numeric processing" data-secondary="random and pseudorandom numbers" data-type="indexterm" id="NPrandom16"/><a contenteditable="false" data-primary="random module" data-type="indexterm" id="randmod16"/><a contenteditable="false" data-primary="pseudorandom numbers" data-type="indexterm" id="pseudoran16"/><a contenteditable="false" data-primary="standard library modules" data-secondary="random" data-type="indexterm" id="idm44924499197728"/> <span class="code">random</span> module of the standard library generates pseudorandom numbers with various distributions. The underlying uniform pseudorandom generator uses the powerful, popular <a href="https://oreil.ly/AcAgG">Mersenne Twister algorithm</a>, with a (huge!) period of length <span class="code">2</span><sup><span class="code">19937</span></sup><span class="code">-1</span>.</p>
<section data-pdf-bookmark="The random Module" data-type="sect2"><div class="sect2" id="the_random_module">
<h2>The random Module</h2>
<p>All functions of the <span class="code">random</span> module are methods of one hidden global instance of the class <span class="code">random.Random</span>. You can instantiate <span class="code">Random</span> explicitly to get multiple generators that do not share state. Explicit instantiation is advisable if you require random numbers in multiple threads (threads are covered in <a data-type="xref" href="ch15.xhtml#concurrency_threads_and_processes">Chapter 15</a>). Alternatively, instantiate <span class="code">SystemRandom</span> if you require higher-quality random numbers (see the following section for details). <a data-type="xref" href="#useful_functions_supplied_by_the_random">Table 16-5</a> documents the most frequently used functions exposed by the <span class="code">random</span> module.</p>
<table class="border" id="useful_functions_supplied_by_the_random">
<caption><span class="label">Table 16-5. </span>Useful functions supplied by the <span class="code">random</span> module</caption>
<tbody>
<tr>
<td><span class="code">choice</span></td>
<td><span class="code">choice(<em>seq</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="choice (random module)" data-type="indexterm" id="idm44924499180192"/> a random item from nonempty sequence <span class="code"><em>seq</em></span>.</td>
</tr>
<tr>
<td><span class="code">choices</span></td>
<td><span class="code">choices(<em>seq</em>,</span> <span class="code"><em>weights</em>=<strong>None</strong></span><span class="code">, *, cum_weights=<strong>None</strong>, k=1)</span><br/>
			Returns <span class="code">k</span> elements from nonempty sequence <span class="code"><em>seq</em></span>, with replacement. By default, elements are chosen with equal probability. If the optional <span class="code"><em>weights</em></span>, or the named argument <span class="code">cum_weights</span>, is passed (as a list of <span class="code">float</span>s or <span class="code">int</span>s), then the respective choices are weighted by that amount during choosing. The <span class="code">cum_weights</span> argument accepts a list of <span class="code">float</span>s or <span class="code">int</span>s as would be returned by <span class="code">itertools.accumulate(<em>weights</em>)</span>; e.g., if <span class="code"><em>weights</em></span> for a <span class="code"><em>seq</em></span> containing three items were <span class="code">[1, 2, 1]</span>, then the corresponding <span class="code">cum_weights</span> would be <span class="code">[1, 3, 4]</span>. (Only one of <span class="code"><em>weights</em></span> or <span class="code">cum_weights</span> may be specified, and must be the same length as <span class="code"><em>seq</em></span>. If used, <span class="code">cum_weights</span> and <span class="code">k</span> must be given as named arguments.)</td>
</tr>
<tr>
<td><span class="code">getrandbits</span></td>
<td><span class="code">getrandbits(<em>k</em>)</span><br/>
			Returns an <span class="code">int &gt;= 0</span> with <span class="code"><em>k</em></span> random bits, like <span class="code">randrange(2 **</span> <span class="code"><em>k</em></span><span class="code">)</span> (but faster, and with no problems for large <span class="code"><em>k</em></span>).</td>
</tr>
<tr>
<td><span class="code">getstate</span></td>
<td><span class="code">getstate()</span><br/>
			Returns a hashable and pickleable object <span class="code"><em>S</em></span> representing the current state of the generator. You can later pass <span class="code"><em>S</em></span> to the function <span class="code">setstate</span> to restore the generator’s state.</td>
</tr>
<tr>
<td><span class="code">jumpahead</span></td>
<td><span class="code">jumpahead(<em>n</em>)</span><br/>
			Advances the generator state as if <span class="code"><em>n</em></span> random numbers had been generated. This is faster than generating and ignoring <span class="code"><em>n</em></span> random numbers.</td>
</tr>
<tr>
<td><span class="code">randbytes</span></td>
<td><span class="code">randbytes(<em>k</em>)</span><br/>
<span class="version">3.9+</span> Generates <span class="code"><em>k</em></span> random bytes. To generate bytes for secure or cryptographic applications, use <span class="code">secrets.randbits(<em>k</em></span> <span class="code">* 8)</span>, then unpack the <span class="code">int</span> it returns into <span class="code"><em>k</em></span> bytes, using <span class="code">int.to_bytes(</span><span class="code"><em>k</em>, 'big')</span>.</td>
</tr>
<tr>
<td><span class="code">randint</span></td>
<td><span class="code">randint(<em>start</em>,</span> <span class="code"><em>stop</em></span><span class="code">)</span><br/>
			Returns<a contenteditable="false" data-primary="randint (random module)" data-type="indexterm" id="idm44924499126304"/> a random <span class="code">int</span> <span class="code"><em>i</em></span> from a uniform distribution such that <span class="code"><em>start</em></span> <span class="code">&lt;=</span> <span class="code"><em>i</em></span> <span class="code">&lt;=</span> <span class="code"><em>stop</em></span>. Both endpoints are included: this is quite unnatural in Python, so you would normally prefer <span class="code">randrange</span>.</td>
</tr>
<tr>
<td><span class="code">random</span></td>
<td><span class="code">random()</span><br/>
			Returns<a contenteditable="false" data-primary="random (random module)" data-type="indexterm" id="idm44924499116352"/> a random <span class="code">float</span> <span class="code"><em>r</em></span> from a uniform distribution, <span class="code">0 &lt;=</span> <span class="code"><em>r</em></span> <span class="code">&lt; 1</span>.</td>
</tr>
<tr>
<td><span class="code">randrange</span></td>
<td><span class="code">randrange([<em>start</em>,]<em>stop</em>[,<em>step</em>])</span><br/>
			Like<a contenteditable="false" data-primary="randrange (random module)" data-type="indexterm" id="idm44924499107392"/> <span class="code">choice(range(<em>start</em>,</span> <span class="code"><em>stop</em></span><span class="code">,</span> <span class="code"><em>step</em></span><span class="code">))</span>, but much faster.</td>
</tr>
<tr>
<td><span class="code">sample</span></td>
<td><span class="code">sample(<em>seq</em>,</span> <span class="code"><em>k</em></span><span class="code">)</span><br/>
			Returns<a contenteditable="false" data-primary="sample (random module)" data-type="indexterm" id="idm44924499097824"/> a new list whose <span class="code"><em>k</em></span> items are unique items randomly drawn from <span class="code"><em>seq</em></span>. The list is in random order, so that any slice of it is an equally valid random sample. <span class="code"><em>seq</em></span> may contain duplicate items. In this case, each occurrence of an item is a candidate for selection in the sample, and the sample may also contain such duplicates.</td>
</tr>
<tr>
<td><span class="code">seed</span></td>
<td><span class="code">seed(<em>x</em>=<strong>None</strong>)</span><br/>
			Initializes<a contenteditable="false" data-primary="seed (random module)" data-type="indexterm" id="idm44924499089920"/> the generator state. <span class="code"><em>x</em></span> can be any <span class="code">int</span>, <span class="code">float</span>, <span class="code">str</span>, <span class="code">bytes</span>, or <span class="code">bytearray</span>. When <span class="code"><em>x</em></span> is <span class="code"><strong>None</strong></span>, and when the module <span class="code">random</span> is first loaded, <span class="code">seed</span> uses the current system time (or some platform-specific source of randomness, if any) to get a seed. <span class="code"><em>x</em></span> is normally an <span class="code">int</span> up to <span class="code">2</span><sup>256</sup>, a <span class="code">float</span>, or a <span class="code">str</span>, <span class="code">bytes</span>, or <span class="code">bytearray</span> up to 32 bytes in size.<sup><a data-type="noteref" href="ch16.xhtml#ch01fn121" id="ch01fn121-marker">a</a></sup> Larger <span class="code"><em>x</em></span> values are accepted, but may produce the same generator state as smaller ones. <span class="code">seed</span> is useful in simulation or modeling for repeatable runs, or to write tests that require a reproducible sequence of random values.</td>
</tr>
<tr>
<td><span class="code">setstate</span></td>
<td><span class="code">setstate(<em>S</em>)</span><br/>
			Restores the generator state. <span class="code"><em>S</em></span> must be the result of a previous call to <span class="code">getstate</span> (such a call may have occurred in another program, or in a previous run of this program, as long as object <span class="code"><em>S</em></span> has correctly been transmitted, or saved and restored).</td>
</tr>
<tr>
<td><span class="code">shuffle</span></td>
<td><span class="code">shuffle(<em>seq</em>)</span><br/>
			Shuffles, in<a contenteditable="false" data-primary="shuffle (random module)" data-type="indexterm" id="idm44924499065376"/> place, mutable sequence <span class="code"><em>seq</em></span>.</td>
</tr>
<tr>
<td><span class="code">uniform</span></td>
<td><span class="code">uniform(<em>a, b</em>)</span><br/>
			Returns a random floating-point number <span class="code"><em>r</em></span> from a uniform distribution such that <span class="code"><em>a</em></span> <span class="code">&lt;=</span> <span class="code"><em>r</em></span> <span class="code">&lt;</span> <span class="code"><em>b</em></span>.</td>
</tr>
</tbody>
<tbody><tr class="footnotes"><td colspan="2"><p data-type="footnote" id="ch01fn121"><sup><a href="ch16.xhtml#ch01fn121-marker">a</a></sup> As defined in the Python language specification. Specific Python implementations may support larger seed values for generating unique random number sequences.</p></td></tr></tbody></table>
<p>The <span class="code">random</span> module also supplies several other functions that generate pseudorandom floating-point numbers from other probability distributions (Beta, Gamma, exponential, Gauss, Pareto, etc.) by internally calling <span class="code">random.random</span> as their source of randomness. See the <a href="https://oreil.ly/2n8wP">online docs</a> for details.</p>
</div></section>
<section data-pdf-bookmark="Crypto-Quality Random Numbers: The secrets Module" data-type="sect2"><div class="sect2" id="crypto_quality_random_numbers_the_secre">
<h2>Crypto-Quality Random Numbers: The secrets Module</h2>
<p>Pseudorandom<a contenteditable="false" data-primary="secrets module" data-type="indexterm" id="idm44924499050752"/><a contenteditable="false" data-primary="cryptography applications" data-type="indexterm" id="idm44924499049232"/><a contenteditable="false" data-primary="standard library modules" data-secondary="secrets" data-type="indexterm" id="idm44924499048160"/> numbers provided by the <span class="code">random</span> module, while sufficient for simulation and modeling, are not of cryptographic quality. To get random numbers and sequences for use in security and cryptography applications, use the functions defined in the <span class="code">secrets</span> module. These functions use the <span class="code">random.SystemRandom</span> class, which in turn calls <span class="code">os.urandom</span>. <span class="code">os.urandom</span> returns random bytes, read from physical sources of random bits such as <em>/dev/urandom</em> on older Linux releases, or the <span class="code"><strong>getrandom()</strong></span> syscall on Linux 3.17 and above. On Windows, <span class="code">os.urandom</span> uses cryptographical-strength sources such as the <span class="code">CryptGenRandom</span> API. If no suitable source exists on the current system, <span class="code">os.urandom</span> raises <span class="code">NotImplementedError</span>.</p>
<div data-type="note" epub:type="note">
<h1>secrets Functions Cannot Be Run with a Known Seed</h1>
<p>Unlike the <span class="code">random</span> module, which includes a <span class="code">seed</span> function to support generation of repeatable sequences of random values, the <span class="code">secrets</span> module has no such capability. To write tests dependent on specific sequences of random values generated by the <span class="code">secrets</span> module functions, developers must emulate those functions with their own mock versions.</p>
</div>
<p>The <span class="code">secrets</span> module supplies the functions listed in <a data-type="xref" href="#functions_of_the_secrets_module">Table 16-6</a>.</p>
<table class="border" id="functions_of_the_secrets_module">
<caption><span class="label">Table 16-6. </span>Functions of the <span class="code">secrets</span> module</caption>
<tbody>
<tr>
<td><span class="code">choice</span></td>
<td><span class="code">choice(<em>seq</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="choice (secrets module)" data-type="indexterm" id="idm44924499026912"/> a randomly selected item from nonempty sequence <span class="code"><em>seq</em></span>.</td>
</tr>
<tr>
<td><span class="code">randbelow</span></td>
<td><span class="code">randbelow(<em>n</em>)</span><br/>
			Returns a random int <span class="code"><em>x</em></span> in the range <span class="code">0 &lt;=</span> <span class="code"><em>x</em></span> <span class="code">&lt;</span> <span class="code"><em>n</em></span>.</td>
</tr>
<tr>
<td><span class="code">randbits</span></td>
<td><span class="code">randbits(<em>k</em>)</span><br/>
			Returns an <span class="code">int</span> with <span class="code"><em>k</em></span> random bits.</td>
</tr>
<tr>
<td><span class="code">token_bytes</span></td>
<td><span class="code">token_bytes(<em>n</em>)</span><br/>
			Returns a <span class="code">bytes</span> object of <span class="code"><em>n</em></span> random bytes. When you omit <span class="code"><em>n</em></span>, uses a default value, usually <span class="code">32</span>.</td>
</tr>
<tr>
<td><span class="code">token_hex</span></td>
<td><span class="code">token_hex(<em>n</em>)</span><br/>
			Returns a string of hexadecimal characters from <span class="code"><em>n</em></span> random bytes, with two characters per byte. When you omit <span class="code"><em>n</em></span>, uses a default value, usually <span class="code">32</span>.</td>
</tr>
<tr>
<td><span class="code">token_urlsafe</span></td>
<td><span class="code">token_urlsafe(<em>n</em>)</span><br/>
			Returns a string of Base64-encoded characters from <span class="code"><em>n</em></span> random bytes; the resulting string’s length is approximately 1.3 times <span class="code"><em>n</em></span>. When you omit <span class="code"><em>n</em></span>, uses a default value, usually <span class="code">32</span>.</td>
</tr>
</tbody>
</table>
<p>Additional recipes and best cryptographic practices are provided in Python’s <a href="https://oreil.ly/Yxh4k">online documentation</a>.</p>
<p>Alternative sources of physically random numbers are available online, e.g. from <a href="https://oreil.ly/uNAfT">Fourmilab</a>.<a contenteditable="false" data-primary="" data-startref="NPrandom16" data-type="indexterm" id="idm44924498993264"/><a contenteditable="false" data-primary="" data-startref="randmod16" data-type="indexterm" id="idm44924498991856"/><a contenteditable="false" data-primary="" data-startref="pseudoran16" data-type="indexterm" id="idm44924498990480"/></p>
</div></section>
</div></section>
<section data-pdf-bookmark="The fractions Module" data-type="sect1"><div class="sect1" id="the_fractions_module">
<h1>The fractions Module</h1>
<p>The<a contenteditable="false" data-primary="numeric processing" data-secondary="fractions module" data-type="indexterm" id="idm44924498986672"/><a contenteditable="false" data-primary="fractions module" data-type="indexterm" id="idm44924498984880"/><a contenteditable="false" data-primary="standard library modules" data-secondary="fractions" data-type="indexterm" id="idm44924498983776"/> <span class="code">fractions</span> module supplies a rational number class, <span class="code">Fraction</span>, whose instances you can construct from a pair of integers, another rational number, or a <span class="code">str</span>. <span class="code">Fraction</span> class instances have read-only attributes <span class="code">numerator</span> and <span class="code">denominator</span>. You can pass a pair of (optionally signed) <span class="code">int</span>s as the<a contenteditable="false" data-primary="denominators" data-type="indexterm" id="idm44924498977088"/> <em>numerator</em> and <em>denominator</em>. A denominator of <span class="code">0</span> raises <span class="code">ZeroDivisionError</span>. A string can be of the form <span class="code">'3.14'</span>, or can include an optionally signed numerator, a slash (<span class="code">/</span>) , and a denominator, such as <span class="code">'-22/7'</span>.</p>
<div data-type="note" epub:type="note">
<h1>Fraction Reduces to Lowest Terms</h1>
<p><span class="code">Fraction</span> reduces the fraction to the lowest terms—for example, <span class="code">f = Fraction(226, 452)</span> builds an instance <span class="code">f</span> equal to one built by <span class="code">Fraction(1, 2)</span>. The specific numerator and denominator originally passed to <span class="code">Fraction</span> are not recoverable from the resulting instance.</p>
</div>
<p><span class="code">Fraction</span> also supports construction from <span class="code">decimal.Decimal</span> instances, and from <span class="code">float</span>s (the latter may not provide the results you expect, given <span class="code">float</span>s’ bounded precision). Here are some examples of using <span class="code">Fraction</span> with various inputs.</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="kn">from</code></strong><code> </code><code class="nn">fractions</code><code> </code><strong><code class="kn">import</code></strong><code> </code><code class="n">Fraction</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="kn">from</code></strong><code> </code><code class="nn">decimal</code><code> </code><strong><code class="kn">import</code></strong><code> </code><code class="n">Decimal</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">Fraction</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code><code class="mi">10</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>Fraction(1, 10)</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">Fraction</code><code class="p">(</code><code class="n">Decimal</code><code class="p">(</code><code class="s1">'0.1'</code><code class="p">))</code></pre>
<pre data-type="programlisting">
<strong>Fraction(1, 10)</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">Fraction</code><code class="p">(</code><code class="s1">'0.1'</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>Fraction(1, 10)</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">Fraction</code><code class="p">(</code><code class="s1">'1/10'</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>Fraction(1, 10)</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">Fraction</code><code class="p">(</code><code class="mf">0.1</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>Fraction(3602879701896397, 36028797018963968)</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">Fraction</code><code class="p">(</code><code class="o">-</code><code class="mi">1</code><code class="p">,</code> <code class="mi">10</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>Fraction(-1, 10)</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">Fraction</code><code class="p">(</code><code class="o">-</code><code class="mi">1</code><code class="p">,</code><code class="o">-</code><code class="mi">10</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>Fraction(1, 10)</strong></pre>
<p>The <span class="code">Fraction</span> class supplies methods including <span class="code">limit_denominator</span>, which allows you to create a rational approximation of a <span class="code">float</span>—for example, <span class="code">Fraction(0.0999).limit_denominator(10)</span> returns <span class="code">Fraction(1, 10)</span>. <span class="code">Fraction</span> instances are immutable and can be keys in <span class="code">dict</span>s or members of <span class="code">set</span>s, as well as being usable in arithmetic operations with other numbers. See the <a href="https://oreil.ly/xyS7U">online docs</a> for complete coverage.</p>
<p>The <span class="code">fractions</span> module also supplies a function <span class="code">gcd</span> that’s just like <span class="code">math.gcd</span>, covered in <a data-type="xref" href="#methods_and_attributes_of_the_math_and">Table 16-1</a>.</p>
</div></section>
<section data-pdf-bookmark="The decimal Module" data-type="sect1"><div class="sect1" id="the_decimal_module">
<h1>The decimal Module</h1>
<p>A<a contenteditable="false" data-primary="numeric processing" data-secondary="decimal module" data-type="indexterm" id="NPdecimal16"/><a contenteditable="false" data-primary="decimal module" data-type="indexterm" id="decmod16"/><a contenteditable="false" data-primary="standard library modules" data-secondary="decimal" data-type="indexterm" id="idm44924498731776"/> Python <span class="code">float</span> is a binary floating-point number, normally according to the standard known as IEEE 754 implemented in hardware in modern computers. An excellent, concise, practical introduction to floating-point arithmetic and its issues can be found in David Goldberg’s paper <a href="https://oreil.ly/kmCAq">“What Every Computer Scientist Should Know About Floating-Point Arithmetic”</a>. A Python-focused essay on the same issues is part of the <a href="https://oreil.ly/0SQ-H">tutorial</a> in the Python docs; another excellent summary (not focused on Python), Bruce Bush’s “The Perils of Floating Point,” is also available <a href="https://oreil.ly/d8HJE">online</a>.</p>
<p>Often, particularly for money-related computations, you may prefer to use<a contenteditable="false" data-primary="floating-point numbers" data-secondary="decimal numbers" data-type="indexterm" id="idm44924498726848"/> <em>decimal</em> floating-point numbers. Python supplies an implementation of the standard known as IEEE 854,<sup><a data-type="noteref" href="ch16.xhtml#ch01fn122" id="ch01fn122-marker">1</a></sup> for base 10, in the standard library module <span class="code">decimal</span>. The module has excellent <a href="https://oreil.ly/3np33">documentation</a>: there, you can find complete reference material, pointers to the applicable standards, a tutorial, and advocacy for <span class="code">decimal</span>. Here, we cover only a small subset of <span class="code">decimal</span>’s functionality, the most frequently used parts of the module.</p>
<p>The <span class="code">decimal</span> module supplies a <span class="code">Decimal</span> class (whose immutable instances are decimal numbers), exception classes, and classes and functions to deal<a contenteditable="false" data-primary="arithmetic context" data-type="indexterm" id="idm44924498718432"/> with the <em>arithmetic context</em>, which specifies such things as precision, rounding, and which computational anomalies (such as division by zero, overflow, underflow, and so on) raise exceptions when they occur. In the default context, precision is 28 decimal digits, rounding is “half-even” (round results to the closest representable decimal number; when a result is exactly halfway between two such numbers, round to the one whose last digit is even), and the anomalies that raise exceptions are invalid operation, division by zero, and overflow.</p>
<p>To build a decimal number, call <span class="code">Decimal</span> with one argument: an <span class="code">int</span>, <span class="code">float</span>, <span class="code">str</span>, or <span class="code">tuple</span>. If you start with a <span class="code">float</span>, Python converts it losslessly to the exact decimal equivalent (which may require 53 digits or more of precision):</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="kn">from</code></strong><code> </code><code class="nn">decimal</code><code> </code><strong><code class="kn">import</code></strong><code> </code><code class="n">Decimal</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">df</code><code> </code><code class="o">=</code><code> </code><code class="n">Decimal</code><code class="p">(</code><code class="mf">0.1</code><code class="p">)</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">df</code></pre>
<pre data-type="programlisting">
<strong>Decimal('0.1000000000000000055511151231257827021181583404541015625')</strong></pre>
<p>If this is not the behavior you want, you can pass the <span class="code">float</span> as a <span class="code">str</span>; for example:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">ds</code><code> </code><code class="o">=</code><code> </code><code class="n">Decimal</code><code class="p">(</code><code class="nb">str</code><code class="p">(</code><code class="mf">0.1</code><code class="p">)</code><code class="p">)</code><code>  </code><em><code class="c1"># or, more directly, Decimal('0.1')</code></em><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">ds</code></pre>
<pre data-type="programlisting">
<strong>Decimal('0.1')</strong></pre>
<p>You can easily write a factory function for ease of interactive experimentation with <span class="code">decimal</span>:</p>
<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">dfs</code><code class="p">(</code><code class="n">x</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">return</code></strong><code> </code><code class="n">Decimal</code><code class="p">(</code><code class="nb">str</code><code class="p">(</code><code class="n">x</code><code class="p">)</code><code class="p">)</code></pre>
<p>Now <span class="code">dfs(0.1)</span> is just the same thing as <span class="code">Decimal(str(0.1))</span>, or <span class="code">Decimal('0.1')</span>, but more concise and handier to write.</p>
<p>Alternatively, you may use the <span class="code">quantize</span> method of <span class="code">Decimal</span> to construct a new decimal by rounding a <span class="code">float</span> to the number of significant digits you specify:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">dq</code> <code class="o">=</code> <code class="n">Decimal</code><code class="p">(</code><code class="mf">0.1</code><code class="p">)</code><code class="o">.</code><code class="n">quantize</code><code class="p">(</code><code class="n">Decimal</code><code class="p">(</code><code class="s1">'.00'</code><code class="p">))</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">dq</code></pre>
<pre data-type="programlisting">
<strong>Decimal('0.10')</strong></pre>
<p>If you start with a tuple, you need to provide three arguments: the sign (<span class="code">0</span> for positive, <span class="code">1</span> for negative), a tuple of digits, and the integer exponent:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">pidigits</code> <code class="o">=</code> <code class="p">(</code><code class="mi">3</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">4</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">5</code><code class="p">)</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">Decimal</code><code class="p">((</code><code class="mi">1</code><code class="p">,</code> <code class="n">pidigits</code><code class="p">,</code> <code class="o">-</code><code class="mi">4</code><code class="p">))</code></pre>
<pre data-type="programlisting">
<strong>Decimal('-3.1415')</strong></pre>
<p>Once you have instances of <span class="code">Decimal</span>, you can compare them, including comparison with <span class="code">float</span>s (use <span class="code">math.isclose</span> for this); <span class="code">pickle</span> and <span class="code">unpickle</span> them; and use them as keys in dictionaries and as members of sets. You may also perform arithmetic among them, and with integers, but not with <span class="code">float</span>s (to avoid unexpected loss of precision in the results), as shown here:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="kn">import</code></strong><code> </code><code class="nn">math</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="kn">from</code></strong><code> </code><code class="nn">decimal</code><code> </code><strong><code class="kn">import</code></strong><code> </code><code class="n">Decimal</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">a</code><code> </code><code class="o">=</code><code> </code><code class="mf">1.1</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">d</code><code> </code><code class="o">=</code><code> </code><code class="n">Decimal</code><code class="p">(</code><code class="s1">'</code><code class="s1">1.1</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">a</code><code> </code><code class="o">==</code><code> </code><code class="n">d</code></pre>
<pre data-type="programlisting">
<strong>False</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">math</code><code class="o">.</code><code class="n">isclose</code><code class="p">(</code><code class="n">a</code><code class="p">,</code> <code class="n">d</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>True</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">a</code> <code class="o">+</code> <code class="n">d</code></pre>
<pre data-type="programlisting">
<strong>Traceback (most recent call last):</strong>
<strong>  File "&lt;stdin&gt;", line 1, in &lt;module&gt;</strong>
<strong>TypeError: unsupported operand type(s) for +: 'float' and</strong> 
<strong>'decimal.Decimal'</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">d</code><code> </code><code class="o">+</code><code> </code><code class="n">Decimal</code><code class="p">(</code><code class="n">a</code><code class="p">)</code><code> </code><em><code class="c1"># new decimal constructed from 'a'</code></em></pre>
<pre data-type="programlisting">
<strong>Decimal('2.200000000000000088817841970')</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">d</code><code> </code><code class="o">+</code><code> </code><code class="n">Decimal</code><code class="p">(</code><code class="nb">str</code><code class="p">(</code><code class="n">a</code><code class="p">)</code><code class="p">)</code><code> </code><em><code class="c1"># convert 'a' to decimal with str(a)</code></em></pre>
<pre data-type="programlisting">
<strong>Decimal('2.20')</strong></pre>
<p>The <a href="https://oreil.ly/MygnC">online docs</a> include useful <a href="https://oreil.ly/9KnLa">recipes</a> for<a contenteditable="false" data-primary="monetary formatting" data-type="indexterm" id="idm44924498321808"/><a contenteditable="false" data-primary="currency values" data-type="indexterm" id="idm44924498320672"/> monetary formatting, some trigonometric functions, and a list of FAQs.<a contenteditable="false" data-primary="" data-startref="NPdecimal16" data-type="indexterm" id="idm44924498319440"/><a contenteditable="false" data-primary="" data-startref="decmod16" data-type="indexterm" id="idm44924498318064"/></p>
</div></section>
<section data-pdf-bookmark="Array Processing" data-type="sect1"><div class="sect1" id="array_processing">
<h1>Array Processing</h1>
<p>You<a contenteditable="false" data-primary="numeric processing" data-secondary="array processing" data-type="indexterm" id="NParray16"/><a contenteditable="false" data-primary="array processing" data-type="indexterm" id="arpro16"/> can represent what most languages call arrays, or vectors, with lists (covered in <a data-type="xref" href="ch03.xhtml#list">“Lists”</a>), as well as with the <span class="code">array</span> standard library module (covered in the following subsection). You can manipulate arrays with loops, indexing and slicing, list comprehensions, iterators, generators, and genexps (all covered in <a data-type="xref" href="ch03.xhtml#the_python_language">Chapter 3</a>); built-ins such as <span class="code">map</span>, <span class="code">reduce</span>, and <span class="code">filter</span> (all covered in <a data-type="xref" href="ch08.xhtml#built_in_functions">“Built-in Functions”</a>); and standard library modules such as <span class="code">itertools</span> (covered in <a data-type="xref" href="ch08.xhtml#the_itertools_module">“The itertools Module”</a>). If you only need a lightweight, one-dimensional array of instances of a simple type, stick with <span class="code">array</span>. However, to process large arrays of numbers, such functions may be slower and less convenient than third-party extensions such as NumPy and SciPy (covered in <a data-type="xref" href="#extensions_for_numeric_array_computatio">“Extensions for Numeric Array Computation”</a>). When you’re doing data analysis and modeling, Pandas, which is built on top of NumPy (but not discussed in this book), might be most suitable.</p>
<section data-pdf-bookmark="The array Module" data-type="sect2"><div class="sect2" id="the_array_module">
<h2>The array Module</h2>
<p>The<a contenteditable="false" data-primary="array module" data-secondary="array type" data-type="indexterm" id="idm44924498278048"/> <span class="code">array</span> module supplies a type, also called <span class="code">array</span>, whose instances are mutable sequences, like lists. An <span class="code">array</span> <span class="code"><em>a</em></span> is a one-dimensional sequence whose items can be only characters, or only numbers of one specific numeric type, fixed when you create <span class="code"><em>a</em></span>. The constructor for <span class="code">array</span> is:</p>
<table class="border">
<tbody>
<tr>
<td><span class="code">array</span></td>
<td><span class="code"><strong>class</strong></span> <span class="code">array(<em>typecode, init</em>='', /)</span><br/>
			Creates and returns an <span class="code">array</span> object <span class="code"><em>a</em></span> with the given <span class="code"><em>typecode</em></span><em>.</em> <span class="code"><em>init</em></span> can be a string (a bytestring, except for <span class="code"><em>typecode</em></span> <span class="code">'u'</span>) whose length is a multiple of <span class="code">itemsize</span>: the string’s bytes, interpreted as machine values, directly initialize <span class="code"><em>a</em></span>’s items. Alternatively, <span class="code"><em>init</em></span> can be an iterable (of characters when <span class="code"><em>typecode</em></span> is <span class="code">'u'</span>, otherwise of numbers): each item of the iterable initializes one item of <span class="code"><em>a</em></span>.</td>
</tr>
</tbody>
</table>
<p><span class="code">array.array</span>’s advantage is that, compared to a list, it can save memory when you need to hold a sequence of objects all of the same (numeric or character) type. An <span class="code">array</span> object <span class="code"><em>a</em></span> has a one-character, read-only attribute <span class="code"><em>a</em></span><span class="code">.typecode</span>, set on creation, which specifies the type of <span class="code"><em>a</em></span>’s items. <a data-type="xref" href="#type_codes_for_the_array_module">Table 16-7</a> shows<a contenteditable="false" data-primary="array module" data-secondary="type codes for" data-type="indexterm" id="idm44924498250928"/> the possible <span class="code">typecode</span> values for <span class="code">array</span>.</p>
<table class="border" id="type_codes_for_the_array_module">
<caption><span class="label">Table 16-7. </span>Type codes for the <span class="code">array</span> module</caption>
<thead>
<tr>
<th>typecode</th>
<th>C type</th>
<th>Python type</th>
<th>Minimum size</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="code">'b'</span></td>
<td><span class="code">char</span></td>
<td><span class="code">int</span></td>
<td>1 byte</td>
</tr>
<tr>
<td><span class="code">'B'</span></td>
<td><span class="code">unsigned char</span></td>
<td><span class="code">int</span></td>
<td>1 byte</td>
</tr>
<tr>
<td><span class="code">'u'</span></td>
<td><span class="code">unicode char</span></td>
<td><span class="code">str (length 1)</span></td>
<td>See note</td>
</tr>
<tr>
<td><span class="code">'h'</span></td>
<td><span class="code">short</span></td>
<td><span class="code">int</span></td>
<td>2 bytes</td>
</tr>
<tr>
<td><span class="code">'H'</span></td>
<td><span class="code">unsigned short</span></td>
<td><span class="code">int</span></td>
<td>2 bytes</td>
</tr>
<tr>
<td><span class="code">'i'</span></td>
<td><span class="code">int</span></td>
<td><span class="code">int</span></td>
<td>2 bytes</td>
</tr>
<tr>
<td><span class="code">'I'</span></td>
<td><span class="code">unsigned int</span></td>
<td><span class="code">int</span></td>
<td>2 bytes</td>
</tr>
<tr>
<td><span class="code">'l'</span></td>
<td><span class="code">long</span></td>
<td><span class="code">int</span></td>
<td>4 bytes</td>
</tr>
<tr>
<td><span class="code">'L'</span></td>
<td><span class="code">unsigned long</span></td>
<td><span class="code">int</span></td>
<td>4 bytes</td>
</tr>
<tr>
<td><span class="code">'q'</span></td>
<td><span class="code">long long</span></td>
<td><span class="code">int</span></td>
<td>8 bytes</td>
</tr>
<tr>
<td><span class="code">'Q'</span></td>
<td><span class="code">unsigned long long</span></td>
<td><span class="code">int</span></td>
<td>8 bytes</td>
</tr>
<tr>
<td><span class="code">'f'</span></td>
<td><span class="code">float</span></td>
<td><span class="code">float</span></td>
<td>4 bytes</td>
</tr>
<tr>
<td><span class="code">'d'</span></td>
<td><span class="code">double</span></td>
<td><span class="code">float</span></td>
<td>8 bytes</td>
</tr>
</tbody>
</table>
<div data-type="note" epub:type="note">
<h1>Minimum Size of typecode ‘u’</h1>
<p><span class="code">'u'</span> has an item size of <span class="code">2</span> on a few platforms (notably, Windows) and <span class="code">4</span> on just about every other platform. You can check the build type of a Python interpreter by using <span class="code">array.array('u').itemsize</span>.</p>
</div>
<p>The size, in bytes, of each item of an <span class="code">array</span> <span class="code"><em>a</em></span> may be larger than the minimum, depending on the machine’s architecture, and is available as the read-only attribute <span class="code"><em>a</em></span><span class="code">.itemsize</span>.</p>
<p>Array objects expose all methods and operations of mutable sequences (as covered in <a data-type="xref" href="ch03.xhtml#sequence_operations">“Sequence Operations”</a>), except <span class="code">sort</span>. Concatenation with <span class="code">+</span> or <span class="code">+=</span>, and slice assignment, require both operands to be arrays with the same <span class="code">typecode</span>; in contrast, the argument to<a contenteditable="false" data-primary="extend method" data-secondary="array" data-type="indexterm" id="idm44924498185744"/> <span class="code"><em>a</em></span><span class="code">.extend</span> can be any iterable with items acceptable to <span class="code"><em>a</em></span>. In addition to the methods of mutable sequences (<span class="code">append</span>, <span class="code">extend</span>, <span class="code">insert</span>, <span class="code">pop</span>, etc.), an <span class="code">array</span> object <span class="code"><em>a</em></span> exposes the<a contenteditable="false" data-primary="array module" data-secondary="methods and properties of array objects" data-type="indexterm" id="idm44924498177440"/> methods and properties listed in <a data-type="xref" href="#methods_and_properties_of_an_array_obje">Table 16-8</a>.</p>
<table class="border" id="methods_and_properties_of_an_array_obje">
<caption><span class="label">Table 16-8. </span>Methods and properties of an <span class="code">array</span> object <span class="code">a</span></caption>
<tbody>
<tr>
<td><span class="code">buffer_info</span></td>
<td><span class="code"><em>a</em></span><span class="code">.buffer_info()</span><br/>
			Returns a two-item tuple <span class="code">(<em>address</em>,</span> <span class="code"><em>array_length</em></span><span class="code">)</span>, where <span class="code"><em>array_length</em></span> is the number of items that you can store in <span class="code"><em>a</em></span>. The size of <span class="code"><em>a</em></span> in bytes is <span class="code"><em>a</em></span><span class="code">.buffer_info()[1] *</span> <span class="code"><em>a</em></span><span class="code">.itemsize</span>.</td>
</tr>
<tr>
<td><span class="code">byteswap</span></td>
<td><span class="code"><em>a</em></span><span class="code">.byteswap()</span><br/>
			Swaps the byte order of each item of <span class="code"><em>a</em></span>.</td>
</tr>
<tr>
<td><span class="code">frombytes</span></td>
<td><span class="code"><em>a</em></span><span class="code">.frombytes(<em>s</em>)</span><br/>
			Appends to <span class="code"><em>a</em></span> the bytes, interpreted as machine values, of <span class="code">bytes</span> <span class="code"><em>s</em></span>. <span class="code">len(<em>s</em>)</span> must be an exact multiple of <span class="code"><em>a</em></span><span class="code">.itemsize</span>.</td>
</tr>
<tr>
<td><span class="code">fromfile</span></td>
<td><span class="code"><em>a</em></span><span class="code">.fromfile(<em>f</em>,</span> <span class="code"><em>n</em></span><span class="code">)</span><br/>
			Reads <span class="code"><em>n</em></span> items, taken as machine values, from file object <span class="code"><em>f</em></span> and appends the items to <span class="code"><em>a</em></span>. <span class="code"><em>f</em></span> should be open for reading in binary mode—typically, mode <span class="code">'rb'</span> (see <a data-type="xref" href="ch11.xhtml#creating_a_file_object_with_open">“Creating a File Object with open”</a>). When fewer than <span class="code"><em>n</em></span> items are available in <span class="code"><em>f</em></span>, <span class="code">fromfile</span> raises <span class="code">EOFError</span> after appending the items that are available (so, be sure to catch this in a <span class="code"><strong>try</strong></span><span class="code">/</span><span class="code"><strong>except</strong></span>, if that’s OK in your app!).</td>
</tr>
<tr>
<td><span class="code">fromlist</span></td>
<td><span class="code"><em>a</em></span><span class="code">.fromlist(<em>L</em>)</span><br/>
			Appends to <span class="code"><em>a</em></span> all items of list <span class="code"><em>L</em></span>.</td>
</tr>
<tr>
<td><span class="code">fromunicode</span></td>
<td><span class="code"><em>a</em></span><span class="code">.fromunicode(<em>s</em>)</span><br/>
			Appends to <span class="code"><em>a</em></span> all characters from string <span class="code"><em>s</em></span>. <span class="code"><em>a</em></span> must have typecode <span class="code">'u'</span>; otherwise, Python raises <span class="code">ValueError</span>.</td>
</tr>
<tr>
<td><span class="code">itemsize</span></td>
<td><span class="code"><em>a</em></span><span class="code">.itemsize</span><br/>
			Property that returns the size, in bytes, of each item in <span class="code"><em>a</em></span>.</td>
</tr>
<tr>
<td><span class="code">tobytes</span></td>
<td><span class="code"><em>a</em></span><span class="code">.tobytes()</span><br/>
<span class="code">tobytes</span> returns the bytes representation of the items in a. For any <span class="code"><em>a</em></span>, <span class="code">len(<em>a</em>.tobytes())</span> <span class="code">==</span> <span class="code">len(<em>a</em>)*<em>a</em>.itemsize</span>. <span class="code"><em>f</em></span><span class="code">.write(<em>a</em>.tobytes())</span> is the same as <span class="code"><em>a</em></span><span class="code">.tofile(<em>f</em>)</span>.</td>
</tr>
<tr>
<td><span class="code">tofile</span></td>
<td><span class="code"><em>a</em></span><span class="code">.tofile(<em>f</em>)</span><br/>
			Writes all items of <span class="code"><em>a</em></span>, taken as machine values, to file object <span class="code"><em>f</em></span>. Note that <span class="code"><em>f</em></span> should be open for writing in binary mode—for example, with mode <span class="code">'wb'</span>.</td>
</tr>
<tr>
<td><span class="code">tolist</span></td>
<td><span class="code"><em>a</em></span><span class="code">.tolist()</span><br/>
			Creates and returns a list object with the same items as <span class="code"><em>a</em></span>, like <span class="code">list(<em>a</em>)</span>.</td>
</tr>
<tr>
<td><span class="code">tounicode</span></td>
<td><span class="code"><em>a</em></span><span class="code">.tounicode()</span><br/>
			Creates and returns a string with the same items as <span class="code"><em>a</em></span>, like <span class="code">''.join(<em>a</em>)</span>. <span class="code"><em>a</em></span> must have <span class="code">typecode</span> <span class="code">'u'</span>; otherwise, Python raises <span class="code">ValueError</span>.</td>
</tr>
<tr>
<td><span class="code">typecode</span></td>
<td><span class="code"><em>a</em></span><span class="code">.typecode</span><br/>
			Property that returns the <span class="code">typecode</span> used to create <span class="code">a</span><em>.</em></td>
</tr>
</tbody>
</table>
</div></section>
<section data-pdf-bookmark="Extensions for Numeric Array Computation" data-type="sect2"><div class="sect2" id="extensions_for_numeric_array_computatio">
<h2>Extensions for Numeric Array Computation</h2>
<p>As you’ve seen, Python has great built-in support for numeric processing. The third-party library <a class="orm:hideurl" href="https://scipy.org">SciPy</a>, and many, <em>many</em> other packages, such as <a class="orm:hideurl" href="https://numpy.org">NumPy</a>, <a class="orm:hideurl" href="https://matplotlib.org">Matplotlib</a>, <a class="orm:hideurl" href="https://oreil.ly/oVs_S">SymPy</a>, <a class="orm:hideurl" href="https://numba.pydata.org">Numba</a>, <a class="orm:hideurl" href="https://pandas.pydata.org">Pandas</a>, <a class="orm:hideurl" href="https://pytorch.org">PyTorch</a>, <a class="orm:hideurl" href="https://cupy.dev">CuPy</a>, and <a class="orm:hideurl" href="https://www.tensorflow.org">TensorFlow</a>, provide even more tools. We introduce NumPy here, then provide a brief description of SciPy and some other packages, with pointers to their documentation.</p>
<section data-pdf-bookmark="NumPy" data-type="sect3"><div class="sect3" id="numpy">
<h3>NumPy</h3>
<p>If<a contenteditable="false" data-primary="NumPy" data-type="indexterm" id="numpy16"/> you need a lightweight, one-dimensional array of numbers, the standard library’s <span class="code">array</span> module may suffice. If your work involves scientific computing, image processing, multidimensional arrays, linear algebra, or other applications involving large amounts of data, the popular third-party NumPy package meets your needs. Extensive documentation is available <a href="https://docs.scipy.org/doc">online</a>; a free PDF of Travis Oliphant’s <a href="https://oreil.ly/QA2xJ"><em>Guide to NumPy</em></a> is also available.<sup><a data-type="noteref" href="ch16.xhtml#ch01fn123" id="ch01fn123-marker">2</a></sup></p>
<div data-type="note" epub:type="note">
<h1>NumPy or numpy?</h1>
<p>The docs variously refer to the package as NumPy or Numpy; however, in coding, the package is called <span class="code">numpy</span>, and you usually import it with <span class="code"><strong>import</strong></span> <span class="code">numpy</span> <span class="code"><strong>as</strong></span> <span class="code">np</span>. This section follows those conventions.</p>
</div>
<p>NumPy provides the<a contenteditable="false" data-primary="ndarray class (NumPy package)" data-type="indexterm" id="idm44924498054192"/> class <span class="code">ndarray</span>, which you can <a href="https://oreil.ly/FK9qK">subclass</a> to add functionality for your particular needs. An <span class="code">ndarray</span> object has <span class="code"><em>n</em></span> dimensions of homogeneous items (items can include containers of heterogeneous types). Each <span class="code">ndarray</span> object <span class="code"><em>a</em></span> has a certain number of dimensions (aka <em>axes</em>), known as its <em>rank</em>. A <em>scalar</em> (i.e., a single number) has rank <span class="code">0</span>, a <em>vector</em> has rank <span class="code">1</span>, a <em>matrix</em> has rank <span class="code">2</span>, and so forth. An <span class="code">ndarray</span> object also has a <em>shape</em>, which can be accessed as property <span class="code">shape</span>. For example, for a matrix <span class="code"><em>m</em></span> with 2 columns and 3 rows, <span class="code"><em>m</em></span><span class="code">.shape</span> is <span class="code">(3,2)</span>.</p>
<p>NumPy<a contenteditable="false" data-primary="dtype" data-type="indexterm" id="idm44924498053248"/> supports a wider range of <a href="https://oreil.ly/HPxtV">numeric types</a> (instances of <span class="code">dtype</span>) than Python; the default numerical types are <span class="code">bool_</span> (1 byte), <span class="code">int_</span> (either <span class="code">int64</span> or <span class="code">int32</span>, depending on your platform), <span class="code">float_</span> (short for <span class="code">float64</span>), and <span class="code">complex_</span> (short for <span class="code">complex128</span>).</p>
</div></section>
<section data-pdf-bookmark="Creating a NumPy array" data-type="sect3"><div class="sect3" id="creating_a_numpy_array">
<h3>Creating a NumPy array</h3>
<p>There are several ways to create an array in NumPy. Among the most common are:</p>
<ul>
<li>
<p>With<a contenteditable="false" data-primary="type inferencing" data-type="indexterm" id="idm44924498026176"/> the factory function <span class="code">np.array</span>, from a sequence (often a nested one), with <em>type inference</em> or by explicitly specifying <span class="code"><em>dtype</em></span></p>
</li>
<li>
<p>With factory functions <span class="code">np.zeros</span>, <span class="code">np.ones</span>, or <span class="code">np.empty</span>, which default to <span class="code"><em>dtype</em></span> <span class="code">float64</span></p>
</li>
<li>
<p>With factory function <span class="code">np.indices</span>, which defaults to <span class="code"><em>dtype</em></span> <span class="code">int64</span></p>
</li>
<li>
<p>With factory functions <span class="code">np.random.uniform</span>, <span class="code">np.random.normal</span>, <span class="code">np.random.binomial</span>, etc., which default to <span class="code"><em>dtype</em></span> <span class="code">float64</span></p>
</li>
<li>
<p>With factory function <span class="code">np.arange</span> (with the usual <span class="code"><em>start</em></span>, <span class="code"><em>stop</em></span>, <span class="code"><em>stride</em></span>), or with factory function <span class="code">np.linspace</span> (with <span class="code"><em>start</em></span>, <span class="code"><em>stop</em></span>, <span class="code"><em>quantity</em></span>) for better floating-point behavior</p>
</li>
<li>
<p>By reading data from files with other <span class="code">np</span> functions (e.g., CSV with <span class="code">np.genfromtxt</span>)</p>
</li>
</ul>
<p>Here are some examples of creating an array using the various techniques just described:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="kn">import</code></strong><code> </code><code class="nn">numpy</code><code> </code><strong><code class="k">as</code></strong><code> </code><code class="nn">np</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">array</code><code class="p">(</code><code class="p">[</code><code class="mi">1</code><code class="p">,</code><code> </code><code class="mi">2</code><code class="p">,</code><code> </code><code class="mi">3</code><code class="p">,</code><code> </code><code class="mi">4</code><code class="p">]</code><code class="p">)</code><code>  </code><em><code class="c1"># from a Python list</code></em></pre>
<pre data-type="programlisting">
<strong>array([1, 2, 3, 4])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">array</code><code class="p">(</code><code class="mi">5</code><code class="p">,</code><code> </code><code class="mi">6</code><code class="p">,</code><code> </code><code class="mi">7</code><code class="p">)</code><code>  </code><em><code class="c1"># a common error: passing items separately (they</code></em><code>
</code><code>                       </code><em><code class="c1"># must be passed as a sequence, e.g. a list)</code></em></pre>
<pre data-type="programlisting">
<strong>Traceback (most recent call last):</strong>
<strong>  File "&lt;stdin&gt;", line 1, in &lt;module&gt;</strong>
<strong>TypeError: array() takes from 1 to 2 positional arguments, 3 were given</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">s</code><code> </code><code class="o">=</code><code> </code><code class="s1">'</code><code class="s1">alph</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">abet</code><code class="s1">'</code><code>  </code><em><code class="c1"># a tuple of two strings</code></em><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">array</code><code class="p">(</code><code class="n">s</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>array(['alph', 'abet'], dtype='&lt;U4')</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">t</code><code> </code><code class="o">=</code><code> </code><code class="p">[</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code><code class="mi">2</code><code class="p">)</code><code class="p">,</code><code> </code><code class="p">(</code><code class="mi">3</code><code class="p">,</code><code class="mi">4</code><code class="p">)</code><code class="p">,</code><code> </code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code class="mi">1</code><code class="p">)</code><code class="p">]</code><code>  </code><em><code class="c1"># a list of tuples</code></em><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">array</code><code class="p">(</code><code class="n">t</code><code class="p">,</code><code> </code><code class="n">dtype</code><code class="o">=</code><code class="s1">'</code><code class="s1">float64</code><code class="s1">'</code><code class="p">)</code><code>  </code><em><code class="c1"># explicit type designation</code></em></pre>
<pre data-type="programlisting">
<strong>array([[1., 2.],</strong>
<strong>       [3., 4.],</strong>
<strong>       [0., 1.]])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">x</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">array</code><code class="p">(</code><code class="mf">1.2</code><code class="p">,</code><code> </code><code class="n">dtype</code><code class="o">=</code><code class="n">np</code><code class="o">.</code><code class="n">float16</code><code class="p">)</code><code>  </code><em><code class="c1"># a scalar</code></em><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">x</code><code class="o">.</code><code class="n">shape</code></pre>
<pre data-type="programlisting">
<strong>()</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">x</code><code class="o">.</code><code class="n">max</code><code class="p">()</code></pre>
<pre data-type="programlisting">
<strong>1.2</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">zeros</code><code class="p">(</code><code class="mi">3</code><code class="p">)</code><code>  </code><em><code class="c1"># shape defaults to a vector</code></em></pre>
<pre data-type="programlisting">
<strong>array([0., 0., 0.])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">ones</code><code class="p">(</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code><code class="mi">2</code><code class="p">)</code><code class="p">)</code><code>  </code><em><code class="c1"># with shape specified</code></em></pre>
<pre data-type="programlisting">
<strong>array([[1., 1.],</strong>
<strong>[1., 1.]])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">empty</code><code class="p">(</code><code class="mi">9</code><code class="p">)</code><code>  </code><em><code class="c1"># arbitrary float64s</code></em></pre>
<pre data-type="programlisting">
<strong>array([ 6.17779239e-31, -1.23555848e-30,  3.08889620e-31,</strong>
       <strong>-1.23555848e-30,  2.68733969e-30, -8.34001973e-31,</strong>  
	    <strong>3.08889620e-31, -8.34001973e-31,  4.78778910e-31])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">np</code><code class="o">.</code><code class="n">indices</code><code class="p">((</code><code class="mi">3</code><code class="p">,</code><code class="mi">3</code><code class="p">))</code></pre>
<pre data-type="programlisting">
<strong>array([[[0, 0, 0],</strong>
<strong>        [1, 1, 1],</strong>
<strong>        [2, 2, 2]],</strong>

<strong>       [[0, 1, 2],</strong>
<strong>        [0, 1, 2],</strong>
<strong>        [0, 1, 2]]])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">arange</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code> </code><code class="mi">10</code><code class="p">,</code><code> </code><code class="mi">2</code><code class="p">)</code><code>  </code><em><code class="c1"># upper bound excluded</code></em></pre>
<pre data-type="programlisting">
<strong>array([0, 2, 4, 6, 8])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">linspace</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">)</code><code>  </code><em><code class="c1"># default: endpoint included</code></em></pre>
<pre data-type="programlisting">
<strong>array([0.  , 0.25, 0.5 , 0.75, 1.  ])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">linspace</code><code class="p">(</code><code class="mi">0</code><code class="p">,</code><code> </code><code class="mi">1</code><code class="p">,</code><code> </code><code class="mi">5</code><code class="p">,</code><code> </code><code class="n">endpoint</code><code class="o">=</code><code class="kc">False</code><code class="p">)</code><code>  </code><em><code class="c1"># endpoint not included</code></em></pre>
<pre data-type="programlisting">
<strong>array([0. , 0.2, 0.4, 0.6, 0.8])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">genfromtxt</code><code class="p">(</code><code class="n">io</code><code class="o">.</code><code class="n">BytesIO</code><code class="p">(</code><code class="sa">b</code><code class="s1">'</code><code class="s1">1 2 3</code><code class="se">\n</code><code class="s1">4 5 6</code><code class="s1">'</code><code class="p">)</code><code class="p">)</code><code>  </code><em><code class="c1"># using a pseudo-file</code></em></pre>
<pre data-type="programlisting">
<strong>array([[1., 2., 3.],</strong>
<strong>       [4., 5., 6.]])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="k">with</code></strong><code> </code><code class="nb">open</code><code class="p">(</code><code class="s1">'</code><code class="s1">x.csv</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="s1">'</code><code class="s1">wb</code><code class="s1">'</code><code class="p">)</code><code> </code><code class="k">as</code><code> </code><code class="n">f</code><code class="p">:</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>     </code><code class="n">f</code><code class="o">.</code><code class="n">write</code><code class="p">(</code><code class="sa">b</code><code class="s1">'</code><code class="s1">2,4,6</code><code class="se">\n</code><code class="s1">1,3,5</code><code class="s1">'</code><code class="p">)</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code></pre>
<pre data-type="programlisting">
<strong>11</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">genfromtxt</code><code class="p">(</code><code class="s1">'</code><code class="s1">x.csv</code><code class="s1">'</code><code class="p">,</code><code> </code><code class="n">delimiter</code><code class="o">=</code><code class="s1">'</code><code class="s1">,</code><code class="s1">'</code><code class="p">)</code><code>  </code><em><code class="c1"># using an actual CSV file</code></em></pre>
<pre data-type="programlisting">
<strong>array([[2., 4., 6.],</strong>
<strong>       [1., 3., 5.]])</strong></pre>
</div></section>
<section data-pdf-bookmark="Shape, indexing, and slicing" data-type="sect3"><div class="sect3" id="shapecomma_indexingcomma_and_slicing">
<h3>Shape, indexing, and slicing</h3>
<p>Each<a contenteditable="false" data-primary="indexing" data-secondary="arrays" data-type="indexterm" id="idm44924497359088"/><a contenteditable="false" data-primary="slicing" data-secondary="arrays" data-type="indexterm" id="idm44924497356960"/> <span class="code">ndarray</span> object <span class="code"><em>a</em></span> has an attribute <span class="code"><em>a</em></span><span class="code">.shape</span>, which is a tuple of <span class="code">int</span>s. <span class="code">len(<em>a</em>.shape)</span> is <span class="code"><em>a</em></span>’s <em>rank</em>; for example, a one-dimensional array of numbers (also known as a <em>vector</em>) has rank <span class="code">1</span>, and <span class="code"><em>a</em></span><span class="code">.shape</span> has just one item. More generally, each item of <span class="code"><em>a</em></span><span class="code">.shape</span> is the length of the corresponding dimension of <span class="code"><em>a</em></span>. <span class="code"><em>a</em></span>’s number of elements, known as its <em>size</em>, is the product of all items of <span class="code"><em>a</em></span><span class="code">.shape</span> (also available as property <span class="code"><em>a</em></span><span class="code">.size</span>). Each dimension of <span class="code"><em>a</em></span> is also known as an <em>axis</em>. Axis indices are from <span class="code">0</span> and up, as usual in Python. Negative axis indices are allowed and count from the right, so <span class="code">-1</span> is the last (rightmost) axis.</p>
<p>Each array <span class="code"><em>a</em></span> (except a scalar, meaning an array of rank <span class="code">0</span>) is a Python sequence. Each item <span class="code"><em>a</em></span><span class="code">[<em>i</em>]</span> of <span class="code"><em>a</em></span> is a subarray of <span class="code"><em>a</em></span>, meaning it is an array with a rank one less than <span class="code"><em>a</em></span>’s: <span class="code"><em>a</em></span><span class="code">[<em>i</em>].shape ==</span> <span class="code"><em>a</em></span><span class="code">.shape[1:]</span>. For example, if <span class="code"><em>a</em></span> is a two-dimensional matrix (<span class="code"><em>a</em></span> is of rank <span class="code">2</span>), <span class="code"><em>a</em></span><span class="code">[<em>i</em>]</span>, for any valid index <span class="code"><em>i</em></span>, is a one-dimensional subarray of <span class="code"><em>a</em></span> that corresponds to one row of the matrix. When <span class="code"><em>a</em></span>’s rank is <span class="code">1</span> or <span class="code">0</span>, <span class="code"><em>a</em></span>’s items are <span class="code"><em>a</em></span>’s elements (just one element, for rank <span class="code">0</span> arrays). Since <span class="code"><em>a</em></span> is a sequence, you can index <span class="code"><em>a</em></span> with normal indexing syntax to access or change <span class="code"><em>a</em></span>’s items. Note that <span class="code"><em>a</em></span>’s items are <span class="code"><em>a</em></span>’s subarrays; only for an array of rank <span class="code">1</span> or <span class="code">0</span> are the array’s <em>items</em> the same thing as the array’s <em>elements</em>.</p>
<p>As with any other sequence, you can also <em>slice</em> <span class="code"><em>a</em></span>. After <span class="code"><em>b</em></span> <span class="code">=</span> <span class="code"><em>a</em></span><span class="code">[<em>i</em>:<em>j</em>]</span>, <span class="code"><em>b</em></span> has the same rank as <span class="code"><em>a</em></span>, and <span class="code"><em>b</em></span><span class="code">.shape</span> equals <span class="code"><em>a</em></span><span class="code">.shape</span> except that <span class="code"><em>b</em></span><span class="code">.shape[0]</span> is the length of the slice <em><span class="code">a</span></em><span class="code">[<em>i</em>:<em>j</em>]</span>, (i.e., when <span class="code"><em>a</em></span><span class="code">.shape[0] &gt;</span> <span class="code"><em>j</em></span> <span class="code">&gt;=</span> <span class="code"><em>i</em></span> <span class="code">&gt;= 0</span>, the length of the slice is <span class="code"><em>j</em></span> <span class="code">-</span> <span class="code"><em>i</em></span>, as described in <a data-type="xref" href="ch03.xhtml#slicing_a_sequence">“Slicing a sequence”</a>).</p>
<p>Once you have an array <span class="code"><em>a</em></span>, you can call <span class="code"><em>a</em></span><span class="code">.reshape</span> (or, equivalently, <span class="code">np.reshape</span> with <span class="code"><em>a</em></span> as the first argument). The resulting shape must match <span class="code"><em>a</em></span><span class="code">.size</span>: when <span class="code"><em>a</em></span><span class="code">.size</span> is <span class="code">12</span>, you can call <span class="code"><em>a</em></span><span class="code">.reshape(3, 4)</span> or <span class="code"><em>a</em></span><span class="code">.reshape(2, 6)</span>, but <span class="code"><em>a</em></span><span class="code">.reshape(2, 5)</span> raises <span class="code">ValueError</span>. Note that <span class="code">reshape</span> does not work in place: you must explicitly bind or rebind the array, for example, <span class="code"><em>a</em></span> <span class="code">=</span> <span class="code"><em>a</em></span><span class="code">.reshape(<em>i</em>,</span> <span class="code"><em>j</em></span><span class="code">)</span> or <span class="code"><em>b</em></span> <span class="code">=</span> <span class="code"><em>a</em></span><span class="code">.reshape(<em>i</em>,</span> <span class="code"><em>j</em></span><span class="code">)</span>.</p>
<p>You can also loop on (nonscalar) <span class="code"><em>a</em></span> with <strong><span class="code">for</span></strong>, just as you can with any other sequence. For example, this:</p>
<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">for</code></strong><code> </code><code class="n">x</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="n">a</code><code class="p">:</code><code>
</code><code>    </code><code class="n">process</code><code class="p">(</code><code class="n">x</code><code class="p">)</code></pre>
<p>means the same thing as:</p>
<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">for</code></strong><code> </code><code class="n">_</code><code> </code><strong><code class="ow">in</code></strong><code> </code><code class="nb">range</code><code class="p">(</code><code class="nb">len</code><code class="p">(</code><em><code class="n">a</code></em><code class="p">)</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><code class="n">x</code><code> </code><code class="o">=</code><code> </code><em><code class="n">a</code></em><code class="p">[</code><code class="n">_</code><code class="p">]</code><code>
</code><code>    </code><code class="n">process</code><code class="p">(</code><em><code class="n">x</code></em><code class="p">)</code></pre>
<p>In these examples, each item <span class="code"><em>x</em></span> of <span class="code"><em>a</em></span> in the <span class="code"><strong>for</strong></span> loop is a subarray of <span class="code"><em>a</em></span>. For example, if <span class="code"><em>a</em></span> is a two-dimensional matrix, each <span class="code"><em>x</em></span> in either of these loops is a one-dimensional subarray of <span class="code"><em>a</em></span> that corresponds to a row of the matrix.</p>
<p>You can also index or slice <span class="code"><em>a</em></span> by a tuple. For example, when <span class="code"><em>a</em></span>’s rank is <span class="code">&gt;= 2</span>, you can write <span class="code"><em>a</em></span><span class="code">[<em>i</em>][<em>j</em>]</span> as <span class="code"><em>a</em></span><span class="code">[<em>i</em>,</span> <span class="code"><em>j</em></span><span class="code">]</span>, for any valid <span class="code"><em>i</em></span> and <span class="code"><em>j</em></span>, for rebinding as well as for access; tuple indexing is faster and more convenient. <em>Do not put parentheses</em> inside the brackets to indicate that you are indexing <span class="code"><em>a</em></span> by a tuple: just write the indices one after the other, separated by commas. <span class="code"><em>a</em></span><span class="code">[<em>i</em>,</span> <span class="code"><em>j</em></span><span class="code">]</span> means exactly the same thing as <span class="code"><em>a</em></span><span class="code">[(<em>i</em>,</span> <span class="code"><em>j</em></span><span class="code">)]</span>, but the form without parentheses is more readable.</p>
<p>An indexing is a slicing in which one or more of the tuple’s items are slices, or (at most once per slicing) the special form <span class="code">...</span> (the Python built-in <span class="code">Ellipsis</span>). <span class="code">...</span> expands into as many all-axis slices (<span class="code">:</span>) as needed to “fill” the rank of the array you’re slicing. For example, <span class="code"><em>a</em></span><span class="code">[1,...,2]</span> is like <span class="code"><em>a</em></span><span class="code">[1,:,:,2]</span> when <span class="code"><em>a</em></span>’s rank is <span class="code">4</span>, but like <span class="code"><em>a</em></span><span class="code">[1,:,:,:,:,2]</span> when <span class="code"><em>a</em></span>’s rank is <span class="code">6</span>.</p>
<p>The following snippets show looping, indexing, and slicing:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">a</code> <code class="o">=</code> <code class="n">np</code><code class="o">.</code><code class="n">arange</code><code class="p">(</code><code class="mi">8</code><code class="p">)</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">a</code></pre>
<pre data-type="programlisting">
<strong>array([0, 1, 2, 3, 4, 5, 6, 7])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">a</code> <code class="o">=</code> <code class="n">a</code><code class="o">.</code><code class="n">reshape</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code><code class="mi">4</code><code class="p">)</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">a</code></pre>
<pre data-type="programlisting">
<strong>array([[0, 1, 2, 3],</strong>
<strong>       [4, 5, 6, 7]])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="nb">print</code><code class="p">(</code><code class="n">a</code><code class="p">[</code><code class="mi">1</code><code class="p">,</code><code class="mi">2</code><code class="p">])</code></pre>
<pre data-type="programlisting">
<strong>6</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">a</code><code class="p">[:,:</code><code class="mi">2</code><code class="p">]</code></pre>
<pre data-type="programlisting">
<strong>array([[0, 1],</strong>
<strong>       [4, 5]])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="k">for</code> <code class="n">row</code> <code class="ow">in</code> <code class="n">a</code><code class="p">:</code>
<code class="o">...</code>     <code class="nb">print</code><code class="p">(</code><code class="n">row</code><code class="p">)</code>
<code class="o">...</code></pre>
<pre data-type="programlisting">
<strong>[0 1 2 3]</strong>
<strong>[4 5 6 7]</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="k">for</code><code> </code><code class="n">row</code><code> </code><code class="ow">in</code><code> </code><code class="n">a</code><code class="p">:</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>     </code><code class="k">for</code><code> </code><code class="n">col</code><code> </code><code class="ow">in</code><code> </code><code class="n">row</code><code class="p">[</code><code class="p">:</code><code class="mi">2</code><code class="p">]</code><code class="p">:</code><code>  </code><em><code class="c1"># first two items in each row</code></em><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code><code>         </code><code class="nb">print</code><code class="p">(</code><code class="n">col</code><code class="p">)</code><code>
</code><code class="o">.</code><code class="o">.</code><code class="o">.</code></pre>
<pre data-type="programlisting">
<strong>0</strong>
<strong>1</strong>
<strong>4</strong>
<strong>5</strong></pre>
</div></section>
<section data-pdf-bookmark="Matrix operations in NumPy" data-type="sect3"><div class="sect3" id="matrix_operations_in_numpy">
<h3>Matrix operations in NumPy</h3>
<p>As<a contenteditable="false" data-primary="matrix multiplication" data-type="indexterm" id="idm44924496929216"/> mentioned in <a data-type="xref" href="#the_operator_module">“The operator Module”</a>, NumPy implements the operator <span class="code">@</span> for matrix multiplication of arrays. <span class="code"><em>a1</em></span> <span class="code">@</span> <span class="code"><em>a2</em></span> is like <span class="code">np.matmul(<em>a1</em>,</span> <span class="code"><em>a2</em></span><span class="code">)</span>. When both matrices are two-dimensional, they’re treated as conventional matrices. When one argument is a vector, you conceptually promote it to a two-dimensional array, as if by temporarily appending or prepending a <span class="code">1</span>, as needed, to its shape. Do not use <span class="code">@</span> with a scalar; use <span class="code">*</span> instead. Matrices also allow addition (using <span class="code">+</span>) with a scalar, as well as with vectors and other matrices of compatible shapes. Dot product is also available for matrices, using <span class="code">np.dot(<em>a1</em>,</span> <span class="code"><em>a2</em></span><span class="code">)</span>. A few simple examples of these operators follow:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">a</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">arange</code><code class="p">(</code><code class="mi">6</code><code class="p">)</code><code class="o">.</code><code class="n">reshape</code><code class="p">(</code><code class="mi">2</code><code class="p">,</code><code class="mi">3</code><code class="p">)</code><code>  </code><em><code class="c1"># a 2D matrix</code></em><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">b</code><code> </code><code class="o">=</code><code> </code><code class="n">np</code><code class="o">.</code><code class="n">arange</code><code class="p">(</code><code class="mi">3</code><code class="p">)</code><code>               </code><em><code class="c1"># a vector</code></em><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">a</code></pre>
<pre data-type="programlisting">
<strong>array([[0, 1, 2],</strong>
<strong>       [3, 4, 5]])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">a</code><code> </code><code class="o">+</code><code> </code><code class="mi">1</code><code>    </code><em><code class="c1"># adding a scalar</code></em></pre>
<pre data-type="programlisting">
<strong>array([[1, 2, 3],</strong>
<strong>       [4, 5, 6]])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">a</code><code> </code><code class="o">+</code><code> </code><code class="n">b</code><code>    </code><em><code class="c1"># adding a vector</code></em></pre>
<pre data-type="programlisting">
<strong>array([[0, 2, 4],</strong>
<strong>       [3, 5, 7]])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">a</code><code> </code><code class="o">*</code><code> </code><code class="mi">2</code><code>    </code><em><code class="c1"># multiplying by a scalar</code></em></pre>
<pre data-type="programlisting">
<strong>array([[ 0,  2,  4],</strong>
<strong>       [ 6,  8, 10]])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">a</code><code> </code><code class="o">*</code><code> </code><code class="n">b</code><code>    </code><em><code class="c1"># multiplying by a vector</code></em></pre>
<pre data-type="programlisting">
<strong>array([[ 0,  1,  4],</strong>
<strong>       [ 0,  4, 10]])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">a</code><code> </code><code class="o">@</code><code> </code><code class="n">b</code><code>    </code><em><code class="c1"># matrix-multiplying by a vector</code></em></pre>
<pre data-type="programlisting">
<strong>array([ 5, 14])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">c</code><code> </code><code class="o">=</code><code> </code><code class="p">(</code><code class="n">a</code><code class="o">*</code><code class="mi">2</code><code class="p">)</code><code class="o">.</code><code class="n">reshape</code><code class="p">(</code><code class="mi">3</code><code class="p">,</code><code class="mi">2</code><code class="p">)</code><code>  </code><em><code class="c1"># using scalar multiplication to create</code></em><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">c</code></pre>
<pre data-type="programlisting">
<strong>array([[ 0,  2],</strong>
<strong>       [ 4,  6],</strong>
<strong>       [ 8, 10]])</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">a</code><code> </code><code class="o">@</code><code> </code><code class="n">c</code><code>    </code><em><code class="c1"># matrix-multiplying two 2D matrices</code></em></pre>
<pre data-type="programlisting">
<strong>array([[20, 26],</strong>
<strong>       [56, 80]])</strong></pre>
<p>NumPy is rich and powerful enough to warrant whole books of its own; we have only touched on a few details. See the NumPy <a href="https://oreil.ly/UceLt">documentation</a> for extensive coverage of its many, many features.<a contenteditable="false" data-primary="" data-startref="numpy16" data-type="indexterm" id="idm44924496622464"/></p>
</div></section>
<section data-pdf-bookmark="SciPy" data-type="sect3"><div class="sect3" id="scipy">
<h3>SciPy</h3>
<p>Whereas<a contenteditable="false" data-primary="SciPy" data-type="indexterm" id="idm44924496619792"/> NumPy contains classes and functions for handling arrays, the SciPy library supports more advanced numeric computation. For example, while NumPy provides a few linear algebra methods, SciPy provides advanced decomposition methods and supports more advanced functions, such as allowing a second matrix argument for solving generalized eigenvalue problems. In general, when you are doing advanced numeric computation, it’s a good idea to install both SciPy and NumPy.</p>
<p><a href="https://oreil.ly/WO3ON">SciPy.org</a> also hosts <a href="https://oreil.ly/zf6-O">docs</a> for a number of other packages, which are integrated with SciPy and NumPy, including <a href="https://matplotlib.org">Matplotlib</a>, which provides 2D plotting support; <a href="https://oreil.ly/fbfld">SymPy</a>, which supports symbolic mathematics; <a href="http://jupyter.org">Jupyter Notebook</a>, a powerful interactive console shell and web application kernel; and <a href="https://pandas.pydata.org">Pandas</a>, which supports data analysis and modeling. You may also want to take a look at <a href="https://mpmath.org"><span class="code">mpmath</span></a>, for arbitrary precision, and <a href="https://www.sagemath.org"><span class="code">sagemath</span></a>, for even richer functionality.</p>
</div></section>
<section data-pdf-bookmark="Additional numeric packages" data-type="sect3"><div class="sect3" id="additional_numeric_packages">
<h3>Additional numeric packages</h3>
<p>The Python community has produced many more packages in the field of numeric processing. A few of them are:</p>
<dl>
<dt><a href="https://www.anaconda.com">Anaconda</a></dt>
<dd>A<a contenteditable="false" data-primary="Anaconda" data-type="indexterm" id="idm44924496588368"/> consolidated environment that simplifies the installation of Pandas, NumPy, and many related numerical processing, analytical, and visualization packages, and provides package management via its own <span class="code">conda</span> package installer.</dd>
<dt class="plain"><a href="https://pypi.org/project/gmpy2"><span class="code">gmpy2</span></a></dt>
<dd>A<a contenteditable="false" data-primary="gmpy2" data-type="indexterm" id="idm44924496584896"/> module<sup><a data-type="noteref" href="ch16.xhtml#ch01fn124" id="ch01fn124-marker">3</a></sup> that supports the GMP/MPIR, MPFR, and MPC libraries, to extend and accelerate Python’s abilities for multiple-precision arithmetic.</dd>
<dt><a href="https://numba.pydata.org">Numba</a></dt>
<dd>A<a contenteditable="false" data-primary="Numba" data-type="indexterm" id="idm44924496581728"/> just-in-time compiler to convert Numba-decorated Python functions and NumPy code to LLVM. Numba-compiled numerical algorithms in Python can approach the speeds of C or FORTRAN.</dd>
<dt><a href="https://pytorch.org">PyTorch</a></dt>
<dd>An<a contenteditable="false" data-primary="PyTorch" data-type="indexterm" id="idm44924496579200"/> open source machine learning framework.</dd>
<dt><a href="https://www.tensorflow.org/api_docs/python">TensorFlow</a></dt>
<dd>A<a contenteditable="false" data-primary="TensorFlow" data-type="indexterm" id="idm44924496576640"/> comprehensive machine learning platform that operates at large scale and in mixed environments, using dataflow graphs to represent computation, shared state, and state manipulation operations. TensorFlow supports processing across multiple machines in a cluster, and within-machine across multicore CPUs, GPUs, and custom-designed ASICs. TensorFlow’s main API uses Python.<a contenteditable="false" data-primary="" data-startref="NParray16" data-type="indexterm" id="idm44924496575376"/><a contenteditable="false" data-primary="" data-startref="arpro16" data-type="indexterm" id="idm44924496574000"/></dd>
</dl>
</div></section>
</div></section>
</div></section>
<div data-type="footnotes"><p data-type="footnote" id="ch01fn122"><sup><a href="ch16.xhtml#ch01fn122-marker">1</a></sup> Superseded, technically, by the more recent, very similar standard <a href="https://oreil.ly/qL5nI">754-2008</a>, but practically still useful!</p><p data-type="footnote" id="ch01fn123"><sup><a href="ch16.xhtml#ch01fn123-marker">2</a></sup> Python and the NumPy project have worked closely together for many years, with Python introducing language features specifically for NumPy (such as the <span class="code">@</span> operator and extended slicing) even though such novel language features are not (yet?) used anywhere in the Python standard library.</p><p data-type="footnote" id="ch01fn124"><sup><a href="ch16.xhtml#ch01fn124-marker">3</a></sup> Originally derived from the work of one of this book’s authors.</p></div></div></section></div></body></html>