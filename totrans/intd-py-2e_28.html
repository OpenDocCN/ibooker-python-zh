<html><head></head><body><section data-pdf-bookmark="Appendix D. Answers to Exercises" data-type="appendix" epub:type="appendix"><div class="appendix" id="app_answers">&#13;
<h1><span class="label">Appendix D. </span>Answers to Exercises</h1>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="1. A Taste of Py" data-type="sect1"><div class="sect1" id="idm45794958973176">&#13;
<h1>1. A Taste of Py</h1>&#13;
&#13;
<p>1.1&#13;
<a data-primary="Python (generally)" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794958971544"/>If you don’t already have Python 3 installed on your computer,&#13;
do it now.&#13;
Read <a data-type="xref" href="app02.html#app_install">Appendix B</a> for the details&#13;
for your computer system.</p>&#13;
&#13;
<p>1.2&#13;
Start the Python 3 interactive interpreter.&#13;
Again, details are in <a data-type="xref" href="app02.html#app_install">Appendix B</a>.&#13;
It should print a few lines about itself and then&#13;
a single line starting with <code>&gt;&gt;&gt;</code>.&#13;
That’s your prompt to type Python commands.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958967784">&#13;
<h5/>&#13;
<p>Here’s what it looks like on my Mac:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="go">$ python</code>&#13;
<code class="go">Python 3.7.3 (v3.7.3:ef4ec6ed12, Mar 25 2019, 16:39:00)</code>&#13;
<code class="go">[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin</code>&#13;
<code class="go">Type "help", "copyright", "credits" or "license" for more information.</code>&#13;
<code class="go">&gt;&gt;&gt;</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>1.3&#13;
Play with the interpreter a little.&#13;
Use it like a calculator and type this:&#13;
<code>8 * 9</code>.&#13;
Press the Enter key to see the result.&#13;
Python should print <code>72</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958946536">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="mi">8</code> <code class="o">*</code> <code class="mi">9</code>&#13;
<code class="go">72</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>1.4&#13;
Type the number&#13;
<code>47</code> and press the Enter key.&#13;
Did it print 47 for you on the next line?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958964504">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="mi">47</code>&#13;
<code class="go">47</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>1.5&#13;
Now type <code>print(47)</code> and press Enter.&#13;
Did that also print 47 for you on the next line?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958958696">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="mi">47</code><code class="p">)</code>&#13;
<code class="go">47</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="2. Data: Types, Values, Variables, and Names" data-type="sect1"><div class="sect1" id="idm45794958972568">&#13;
<h1>2. Data: Types, Values, Variables, and Names</h1>&#13;
&#13;
<p>2.1&#13;
<a data-primary="types" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794958865304"/>Assign the integer value <code>99</code> to the variable <code>prince</code>,&#13;
and print it.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958914728">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">prince</code> <code class="o">=</code> <code class="mi">99</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">prince</code><code class="p">)</code>&#13;
<code class="go">99</code>&#13;
<code class="go">&gt;&gt;&gt;</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>2.2&#13;
What type is the value <code>5</code>?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958841992">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="nb">type</code><code class="p">(</code><code class="mi">5</code><code class="p">)</code>&#13;
<code class="go">&lt;class 'int'&gt;</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>2.3&#13;
What type is the value <code>2.0</code>?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958779016">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="nb">type</code><code class="p">(</code><code class="mf">2.0</code><code class="p">)</code>&#13;
<code class="go">&lt;class 'float'&gt;</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>2.4&#13;
What type is the expression <code>5 + 2.0</code>?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958804360">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="nb">type</code><code class="p">(</code><code class="mi">5</code> <code class="o">+</code> <code class="mf">2.0</code><code class="p">)</code>&#13;
<code class="go">&lt;class 'float'&gt;</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="3. Numbers" data-type="sect1"><div class="sect1" id="idm45794958814440">&#13;
<h1>3. Numbers</h1>&#13;
&#13;
<p>3.1&#13;
<a data-primary="numbers" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794958813000"/>How many seconds are in an hour?&#13;
Use the interactive interpreter as a calculator&#13;
and multiply the number of seconds in a minute (<code>60</code>)&#13;
by the number of minutes in an&#13;
hour (also <code>60</code>).</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958755640">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="mi">60</code> <code class="o">*</code> <code class="mi">60</code>&#13;
<code class="go">3600</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>3.2&#13;
Assign the result from the previous task (seconds in an hour)&#13;
to a variable called&#13;
<code>seconds_per_hour</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958686168">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">seconds_per_hour</code> <code class="o">=</code> <code class="mi">60</code> <code class="o">*</code> <code class="mi">60</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">seconds_per_hour</code>&#13;
<code class="go">3600</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>3.3&#13;
How many seconds are in a day?&#13;
Use your <code>seconds_per_hour</code> variable.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958698152">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">seconds_per_hour</code> <code class="o">*</code> <code class="mi">24</code>&#13;
<code class="go">86400</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>3.4&#13;
Calculate seconds per day again,&#13;
but this time save the result in a variable called&#13;
<code>seconds_per_day</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958694552">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">seconds_per_day</code> <code class="o">=</code> <code class="n">seconds_per_hour</code> <code class="o">*</code> <code class="mi">24</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">seconds_per_day</code>&#13;
<code class="go">86400</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>3.5&#13;
Divide <code>seconds_per_day</code> by <code>seconds_per_hour</code>.&#13;
Use floating-point (<code>/</code>) division.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958630600">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">seconds_per_day</code> <code class="o">/</code> <code class="n">seconds_per_hour</code>&#13;
<code class="go">24.0</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>3.6&#13;
Divide <code>seconds_per_day</code> by <code>seconds_per_hour</code>,&#13;
using integer (<code>//</code>) division.&#13;
Did this number agree with the floating-point value&#13;
from the previous question, aside from the final <code>.0</code>?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958603784">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">seconds_per_day</code> <code class="o">//</code> <code class="n">seconds_per_hour</code>&#13;
<code class="go">24</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="4. Choose with if" data-type="sect1"><div class="sect1" id="idm45794958813848">&#13;
<h1>4. Choose with if</h1>&#13;
&#13;
<p>4.1&#13;
<a data-primary="code structures" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794958565448"/>Choose a number between 1 and 10&#13;
and assign it to the variable <code>secret</code>.&#13;
Then, select another number between 1 and 10&#13;
and assign it to the variable <code>guess</code>.&#13;
Next, write the conditional tests&#13;
(<code>if</code>, <code>else</code>, and <code>elif</code>)&#13;
to print the string <code>'too low'</code>&#13;
if <code>guess</code> is less than <code>secret</code>,&#13;
<code>'too high'</code> if greater than <code>secret</code>,&#13;
and <code>'just right'</code> if equal to <code>secret</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958597784">&#13;
<h5/>&#13;
<p>Did you choose <code>7</code> for <code>secret</code>?&#13;
I bet a lot of people do,&#13;
because there’s something about <code>7</code>.</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">secret</code> <code class="o">=</code> <code class="mi">7</code>&#13;
<code class="n">guess</code> <code class="o">=</code> <code class="mi">5</code>&#13;
<code class="k">if</code> <code class="n">guess</code> <code class="o">&lt;</code> <code class="n">secret</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s1">'too low'</code><code class="p">)</code>&#13;
<code class="k">elif</code> <code class="n">guess</code> <code class="o">&gt;</code> <code class="n">secret</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s1">'too high'</code><code class="p">)</code>&#13;
<code class="k">else</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s1">'just right'</code><code class="p">)</code></pre>&#13;
&#13;
<p>Run this program and you should see the following:</p>&#13;
&#13;
<pre data-type="programlisting">too low</pre>&#13;
</div></aside>&#13;
&#13;
<p>4.2&#13;
Assign <code>True</code> or <code>False</code> to the variables&#13;
<code>small</code> and <code>green</code>.&#13;
Write some <code>if</code>/<code>else</code> statements to&#13;
print which of these matches those choices:&#13;
cherry, pea, watermelon, <span class="keep-together">pumpkin.</span></p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958500584">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">small</code> <code class="o">=</code> <code class="bp">False</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">green</code> <code class="o">=</code> <code class="bp">True</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">if</code> <code class="n">small</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">if</code> <code class="n">green</code><code class="p">:</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"pea"</code><code class="p">)</code>&#13;
<code class="gp">... </code>    <code class="k">else</code><code class="p">:</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"cherry"</code><code class="p">)</code>&#13;
<code class="gp">... </code><code class="k">else</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">if</code> <code class="n">green</code><code class="p">:</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"watermelon"</code><code class="p">)</code>&#13;
<code class="gp">... </code>    <code class="k">else</code><code class="p">:</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"pumpkin"</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">watermelon</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="5. Text Strings" data-type="sect1"><div class="sect1" id="idm45794958430296">&#13;
<h1>5. Text Strings</h1>&#13;
&#13;
<p>5.1&#13;
<a data-primary="strings" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc0"/>Capitalize the word starting with <code>m</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">song</code> <code class="o">=</code> <code class="s">"""When an eel grabs your arm,</code>&#13;
<code class="gp">... </code><code class="s">And it causes great harm,</code>&#13;
<code class="gp">... </code><code class="s">That's - a moray!"""</code></pre>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958349656">&#13;
<h5/>&#13;
<p>Don’t forget the space before the <code>m</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">song</code> <code class="o">=</code> <code class="s">"""When an eel grabs your arm,</code>&#13;
<code class="gp">... </code><code class="s">And it causes great harm,</code>&#13;
<code class="gp">... </code><code class="s">That's - a moray!"""</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">song</code> <code class="o">=</code> <code class="n">song</code><code class="o">.</code><code class="n">replace</code><code class="p">(</code><code class="s">" m"</code><code class="p">,</code> <code class="s">" M"</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">song</code><code class="p">)</code>&#13;
<code class="go">When an eel grabs your arm,</code>&#13;
<code class="go">And it causes great harm,</code>&#13;
<code class="go">That's - a Moray!</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>5.2&#13;
Print each list question with its correctly matching answer,&#13;
in the form:</p>&#13;
&#13;
<p>Q: <em>question</em><br/>&#13;
A: <em>answer</em></p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">questions</code> <code class="o">=</code> <code class="p">[</code>&#13;
<code class="gp">... </code>    <code class="s">"We don't serve strings around here. Are you a string?"</code><code class="p">,</code>&#13;
<code class="gp">... </code>    <code class="s">"What is said on Father's Day in the forest?"</code><code class="p">,</code>&#13;
<code class="gp">... </code>    <code class="s">"What makes the sound 'Sis! Boom! Bah!'?"</code>&#13;
<code class="gp">... </code>    <code class="p">]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">answers</code> <code class="o">=</code> <code class="p">[</code>&#13;
<code class="gp">... </code>    <code class="s">"An exploding sheep."</code><code class="p">,</code>&#13;
<code class="gp">... </code>    <code class="s">"No, I'm a frayed knot."</code><code class="p">,</code>&#13;
<code class="gp">... </code>    <code class="s">"'Pop!' goes the weasel."</code>&#13;
<code class="gp">... </code>    <code class="p">]</code></pre>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958315176">&#13;
<h5/>&#13;
<p>You could print each item in <code>questions</code> with its&#13;
mate from <code>answers</code> in many ways.&#13;
Let’s try a tuple sandwich (tuples in a tuple)&#13;
to pair them,&#13;
and tuple unpacking to retrieve them for printing:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">questions</code> <code class="o">=</code> <code class="p">[</code>&#13;
    <code class="s2">"We don't serve strings around here. Are you a string?"</code><code class="p">,</code>&#13;
    <code class="s2">"What is said on Father's Day in the forest?"</code><code class="p">,</code>&#13;
    <code class="s2">"What makes the sound 'Sis! Boom! Bah!'?"</code>&#13;
    <code class="p">]</code>&#13;
<code class="n">answers</code> <code class="o">=</code> <code class="p">[</code>&#13;
    <code class="s2">"An exploding sheep."</code><code class="p">,</code>&#13;
    <code class="s2">"No, I'm a frayed knot."</code><code class="p">,</code>&#13;
    <code class="s2">"'Pop!' goes the weasel."</code>&#13;
    <code class="p">]</code>&#13;
&#13;
<code class="n">q_a</code> <code class="o">=</code> <code class="p">(</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="mi">1</code><code class="p">),</code> <code class="p">(</code><code class="mi">1</code><code class="p">,</code><code class="mi">2</code><code class="p">),</code> <code class="p">(</code><code class="mi">2</code><code class="p">,</code> <code class="mi">0</code><code class="p">)</code> <code class="p">)</code>&#13;
<code class="k">for</code> <code class="n">q</code><code class="p">,</code> <code class="n">a</code> <code class="ow">in</code> <code class="n">q_a</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"Q:"</code><code class="p">,</code> <code class="n">questions</code><code class="p">[</code><code class="n">q</code><code class="p">])</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"A:"</code><code class="p">,</code> <code class="n">answers</code><code class="p">[</code><code class="n">a</code><code class="p">])</code>&#13;
    <code class="k">print</code><code class="p">()</code></pre>&#13;
&#13;
<p>Output:</p>&#13;
<pre>$ <strong>python qanda.py</strong>&#13;
Q: We don't serve strings around here. Are you a string?&#13;
A: No, I'm a frayed knot.&#13;
&#13;
Q: What is said on Father's Day in the forest?&#13;
A: 'Pop!' goes the weasel.&#13;
&#13;
Q: What makes the sound 'Sis! Boom! Bah!'?&#13;
A: An exploding sheep.&#13;
</pre>&#13;
</div></aside>&#13;
&#13;
<p>5.3&#13;
Write the following poem by using old-style formatting.&#13;
Substitute the strings&#13;
<code>'roast beef'</code>, <code>'ham'</code>, <code>'head'</code>, and <code>'clam'</code>&#13;
into this string:</p>&#13;
&#13;
<pre data-type="programlisting">My kitty cat likes %s,&#13;
My kitty cat likes %s,&#13;
My kitty cat fell on his %s&#13;
And now thinks he's a %s.</pre>&#13;
<aside class="pagebreak-before" data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958156312">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">poem</code> <code class="o">=</code> <code class="s">'''</code>&#13;
<code class="gp">... </code><code class="s">My kitty cat likes </code><code class="si">%s</code><code class="s">,</code>&#13;
<code class="gp">... </code><code class="s">My kitty cat likes </code><code class="si">%s</code><code class="s">,</code>&#13;
<code class="gp">... </code><code class="s">My kitty cat fell on his </code><code class="si">%s</code><code class="s"/>&#13;
<code class="gp">... </code><code class="s">And now thinks he's a </code><code class="si">%s</code><code class="s">.</code>&#13;
<code class="gp">... </code><code class="s">'''</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">args</code> <code class="o">=</code> <code class="p">(</code><code class="s">'roast beef'</code><code class="p">,</code> <code class="s">'ham'</code><code class="p">,</code> <code class="s">'head'</code><code class="p">,</code> <code class="s">'clam'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">poem</code> <code class="o">%</code> <code class="n">args</code><code class="p">)</code>&#13;
&#13;
<code class="go">My kitty cat likes roast beef,</code>&#13;
<code class="go">My kitty cat likes ham,</code>&#13;
<code class="go">My kitty cat fell on his head</code>&#13;
<code class="go">And now thinks he's a clam.</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>5.4&#13;
Write a form letter by using new-style formatting.&#13;
Save the following string as <code>letter</code>&#13;
(you’ll use it in the next exercise):</p>&#13;
&#13;
<pre data-type="programlisting">Dear {salutation} {name},&#13;
&#13;
Thank you for your letter. We are sorry that our {product}&#13;
{verbed} in your {room}. Please note that it should never&#13;
be used in a {room}, especially near any {animals}.&#13;
&#13;
Send us your receipt and {amount} for shipping and handling.&#13;
We will send you another {product} that, in our tests,&#13;
is {percent}% less likely to have {verbed}.&#13;
&#13;
Thank you for your support.&#13;
&#13;
Sincerely,&#13;
{spokesman}&#13;
{job_title}</pre>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958050104">&#13;
<h5/>&#13;
<pre data-code-language="python" data-type="programlisting"><code class="o">&gt;&gt;&gt;</code> <code class="n">letter</code> <code class="o">=</code> <code class="s1">'''</code>&#13;
<code class="s1">... Dear {salutation} {name},</code>&#13;
<code class="s1">...</code>&#13;
<code class="s1">... Thank you for your letter. We are sorry that our {product}</code>&#13;
<code class="s1">... {verbed} in your {room}. Please note that it should never</code>&#13;
<code class="s1">... be used in a {room}, especially near any {animals}.</code>&#13;
<code class="s1">...</code>&#13;
<code class="s1">... Send us your receipt and {amount} for shipping and handling.</code>&#13;
<code class="s1">... We will send you another {product} that, in our tests,</code>&#13;
<code class="s1">... is {percent}</code><code class="si">% le</code><code class="s1">ss likely to have {verbed}.</code>&#13;
<code class="s1">...</code>&#13;
<code class="s1">... Thank you for your support.</code>&#13;
<code class="s1">...</code>&#13;
<code class="s1">... Sincerely,</code>&#13;
<code class="s1">... {spokesman}</code>&#13;
<code class="s1">... {job_title}</code>&#13;
<code class="s1">... '''</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>5.5&#13;
Assign values to variable strings named&#13;
<code>'salutation'</code>, <code>'name'</code>, <code>'product'</code>,&#13;
<code>'verbed'</code> (past tense verb),&#13;
<code>'room'</code>, <code>'animals'</code>, <code>'percent'</code>,&#13;
<code>'spokesman'</code>, and <code>'job_title'</code>.&#13;
Print <code>letter</code> with these values,&#13;
using <code>letter.format()</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794958113144">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">print</code> <code class="p">(</code>&#13;
<code class="gp">... </code>    <code class="n">letter</code><code class="o">.</code><code class="n">format</code><code class="p">(</code><code class="n">salutation</code><code class="o">=</code><code class="s">'Ambassador'</code><code class="p">,</code>&#13;
<code class="gp">... </code>                  <code class="n">name</code><code class="o">=</code><code class="s">'Nibbler'</code><code class="p">,</code>&#13;
<code class="gp">... </code>                  <code class="n">product</code><code class="o">=</code><code class="s">'pudding'</code><code class="p">,</code>&#13;
<code class="gp">... </code>                  <code class="n">verbed</code><code class="o">=</code><code class="s">'evaporated'</code><code class="p">,</code>&#13;
<code class="gp">... </code>                  <code class="n">room</code><code class="o">=</code><code class="s">'gazebo'</code><code class="p">,</code>&#13;
<code class="gp">... </code>                  <code class="n">animals</code><code class="o">=</code><code class="s">'octothorpes'</code><code class="p">,</code>&#13;
<code class="gp">... </code>                  <code class="n">amount</code><code class="o">=</code><code class="s">'$1.99'</code><code class="p">,</code>&#13;
<code class="gp">... </code>                  <code class="n">percent</code><code class="o">=</code><code class="mi">88</code><code class="p">,</code>&#13;
<code class="gp">... </code>                  <code class="n">spokesman</code><code class="o">=</code><code class="s">'Shirley Iugeste'</code><code class="p">,</code>&#13;
<code class="gp">... </code>                  <code class="n">job_title</code><code class="o">=</code><code class="s">'I Hate This Job'</code><code class="p">)</code>&#13;
<code class="gp">... </code>    <code class="p">)</code>&#13;
&#13;
<code class="go">Dear Ambassador Nibbler,</code>&#13;
&#13;
<code class="go">Thank you for your letter. We are sorry that our pudding</code>&#13;
<code class="go">evaporated in your gazebo. Please note that it should never</code>&#13;
<code class="go">be used in a gazebo, especially near any octothorpes.</code>&#13;
&#13;
<code class="go">Send us your receipt and $1.99 for shipping and handling.</code>&#13;
<code class="go">We will send you another pudding that, in our tests,</code>&#13;
<code class="go">is 88% less likely to have evaporated.</code>&#13;
&#13;
<code class="go">Thank you for your support.</code>&#13;
&#13;
<code class="go">Sincerely,</code>&#13;
<code class="go">Shirley Iugeste</code>&#13;
<code class="go">I Hate This Job</code></pre>&#13;
</div></aside>&#13;
&#13;
<p class="pagebreak-before">5.6&#13;
After public polls to name things, a pattern emerged:&#13;
an English submarine (Boaty McBoatface),&#13;
an Australian racehorse (Horsey McHorseface),&#13;
and a Swedish train (Trainy McTrainface).&#13;
Use <code>%</code> formatting to print the winning name at the state fair&#13;
for a prize duck, gourd, and spitz.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957886808">&#13;
<h5/><div data-type="example">&#13;
<h5><span class="label">Example D-1. </span>mcnames1.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">names</code> <code class="o">=</code> <code class="p">[</code><code class="s2">"duck"</code><code class="p">,</code> <code class="s2">"gourd"</code><code class="p">,</code> <code class="s2">"spitz"</code><code class="p">]</code>&#13;
<code class="k">for</code> <code class="n">name</code> <code class="ow">in</code> <code class="n">names</code><code class="p">:</code>&#13;
    <code class="n">cap_name</code> <code class="o">=</code> <code class="n">name</code><code class="o">.</code><code class="n">capitalize</code><code class="p">()</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"</code><code class="si">%s</code><code class="s2">y Mc</code><code class="si">%s</code><code class="s2">face"</code> <code class="o">%</code> <code class="p">(</code><code class="n">cap_name</code><code class="p">,</code> <code class="n">cap_name</code><code class="p">))</code></pre></div>&#13;
&#13;
<p>Output:</p>&#13;
&#13;
<pre data-type="programlisting">Ducky McDuckface&#13;
Gourdy McGourdface&#13;
Spitzy McSpitzface</pre>&#13;
</div></aside>&#13;
&#13;
<p>5.7&#13;
Do the same, with <code>format()</code> formatting.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957850088">&#13;
<h5/><div data-type="example">&#13;
<h5><span class="label">Example D-2. </span>mcnames2.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">names</code> <code class="o">=</code> <code class="p">[</code><code class="s2">"duck"</code><code class="p">,</code> <code class="s2">"gourd"</code><code class="p">,</code> <code class="s2">"spitz"</code><code class="p">]</code>&#13;
<code class="k">for</code> <code class="n">name</code> <code class="ow">in</code> <code class="n">names</code><code class="p">:</code>&#13;
    <code class="n">cap_name</code> <code class="o">=</code> <code class="n">name</code><code class="o">.</code><code class="n">capitalize</code><code class="p">()</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"{}y Mc{}face"</code><code class="o">.</code><code class="n">format</code><code class="p">(</code><code class="n">cap_name</code><code class="p">,</code> <code class="n">cap_name</code><code class="p">))</code></pre></div>&#13;
</div></aside>&#13;
&#13;
<p>5.8&#13;
Once more, with feeling, and <em>f strings</em>.<a data-startref="ix_appD-answers-asciidoc0" data-type="indexterm" id="idm45794957768744"/></p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957768008">&#13;
<h5/><div data-type="example">&#13;
<h5><span class="label">Example D-3. </span>mcnames3.py</h5>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">names</code> <code class="o">=</code> <code class="p">[</code><code class="s2">"duck"</code><code class="p">,</code> <code class="s2">"gourd"</code><code class="p">,</code> <code class="s2">"spitz"</code><code class="p">]</code>&#13;
<code class="k">for</code> <code class="n">name</code> <code class="ow">in</code> <code class="n">names</code><code class="p">:</code>&#13;
    <code class="n">cap_name</code> <code class="o">=</code> <code class="n">name</code><code class="o">.</code><code class="n">capitalize</code><code class="p">()</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"{cap_name}y Mc{cap_name}face"</code><code class="p">)</code></pre></div>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section class="pagebreak-before less_space" data-pdf-bookmark="6. Loop with while and for" data-type="sect1"><div class="sect1" id="idm45794958392776">&#13;
<h1>6. Loop with while and for</h1>&#13;
&#13;
<p>6.1&#13;
<a data-primary="loops" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc1"/>Use a <code>for</code> loop to print the values of the list <code>[3, 2, 1, 0]</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957717080">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">value</code> <code class="ow">in</code> <code class="p">[</code><code class="mi">3</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">1</code><code class="p">,</code> <code class="mi">0</code><code class="p">]:</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">value</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">3</code>&#13;
<code class="go">2</code>&#13;
<code class="go">1</code>&#13;
<code class="go">0</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>6.2&#13;
Assign the value <code>7</code> to the variable <code>guess_me</code>,&#13;
and the value <code>1</code> to the variable <code>number</code>.&#13;
Write a <code>while</code> loop that compares <code>number</code> with <code>guess_me</code>.&#13;
Print <code>'too low'</code> if <code>number</code> is less than <code>guess me</code>.&#13;
If <code>number</code> equals <code>guess_me</code>,&#13;
print <code>'found it!'</code> and then exit the loop.&#13;
If <code>number</code> is greater than <code>guess_me</code>,&#13;
print <code>'oops'</code> and then exit the loop.&#13;
Increment <code>number</code> at the end of the loop.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957695944">&#13;
<h5/>&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">guess_me</code> <code class="o">=</code> <code class="mi">7</code>&#13;
<code class="n">number</code> <code class="o">=</code> <code class="mi">1</code>&#13;
<code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
    <code class="k">if</code> <code class="n">number</code> <code class="o">&lt;</code> <code class="n">guess_me</code><code class="p">:</code>&#13;
        <code class="k">print</code><code class="p">(</code><code class="s1">'too low'</code><code class="p">)</code>&#13;
    <code class="k">elif</code> <code class="n">number</code> <code class="o">==</code> <code class="n">guess_me</code><code class="p">:</code>&#13;
        <code class="k">print</code><code class="p">(</code><code class="s1">'found it!'</code><code class="p">)</code>&#13;
        <code class="k">break</code>&#13;
    <code class="k">elif</code> <code class="n">number</code> <code class="o">&gt;</code> <code class="n">guess_me</code><code class="p">:</code>&#13;
        <code class="k">print</code><code class="p">(</code><code class="s1">'oops'</code><code class="p">)</code>&#13;
        <code class="k">break</code>&#13;
    <code class="n">number</code> <code class="o">+=</code> <code class="mi">1</code></pre>&#13;
&#13;
<p>If you did this right, you should see this:</p>&#13;
&#13;
<pre data-type="programlisting">too low&#13;
too low&#13;
too low&#13;
too low&#13;
too low&#13;
too low&#13;
found it!</pre>&#13;
&#13;
<p>Notice that the <code>elif start &gt; guess_me:</code>&#13;
line could have been a simple <code>else:</code>,&#13;
because if <code>start</code> is not less than or equal to <code>guess_me</code>,&#13;
it must be greater—at least in this universe.</p>&#13;
</div></aside>&#13;
&#13;
<p>6.3&#13;
Assign the value <code>5</code> to the variable <code>guess_me</code>.&#13;
Use a <code>for</code> loop to iterate&#13;
a variable called <code>number</code> over <code>range(10)</code>.&#13;
If <code>number</code> is less than <code>guess_me</code>, print <code>'too low'</code>.&#13;
If it equals <code>guess_me</code>, print <code>found it!</code> and then break&#13;
out of the for loop.&#13;
If <code>number</code> is greater than <code>guess_me</code>,&#13;
print <code>'oops'</code> and then exit the loop.<a data-startref="ix_appD-answers-asciidoc1" data-type="indexterm" id="idm45794957568056"/></p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957573976">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">guess_me</code> <code class="o">=</code> <code class="mi">5</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">number</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">if</code> <code class="n">number</code> <code class="o">&lt;</code> <code class="n">guess_me</code><code class="p">:</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"too low"</code><code class="p">)</code>&#13;
<code class="gp">... </code>    <code class="k">elif</code> <code class="n">number</code> <code class="o">==</code> <code class="n">guess_me</code><code class="p">:</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"found it!"</code><code class="p">)</code>&#13;
<code class="gp">... </code>        <code class="k">break</code>&#13;
<code class="gp">... </code>    <code class="k">else</code><code class="p">:</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"oops"</code><code class="p">)</code>&#13;
<code class="gp">... </code>        <code class="k">break</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">too low</code>&#13;
<code class="go">too low</code>&#13;
<code class="go">too low</code>&#13;
<code class="go">too low</code>&#13;
<code class="go">too low</code>&#13;
<code class="go">found it!</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="7. Tuples and Lists" data-type="sect1"><div class="sect1" id="idm45794957565336">&#13;
<h1>7. Tuples and Lists</h1>&#13;
&#13;
<p>7.1&#13;
<a data-primary="lists" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc2"/><a data-primary="tuples" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc3"/>Create a list called <code>years_list</code>,&#13;
starting with the year of your birth,&#13;
and each year thereafter until the year of your fifth birthday.&#13;
For example, if you were born in 1980,&#13;
the list would be&#13;
<code>years_list = [1980, 1981, 1982, 1983, 1984, 1985]</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957481752">&#13;
<h5/>&#13;
<p>If you were born in 1980, you would type:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">years_list</code> <code class="o">=</code> <code class="p">[</code><code class="mi">1980</code><code class="p">,</code> <code class="mi">1981</code><code class="p">,</code> <code class="mi">1982</code><code class="p">,</code> <code class="mi">1983</code><code class="p">,</code> <code class="mi">1984</code><code class="p">,</code> <code class="mi">1985</code><code class="p">]</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>7.2&#13;
In which of these years was your third birthday?&#13;
Remember, you were 0 years&#13;
of age for your first year.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957456840">&#13;
<h5/>&#13;
<p>You want offset <code>3</code>. Thus, if you were born in 1980:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">years_list</code><code class="p">[</code><code class="mi">3</code><code class="p">]</code>&#13;
<code class="go">1983</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>7.3&#13;
In which year in <code>years_list</code> were you the oldest?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957449368">&#13;
<h5/>&#13;
<p>You want the last year, so use offset <code>-1</code>.&#13;
You could also say <code>5</code> because you know this list has six items,&#13;
but <code>-1</code> gets the last item from a list of any size.&#13;
For a 1980-vintage person:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">years_list</code><code class="p">[</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code>&#13;
<code class="go">1985</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>7.4&#13;
Make and print a list called&#13;
<code>things</code>&#13;
with these three strings as elements:&#13;
<code class="keep-together">"mozzarella"</code>, <code>"cinderella"</code>, <code>"salmonella"</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957383800">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">things</code> <code class="o">=</code> <code class="p">[</code><code class="s">"mozzarella"</code><code class="p">,</code> <code class="s">"cinderella"</code><code class="p">,</code> <code class="s">"salmonella"</code><code class="p">]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">things</code>&#13;
<code class="go">['mozzarella', 'cinderella', 'salmonella']</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>7.5&#13;
Capitalize the element in&#13;
<code>things</code>&#13;
that refers to a person and then print the list.&#13;
Did it change the element in the list?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957357336">&#13;
<h5/>&#13;
<p>This capitalizes the word but doesn’t change it in the list:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">things</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="n">capitalize</code><code class="p">()</code>&#13;
<code class="go">'Cinderella'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">things</code>&#13;
<code class="go">['mozzarella', 'cinderella', 'salmonella']</code></pre>&#13;
&#13;
<p>If you want to change it in the list, you need to assign it back:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">things</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code> <code class="o">=</code> <code class="n">things</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="n">capitalize</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">things</code>&#13;
<code class="go">['mozzarella', 'Cinderella', 'salmonella']</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>7.6&#13;
Make the cheesy element of&#13;
<code>things</code>&#13;
all uppercase and then print the list.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957309656">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">things</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code> <code class="o">=</code> <code class="n">things</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="o">.</code><code class="n">upper</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">things</code>&#13;
<code class="go">['MOZZARELLA', 'Cinderella', 'salmonella']</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>7.7&#13;
Delete the disease element,&#13;
collect your Nobel Prize, and then print the list.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957248120">&#13;
<h5/>&#13;
<p>This would remove it by value:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">things</code><code class="o">.</code><code class="n">remove</code><code class="p">(</code><code class="s">"salmonella"</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">things</code>&#13;
<code class="go">['MOZZARELLA', 'Cinderella']</code></pre>&#13;
&#13;
<p>Because it was last in the list, the following would have worked also:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">del</code> <code class="n">things</code><code class="p">[</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code></pre>&#13;
&#13;
<p>And you could have deleted by offset from the beginning:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">del</code> <code class="n">things</code><code class="p">[</code><code class="mi">2</code><code class="p">]</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>7.8&#13;
Create a list called&#13;
<code>surprise</code>&#13;
with the elements&#13;
<code>"Groucho"</code>, <code>"Chico"</code>, and <code>"Harpo"</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957139864">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">surprise</code> <code class="o">=</code> <code class="p">[</code><code class="s">'Groucho'</code><code class="p">,</code> <code class="s">'Chico'</code><code class="p">,</code> <code class="s">'Harpo'</code><code class="p">]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">surprise</code>&#13;
<code class="go">['Groucho', 'Chico', 'Harpo']</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>7.9&#13;
Lowercase the last element of the&#13;
<code>surprise</code>&#13;
list, reverse it, and then capitalize it.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957168008">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">surprise</code><code class="p">[</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code> <code class="o">=</code> <code class="n">surprise</code><code class="p">[</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="n">lower</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">surprise</code><code class="p">[</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code> <code class="o">=</code> <code class="n">surprise</code><code class="p">[</code><code class="o">-</code><code class="mi">1</code><code class="p">][::</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">surprise</code><code class="p">[</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="n">capitalize</code><code class="p">()</code>&#13;
<code class="go">'Oprah'</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>7.10&#13;
Use a list comprehension to make a list called <code>even</code>&#13;
of the even numbers in <code>range(10)</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794957022984">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">even</code> <code class="o">=</code> <code class="p">[</code><code class="n">number</code> <code class="k">for</code> <code class="n">number</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code> <code class="k">if</code> <code class="n">number</code> <code class="o">%</code> <code class="mi">2</code> <code class="o">==</code> <code class="mi">0</code><code class="p">]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">even</code>&#13;
<code class="go">[0, 2, 4, 6, 8]</code></pre>&#13;
</div></aside>&#13;
&#13;
<p class="pagebreak-before">7.11&#13;
Let’s create a jumprope rhyme maker.&#13;
You’ll print a series of two-line rhymes.&#13;
Start with this program fragment:</p>&#13;
&#13;
<pre data-type="programlisting">start1 = ["fee", "fie", "foe"]&#13;
rhymes = [&#13;
    ("flop", "get a mop"),&#13;
    ("fope", "turn the rope"),&#13;
    ("fa", "get your ma"),&#13;
    ("fudge", "call the judge"),&#13;
    ("fat", "pet the cat"),&#13;
    ("fog", "walk the dog"),&#13;
    ("fun", "say we're done"),&#13;
    ]&#13;
start2 = "Someone better"</pre>&#13;
&#13;
<p>For each string pair (<code>first</code>, <code>second</code>) in <code>rhymes</code>:</p>&#13;
&#13;
<p>For the first line:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Print each string in <code>start1</code>,&#13;
capitalized and followed by an exclamation point and a space.</p>&#13;
</li>&#13;
<li>&#13;
<p>Print <code>first</code>, also capitalized and&#13;
followed by an exclamation point.</p>&#13;
</li>&#13;
</ul>&#13;
&#13;
<p>For the second line:</p>&#13;
&#13;
<ul>&#13;
<li>&#13;
<p>Print <code>start2</code> and a space.</p>&#13;
</li>&#13;
<li>&#13;
<p>Print <code>second</code> and a period.<a data-startref="ix_appD-answers-asciidoc3" data-type="indexterm" id="idm45794956952216"/><a data-startref="ix_appD-answers-asciidoc2" data-type="indexterm" id="idm45794956951512"/></p>&#13;
</li>&#13;
</ul>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956950488">&#13;
<h5/>&#13;
<pre data-code-language="python" data-type="programlisting"><code class="n">start1</code> <code class="o">=</code> <code class="p">[</code><code class="s2">"fee"</code><code class="p">,</code> <code class="s2">"fie"</code><code class="p">,</code> <code class="s2">"foe"</code><code class="p">]</code>&#13;
<code class="n">rhymes</code> <code class="o">=</code> <code class="p">[</code>&#13;
    <code class="p">(</code><code class="s2">"flop"</code><code class="p">,</code> <code class="s2">"get a mop"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="s2">"fope"</code><code class="p">,</code> <code class="s2">"turn the rope"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="s2">"fa"</code><code class="p">,</code> <code class="s2">"get your ma"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="s2">"fudge"</code><code class="p">,</code> <code class="s2">"call the judge"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="s2">"fat"</code><code class="p">,</code> <code class="s2">"pet the cat"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="s2">"fog"</code><code class="p">,</code> <code class="s2">"pet the dog"</code><code class="p">),</code>&#13;
    <code class="p">(</code><code class="s2">"fun"</code><code class="p">,</code> <code class="s2">"say we're done"</code><code class="p">),</code>&#13;
    <code class="p">]</code>&#13;
<code class="n">start2</code> <code class="o">=</code> <code class="s2">"Someone better"</code>&#13;
<code class="n">start1_caps</code> <code class="o">=</code> <code class="s2">" "</code><code class="o">.</code><code class="n">join</code><code class="p">([</code><code class="n">word</code><code class="o">.</code><code class="n">capitalize</code><code class="p">()</code> <code class="o">+</code> <code class="s2">"!"</code> <code class="k">for</code> <code class="n">word</code> <code class="ow">in</code> <code class="n">start1</code><code class="p">])</code>&#13;
<code class="k">for</code> <code class="n">first</code><code class="p">,</code> <code class="n">second</code> <code class="ow">in</code> <code class="n">rhymes</code><code class="p">:</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"{start1_caps} {first.capitalize()}!"</code><code class="p">)</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">f</code><code class="s2">"{start2} {second}."</code><code class="p">)</code></pre>&#13;
&#13;
<p>Output:</p>&#13;
&#13;
<pre data-type="programlisting">Fee! Fie! Foe! Flop!&#13;
Someone better get a mop.&#13;
Fee! Fie! Foe! Fope!&#13;
Someone better turn the rope.&#13;
Fee! Fie! Foe! Fa!&#13;
Someone better get your ma.&#13;
Fee! Fie! Foe! Fudge!&#13;
Someone better call the judge.&#13;
Fee! Fie! Foe! Fat!&#13;
Someone better pet the cat.&#13;
Fee! Fie! Foe! Fog!&#13;
Someone better walk the dog.&#13;
Fee! Fie! Foe! Fun!&#13;
Someone better say we're done.</pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="8. Dictionaries" data-type="sect1"><div class="sect1" id="idm45794957485992">&#13;
<h1>8. Dictionaries</h1>&#13;
&#13;
<p>8.1&#13;
<a data-primary="dictionaries" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc4"/><a data-primary="sets" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc5"/>Make an English-to-French dictionary called&#13;
<code>e2f</code>&#13;
and print it.&#13;
Here are your starter words:&#13;
<code>dog</code> is <code>chien</code>,&#13;
<code>cat</code> is <code>chat</code>,&#13;
and <code>walrus</code> is <code>morse</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956849112">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">e2f</code> <code class="o">=</code> <code class="p">{</code><code class="s">'dog'</code><code class="p">:</code> <code class="s">'chien'</code><code class="p">,</code> <code class="s">'cat'</code><code class="p">:</code> <code class="s">'chat'</code><code class="p">,</code> <code class="s">'walrus'</code><code class="p">:</code> <code class="s">'morse'</code><code class="p">}</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">e2f</code>&#13;
<code class="go">{'cat': 'chat', 'walrus': 'morse', 'dog': 'chien'}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>8.2&#13;
Using your three-word dictionary <code>e2f</code>,&#13;
print the French word for <code>walrus</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956838088">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">e2f</code><code class="p">[</code><code class="s">'walrus'</code><code class="p">]</code>&#13;
<code class="go">'morse'</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>8.3&#13;
Make a French-to-English dictionary called&#13;
<code>f2e</code> from <code>e2f</code>.&#13;
Use the <code>items</code> method.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956804904">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">f2e</code> <code class="o">=</code> <code class="p">{}</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">english</code><code class="p">,</code> <code class="n">french</code> <code class="ow">in</code> <code class="n">e2f</code><code class="o">.</code><code class="n">items</code><code class="p">():</code>&#13;
<code class="go">    f2e[french] = english</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">f2e</code>&#13;
<code class="go">{'morse': 'walrus', 'chien': 'dog', 'chat': 'cat'}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>8.4&#13;
Print the English equivalent of the French word <code>chien</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956816168">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">f2e</code><code class="p">[</code><code class="s">'chien'</code><code class="p">]</code>&#13;
<code class="go">'dog'</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>8.5&#13;
Print the set of English words from <code>e2f</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956684664">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="nb">set</code><code class="p">(</code><code class="n">e2f</code><code class="o">.</code><code class="n">keys</code><code class="p">())</code>&#13;
<code class="go">{'cat', 'walrus', 'dog'}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>8.6&#13;
Make a multilevel dictionary called <code>life</code>.&#13;
Use these strings for the topmost keys:&#13;
<code>'animals'</code>, <code>'plants'</code>, and <code>'other'</code>.&#13;
Make the <code>'animals'</code> key refer to another dictionary&#13;
with the keys <code>'cats'</code>, <code>'octopi'</code>, and <code>'emus'</code>.&#13;
Make the <code>'cats'</code> key refer to a list of strings with the values&#13;
<code>'Henri'</code>, <code>'Grumpy'</code>, and <code>'Lucy'</code>.&#13;
Make all the other keys refer to empty dictionaries.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956653720">&#13;
<h5/>&#13;
<p>This is a hard one, so don’t feel bad if you peeked here first.</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">life</code> <code class="o">=</code> <code class="p">{</code>&#13;
<code class="gp">... </code>    <code class="s">'animals'</code><code class="p">:</code> <code class="p">{</code>&#13;
<code class="gp">... </code>        <code class="s">'cats'</code><code class="p">:</code> <code class="p">[</code>&#13;
<code class="gp">... </code>            <code class="s">'Henri'</code><code class="p">,</code> <code class="s">'Grumpy'</code><code class="p">,</code> <code class="s">'Lucy'</code>&#13;
<code class="gp">... </code>            <code class="p">],</code>&#13;
<code class="gp">... </code>        <code class="s">'octopi'</code><code class="p">:</code> <code class="p">{},</code>&#13;
<code class="gp">... </code>        <code class="s">'emus'</code><code class="p">:</code> <code class="p">{}</code>&#13;
<code class="gp">... </code>        <code class="p">},</code>&#13;
<code class="gp">... </code>    <code class="s">'plants'</code><code class="p">:</code> <code class="p">{},</code>&#13;
<code class="gp">... </code>    <code class="s">'other'</code><code class="p">:</code> <code class="p">{}</code>&#13;
<code class="gp">... </code>    <code class="p">}</code>&#13;
<code class="go">&gt;&gt;&gt;</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>8.7&#13;
Print the top-level keys of <code>life</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956572536">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">life</code><code class="o">.</code><code class="n">keys</code><code class="p">())</code>&#13;
<code class="go">dict_keys(['animals', 'other', 'plants'])</code></pre>&#13;
&#13;
<p>Python 3 includes that <code>dict_keys</code> stuff.&#13;
To print them as a plain list, use this:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="nb">list</code><code class="p">(</code><code class="n">life</code><code class="o">.</code><code class="n">keys</code><code class="p">()))</code>&#13;
<code class="go">['animals', 'other', 'plants']</code></pre>&#13;
&#13;
<p>By the way, you can use spaces to make your code easier to read:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">print</code> <code class="p">(</code> <code class="nb">list</code> <code class="p">(</code> <code class="n">life</code><code class="o">.</code><code class="n">keys</code><code class="p">()</code> <code class="p">)</code> <code class="p">)</code>&#13;
<code class="go">['animals', 'other', 'plants']</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>8.8&#13;
Print the keys for <code>life['animals']</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956563816">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">life</code><code class="p">[</code><code class="s">'animals'</code><code class="p">]</code><code class="o">.</code><code class="n">keys</code><code class="p">())</code>&#13;
<code class="go">dict_keys(['cats', 'octopi', 'emus'])</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>8.9&#13;
Print the values for <code>life['animals']['cats']</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956446872">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">life</code><code class="p">[</code><code class="s">'animals'</code><code class="p">][</code><code class="s">'cats'</code><code class="p">])</code>&#13;
<code class="go">['Henri', 'Grumpy', 'Lucy']</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>8.10&#13;
Use a dictionary comprehension to create the dictionary&#13;
<code>squares</code>.&#13;
Use <code>range(10)</code> to return the keys,&#13;
and use the square of each key as its value.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956455832">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">squares</code> <code class="o">=</code> <code class="p">{</code><code class="n">key</code><code class="p">:</code> <code class="n">key</code><code class="o">*</code><code class="n">key</code> <code class="k">for</code> <code class="n">key</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">)}</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">squares</code>&#13;
<code class="go">{0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25, 6: 36, 7: 49, 8: 64, 9: 81}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>8.11&#13;
Use a set comprehension to create the set <code>odd</code>&#13;
from the odd numbers in <code>range(10)</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956355656">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">odd</code> <code class="o">=</code> <code class="p">{</code><code class="n">number</code> <code class="k">for</code> <code class="n">number</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">)</code> <code class="k">if</code> <code class="n">number</code> <code class="o">%</code> <code class="mi">2</code> <code class="o">==</code> <code class="mi">1</code><code class="p">}</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">odd</code>&#13;
<code class="go">{1, 3, 5, 7, 9}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>8.12&#13;
Use a generator comprehension to return the string&#13;
<code>'Got '</code>&#13;
and a number for the numbers in <code>range(10)</code>.&#13;
Iterate through this by using a <code>for</code> loop.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956310568">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">thing</code> <code class="ow">in</code> <code class="p">(</code><code class="s">'Got </code><code class="si">%s</code><code class="s">'</code> <code class="o">%</code> <code class="n">number</code> <code class="k">for</code> <code class="n">number</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">10</code><code class="p">)):</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">thing</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">Got 0</code>&#13;
<code class="go">Got 1</code>&#13;
<code class="go">Got 2</code>&#13;
<code class="go">Got 3</code>&#13;
<code class="go">Got 4</code>&#13;
<code class="go">Got 5</code>&#13;
<code class="go">Got 6</code>&#13;
<code class="go">Got 7</code>&#13;
<code class="go">Got 8</code>&#13;
<code class="go">Got 9</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>8.13&#13;
Use <code>zip()</code> to make a dictionary from the key tuple&#13;
<code>('optimist', 'pessimist', 'troll')</code>&#13;
and the values tuple&#13;
<code>('The glass is half full',</code>&#13;
<code>'The glass is half empty',</code>&#13;
<code>'How did you get a glass?')</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956206232">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">keys</code> <code class="o">=</code> <code class="p">(</code><code class="s">'optimist'</code><code class="p">,</code> <code class="s">'pessimist'</code><code class="p">,</code> <code class="s">'troll'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">values</code> <code class="o">=</code> <code class="p">(</code><code class="s">'The glass is half full'</code><code class="p">,</code>&#13;
<code class="gp">... </code>    <code class="s">'The glass is half empty'</code><code class="p">,</code>&#13;
<code class="gp">... </code>    <code class="s">'How did you get a glass?'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="nb">dict</code><code class="p">(</code><code class="nb">zip</code><code class="p">(</code><code class="n">keys</code><code class="p">,</code> <code class="n">values</code><code class="p">))</code>&#13;
<code class="go">{'optimist': 'The glass is half full',</code>&#13;
<code class="go">'pessimist': 'The glass is half empty',</code>&#13;
<code class="go">'troll': 'How did you get a glass?'}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>8.14&#13;
Use <code>zip()</code> to make a dictionary called <code>movies</code>&#13;
that pairs these lists:&#13;
<code>titles =</code>&#13;
<code>['Creature of Habit',</code>&#13;
<code>'Crewel Fate',</code>&#13;
<code>'Sharks On a Plane']</code>&#13;
and&#13;
<code>plots =</code>&#13;
<code>['A nun turns into a monster',</code>&#13;
<code>'A haunted yarn shop',</code>&#13;
<code>'Check your exits']</code><a data-startref="ix_appD-answers-asciidoc5" data-type="indexterm" id="idm45794956175624"/><a data-startref="ix_appD-answers-asciidoc4" data-type="indexterm" id="idm45794956174968"/></p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956179944">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">titles</code> <code class="o">=</code> <code class="p">[</code><code class="s">'Creature of Habit'</code><code class="p">,</code>&#13;
<code class="gp">... </code>    <code class="s">'Crewel Fate'</code><code class="p">,</code>&#13;
<code class="gp">... </code>    <code class="s">'Sharks On a Plane'</code><code class="p">]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">plots</code> <code class="o">=</code> <code class="p">[</code><code class="s">'A nun turns into a monster'</code><code class="p">,</code>&#13;
<code class="gp">... </code>    <code class="s">'A haunted yarn shop'</code><code class="p">,</code>&#13;
<code class="gp">... </code>    <code class="s">'Check your exits'</code><code class="p">]</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">movies</code> <code class="o">=</code> <code class="nb">dict</code><code class="p">(</code><code class="nb">zip</code><code class="p">(</code><code class="n">titles</code><code class="p">,</code> <code class="n">plots</code><code class="p">))</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">movies</code>&#13;
<code class="go">{'Creature of Habit': 'A nun turns into a monster',</code>&#13;
<code class="go">'Crewel Fate': 'A haunted yarn shop',</code>&#13;
<code class="go">'Sharks On a Plane': 'Check your exits'}</code>&#13;
<code class="go">&gt;&gt;&gt;</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="9. Functions" data-type="sect1"><div class="sect1" id="idm45794956148312">&#13;
<h1>9. Functions</h1>&#13;
&#13;
<p>9.1&#13;
<a data-primary="functions" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc6"/>Define a function called <code>good()</code>&#13;
that returns the following list: <code>['Harry', 'Ron', 'Hermione']</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956099448">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">def</code> <code class="nf">good</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">return</code> <code class="p">[</code><code class="s">'Harry'</code><code class="p">,</code> <code class="s">'Ron'</code><code class="p">,</code> <code class="s">'Hermione'</code><code class="p">]</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">good</code><code class="p">()</code>&#13;
<code class="go">['Harry', 'Ron', 'Hermione']</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>9.2&#13;
Define a generator function called <code>get_odds()</code>&#13;
that returns the odd numbers from <code>range(10)</code>.&#13;
Use a <code>for</code> loop to find and print the third value returned.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794956082568">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">def</code> <code class="nf">get_odds</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">for</code> <code class="n">number</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code> <code class="mi">10</code><code class="p">,</code> <code class="mi">2</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">yield</code> <code class="n">number</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">count</code> <code class="o">=</code> <code class="mi">1</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">number</code> <code class="ow">in</code> <code class="n">get_odds</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">if</code> <code class="n">count</code> <code class="o">==</code> <code class="mi">3</code><code class="p">:</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">"The third odd number is"</code><code class="p">,</code> <code class="n">number</code><code class="p">)</code>&#13;
<code class="gp">... </code>        <code class="k">break</code>&#13;
<code class="gp">... </code>    <code class="n">count</code> <code class="o">+=</code> <code class="mi">1</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">The third odd number is 5</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>9.3&#13;
Define a decorator called <code>test</code> that prints <code>'start'</code>&#13;
when a function is called, and <code>'end'</code> when it finishes.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794955949768">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">def</code> <code class="nf">test</code><code class="p">(</code><code class="n">func</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">new_func</code><code class="p">(</code><code class="o">*</code><code class="n">args</code><code class="p">,</code> <code class="o">**</code><code class="n">kwargs</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">'start'</code><code class="p">)</code>&#13;
<code class="gp">... </code>        <code class="n">result</code> <code class="o">=</code> <code class="n">func</code><code class="p">(</code><code class="o">*</code><code class="n">args</code><code class="p">,</code> <code class="o">**</code><code class="n">kwargs</code><code class="p">)</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">'end'</code><code class="p">)</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="n">result</code>&#13;
<code class="gp">... </code>    <code class="k">return</code> <code class="n">new_func</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">&gt;&gt;&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="nd">@test</code>&#13;
<code class="gp">... </code><code class="k">def</code> <code class="nf">greeting</code><code class="p">():</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="s">"Greetings, Earthling"</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">greeting</code><code class="p">()</code>&#13;
<code class="go">start</code>&#13;
<code class="go">Greetings, Earthling</code>&#13;
<code class="go">end</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>9.4&#13;
Define an exception called <code>OopsException</code>.&#13;
Raise this exception to see what happens.&#13;
Then, write the code to catch this exception and print&#13;
<code>'Caught an oops'</code>.<a data-startref="ix_appD-answers-asciidoc6" data-type="indexterm" id="idm45794955858056"/></p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794955857320">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">OopsException</code><code class="p">(</code><code class="ne">Exception</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">pass</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">raise</code> <code class="n">OopsException</code><code class="p">()</code>&#13;
<code class="gt">Traceback (most recent call last):</code>&#13;
  File <code class="nb">"&lt;stdin&gt;"</code>, line <code class="m">1</code>, in <code class="n">&lt;module&gt;</code>&#13;
<code class="err">__main__.OopsException</code>&#13;
<code class="go">&gt;&gt;&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">try</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">raise</code> <code class="n">OopsException</code>&#13;
<code class="gp">... </code><code class="k">except</code> <code class="n">OopsException</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="s">'Caught an oops'</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">Caught an oops</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="10. Oh Oh: Objects and Classes" data-type="sect1"><div class="sect1" id="idm45794955855208">&#13;
<h1>10. Oh Oh: Objects and Classes</h1>&#13;
&#13;
<p>10.1&#13;
<a data-primary="classes" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc7"/><a data-primary="objects" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc8"/>Make a class called <code>Thing</code> with no contents and print it.&#13;
Then, create an object called <code>example</code>&#13;
from this class and also print it.&#13;
Are the printed values the same or different?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794955744488">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Thing</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">pass</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">Thing</code><code class="p">)</code>&#13;
<code class="go">&lt;class '__main__.Thing'&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">example</code> <code class="o">=</code> <code class="n">Thing</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">example</code><code class="p">)</code>&#13;
<code class="go">&lt;__main__.Thing object at 0x1006f3fd0&gt;</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>10.2&#13;
Make a new class called <code>Thing2</code> and assign&#13;
the value <code>'abc'</code> to a class variable called <code>letters</code>.&#13;
Print <code>letters</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794955801960">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Thing2</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="n">letters</code> <code class="o">=</code> <code class="s">'abc'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">Thing2</code><code class="o">.</code><code class="n">letters</code><code class="p">)</code>&#13;
<code class="go">abc</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>10.3&#13;
Make yet another class called (of course) <code>Thing3</code>.&#13;
This time, assign the value <code>'xyz'</code> to an instance (object)&#13;
variable called <code>letters</code>.&#13;
Print <code>letters</code>.&#13;
Do you need to make an object from the class to do this?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794955714408">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Thing3</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">letters</code> <code class="o">=</code> <code class="s">'xyz'</code>&#13;
<code class="gp">...</code></pre>&#13;
&#13;
<p>The variable <code>letters</code> belongs to any objects made from <code>Thing3</code>, not the <code>Thing3</code> class itself:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">Thing3</code><code class="o">.</code><code class="n">letters</code><code class="p">)</code>&#13;
<code class="gt">Traceback (most recent call last):</code>&#13;
  File <code class="nb">"&lt;stdin&gt;"</code>, line <code class="m">1</code>, in <code class="n">&lt;module&gt;</code>&#13;
<code class="gr">AttributeError</code>: <code class="n">type object 'Thing3' has no attribute 'letters'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">something</code> <code class="o">=</code> <code class="n">Thing3</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">something</code><code class="o">.</code><code class="n">letters</code><code class="p">)</code>&#13;
<code class="go">xyz</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>10.4&#13;
Make a class called <code>Element</code>,&#13;
with instance attributes <code>name</code>, <code>symbol</code>, and <code>number</code>.&#13;
Create an object called <code>hydrogen</code> of this class&#13;
with the values <code>'Hydrogen'</code>, <code>'H'</code>, and <code>1</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794955584728">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Element</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">name</code><code class="p">,</code> <code class="n">symbol</code><code class="p">,</code> <code class="n">number</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="n">name</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">symbol</code> <code class="o">=</code> <code class="n">symbol</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">number</code> <code class="o">=</code> <code class="n">number</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">hydrogen</code> <code class="o">=</code> <code class="n">Element</code><code class="p">(</code><code class="s">'Hydrogen'</code><code class="p">,</code> <code class="s">'H'</code><code class="p">,</code> <code class="mi">1</code><code class="p">)</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>10.5&#13;
Make a dictionary with these keys and values:&#13;
<code>'name': 'Hydrogen', 'symbol': 'H', 'number': 1</code>.&#13;
Then, create an object called <code>hydrogen</code>&#13;
from class <code>Element</code> using this dictionary.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794955508616">&#13;
<h5/>&#13;
<p>Start with the dictionary:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">el_dict</code> <code class="o">=</code> <code class="p">{</code><code class="s">'name'</code><code class="p">:</code> <code class="s">'Hydrogen'</code><code class="p">,</code> <code class="s">'symbol'</code><code class="p">:</code> <code class="s">'H'</code><code class="p">,</code> <code class="s">'number'</code><code class="p">:</code> <code class="mi">1</code><code class="p">}</code></pre>&#13;
&#13;
<p>This works, although it takes a bit of typing:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">hydrogen</code> <code class="o">=</code> <code class="n">Element</code><code class="p">(</code><code class="n">el_dict</code><code class="p">[</code><code class="s">'name'</code><code class="p">],</code> <code class="n">el_dict</code><code class="p">[</code><code class="s">'symbol'</code><code class="p">],</code> <code class="n">el_dict</code><code class="p">[</code><code class="s">'number'</code><code class="p">])</code></pre>&#13;
&#13;
<p>Let’s check that it worked:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">hydrogen</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">'Hydrogen'</code></pre>&#13;
&#13;
<p>However, you can also initialize the object directly from the&#13;
dictionary, because its key names match the arguments to&#13;
<code>__init__</code> (refer to <a data-type="xref" href="ch09.html#ch_functions">Chapter 9</a> for a discussion&#13;
of keyword arguments):</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">hydrogen</code> <code class="o">=</code> <code class="n">Element</code><code class="p">(</code><code class="o">**</code><code class="n">el_dict</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">hydrogen</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">'Hydrogen'</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>10.6&#13;
For the <code>Element</code> class,&#13;
define a method called <code>dump()</code> that prints the values of the&#13;
object’s attributes (<code>name</code>, <code>symbol</code>, and <code>number</code>).&#13;
Create the <code>hydrogen</code> object from this new definition&#13;
and use <code>dump()</code> to print its attributes.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794955347416">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Element</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">name</code><code class="p">,</code> <code class="n">symbol</code><code class="p">,</code> <code class="n">number</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="n">name</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">symbol</code> <code class="o">=</code> <code class="n">symbol</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">number</code> <code class="o">=</code> <code class="n">number</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">dump</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="s">'name=</code><code class="si">%s</code><code class="s">, symbol=</code><code class="si">%s</code><code class="s">, number=</code><code class="si">%s</code><code class="s">'</code> <code class="o">%</code>&#13;
<code class="gp">... </code>            <code class="p">(</code><code class="bp">self</code><code class="o">.</code><code class="n">name</code><code class="p">,</code> <code class="bp">self</code><code class="o">.</code><code class="n">symbol</code><code class="p">,</code> <code class="bp">self</code><code class="o">.</code><code class="n">number</code><code class="p">))</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">hydrogen</code> <code class="o">=</code> <code class="n">Element</code><code class="p">(</code><code class="o">**</code><code class="n">el_dict</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">hydrogen</code><code class="o">.</code><code class="n">dump</code><code class="p">()</code>&#13;
<code class="go">name=Hydrogen, symbol=H, number=1</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>10.7&#13;
Call <code>print(hydrogen)</code>.&#13;
In the definition of <code>Element</code>,&#13;
change the name of the method <code>dump</code> to <code>__str__</code>,&#13;
create a new <code>hydrogen</code> object,&#13;
and call <code>print(hydrogen)</code> again.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794955241016">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">hydrogen</code><code class="p">)</code>&#13;
<code class="go">&lt;__main__.Element object at 0x1006f5310&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Element</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">name</code><code class="p">,</code> <code class="n">symbol</code><code class="p">,</code> <code class="n">number</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">name</code> <code class="o">=</code> <code class="n">name</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">symbol</code> <code class="o">=</code> <code class="n">symbol</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">number</code> <code class="o">=</code> <code class="n">number</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__str__</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="p">(</code><code class="s">'name=</code><code class="si">%s</code><code class="s">, symbol=</code><code class="si">%s</code><code class="s">, number=</code><code class="si">%s</code><code class="s">'</code> <code class="o">%</code>&#13;
<code class="gp">... </code>            <code class="p">(</code><code class="bp">self</code><code class="o">.</code><code class="n">name</code><code class="p">,</code> <code class="bp">self</code><code class="o">.</code><code class="n">symbol</code><code class="p">,</code> <code class="bp">self</code><code class="o">.</code><code class="n">number</code><code class="p">))</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">hydrogen</code> <code class="o">=</code> <code class="n">Element</code><code class="p">(</code><code class="o">**</code><code class="n">el_dict</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">hydrogen</code><code class="p">)</code>&#13;
<code class="go">name=Hydrogen, symbol=H, number=1</code></pre>&#13;
&#13;
<p><code>__str__()</code> is one of Python’s <em>magic methods</em>.&#13;
The <code>print</code> function calls an object’s&#13;
<code>__str__()</code> method to get its string representation.&#13;
If it doesn’t have a <code>__str__()</code> method,&#13;
it gets the default method from its parent <code>Object</code> class,&#13;
which returns a string like&#13;
<code>&lt;__main__.Element object at 0x1006f5310&gt;</code>.</p>&#13;
</div></aside>&#13;
&#13;
<p>10.8&#13;
Modify <code>Element</code> to make the attributes <code>name</code>, <code>symbol</code>,&#13;
and <code>number</code> private.&#13;
Define a getter property for each to return its value.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794955106568">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Element</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">,</code> <code class="n">name</code><code class="p">,</code> <code class="n">symbol</code><code class="p">,</code> <code class="n">number</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">__name</code> <code class="o">=</code> <code class="n">name</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">__symbol</code> <code class="o">=</code> <code class="n">symbol</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">__number</code> <code class="o">=</code> <code class="n">number</code>&#13;
<code class="gp">... </code>    <code class="nd">@property</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">name</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">__name</code>&#13;
<code class="gp">... </code>    <code class="nd">@property</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">symbol</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">__symbol</code>&#13;
<code class="gp">... </code>    <code class="nd">@property</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">number</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="bp">self</code><code class="o">.</code><code class="n">__number</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">hydrogen</code> <code class="o">=</code> <code class="n">Element</code><code class="p">(</code><code class="s">'Hydrogen'</code><code class="p">,</code> <code class="s">'H'</code><code class="p">,</code> <code class="mi">1</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">hydrogen</code><code class="o">.</code><code class="n">name</code>&#13;
<code class="go">'Hydrogen'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">hydrogen</code><code class="o">.</code><code class="n">symbol</code>&#13;
<code class="go">'H'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">hydrogen</code><code class="o">.</code><code class="n">number</code>&#13;
<code class="go">1</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>10.9&#13;
Define three classes:&#13;
<code>Bear</code>, <code>Rabbit</code>, and <code>Octothorpe</code>.&#13;
For each, define only one method: <code>eats()</code>.&#13;
This should return&#13;
<code>'berries'</code> (<code>Bear</code>),&#13;
<code>'clover'</code> (<code>Rabbit</code>), and&#13;
<code>'campers'</code> (<code>Octothorpe</code>).&#13;
Create one object from each and print what it eats.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794955103768">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="go">&gt;&gt; class Bear:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">eats</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="s">'berries'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Rabbit</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">eats</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="s">'clover'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Octothorpe</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">eats</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="s">'campers'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">b</code> <code class="o">=</code> <code class="n">Bear</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">r</code> <code class="o">=</code> <code class="n">Rabbit</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">o</code> <code class="o">=</code> <code class="n">Octothorpe</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">b</code><code class="o">.</code><code class="n">eats</code><code class="p">())</code>&#13;
<code class="go">berries</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">r</code><code class="o">.</code><code class="n">eats</code><code class="p">())</code>&#13;
<code class="go">clover</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code><code class="n">o</code><code class="o">.</code><code class="n">eats</code><code class="p">())</code>&#13;
<code class="go">campers</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>10.10&#13;
Define these classes: <code>Laser</code>, <code>Claw</code>, and <code>SmartPhone</code>.&#13;
Each has only one method: <code>does()</code>.&#13;
This returns <code>'disintegrate'</code> (<code>Laser</code>),&#13;
<code>'crush'</code> (<code>Claw</code>), or&#13;
<code>'ring'</code> (<code>SmartPhone</code>).&#13;
Then, define the class <code>Robot</code>&#13;
that has one instance (object) of each of these.&#13;
Define a <code>does()</code> method for the <code>Robot</code>&#13;
that prints what its component objects do.<a data-startref="ix_appD-answers-asciidoc8" data-type="indexterm" id="idm45794954807368"/><a data-startref="ix_appD-answers-asciidoc7" data-type="indexterm" id="idm45794954806760"/></p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794954967160">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Laser</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">does</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="s">'disintegrate'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Claw</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">does</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="s">'crush'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">SmartPhone</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">does</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="s">'ring'</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">class</code> <code class="nc">Robot</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">__init__</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">laser</code> <code class="o">=</code> <code class="n">Laser</code><code class="p">()</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">claw</code> <code class="o">=</code> <code class="n">Claw</code><code class="p">()</code>&#13;
<code class="gp">... </code>        <code class="bp">self</code><code class="o">.</code><code class="n">smartphone</code> <code class="o">=</code> <code class="n">SmartPhone</code><code class="p">()</code>&#13;
<code class="gp">... </code>    <code class="k">def</code> <code class="nf">does</code><code class="p">(</code><code class="bp">self</code><code class="p">):</code>&#13;
<code class="gp">... </code>        <code class="k">return</code> <code class="s">'''I have many attachments:</code>&#13;
<code class="gp">... </code><code class="s">My laser, to </code><code class="si">%s</code><code class="s">.</code>&#13;
<code class="gp">... </code><code class="s">My claw, to </code><code class="si">%s</code><code class="s">.</code>&#13;
<code class="gp">... </code><code class="s">My smartphone, to </code><code class="si">%s</code><code class="s">.'''</code> <code class="o">%</code> <code class="p">(</code>&#13;
<code class="gp">... </code>    <code class="bp">self</code><code class="o">.</code><code class="n">laser</code><code class="o">.</code><code class="n">does</code><code class="p">(),</code>&#13;
<code class="gp">... </code>    <code class="bp">self</code><code class="o">.</code><code class="n">claw</code><code class="o">.</code><code class="n">does</code><code class="p">(),</code>&#13;
<code class="gp">... </code>    <code class="bp">self</code><code class="o">.</code><code class="n">smartphone</code><code class="o">.</code><code class="n">does</code><code class="p">()</code> <code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">robbie</code> <code class="o">=</code> <code class="n">Robot</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">print</code><code class="p">(</code> <code class="n">robbie</code><code class="o">.</code><code class="n">does</code><code class="p">()</code> <code class="p">)</code>&#13;
<code class="go">I have many attachments:</code>&#13;
<code class="go">My laser, to disintegrate.</code>&#13;
<code class="go">My claw, to crush.</code>&#13;
<code class="go">My smartphone, to ring.</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="11. Modules, Packages, and Goodies" data-type="sect1"><div class="sect1" id="idm45794955748616">&#13;
<h1>11. Modules, Packages, and Goodies</h1>&#13;
&#13;
<p>11.1&#13;
<a data-primary="modules" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794954802616"/><a data-primary="packages" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794954801672"/>Make a file called <em>zoo.py</em>.&#13;
In it, define a function called <code>hours</code> that&#13;
prints the string <code>'Open 9-5 daily'</code>.&#13;
Then, use the interactive interpreter to&#13;
import the <code>zoo</code> module and call its <code>hours</code> function.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794954630632">&#13;
<h5/>&#13;
<p>Here’s <em>zoo.py</em>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="k">def</code> <code class="nf">hours</code><code class="p">():</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s1">'Open 9-5 daily'</code><code class="p">)</code></pre>&#13;
&#13;
<p>And now, let’s import it interactively:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">zoo</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">zoo</code><code class="o">.</code><code class="n">hours</code><code class="p">()</code>&#13;
<code class="go">Open 9-5 daily</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>11.2&#13;
In the interactive interpreter,&#13;
import the <code>zoo</code> module as <code>menagerie</code>&#13;
and call its <code>hours()</code> function.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794954613032">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">zoo</code> <code class="kn">as</code> <code class="nn">menagerie</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">menagerie</code><code class="o">.</code><code class="n">hours</code><code class="p">()</code>&#13;
<code class="go">Open 9-5 daily</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>11.3&#13;
Staying in the interpreter,&#13;
import the <code>hours()</code> function from <code>zoo</code> directly and call it.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794954577784">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">zoo</code> <code class="kn">import</code> <code class="n">hours</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">hours</code><code class="p">()</code>&#13;
<code class="go">Open 9-5 daily</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>11.4&#13;
Import the <code>hours()</code> function as <code>info</code> and call it.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794954508264">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">zoo</code> <code class="kn">import</code> <code class="n">hours</code> <code class="k">as</code> <code class="n">info</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">info</code><code class="p">()</code>&#13;
<code class="go">Open 9-5 daily</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>11.6&#13;
Make an <code>OrderedDict</code> called <code>fancy</code>&#13;
from the same pairs and print it.&#13;
Did it print in the same order as <code>plain</code>?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794954442984">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">OrderedDict</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fancy</code> <code class="o">=</code> <code class="n">OrderedDict</code><code class="p">([(</code><code class="s">'a'</code><code class="p">,</code> <code class="mi">1</code><code class="p">),</code> <code class="p">(</code><code class="s">'b'</code><code class="p">,</code> <code class="mi">2</code><code class="p">),</code> <code class="p">(</code><code class="s">'c'</code><code class="p">,</code> <code class="mi">3</code><code class="p">)])</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">fancy</code>&#13;
<code class="go">OrderedDict([('a', 1), ('b', 2), ('c', 3)])</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>11.7&#13;
Make a <code>defaultdict</code> called <code>dict_of_lists</code>&#13;
and pass it the argument <code>list</code>.&#13;
Make the list <code>dict_of_lists['a']</code>&#13;
and append the value <code>'something for a'</code>&#13;
to it in one assignment.&#13;
Print <code>dict_of_lists['a']</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794954380264">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">collections</code> <code class="kn">import</code> <code class="n">defaultdict</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">dict_of_lists</code> <code class="o">=</code> <code class="n">defaultdict</code><code class="p">(</code><code class="nb">list</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">dict_of_lists</code><code class="p">[</code><code class="s">'a'</code><code class="p">]</code><code class="o">.</code><code class="n">append</code><code class="p">(</code><code class="s">'something for a'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">dict_of_lists</code><code class="p">[</code><code class="s">'a'</code><code class="p">]</code>&#13;
<code class="go">['something for a']</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="12. Wrangle and Mangle Data" data-type="sect1"><div class="sect1" id="idm45794954803944">&#13;
<h1>12. Wrangle and Mangle Data</h1>&#13;
&#13;
<p>12.1&#13;
<a data-primary="binary data" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc9"/><a data-primary="strings" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc10"/><a data-primary="Unicode text strings" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc11"/>Create a Unicode string called <code>mystery</code>&#13;
and assign it the value <code>'\U0001f984'</code>.&#13;
Print <code>mystery</code> and its Unicode name.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794954322328">&#13;
<h5/><pre data-code-language="pycon"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">unicodedata</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">mystery</code> <code class="o">=</code> <code class="s">'</code><code class="se">\U0001f4a9</code><code class="s">'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">mystery</code>&#13;
<code class="go">'💩'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">unicodedata</code><code class="o">.</code><code class="n">name</code><code class="p">(</code><code class="n">mystery</code><code class="p">)</code>&#13;
<code class="go">'PILE OF POO'</code></pre>&#13;
&#13;
<p>Oh my. What else have they got in there?</p>&#13;
</div></aside>&#13;
&#13;
<p>12.2&#13;
Encode <code>mystery</code>, this time using UTF-8,&#13;
into the <code>bytes</code> variable <code>popbytes</code>.&#13;
Print <code>pop_bytes</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794954309400">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">pop_bytes</code> <code class="o">=</code> <code class="n">mystery</code><code class="o">.</code><code class="n">encode</code><code class="p">(</code><code class="s">'utf-8'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">pop_bytes</code>&#13;
<code class="go">b'\xf0\x9f\x92\xa9'</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>12.3&#13;
Using UTF-8, decode <code>popbytes</code>&#13;
into the string variable <code>pop_string</code>.&#13;
Print <code>pop_string</code>.&#13;
Is <code>pop_string</code> equal to <code>mystery</code>?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794954219048">&#13;
<h5/><pre data-code-language="pycon"><code class="gp">&gt;&gt;&gt; </code><code class="n">pop_string</code> <code class="o">=</code> <code class="n">pop_bytes</code><code class="o">.</code><code class="n">decode</code><code class="p">(</code><code class="s">'utf-8'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">pop_string</code>&#13;
<code class="go">'💩'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">pop_string</code> <code class="o">==</code> <code class="n">mystery</code>&#13;
<code class="go">True</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>12.4&#13;
When you’re working with text,&#13;
regular expressions come in very handy.&#13;
We’ll apply them in a number of ways to our featured text sample.&#13;
It’s a poem titled “Ode on the Mammoth Cheese,”&#13;
written by James McIntyre in 1866 in homage to&#13;
a seven-thousand-pound cheese that was crafted in Ontario&#13;
and sent on an international tour.&#13;
If you’d rather not type all of it,&#13;
use your favorite search engine and&#13;
cut and paste the words into your Python program, or just grab it from&#13;
<a href="http://bit.ly/mcintyre-poetry">Project Gutenberg</a>.&#13;
Call the text string <code>mammoth</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794954186344">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">mammoth</code> <code class="o">=</code> <code class="s">'''</code>&#13;
<code class="gp">... </code><code class="s">We have seen thee, queen of cheese,</code>&#13;
<code class="gp">... </code><code class="s">Lying quietly at your ease,</code>&#13;
<code class="gp">... </code><code class="s">Gently fanned by evening breeze,</code>&#13;
<code class="gp">... </code><code class="s">Thy fair form no flies dare seize.</code>&#13;
<code class="gp">...</code><code class="s"/>&#13;
<code class="gp">... </code><code class="s">All gaily dressed soon you'll go</code>&#13;
<code class="gp">... </code><code class="s">To the great Provincial show,</code>&#13;
<code class="gp">... </code><code class="s">To be admired by many a beau</code>&#13;
<code class="gp">... </code><code class="s">In the city of Toronto.</code>&#13;
<code class="gp">...</code><code class="s"/>&#13;
<code class="gp">... </code><code class="s">Cows numerous as a swarm of bees,</code>&#13;
<code class="gp">... </code><code class="s">Or as the leaves upon the trees,</code>&#13;
<code class="gp">... </code><code class="s">It did require to make thee please,</code>&#13;
<code class="gp">... </code><code class="s">And stand unrivalled, queen of cheese.</code>&#13;
<code class="gp">...</code><code class="s"/>&#13;
<code class="gp">... </code><code class="s">May you not receive a scar as</code>&#13;
<code class="gp">... </code><code class="s">We have heard that Mr. Harris</code>&#13;
<code class="gp">... </code><code class="s">Intends to send you off as far as</code>&#13;
<code class="gp">... </code><code class="s">The great world's show at Paris.</code>&#13;
<code class="gp">...</code><code class="s"/>&#13;
<code class="gp">... </code><code class="s">Of the youth beware of these,</code>&#13;
<code class="gp">... </code><code class="s">For some of them might rudely squeeze</code>&#13;
<code class="gp">... </code><code class="s">And bite your cheek, then songs or glees</code>&#13;
<code class="gp">... </code><code class="s">We could not sing, oh! queen of cheese.</code>&#13;
<code class="gp">...</code><code class="s"/>&#13;
<code class="gp">... </code><code class="s">We'rt thou suspended from balloon,</code>&#13;
<code class="gp">... </code><code class="s">You'd cast a shade even at noon,</code>&#13;
<code class="gp">... </code><code class="s">Folks would think it was the moon</code>&#13;
<code class="gp">... </code><code class="s">About to fall and crush them soon.</code>&#13;
<code class="gp">... </code><code class="s">'''</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>12.5&#13;
Import the <code>re</code> module to use&#13;
Python’s regular expression functions.&#13;
Use the <code>re.findall()</code> to print all the words that begin with <code>c</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794954074024">&#13;
<h5/>&#13;
<p>We’ll define the variable <code>pat</code>&#13;
for the pattern and then search for it in <code>mammoth</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">re</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">pat</code> <code class="o">=</code> <code class="s">r'\bc\w*'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">re</code><code class="o">.</code><code class="n">findall</code><code class="p">(</code><code class="n">pat</code><code class="p">,</code> <code class="n">mammoth</code><code class="p">)</code>&#13;
<code class="go">['cheese', 'city', 'cheese', 'cheek', 'could', 'cheese', 'cast', 'crush']</code></pre>&#13;
&#13;
<p>The <code>\b</code> means to begin at a boundary between a word and a nonword.&#13;
Use this to specify either the beginning or end of a word.&#13;
The literal <code>c</code> is the first letter of the words we’re looking for.&#13;
The <code>\w</code> means any <em>word character</em>,&#13;
which includes letters, digits, and underscores (<code>_</code>).&#13;
The <code>*</code> means <em>zero or more</em> of these word characters.&#13;
Together, this finds words that begin with <code>c</code>,&#13;
including <code>'c'</code> itself.&#13;
If you didn’t use a raw string&#13;
(with an <code>r</code> right before the starting quote),&#13;
Python would interpret <code>\b</code> as a backspace&#13;
and the search would mysteriously fail:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">pat</code> <code class="o">=</code> <code class="s">'</code><code class="se">\b</code><code class="s">c\w*'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">re</code><code class="o">.</code><code class="n">findall</code><code class="p">(</code><code class="n">pat</code><code class="p">,</code> <code class="n">mammoth</code><code class="p">)</code>&#13;
<code class="go">[]</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>12.6 Find all four-letter words that begin with <code>c</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794954036824">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">pat</code> <code class="o">=</code> <code class="s">r'\bc\w{3}\b'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">re</code><code class="o">.</code><code class="n">findall</code><code class="p">(</code><code class="n">pat</code><code class="p">,</code> <code class="n">mammoth</code><code class="p">)</code>&#13;
<code class="go">['city', 'cast']</code></pre>&#13;
&#13;
<p>You need that final <code>\b</code> to indicate the end of the word.&#13;
Otherwise, you’ll get the first four letters&#13;
of all words that begin with <code>c</code>&#13;
and have at least four letters:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">pat</code> <code class="o">=</code> <code class="s">r'\bc\w{3}'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">re</code><code class="o">.</code><code class="n">findall</code><code class="p">(</code><code class="n">pat</code><code class="p">,</code> <code class="n">mammoth</code><code class="p">)</code>&#13;
<code class="go">['chee', 'city', 'chee', 'chee', 'coul', 'chee', 'cast', 'crus']</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>12.7 Find all the words that end with <code>r</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953975960">&#13;
<h5/>&#13;
<p>This is a little tricky.&#13;
We get the right result for words that end with <code>r</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">pat</code> <code class="o">=</code> <code class="s">r'\b\w*r\b'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">re</code><code class="o">.</code><code class="n">findall</code><code class="p">(</code><code class="n">pat</code><code class="p">,</code> <code class="n">mammoth</code><code class="p">)</code>&#13;
<code class="go">['your', 'fair', 'Or', 'scar', 'Mr', 'far', 'For', 'your', 'or']</code></pre>&#13;
&#13;
<p>However, the results aren’t so good for words that end with <code>l</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">pat</code> <code class="o">=</code> <code class="s">r'\b\w*l\b'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">re</code><code class="o">.</code><code class="n">findall</code><code class="p">(</code><code class="n">pat</code><code class="p">,</code> <code class="n">mammoth</code><code class="p">)</code>&#13;
<code class="go">['All', 'll', 'Provincial', 'fall']</code></pre>&#13;
&#13;
<p>But what’s that <code>ll</code> doing there?&#13;
The <code>\w</code> pattern matches only letters,&#13;
numbers, and underscores—not ASCII apostrophes.&#13;
As a result, it grabs the final <code>ll</code> from <code>you'll</code>.&#13;
We can handle this by adding an apostrophe&#13;
to the set of characters to match.&#13;
Our first try fails:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">pat</code> <code class="o">=</code> <code class="s">r'\b[\w'</code><code class="p">]</code><code class="o">*</code><code class="n">l</code>\<code class="n">b</code><code class="s">'</code>&#13;
  File <code class="nb">"&lt;stdin&gt;"</code>, line <code class="m">1</code>&#13;
    <code class="n">pat</code> <code class="o">=</code> <code class="s">r'\b[\w'</code><code class="p">]</code><code class="o">*</code><code class="n">l</code>\<code class="n">b</code><code class="s">'</code></pre>&#13;
&#13;
<p>Python points to the vicinity of the error,&#13;
but it might take a while to see that the mistake was that&#13;
the pattern string is surrounded by the same&#13;
apostrophe/quote character.&#13;
One way to solve this is to escape it with a backslash:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">pat</code> <code class="o">=</code> <code class="s">r'\b[\w</code><code class="se">\'</code><code class="s">]*l\b'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">re</code><code class="o">.</code><code class="n">findall</code><code class="p">(</code><code class="n">pat</code><code class="p">,</code> <code class="n">mammoth</code><code class="p">)</code>&#13;
<code class="go">['All', "you'll", 'Provincial', 'fall']</code></pre>&#13;
&#13;
<p>Another way is to surround the pattern string with double quotes:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">pat</code> <code class="o">=</code> <code class="s">r"\b[\w']*l\b"</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">re</code><code class="o">.</code><code class="n">findall</code><code class="p">(</code><code class="n">pat</code><code class="p">,</code> <code class="n">mammoth</code><code class="p">)</code>&#13;
<code class="go">['All', "you'll", 'Provincial', 'fall']</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>12.8 Find all the words that contain exactly three vowels in a row.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953788248">&#13;
<h5/>&#13;
<p>Begin with a word boundary,&#13;
any number of <em>word</em> characters, three vowels,&#13;
and then any nonvowel characters to the end of the word:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">pat</code> <code class="o">=</code> <code class="s">r'\b[^aeiou]*[aeiou]{3}[^aeiou]*\b'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">re</code><code class="o">.</code><code class="n">findall</code><code class="p">(</code><code class="n">pat</code><code class="p">,</code> <code class="n">mammoth</code><code class="p">)</code>&#13;
<code class="go">['queen', 'quietly', 'beau\nIn', 'queen', 'squeeze', 'queen']</code></pre>&#13;
&#13;
<p>This looks right, except for that <code>'beau\nIn'</code> string.&#13;
We searched <code>mammoth</code> as a single multiline string.&#13;
Our <code>[^aeiou]</code> matches any nonvowels,&#13;
including <code>\n</code>&#13;
(line feed, which marks the end of a text line).&#13;
We need to add one more thing to the ignore set:&#13;
<code>\s</code> matches any space&#13;
characters, including <code>\n</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">pat</code> <code class="o">=</code> <code class="s">r'\b\w*[aeiou]{3}[^aeiou\s]\w*\b'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">re</code><code class="o">.</code><code class="n">findall</code><code class="p">(</code><code class="n">pat</code><code class="p">,</code> <code class="n">mammoth</code><code class="p">)</code>&#13;
<code class="go">['queen', 'quietly', 'queen', 'squeeze', 'queen']</code></pre>&#13;
&#13;
<p>We didn’t find <code>beau</code> this time,&#13;
so we need one more tweak to the pattern:&#13;
match any number (even zero) of nonvowels after the three vowels.&#13;
Our previous pattern always matched one nonvowel.</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">pat</code> <code class="o">=</code> <code class="s">r'\b\w*[aeiou]{3}[^aeiou\s]*\w*\b'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">re</code><code class="o">.</code><code class="n">findall</code><code class="p">(</code><code class="n">pat</code><code class="p">,</code> <code class="n">mammoth</code><code class="p">)</code>&#13;
<code class="go">['queen', 'quietly', 'beau', 'queen', 'squeeze', 'queen']</code></pre>&#13;
&#13;
<p>What does all of this show?&#13;
Among other things, that regular expressions can do&#13;
a lot, but they can be very tricky to get right.</p>&#13;
</div></aside>&#13;
&#13;
<p>12.9&#13;
Use <code>unhexlify()</code> to convert this hex string&#13;
(combined from two strings to fit on a page)&#13;
to a <code>bytes</code> variable called <code>gif</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="go">'47494638396101000100800000000000ffffff21f9' +</code>&#13;
<code class="go">'0401000000002c000000000100010000020144003b'</code></pre>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953630376">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">binascii</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">hex_str</code> <code class="o">=</code> <code class="s">'47494638396101000100800000000000ffffff21f9'</code> <code class="o">+</code> \&#13;
<code class="gp">... </code>    <code class="s">'0401000000002c000000000100010000020144003b'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">gif</code> <code class="o">=</code> <code class="n">binascii</code><code class="o">.</code><code class="n">unhexlify</code><code class="p">(</code><code class="n">hex_str</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="nb">len</code><code class="p">(</code><code class="n">gif</code><code class="p">)</code>&#13;
<code class="go">42</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>12.10&#13;
The bytes in <code>gif</code> define a one-pixel transparent GIF file,&#13;
one of the most common graphics file formats.&#13;
A legal GIF starts with the string <em>GIF89a</em>.&#13;
Does <code>gif</code> match this?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953531544">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">gif</code><code class="p">[:</code><code class="mi">6</code><code class="p">]</code> <code class="o">==</code> <code class="n">b</code><code class="s">'GIF89a'</code>&#13;
<code class="go">True</code></pre>&#13;
&#13;
<p>Notice that we needed to use a <code>b</code> to define a byte string&#13;
rather than a Unicode character string.&#13;
You can compare bytes with bytes,&#13;
but you cannot compare bytes with strings:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">gif</code><code class="p">[:</code><code class="mi">6</code><code class="p">]</code> <code class="o">==</code> <code class="s">'GIF89a'</code>&#13;
<code class="go">False</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="nb">type</code><code class="p">(</code><code class="n">gif</code><code class="p">)</code>&#13;
<code class="go">&lt;class 'bytes'&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="nb">type</code><code class="p">(</code><code class="s">'GIF89a'</code><code class="p">)</code>&#13;
<code class="go">&lt;class 'str'&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="nb">type</code><code class="p">(</code><code class="n">b</code><code class="s">'GIF89a'</code><code class="p">)</code>&#13;
<code class="go">&lt;class 'bytes'&gt;</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>12.11&#13;
The pixel width of a GIF is a 16-bit little-endian integer&#13;
starting at byte offset 6, and the height is the same size,&#13;
starting at offset 8.&#13;
Extract and print these values for <code>gif</code>.&#13;
Are they both <code>1</code>?<a data-startref="ix_appD-answers-asciidoc11" data-type="indexterm" id="idm45794953448088"/><a data-startref="ix_appD-answers-asciidoc10" data-type="indexterm" id="idm45794953447448"/><a data-startref="ix_appD-answers-asciidoc9" data-type="indexterm" id="idm45794953446808"/></p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953446040">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">struct</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">width</code><code class="p">,</code> <code class="n">height</code> <code class="o">=</code> <code class="n">struct</code><code class="o">.</code><code class="n">unpack</code><code class="p">(</code><code class="s">'&lt;HH'</code><code class="p">,</code> <code class="n">gif</code><code class="p">[</code><code class="mi">6</code><code class="p">:</code><code class="mi">10</code><code class="p">])</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">width</code><code class="p">,</code> <code class="n">height</code>&#13;
<code class="go">(1, 1)</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="13. Calendars and Clocks" data-type="sect1"><div class="sect1" id="idm45794954328344">&#13;
<h1>13. Calendars and Clocks</h1>&#13;
&#13;
<p>13.1&#13;
<a data-primary="calendars/clocks" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794953432440"/>Write the current date as a string to the text file <em>today.txt</em>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953391768">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">date</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now</code> <code class="o">=</code> <code class="n">date</code><code class="o">.</code><code class="n">today</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">now_str</code> <code class="o">=</code> <code class="n">now</code><code class="o">.</code><code class="n">isoformat</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">with</code> <code class="nb">open</code><code class="p">(</code><code class="s">'today.txt'</code><code class="p">,</code> <code class="s">'wt'</code><code class="p">)</code> <code class="k">as</code> <code class="n">output</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">now_str</code><code class="p">,</code> <code class="nb">file</code><code class="o">=</code><code class="n">output</code><code class="p">)</code>&#13;
<code class="go">&gt;&gt;&gt;</code></pre>&#13;
&#13;
<p>When I ran this, here’s what I got in <em>today.txt</em>:</p>&#13;
&#13;
<pre data-type="programlisting">2019-07-23</pre>&#13;
&#13;
<p>Instead of <code>print</code>,&#13;
you could have also said something like <code>output.write(now_str)</code>.&#13;
Using <code>print</code> adds the final newline.</p>&#13;
</div></aside>&#13;
&#13;
<p>13.2&#13;
Read the text file <em>today.txt</em> into the string <code>today_string</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953319288">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">with</code> <code class="nb">open</code><code class="p">(</code><code class="s">'today.txt'</code><code class="p">,</code> <code class="s">'rt'</code><code class="p">)</code> <code class="k">as</code> <code class="nb">input</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="n">today_string</code> <code class="o">=</code> <code class="nb">input</code><code class="o">.</code><code class="n">read</code><code class="p">()</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">today_string</code>&#13;
<code class="go">'2019-07-23\n'</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>13.3&#13;
Parse the date from <code>today_string</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953251352">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">fmt</code> <code class="o">=</code> <code class="s">'%Y-%m-</code><code class="si">%d</code><code class="se">\n</code><code class="s">'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">datetime</code><code class="o">.</code><code class="n">strptime</code><code class="p">(</code><code class="n">today_string</code><code class="p">,</code> <code class="n">fmt</code><code class="p">)</code>&#13;
<code class="go">datetime.datetime(2019, 7, 23, 0, 0)</code></pre>&#13;
&#13;
<p>If you wrote that final newline to the file,&#13;
you need to match it in the format string.</p>&#13;
</div></aside>&#13;
&#13;
<p>13.4&#13;
Create a date object of your day of birth.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953246728">&#13;
<h5/>&#13;
<p>Let’s say that you were born on August 14, 1982:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">my_day</code> <code class="o">=</code> <code class="n">date</code><code class="p">(</code><code class="mi">1982</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">14</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">my_day</code>&#13;
<code class="go">datetime.date(1982, 8, 14)</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>13.5&#13;
What day of the week was your day of birth?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953208840">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">my_day</code><code class="o">.</code><code class="n">weekday</code><code class="p">()</code>&#13;
<code class="go">5</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">my_day</code><code class="o">.</code><code class="n">isoweekday</code><code class="p">()</code>&#13;
<code class="go">6</code></pre>&#13;
&#13;
<p>With <code>weekday()</code>, Monday is 0 and Sunday is 6.&#13;
With <code>isoweekday()</code>, Monday is 1 and Sunday is 7.&#13;
Therefore, this date was a Saturday.</p>&#13;
</div></aside>&#13;
&#13;
<p>13.6&#13;
When will you be (or when were you) 10,000 days old?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953171224">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">timedelta</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">party_day</code> <code class="o">=</code> <code class="n">my_day</code> <code class="o">+</code> <code class="n">timedelta</code><code class="p">(</code><code class="n">days</code><code class="o">=</code><code class="mi">10000</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">party_day</code>&#13;
<code class="go">datetime.date(2009, 12, 30)</code></pre>&#13;
&#13;
<p>If August 14, 1982 was your birthday,&#13;
you probably missed an excuse for a party.</p>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="14. Files and Directories" data-type="sect1"><div class="sect1" id="idm45794953433160">&#13;
<h1>14. Files and Directories</h1>&#13;
&#13;
<p>14.1 <a data-primary="file handling" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794953130600"/>List the files in your current directory.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953129368">&#13;
<h5/>&#13;
<p>If your current directory is <em>ohmy</em> and contains&#13;
three files named after animals,&#13;
it might look like this:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">os</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">os</code><code class="o">.</code><code class="n">listdir</code><code class="p">(</code><code class="s">'.'</code><code class="p">)</code>&#13;
<code class="go">['bears', 'lions', 'tigers']</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>14.2&#13;
List the files in your parent directory.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953089960">&#13;
<h5/>&#13;
<p>If your parent directory contained two files&#13;
plus the current <em>ohmy</em> directory,&#13;
it might look like this:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">os</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">os</code><code class="o">.</code><code class="n">listdir</code><code class="p">(</code><code class="s">'..'</code><code class="p">)</code>&#13;
<code class="go">['ohmy', 'paws', 'whiskers']</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>14.3 Assign the string&#13;
<code>'This is a test of the emergency text system'</code>&#13;
to the variable <code>test1</code>,&#13;
nd write <code>test1</code> to a file called <em>test.txt</em>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794953049736">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">test1</code> <code class="o">=</code> <code class="s">'This is a test of the emergency text system'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="nb">len</code><code class="p">(</code><code class="n">test1</code><code class="p">)</code>&#13;
<code class="go">43</code></pre>&#13;
&#13;
<p>Here’s how to do it by using <code>open</code>, <code>write</code>, and <code>close</code>:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">outfile</code> <code class="o">=</code> <code class="nb">open</code><code class="p">(</code><code class="s">'test.txt'</code><code class="p">,</code> <code class="s">'wt'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">outfile</code><code class="o">.</code><code class="n">write</code><code class="p">(</code><code class="n">test1</code><code class="p">)</code>&#13;
<code class="go">43</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">outfile</code><code class="o">.</code><code class="n">close</code><code class="p">()</code></pre>&#13;
&#13;
<p>Or, you can use <code>with</code> and avoid calling&#13;
<code>close</code> (Python does it for you):</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">with</code> <code class="nb">open</code><code class="p">(</code><code class="s">'test.txt'</code><code class="p">,</code> <code class="s">'wt'</code><code class="p">)</code> <code class="k">as</code> <code class="n">outfile</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="n">outfile</code><code class="o">.</code><code class="n">write</code><code class="p">(</code><code class="n">test1</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">43</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>14.4 Open the file <em>test.txt</em> and read its contents&#13;
into the string <code>test2</code>.&#13;
Are <code>test1</code> and <code>test2</code> the same?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794952943096">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">with</code> <code class="nb">open</code><code class="p">(</code><code class="s">'test.txt'</code><code class="p">,</code> <code class="s">'rt'</code><code class="p">)</code> <code class="k">as</code> <code class="n">infile</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="n">test2</code> <code class="o">=</code> <code class="n">infile</code><code class="o">.</code><code class="n">read</code><code class="p">()</code>&#13;
<code class="gp">...</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="nb">len</code><code class="p">(</code><code class="n">test2</code><code class="p">)</code>&#13;
<code class="go">43</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">test1</code> <code class="o">==</code> <code class="n">test2</code>&#13;
<code class="go">True</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="15. Data in Time: Processes and Concurrency" data-type="sect1"><div class="sect1" id="idm45794952885800">&#13;
<h1>15. Data in Time: Processes and Concurrency</h1>&#13;
&#13;
<p>15.1&#13;
<a data-primary="concurrency" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794952848968"/><a data-primary="processes" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794952848024"/>Use <code>multiprocessing</code> to create three separate processes.&#13;
Make each one wait a random number of seconds between zero and one,&#13;
print the current time, and then exit.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794952846280">&#13;
<h5/>&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">multiprocessing</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">now</code><code class="p">(</code><code class="n">seconds</code><code class="p">):</code>&#13;
    <code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">datetime</code>&#13;
    <code class="kn">from</code> <code class="nn">time</code> <code class="kn">import</code> <code class="n">sleep</code>&#13;
    <code class="n">sleep</code><code class="p">(</code><code class="n">seconds</code><code class="p">)</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s1">'wait'</code><code class="p">,</code> <code class="n">seconds</code><code class="p">,</code> <code class="s1">'seconds, time is'</code><code class="p">,</code> <code class="n">datetime</code><code class="o">.</code><code class="n">utcnow</code><code class="p">())</code>&#13;
&#13;
<code class="k">if</code> <code class="nv-Magic">__name__</code> <code class="o">==</code> <code class="s1">'__main__'</code><code class="p">:</code>&#13;
    <code class="kn">import</code> <code class="nn">random</code>&#13;
    <code class="k">for</code> <code class="n">n</code> <code class="ow">in</code> <code class="nb">range</code><code class="p">(</code><code class="mi">3</code><code class="p">):</code>&#13;
        <code class="n">seconds</code> <code class="o">=</code> <code class="n">random</code><code class="o">.</code><code class="n">random</code><code class="p">()</code>&#13;
        <code class="n">proc</code> <code class="o">=</code> <code class="n">multiprocessing</code><code class="o">.</code><code class="n">Process</code><code class="p">(</code><code class="n">target</code><code class="o">=</code><code class="n">now</code><code class="p">,</code> <code class="n">args</code><code class="o">=</code><code class="p">(</code><code class="n">seconds</code><code class="p">,))</code>&#13;
        <code class="n">proc</code><code class="o">.</code><code class="n">start</code><code class="p">()</code></pre>&#13;
<pre>$ <strong>python multi_times.py</strong>&#13;
wait 0.10720361113059229 seconds, time is 2019-07-24 00:19:23.951594&#13;
wait 0.5825144002370065 seconds, time is 2019-07-24 00:19:24.425047&#13;
wait 0.6647690569029477 seconds, time is 2019-07-24 00:19:24.509995</pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="16. Data in a Box: Persistent Storage" data-type="sect1"><div class="sect1" id="idm45794952722152">&#13;
<h1>16. Data in a Box: Persistent Storage</h1>&#13;
&#13;
<p>16.1&#13;
<a data-primary="persistent storage" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc12"/>Save the following text lines to a file called <em>books.csv</em> (notice that if the fields are separated by commas,&#13;
you need to surround a field with quotes if it contains a comma):</p>&#13;
&#13;
<pre data-type="programlisting">author,book&#13;
J R R Tolkien,The Hobbit&#13;
Lynne Truss,"Eats, Shoots &amp; Leaves"</pre>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794952718040">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">text</code> <code class="o">=</code> <code class="s">'''author,book</code>&#13;
<code class="gp">... </code><code class="s">J R R Tolkien,The Hobbit</code>&#13;
<code class="gp">... </code><code class="s">Lynne Truss,"Eats, Shoots &amp; Leaves"</code>&#13;
<code class="gp">... </code><code class="s">'''</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">with</code> <code class="nb">open</code><code class="p">(</code><code class="s">'test.csv'</code><code class="p">,</code> <code class="s">'wt'</code><code class="p">)</code> <code class="k">as</code> <code class="n">outfile</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="n">outfile</code><code class="o">.</code><code class="n">write</code><code class="p">(</code><code class="n">text</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">73</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>16.2&#13;
Use the <code>csv</code> module and its <code>DictReader</code> method&#13;
to read <em>books.csv</em> to the variable <code>books</code>.&#13;
Print the values in <code>books</code>.&#13;
Did <code>DictReader</code> handle the quotes and commas&#13;
in the second book’s title?</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794952715416">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">with</code> <code class="nb">open</code><code class="p">(</code><code class="s">'books.csv'</code><code class="p">,</code> <code class="s">'rt'</code><code class="p">)</code> <code class="k">as</code> <code class="n">infile</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="n">books</code> <code class="o">=</code> <code class="n">csv</code><code class="o">.</code><code class="n">DictReader</code><code class="p">(</code><code class="n">infile</code><code class="p">)</code>&#13;
<code class="gp">... </code>    <code class="k">for</code> <code class="n">book</code> <code class="ow">in</code> <code class="n">books</code><code class="p">:</code>&#13;
<code class="gp">... </code>        <code class="k">print</code><code class="p">(</code><code class="n">book</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">{'book': 'The Hobbit', 'author': 'J R R Tolkien'}</code>&#13;
<code class="go">{'book': 'Eats, Shoots &amp; Leaves', 'author': 'Lynne Truss'}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>16.3&#13;
Create a CSV file called <em>books2.csv</em> by using these lines:</p>&#13;
&#13;
<pre data-type="programlisting">title,author,year&#13;
The Weirdstone of Brisingamen,Alan Garner,1960&#13;
Perdido Street Station,China Miéville,2000&#13;
Thud!,Terry Pratchett,2005&#13;
The Spellman Files,Lisa Lutz,2007&#13;
Small Gods,Terry Pratchett,1992</pre>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794952595880">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">text</code> <code class="o">=</code> <code class="s">'''title,author,year</code>&#13;
<code class="gp">... </code><code class="s">The Weirdstone of Brisingamen,Alan Garner,1960</code>&#13;
<code class="gp">... </code><code class="s">Perdido Street Station,China Miéville,2000</code>&#13;
<code class="gp">... </code><code class="s">Thud!,Terry Pratchett,2005</code>&#13;
<code class="gp">... </code><code class="s">The Spellman Files,Lisa Lutz,2007</code>&#13;
<code class="gp">... </code><code class="s">Small Gods,Terry Pratchett,1992</code>&#13;
<code class="gp">... </code><code class="s">'''</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">with</code> <code class="nb">open</code><code class="p">(</code><code class="s">'books2.csv'</code><code class="p">,</code> <code class="s">'wt'</code><code class="p">)</code> <code class="k">as</code> <code class="n">outfile</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="n">outfile</code><code class="o">.</code><code class="n">write</code><code class="p">(</code><code class="n">text</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">201</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>16.4&#13;
Use the <code>sqlite3</code> module to create a SQLite database called&#13;
<em>books.db</em> and a table called <code>books</code> with these fields:&#13;
<code>title</code> (text), <code>author</code> (text), and <code>year</code> (integer).</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794952594280">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">sqlite3</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">db</code> <code class="o">=</code> <code class="n">sqlite3</code><code class="o">.</code><code class="n">connect</code><code class="p">(</code><code class="s">'books.db'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">curs</code> <code class="o">=</code> <code class="n">db</code><code class="o">.</code><code class="n">cursor</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">curs</code><code class="o">.</code><code class="n">execute</code><code class="p">(</code><code class="s">'''create table book (title text, author text, year int)'''</code><code class="p">)</code>&#13;
<code class="go">&lt;sqlite3.Cursor object at 0x1006e3b90&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">db</code><code class="o">.</code><code class="n">commit</code><code class="p">()</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>16.5&#13;
Read <em>books2.csv</em> and insert its data into the <code>book</code> table.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794952456648">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">csv</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">sqlite3</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">ins_str</code> <code class="o">=</code> <code class="s">'insert into book values(?, ?, ?)'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">with</code> <code class="nb">open</code><code class="p">(</code><code class="s">'books.csv'</code><code class="p">,</code> <code class="s">'rt'</code><code class="p">)</code> <code class="k">as</code> <code class="n">infile</code><code class="p">:</code>&#13;
<code class="gp">... </code>  <code class="n">books</code> <code class="o">=</code> <code class="n">csv</code><code class="o">.</code><code class="n">DictReader</code><code class="p">(</code><code class="n">infile</code><code class="p">)</code>&#13;
<code class="gp">... </code>  <code class="k">for</code> <code class="n">book</code> <code class="ow">in</code> <code class="n">books</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="n">curs</code><code class="o">.</code><code class="n">execute</code><code class="p">(</code><code class="n">ins_str</code><code class="p">,</code> <code class="p">(</code><code class="n">book</code><code class="p">[</code><code class="s">'title'</code><code class="p">],</code> <code class="n">book</code><code class="p">[</code><code class="s">'author'</code><code class="p">],</code> <code class="n">book</code><code class="p">[</code><code class="s">'year'</code><code class="p">]))</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">&lt;sqlite3.Cursor object at 0x1007b21f0&gt;</code>&#13;
<code class="go">&lt;sqlite3.Cursor object at 0x1007b21f0&gt;</code>&#13;
<code class="go">&lt;sqlite3.Cursor object at 0x1007b21f0&gt;</code>&#13;
<code class="go">&lt;sqlite3.Cursor object at 0x1007b21f0&gt;</code>&#13;
<code class="go">&lt;sqlite3.Cursor object at 0x1007b21f0&gt;</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">db</code><code class="o">.</code><code class="n">commit</code><code class="p">()</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>16.6&#13;
Select and print the <code>title</code> column from the&#13;
<code>book</code> table in alphabetical order.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794952365144">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">sql</code> <code class="o">=</code> <code class="s">'select title from book order by title asc'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">row</code> <code class="ow">in</code> <code class="n">db</code><code class="o">.</code><code class="n">execute</code><code class="p">(</code><code class="n">sql</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">row</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">('Perdido Street Station',)</code>&#13;
<code class="go">('Small Gods',)</code>&#13;
<code class="go">('The Spellman Files',)</code>&#13;
<code class="go">('The Weirdstone of Brisingamen',)</code>&#13;
<code class="go">('Thud!',)</code></pre>&#13;
&#13;
<p>If you just wanted to print the <code>title</code> value without&#13;
that tuple stuff (parentheses and comma), try this:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">row</code> <code class="ow">in</code> <code class="n">db</code><code class="o">.</code><code class="n">execute</code><code class="p">(</code><code class="n">sql</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">row</code><code class="p">[</code><code class="mi">0</code><code class="p">])</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">Perdido Street Station</code>&#13;
<code class="go">Small Gods</code>&#13;
<code class="go">The Spellman Files</code>&#13;
<code class="go">The Weirdstone of Brisingamen</code>&#13;
<code class="go">Thud!</code></pre>&#13;
&#13;
<p>If you want to ignore the initial <code>'The'</code> in titles,&#13;
you need a little extra SQL fairy dust:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">sql</code> <code class="o">=</code> <code class="s">'''select title from book order by</code>&#13;
<code class="gp">... </code><code class="s">case when (title like "The %")</code>&#13;
<code class="gp">... </code><code class="s">then substr(title, 5)</code>&#13;
<code class="gp">... </code><code class="s">else title end'''</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">row</code> <code class="ow">in</code> <code class="n">db</code><code class="o">.</code><code class="n">execute</code><code class="p">(</code><code class="n">sql</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">row</code><code class="p">[</code><code class="mi">0</code><code class="p">])</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">Perdido Street Station</code>&#13;
<code class="go">Small Gods</code>&#13;
<code class="go">The Spellman Files</code>&#13;
<code class="go">Thud!</code>&#13;
<code class="go">The Weirdstone of Brisingamen</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>16.7&#13;
Select and print all columns from the <code>book</code> table&#13;
in order of publication.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794952188728">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">row</code> <code class="ow">in</code> <code class="n">db</code><code class="o">.</code><code class="n">execute</code><code class="p">(</code><code class="s">'select * from book order by year'</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">row</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">('The Weirdstone of Brisingamen', 'Alan Garner', 1960)</code>&#13;
<code class="go">('Small Gods', 'Terry Pratchett', 1992)</code>&#13;
<code class="go">('Perdido Street Station', 'China Miéville', 2000)</code>&#13;
<code class="go">('Thud!', 'Terry Pratchett', 2005)</code>&#13;
<code class="go">('The Spellman Files', 'Lisa Lutz', 2007)</code></pre>&#13;
&#13;
<p>To print all the fields in each row,&#13;
just separate with a comma and space:</p>&#13;
&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">row</code> <code class="ow">in</code> <code class="n">db</code><code class="o">.</code><code class="n">execute</code><code class="p">(</code><code class="s">'select * from book order by year'</code><code class="p">):</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="o">*</code><code class="n">row</code><code class="p">,</code> <code class="n">sep</code><code class="o">=</code><code class="s">', '</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">The Weirdstone of Brisingamen, Alan Garner, 1960</code>&#13;
<code class="go">Small Gods, Terry Pratchett, 1992</code>&#13;
<code class="go">Perdido Street Station, China Miéville, 2000</code>&#13;
<code class="go">Thud!, Terry Pratchett, 2005</code>&#13;
<code class="go">The Spellman Files, Lisa Lutz, 2007</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>16.8&#13;
Use the <code>sqlalchemy</code> module to connect to the sqlite3 database&#13;
<em>books.db</em> that you just made in exercise 8.6.&#13;
As in 8.8, select and print the <code>title</code> column&#13;
from the <code>book</code> table in alphabetical order.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794952084888">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">sqlalchemy</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">conn</code> <code class="o">=</code> <code class="n">sqlalchemy</code><code class="o">.</code><code class="n">create_engine</code><code class="p">(</code><code class="s">'sqlite:///books.db'</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">sql</code> <code class="o">=</code> <code class="s">'select title from book order by title asc'</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">rows</code> <code class="o">=</code> <code class="n">conn</code><code class="o">.</code><code class="n">execute</code><code class="p">(</code><code class="n">sql</code><code class="p">)</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="k">for</code> <code class="n">row</code> <code class="ow">in</code> <code class="n">rows</code><code class="p">:</code>&#13;
<code class="gp">... </code>    <code class="k">print</code><code class="p">(</code><code class="n">row</code><code class="p">)</code>&#13;
<code class="gp">...</code>&#13;
<code class="go">('Perdido Street Station',)</code>&#13;
<code class="go">('Small Gods',)</code>&#13;
<code class="go">('The Spellman Files',)</code>&#13;
<code class="go">('The Weirdstone of Brisingamen',)</code>&#13;
<code class="go">('Thud!',)</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>16.9&#13;
Install the Redis server (see <a data-type="xref" href="app02.html#app_install">Appendix B</a>)&#13;
and the Python <code>redis</code> library&#13;
(<code>pip install redis</code>) on your machine.&#13;
Create a Redis hash called <code>test</code> with the fields&#13;
<code>count</code> (<code>1</code>) and <code>name</code> (<code>'Fester Bestertester'</code>).&#13;
Print all the fields for <code>test</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794951966872">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="kn">import</code> <code class="nn">redis</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">conn</code> <code class="o">=</code> <code class="n">redis</code><code class="o">.</code><code class="n">Redis</code><code class="p">()</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">conn</code><code class="o">.</code><code class="n">delete</code><code class="p">(</code><code class="s">'test'</code><code class="p">)</code>&#13;
<code class="go">1</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">conn</code><code class="o">.</code><code class="n">hmset</code><code class="p">(</code><code class="s">'test'</code><code class="p">,</code> <code class="p">{</code><code class="s">'count'</code><code class="p">:</code> <code class="mi">1</code><code class="p">,</code> <code class="s">'name'</code><code class="p">:</code> <code class="s">'Fester Bestertester'</code><code class="p">})</code>&#13;
<code class="go">True</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">conn</code><code class="o">.</code><code class="n">hgetall</code><code class="p">(</code><code class="s">'test'</code><code class="p">)</code>&#13;
<code class="go">{b'name': b'Fester Bestertester', b'count': b'1'}</code></pre>&#13;
</div></aside>&#13;
&#13;
<p>16.10&#13;
Increment the <code>count</code> field of <code>test</code> and print it.<a data-startref="ix_appD-answers-asciidoc12" data-type="indexterm" id="idm45794951934024"/></p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794951933336">&#13;
<h5/>&#13;
<pre data-code-language="pycon" data-type="programlisting"><code class="gp">&gt;&gt;&gt; </code><code class="n">conn</code><code class="o">.</code><code class="n">hincrby</code><code class="p">(</code><code class="s">'test'</code><code class="p">,</code> <code class="s">'count'</code><code class="p">,</code> <code class="mi">3</code><code class="p">)</code>&#13;
<code class="go">4</code>&#13;
<code class="gp">&gt;&gt;&gt; </code><code class="n">conn</code><code class="o">.</code><code class="n">hget</code><code class="p">(</code><code class="s">'test'</code><code class="p">,</code> <code class="s">'count'</code><code class="p">)</code>&#13;
<code class="go">b'4'</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="17. Data in Space: Networks" data-type="sect1"><div class="sect1" id="idm45794952721368">&#13;
<h1>17. Data in Space: Networks</h1>&#13;
&#13;
<p>17.1&#13;
<a data-primary="networks/networking" data-secondary="practice exercise answers" data-type="indexterm" id="ix_appD-answers-asciidoc13"/>Use a plain <code>socket</code> to implement a current-time service.&#13;
When a client sends the string <code>'time'</code> to the server,&#13;
return the current date and time as an ISO string.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794951859960">&#13;
<h5/>&#13;
<p>Here’s one way to write the server, <em>udp_time_server.py</em>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">datetime</code>&#13;
<code class="kn">import</code> <code class="nn">socket</code>&#13;
&#13;
<code class="n">address</code> <code class="o">=</code> <code class="p">(</code><code class="s1">'localhost'</code><code class="p">,</code> <code class="mi">6789</code><code class="p">)</code>&#13;
<code class="n">max_size</code> <code class="o">=</code> <code class="mi">4096</code>&#13;
&#13;
<code class="k">print</code><code class="p">(</code><code class="s1">'Starting the server at'</code><code class="p">,</code> <code class="n">datetime</code><code class="o">.</code><code class="n">now</code><code class="p">())</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s1">'Waiting for a client to call.'</code><code class="p">)</code>&#13;
<code class="n">server</code> <code class="o">=</code> <code class="n">socket</code><code class="o">.</code><code class="n">socket</code><code class="p">(</code><code class="n">socket</code><code class="o">.</code><code class="n">AF_INET</code><code class="p">,</code> <code class="n">socket</code><code class="o">.</code><code class="n">SOCK_DGRAM</code><code class="p">)</code>&#13;
<code class="n">server</code><code class="o">.</code><code class="n">bind</code><code class="p">(</code><code class="n">address</code><code class="p">)</code>&#13;
<code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
    <code class="n">data</code><code class="p">,</code> <code class="n">client_addr</code> <code class="o">=</code> <code class="n">server</code><code class="o">.</code><code class="n">recvfrom</code><code class="p">(</code><code class="n">max_size</code><code class="p">)</code>&#13;
    <code class="k">if</code> <code class="n">data</code> <code class="o">==</code> <code class="s-Affix">b</code><code class="s1">'time'</code><code class="p">:</code>&#13;
        <code class="n">now</code> <code class="o">=</code> <code class="nb">str</code><code class="p">(</code><code class="n">datetime</code><code class="o">.</code><code class="n">utcnow</code><code class="p">())</code>&#13;
        <code class="n">data</code> <code class="o">=</code> <code class="n">now</code><code class="o">.</code><code class="n">encode</code><code class="p">(</code><code class="s1">'utf-8'</code><code class="p">)</code>&#13;
        <code class="n">server</code><code class="o">.</code><code class="n">sendto</code><code class="p">(</code><code class="n">data</code><code class="p">,</code> <code class="n">client_addr</code><code class="p">)</code>&#13;
        <code class="k">print</code><code class="p">(</code><code class="s1">'Server sent'</code><code class="p">,</code> <code class="n">data</code><code class="p">)</code>&#13;
<code class="n">server</code><code class="o">.</code><code class="n">close</code><code class="p">()</code></pre>&#13;
&#13;
<p>And the client, <em>udp_time_client.py</em>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">socket</code>&#13;
<code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">datetime</code>&#13;
<code class="kn">from</code> <code class="nn">time</code> <code class="kn">import</code> <code class="n">sleep</code>&#13;
&#13;
<code class="n">address</code>    <code class="o">=</code> <code class="p">(</code><code class="s1">'localhost'</code><code class="p">,</code> <code class="mi">6789</code><code class="p">)</code>&#13;
<code class="n">max_size</code>   <code class="o">=</code> <code class="mi">4096</code>&#13;
&#13;
<code class="k">print</code><code class="p">(</code><code class="s1">'Starting the client at'</code><code class="p">,</code> <code class="n">datetime</code><code class="o">.</code><code class="n">now</code><code class="p">())</code>&#13;
<code class="n">client</code> <code class="o">=</code> <code class="n">socket</code><code class="o">.</code><code class="n">socket</code><code class="p">(</code><code class="n">socket</code><code class="o">.</code><code class="n">AF_INET</code><code class="p">,</code> <code class="n">socket</code><code class="o">.</code><code class="n">SOCK_DGRAM</code><code class="p">)</code>&#13;
<code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
    <code class="n">sleep</code><code class="p">(</code><code class="mi">5</code><code class="p">)</code>&#13;
    <code class="n">client</code><code class="o">.</code><code class="n">sendto</code><code class="p">(</code><code class="s-Affix">b</code><code class="s1">'time'</code><code class="p">,</code> <code class="n">address</code><code class="p">)</code>&#13;
    <code class="n">data</code><code class="p">,</code> <code class="n">server_addr</code> <code class="o">=</code> <code class="n">client</code><code class="o">.</code><code class="n">recvfrom</code><code class="p">(</code><code class="n">max_size</code><code class="p">)</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s1">'Client read'</code><code class="p">,</code> <code class="n">data</code><code class="p">)</code>&#13;
<code class="n">client</code><code class="o">.</code><code class="n">close</code><code class="p">()</code></pre>&#13;
&#13;
<p>I put in a <code>sleep(5)</code> call at the top of the client&#13;
loop to make the data exchange less supersonic.&#13;
Start the server in one window:</p>&#13;
<pre>$ <strong>python udp_time_server.py</strong>&#13;
Starting the server at 2014-06-02 20:28:47.415176&#13;
Waiting for a client to call.</pre>&#13;
&#13;
<p>Start the client in another window:</p>&#13;
<pre>$ <strong>python udp_time_client.py</strong>&#13;
Starting the client at 2014-06-02 20:28:51.454805</pre>&#13;
&#13;
<p>After five seconds, you’ll start getting output in both windows.&#13;
Here are the first three lines from the server:</p>&#13;
&#13;
<pre data-type="programlisting">Server sent b'2014-06-03 01:28:56.462565'&#13;
Server sent b'2014-06-03 01:29:01.463906'&#13;
Server sent b'2014-06-03 01:29:06.465802'</pre>&#13;
&#13;
<p>And here are the first three from the client:</p>&#13;
&#13;
<pre data-type="programlisting">Client read b'2014-06-03 01:28:56.462565'&#13;
Client read b'2014-06-03 01:29:01.463906'&#13;
Client read b'2014-06-03 01:29:06.465802'</pre>&#13;
&#13;
<p>Both of these programs run forever,&#13;
so you’ll need to cancel them manually.</p>&#13;
</div></aside>&#13;
&#13;
<p>17.2. Use ZeroMQ REQ and REP sockets to do the same thing.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794951613992">&#13;
<h5/>&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">zmq</code>&#13;
<code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">datetime</code>&#13;
&#13;
<code class="n">host</code> <code class="o">=</code> <code class="s1">'127.0.0.1'</code>&#13;
<code class="n">port</code> <code class="o">=</code> <code class="mi">6789</code>&#13;
<code class="n">context</code> <code class="o">=</code> <code class="n">zmq</code><code class="o">.</code><code class="n">Context</code><code class="p">()</code>&#13;
<code class="n">server</code> <code class="o">=</code> <code class="n">context</code><code class="o">.</code><code class="n">socket</code><code class="p">(</code><code class="n">zmq</code><code class="o">.</code><code class="n">REP</code><code class="p">)</code>&#13;
<code class="n">server</code><code class="o">.</code><code class="n">bind</code><code class="p">(</code><code class="s2">"tcp://</code><code class="si">%s</code><code class="s2">:</code><code class="si">%s</code><code class="s2">"</code> <code class="o">%</code> <code class="p">(</code><code class="n">host</code><code class="p">,</code> <code class="n">port</code><code class="p">))</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s1">'Server started at'</code><code class="p">,</code> <code class="n">datetime</code><code class="o">.</code><code class="n">utcnow</code><code class="p">())</code>&#13;
<code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
    <code class="c1">#  Wait for next request from client</code>&#13;
    <code class="n">message</code> <code class="o">=</code> <code class="n">server</code><code class="o">.</code><code class="n">recv</code><code class="p">()</code>&#13;
    <code class="k">if</code> <code class="n">message</code> <code class="o">==</code> <code class="s-Affix">b</code><code class="s1">'time'</code><code class="p">:</code>&#13;
        <code class="n">now</code> <code class="o">=</code> <code class="n">datetime</code><code class="o">.</code><code class="n">utcnow</code><code class="p">()</code>&#13;
        <code class="n">reply</code> <code class="o">=</code> <code class="nb">str</code><code class="p">(</code><code class="n">now</code><code class="p">)</code>&#13;
        <code class="n">server</code><code class="o">.</code><code class="n">send</code><code class="p">(</code><code class="nb">bytes</code><code class="p">(</code><code class="n">reply</code><code class="p">,</code> <code class="s1">'utf-8'</code><code class="p">))</code>&#13;
        <code class="k">print</code><code class="p">(</code><code class="s1">'Server sent'</code><code class="p">,</code> <code class="n">reply</code><code class="p">)</code></pre>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">zmq</code>&#13;
<code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">datetime</code>&#13;
<code class="kn">from</code> <code class="nn">time</code> <code class="kn">import</code> <code class="n">sleep</code>&#13;
&#13;
<code class="n">host</code> <code class="o">=</code> <code class="s1">'127.0.0.1'</code>&#13;
<code class="n">port</code> <code class="o">=</code> <code class="mi">6789</code>&#13;
<code class="n">context</code> <code class="o">=</code> <code class="n">zmq</code><code class="o">.</code><code class="n">Context</code><code class="p">()</code>&#13;
<code class="n">client</code> <code class="o">=</code> <code class="n">context</code><code class="o">.</code><code class="n">socket</code><code class="p">(</code><code class="n">zmq</code><code class="o">.</code><code class="n">REQ</code><code class="p">)</code>&#13;
<code class="n">client</code><code class="o">.</code><code class="n">connect</code><code class="p">(</code><code class="s2">"tcp://</code><code class="si">%s</code><code class="s2">:</code><code class="si">%s</code><code class="s2">"</code> <code class="o">%</code> <code class="p">(</code><code class="n">host</code><code class="p">,</code> <code class="n">port</code><code class="p">))</code>&#13;
<code class="k">print</code><code class="p">(</code><code class="s1">'Client started at'</code><code class="p">,</code> <code class="n">datetime</code><code class="o">.</code><code class="n">utcnow</code><code class="p">())</code>&#13;
<code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
    <code class="n">sleep</code><code class="p">(</code><code class="mi">5</code><code class="p">)</code>&#13;
    <code class="n">request</code> <code class="o">=</code> <code class="s-Affix">b</code><code class="s1">'time'</code>&#13;
    <code class="n">client</code><code class="o">.</code><code class="n">send</code><code class="p">(</code><code class="n">request</code><code class="p">)</code>&#13;
    <code class="n">reply</code> <code class="o">=</code> <code class="n">client</code><code class="o">.</code><code class="n">recv</code><code class="p">()</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s2">"Client received </code><code class="si">%s</code><code class="s2">"</code> <code class="o">%</code> <code class="n">reply</code><code class="p">)</code></pre>&#13;
&#13;
<p>With plain sockets, you need to start the server first.&#13;
With ZeroMQ, you can start either the server or client first.</p>&#13;
<pre>$ <strong>python zmq_time_server.py</strong>&#13;
Server started at 2014-06-03 01:39:36.933532</pre>&#13;
<pre>$ <strong>python zmq_time_client.py</strong>&#13;
Client started at 2014-06-03 01:39:42.538245</pre>&#13;
&#13;
<p>After 15 seconds or so, you should have some lines from the server:</p>&#13;
&#13;
<pre data-type="programlisting">Server sent 2014-06-03 01:39:47.539878&#13;
Server sent 2014-06-03 01:39:52.540659&#13;
Server sent 2014-06-03 01:39:57.541403</pre>&#13;
&#13;
<p>Here’s what you should see from the client:</p>&#13;
&#13;
<pre data-type="programlisting">Client received b'2014-06-03 01:39:47.539878'&#13;
Client received b'2014-06-03 01:39:52.540659'&#13;
Client received b'2014-06-03 01:39:57.541403'</pre>&#13;
</div></aside>&#13;
&#13;
<p>17.3. Try the same with XMLRPC.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794951325128">&#13;
<h5/>&#13;
<p>From the server:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">from</code> <code class="nn">xmlrpc.server</code> <code class="kn">import</code> <code class="n">SimpleXMLRPCServer</code>&#13;
&#13;
<code class="k">def</code> <code class="nf">now</code><code class="p">():</code>&#13;
    <code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">datetime</code>&#13;
    <code class="n">data</code> <code class="o">=</code> <code class="nb">str</code><code class="p">(</code><code class="n">datetime</code><code class="o">.</code><code class="n">utcnow</code><code class="p">())</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s1">'Server sent'</code><code class="p">,</code> <code class="n">data</code><code class="p">)</code>&#13;
    <code class="k">return</code> <code class="n">data</code>&#13;
&#13;
<code class="n">server</code> <code class="o">=</code> <code class="n">SimpleXMLRPCServer</code><code class="p">((</code><code class="s2">"localhost"</code><code class="p">,</code> <code class="mi">6789</code><code class="p">))</code>&#13;
<code class="n">server</code><code class="o">.</code><code class="n">register_function</code><code class="p">(</code><code class="n">now</code><code class="p">,</code> <code class="s2">"now"</code><code class="p">)</code>&#13;
<code class="n">server</code><code class="o">.</code><code class="n">serve_forever</code><code class="p">()</code></pre>&#13;
&#13;
<p>And from the client:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">xmlrpc.client</code>&#13;
<code class="kn">from</code> <code class="nn">time</code> <code class="kn">import</code> <code class="n">sleep</code>&#13;
&#13;
<code class="n">proxy</code> <code class="o">=</code> <code class="n">xmlrpc</code><code class="o">.</code><code class="n">client</code><code class="o">.</code><code class="n">ServerProxy</code><code class="p">(</code><code class="s2">"http://localhost:6789/"</code><code class="p">)</code>&#13;
<code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
    <code class="n">sleep</code><code class="p">(</code><code class="mi">5</code><code class="p">)</code>&#13;
    <code class="n">data</code> <code class="o">=</code> <code class="n">proxy</code><code class="o">.</code><code class="n">now</code><code class="p">()</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="s1">'Client received'</code><code class="p">,</code> <code class="n">data</code><code class="p">)</code></pre>&#13;
&#13;
<p>Start the server:</p>&#13;
<pre>$ <strong>python xmlrpc_time_server.py</strong></pre>&#13;
&#13;
<p>Start the client:</p>&#13;
<pre>$ <strong>python xmlrpc_time_client.py</strong></pre>&#13;
&#13;
<p>Wait 15 seconds or so. Here are the first three lines of server output:</p>&#13;
&#13;
<pre data-type="programlisting">Server sent 2014-06-03 02:14:52.299122&#13;
127.0.0.1 - - [02/Jun/2014 21:14:52] "POST / HTTP/1.1" 200 -&#13;
Server sent 2014-06-03 02:14:57.304741&#13;
127.0.0.1 - - [02/Jun/2014 21:14:57] "POST / HTTP/1.1" 200 -&#13;
Server sent 2014-06-03 02:15:02.310377&#13;
127.0.0.1 - - [02/Jun/2014 21:15:02] "POST / HTTP/1.1" 200 -</pre>&#13;
&#13;
<p>And here are the first three lines from the client:</p>&#13;
&#13;
<pre data-type="programlisting">Client received 2014-06-03 02:14:52.299122&#13;
Client received 2014-06-03 02:14:57.304741&#13;
Client received 2014-06-03 02:15:02.310377</pre>&#13;
</div></aside>&#13;
&#13;
<p class="pagebreak-before">17.4&#13;
You may have seen the classic <em>I Love Lucy</em> television episode&#13;
in which Lucy and Ethel worked in a chocolate factory.&#13;
The duo fell behind as the conveyor belt that supplied&#13;
the confections for them to process&#13;
began operating at an ever-faster rate.&#13;
Write a simulation that pushes different types of chocolates&#13;
to a Redis list,&#13;
and Lucy is a client doing blocking pops of this list.&#13;
She needs 0.5 seconds to handle a piece of chocolate.&#13;
Print the time and type of each chocolate as Lucy gets it,&#13;
and how many remain to be handled.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794951161592">&#13;
<h5/>&#13;
<p><em>redis_choc_supply.py</em> supplies the infinite treats:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">redis</code>&#13;
<code class="kn">import</code> <code class="nn">random</code>&#13;
<code class="kn">from</code> <code class="nn">time</code> <code class="kn">import</code> <code class="n">sleep</code>&#13;
&#13;
<code class="n">conn</code> <code class="o">=</code> <code class="n">redis</code><code class="o">.</code><code class="n">Redis</code><code class="p">()</code>&#13;
<code class="n">varieties</code> <code class="o">=</code> <code class="p">[</code><code class="s1">'truffle'</code><code class="p">,</code> <code class="s1">'cherry'</code><code class="p">,</code> <code class="s1">'caramel'</code><code class="p">,</code> <code class="s1">'nougat'</code><code class="p">]</code>&#13;
<code class="n">conveyor</code> <code class="o">=</code> <code class="s1">'chocolates'</code>&#13;
<code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
    <code class="n">seconds</code> <code class="o">=</code> <code class="n">random</code><code class="o">.</code><code class="n">random</code><code class="p">()</code>&#13;
    <code class="n">sleep</code><code class="p">(</code><code class="n">seconds</code><code class="p">)</code>&#13;
    <code class="n">piece</code> <code class="o">=</code> <code class="n">random</code><code class="o">.</code><code class="n">choice</code><code class="p">(</code><code class="n">varieties</code><code class="p">)</code>&#13;
    <code class="n">conn</code><code class="o">.</code><code class="n">rpush</code><code class="p">(</code><code class="n">conveyor</code><code class="p">,</code> <code class="n">piece</code><code class="p">)</code></pre>&#13;
&#13;
<p><em>redis_lucy.py</em> might look like this:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">redis</code>&#13;
<code class="kn">from</code> <code class="nn">datetime</code> <code class="kn">import</code> <code class="n">datetime</code>&#13;
<code class="kn">from</code> <code class="nn">time</code> <code class="kn">import</code> <code class="n">sleep</code>&#13;
&#13;
<code class="n">conn</code> <code class="o">=</code> <code class="n">redis</code><code class="o">.</code><code class="n">Redis</code><code class="p">()</code>&#13;
<code class="n">timeout</code> <code class="o">=</code> <code class="mi">10</code>&#13;
<code class="n">conveyor</code> <code class="o">=</code> <code class="s1">'chocolates'</code>&#13;
<code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
    <code class="n">sleep</code><code class="p">(</code><code class="mf">0.5</code><code class="p">)</code>&#13;
    <code class="n">msg</code> <code class="o">=</code> <code class="n">conn</code><code class="o">.</code><code class="n">blpop</code><code class="p">(</code><code class="n">conveyor</code><code class="p">,</code> <code class="n">timeout</code><code class="p">)</code>&#13;
    <code class="n">remaining</code> <code class="o">=</code> <code class="n">conn</code><code class="o">.</code><code class="n">llen</code><code class="p">(</code><code class="n">conveyor</code><code class="p">)</code>&#13;
    <code class="k">if</code> <code class="n">msg</code><code class="p">:</code>&#13;
        <code class="n">piece</code> <code class="o">=</code> <code class="n">msg</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code>&#13;
        <code class="k">print</code><code class="p">(</code><code class="s1">'Lucy got a'</code><code class="p">,</code> <code class="n">piece</code><code class="p">,</code> <code class="s1">'at'</code><code class="p">,</code> <code class="n">datetime</code><code class="o">.</code><code class="n">utcnow</code><code class="p">(),</code>&#13;
        <code class="s1">', only'</code><code class="p">,</code> <code class="n">remaining</code><code class="p">,</code> <code class="s1">'left'</code><code class="p">)</code></pre>&#13;
&#13;
<p>Start them in either order.&#13;
Because Lucy takes a half second to handle each,&#13;
and they’re being produced every half second on average,&#13;
it’s a race to keep up.&#13;
The more of a head start that you give to the conveyor belt,&#13;
the harder you make Lucy’s life.</p>&#13;
<pre>$ <strong>python redis_choc_supply.py &amp;</strong></pre>&#13;
<pre>$ <strong>python redis_lucy.py</strong>&#13;
Lucy got a b'nougat' at 2014-06-03 03:15:08.721169 , only 4 left&#13;
Lucy got a b'cherry' at 2014-06-03 03:15:09.222816 , only 3 left&#13;
Lucy got a b'truffle' at 2014-06-03 03:15:09.723691 , only 5 left&#13;
Lucy got a b'truffle' at 2014-06-03 03:15:10.225008 , only 4 left&#13;
Lucy got a b'cherry' at 2014-06-03 03:15:10.727107 , only 4 left&#13;
Lucy got a b'cherry' at 2014-06-03 03:15:11.228226 , only 5 left&#13;
Lucy got a b'cherry' at 2014-06-03 03:15:11.729735 , only 4 left&#13;
Lucy got a b'truffle' at 2014-06-03 03:15:12.230894 , only 6 left&#13;
Lucy got a b'caramel' at 2014-06-03 03:15:12.732777 , only 7 left&#13;
Lucy got a b'cherry' at 2014-06-03 03:15:13.234785 , only 6 left&#13;
Lucy got a b'cherry' at 2014-06-03 03:15:13.736103 , only 7 left&#13;
Lucy got a b'caramel' at 2014-06-03 03:15:14.238152 , only 9 left&#13;
Lucy got a b'cherry' at 2014-06-03 03:15:14.739561 , only 8 left</pre>&#13;
&#13;
<p>Poor Lucy.</p>&#13;
</div></aside>&#13;
&#13;
<p>17.5&#13;
Use ZeroMQ to publish the poem from exercise 12.4&#13;
(from <a data-type="xref" href="ch12.html#mammoth">Example 12-1</a>), one word at a time.&#13;
Write a ZeroMQ consumer that prints every word that&#13;
starts with a vowel,&#13;
and another that prints every word that contains five letters.&#13;
Ignore punctuation characters.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794950958456">&#13;
<h5/>&#13;
<p>Here’s the server, <em>poem_pub.py</em>,&#13;
which plucks each word from the poem&#13;
and publishes it to the topic <code>vowels</code> if it starts with a vowel,&#13;
and the topic <code>five</code> if it has five letters.&#13;
Some words might be in both topics, some in neither.</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">string</code>&#13;
<code class="kn">import</code> <code class="nn">zmq</code>&#13;
&#13;
<code class="n">host</code> <code class="o">=</code> <code class="s1">'127.0.0.1'</code>&#13;
<code class="n">port</code> <code class="o">=</code> <code class="mi">6789</code>&#13;
<code class="n">ctx</code> <code class="o">=</code> <code class="n">zmq</code><code class="o">.</code><code class="n">Context</code><code class="p">()</code>&#13;
<code class="n">pub</code> <code class="o">=</code> <code class="n">ctx</code><code class="o">.</code><code class="n">socket</code><code class="p">(</code><code class="n">zmq</code><code class="o">.</code><code class="n">PUB</code><code class="p">)</code>&#13;
<code class="n">pub</code><code class="o">.</code><code class="n">bind</code><code class="p">(</code><code class="s1">'tcp://</code><code class="si">%s</code><code class="s1">:</code><code class="si">%s</code><code class="s1">'</code> <code class="o">%</code> <code class="p">(</code><code class="n">host</code><code class="p">,</code> <code class="n">port</code><code class="p">))</code>&#13;
&#13;
<code class="k">with</code> <code class="nb">open</code><code class="p">(</code><code class="s1">'mammoth.txt'</code><code class="p">,</code> <code class="s1">'rt'</code><code class="p">)</code> <code class="k">as</code> <code class="n">poem</code><code class="p">:</code>&#13;
    <code class="n">words</code> <code class="o">=</code> <code class="n">poem</code><code class="o">.</code><code class="n">read</code><code class="p">()</code>&#13;
<code class="k">for</code> <code class="n">word</code> <code class="ow">in</code> <code class="n">words</code><code class="o">.</code><code class="n">split</code><code class="p">():</code>&#13;
    <code class="n">word</code> <code class="o">=</code> <code class="n">word</code><code class="o">.</code><code class="n">strip</code><code class="p">(</code><code class="n">string</code><code class="o">.</code><code class="n">punctuation</code><code class="p">)</code>&#13;
    <code class="n">data</code> <code class="o">=</code> <code class="n">word</code><code class="o">.</code><code class="n">encode</code><code class="p">(</code><code class="s1">'utf-8'</code><code class="p">)</code>&#13;
    <code class="k">if</code> <code class="n">word</code><code class="o">.</code><code class="n">startswith</code><code class="p">((</code><code class="s1">'a'</code><code class="p">,</code><code class="s1">'e'</code><code class="p">,</code><code class="s1">'i'</code><code class="p">,</code><code class="s1">'o'</code><code class="p">,</code><code class="s1">'u'</code><code class="p">,</code><code class="s1">'A'</code><code class="p">,</code><code class="s1">'e'</code><code class="p">,</code><code class="s1">'i'</code><code class="p">,</code><code class="s1">'o'</code><code class="p">,</code><code class="s1">'u'</code><code class="p">)):</code>&#13;
        <code class="n">pub</code><code class="o">.</code><code class="n">send_multipart</code><code class="p">([</code><code class="s-Affix">b</code><code class="s1">'vowels'</code><code class="p">,</code> <code class="n">data</code><code class="p">])</code>&#13;
    <code class="k">if</code> <code class="nb">len</code><code class="p">(</code><code class="n">word</code><code class="p">)</code> <code class="o">==</code> <code class="mi">5</code><code class="p">:</code>&#13;
        <code class="n">pub</code><code class="o">.</code><code class="n">send_multipart</code><code class="p">([</code><code class="s-Affix">b</code><code class="s1">'five'</code><code class="p">,</code> <code class="n">data</code><code class="p">])</code></pre>&#13;
&#13;
<p>The client, <em>poem_sub.py</em>,&#13;
subscribes to the topics <code>vowels</code> and <code>five</code>&#13;
and prints the topic and word:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">string</code>&#13;
<code class="kn">import</code> <code class="nn">zmq</code>&#13;
&#13;
<code class="n">host</code> <code class="o">=</code> <code class="s1">'127.0.0.1'</code>&#13;
<code class="n">port</code> <code class="o">=</code> <code class="mi">6789</code>&#13;
<code class="n">ctx</code> <code class="o">=</code> <code class="n">zmq</code><code class="o">.</code><code class="n">Context</code><code class="p">()</code>&#13;
<code class="n">sub</code> <code class="o">=</code> <code class="n">ctx</code><code class="o">.</code><code class="n">socket</code><code class="p">(</code><code class="n">zmq</code><code class="o">.</code><code class="n">SUB</code><code class="p">)</code>&#13;
<code class="n">sub</code><code class="o">.</code><code class="n">connect</code><code class="p">(</code><code class="s1">'tcp://</code><code class="si">%s</code><code class="s1">:</code><code class="si">%s</code><code class="s1">'</code> <code class="o">%</code> <code class="p">(</code><code class="n">host</code><code class="p">,</code> <code class="n">port</code><code class="p">))</code>&#13;
<code class="n">sub</code><code class="o">.</code><code class="n">setsockopt</code><code class="p">(</code><code class="n">zmq</code><code class="o">.</code><code class="n">SUBSCRIBE</code><code class="p">,</code> <code class="s-Affix">b</code><code class="s1">'vowels'</code><code class="p">)</code>&#13;
<code class="n">sub</code><code class="o">.</code><code class="n">setsockopt</code><code class="p">(</code><code class="n">zmq</code><code class="o">.</code><code class="n">SUBSCRIBE</code><code class="p">,</code> <code class="s-Affix">b</code><code class="s1">'five'</code><code class="p">)</code>&#13;
<code class="k">while</code> <code class="bp">True</code><code class="p">:</code>&#13;
    <code class="n">topic</code><code class="p">,</code> <code class="n">word</code> <code class="o">=</code> <code class="n">sub</code><code class="o">.</code><code class="n">recv_multipart</code><code class="p">()</code>&#13;
    <code class="k">print</code><code class="p">(</code><code class="n">topic</code><code class="p">,</code> <code class="n">word</code><code class="p">)</code></pre>&#13;
&#13;
<p>If you start these and run them, they <em>almost</em> work.&#13;
Your code looks fine but nothing happens.&#13;
You need to read the&#13;
<a href="http://zguide.zeromq.org/page:all">ZeroMQ guide</a>&#13;
to learn about the&#13;
<em>slow joiner</em> problem:&#13;
even if you start the client before the server,&#13;
the server begins pushing data immediately after starting,&#13;
and the client takes a little time to connect to the server.&#13;
If you’re publishing a constant stream of something&#13;
and don’t really care&#13;
when the subscribers jump in, it’s no problem.&#13;
But in this case, the data stream is so short that it’s flown past&#13;
before the subscriber blinks,&#13;
like a fastball past a batter.</p>&#13;
&#13;
<p>The easiest way to fix this is to make the publisher sleep a second&#13;
after it calls <code>bind()</code>&#13;
and before it starts sending messages.&#13;
Call this version <em>poem_pub_sleep.py</em>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">string</code>&#13;
<code class="kn">import</code> <code class="nn">zmq</code>&#13;
<code class="kn">from</code> <code class="nn">time</code> <code class="kn">import</code> <code class="n">sleep</code>&#13;
&#13;
<code class="n">host</code> <code class="o">=</code> <code class="s1">'127.0.0.1'</code>&#13;
<code class="n">port</code> <code class="o">=</code> <code class="mi">6789</code>&#13;
<code class="n">ctx</code> <code class="o">=</code> <code class="n">zmq</code><code class="o">.</code><code class="n">Context</code><code class="p">()</code>&#13;
<code class="n">pub</code> <code class="o">=</code> <code class="n">ctx</code><code class="o">.</code><code class="n">socket</code><code class="p">(</code><code class="n">zmq</code><code class="o">.</code><code class="n">PUB</code><code class="p">)</code>&#13;
<code class="n">pub</code><code class="o">.</code><code class="n">bind</code><code class="p">(</code><code class="s1">'tcp://</code><code class="si">%s</code><code class="s1">:</code><code class="si">%s</code><code class="s1">'</code> <code class="o">%</code> <code class="p">(</code><code class="n">host</code><code class="p">,</code> <code class="n">port</code><code class="p">))</code>&#13;
&#13;
<code class="n">sleep</code><code class="p">(</code><code class="mi">1</code><code class="p">)</code>&#13;
&#13;
<code class="k">with</code> <code class="nb">open</code><code class="p">(</code><code class="s1">'mammoth.txt'</code><code class="p">,</code> <code class="s1">'rt'</code><code class="p">)</code> <code class="k">as</code> <code class="n">poem</code><code class="p">:</code>&#13;
    <code class="n">words</code> <code class="o">=</code> <code class="n">poem</code><code class="o">.</code><code class="n">read</code><code class="p">()</code>&#13;
<code class="k">for</code> <code class="n">word</code> <code class="ow">in</code> <code class="n">words</code><code class="o">.</code><code class="n">split</code><code class="p">():</code>&#13;
    <code class="n">word</code> <code class="o">=</code> <code class="n">word</code><code class="o">.</code><code class="n">strip</code><code class="p">(</code><code class="n">string</code><code class="o">.</code><code class="n">punctuation</code><code class="p">)</code>&#13;
    <code class="n">data</code> <code class="o">=</code> <code class="n">word</code><code class="o">.</code><code class="n">encode</code><code class="p">(</code><code class="s1">'utf-8'</code><code class="p">)</code>&#13;
    <code class="k">if</code> <code class="n">word</code><code class="o">.</code><code class="n">startswith</code><code class="p">((</code><code class="s1">'a'</code><code class="p">,</code><code class="s1">'e'</code><code class="p">,</code><code class="s1">'i'</code><code class="p">,</code><code class="s1">'o'</code><code class="p">,</code><code class="s1">'u'</code><code class="p">,</code><code class="s1">'A'</code><code class="p">,</code><code class="s1">'e'</code><code class="p">,</code><code class="s1">'i'</code><code class="p">,</code><code class="s1">'o'</code><code class="p">,</code><code class="s1">'u'</code><code class="p">)):</code>&#13;
        <code class="k">print</code><code class="p">(</code><code class="s1">'vowels'</code><code class="p">,</code> <code class="n">data</code><code class="p">)</code>&#13;
        <code class="n">pub</code><code class="o">.</code><code class="n">send_multipart</code><code class="p">([</code><code class="s-Affix">b</code><code class="s1">'vowels'</code><code class="p">,</code> <code class="n">data</code><code class="p">])</code>&#13;
    <code class="k">if</code> <code class="nb">len</code><code class="p">(</code><code class="n">word</code><code class="p">)</code> <code class="o">==</code> <code class="mi">5</code><code class="p">:</code>&#13;
        <code class="k">print</code><code class="p">(</code><code class="s1">'five'</code><code class="p">,</code> <code class="n">data</code><code class="p">)</code>&#13;
        <code class="n">pub</code><code class="o">.</code><code class="n">send_multipart</code><code class="p">([</code><code class="s-Affix">b</code><code class="s1">'five'</code><code class="p">,</code> <code class="n">data</code><code class="p">])</code></pre>&#13;
&#13;
<p>Start the subscriber and then the sleepy publisher:</p>&#13;
<pre>$ <strong>python poem_sub.py</strong></pre>&#13;
<pre>$ <strong>python poem_pub_sleep.py</strong></pre>&#13;
&#13;
<p>Now, the subscriber has time to grab its two topics.&#13;
Here are the first few lines of its output:</p>&#13;
&#13;
<pre data-type="programlisting">b'five' b'queen'&#13;
b'vowels' b'of'&#13;
b'five' b'Lying'&#13;
b'vowels' b'at'&#13;
b'vowels' b'ease'&#13;
b'vowels' b'evening'&#13;
b'five' b'flies'&#13;
b'five' b'seize'&#13;
b'vowels' b'All'&#13;
b'five' b'gaily'&#13;
b'five' b'great'&#13;
b'vowels' b'admired'</pre>&#13;
&#13;
<p>If you can’t add a <code>sleep()</code> to your publisher,&#13;
you can synchronize publisher and subscriber programs&#13;
by using <code>REQ</code> and <code>REP</code> sockets.&#13;
See the <em>publisher.py</em> and <em>subscriber.py</em>&#13;
examples <a href="http://bit.ly/pyzmq-gh">on GitHub</a>.<a data-startref="ix_appD-answers-asciidoc13" data-type="indexterm" id="idm45794950448280"/></p>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="18. The Web, Untangled" data-type="sect1"><div class="sect1" id="idm45794951920776">&#13;
<h1>18. The Web, Untangled</h1>&#13;
&#13;
<p>18.1&#13;
<a data-primary="World Wide Web" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794950446088"/>If you haven’t installed <code>flask</code> yet, do so now.&#13;
This will also install <code>werkzeug</code>, <code>jinja2</code>,&#13;
and possibly other packages.</p>&#13;
&#13;
<p>18.2&#13;
Build a skeleton website,&#13;
using Flask’s debug/reload development web server.&#13;
Ensure that the server starts up for hostname&#13;
<code>localhost</code> on default port <code>5000</code>.&#13;
If your machine is already using port 5000 for something else,&#13;
use another port number.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794950442008">&#13;
<h5/>&#13;
<p>Here’s <em>flask1.py</em>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">from</code> <code class="nn">flask</code> <code class="kn">import</code> <code class="n">Flask</code>&#13;
&#13;
<code class="n">app</code> <code class="o">=</code> <code class="n">Flask</code><code class="p">(</code><code class="nv-Magic">__name__</code><code class="p">)</code>&#13;
&#13;
<code class="n">app</code><code class="o">.</code><code class="n">run</code><code class="p">(</code><code class="n">port</code><code class="o">=</code><code class="mi">5000</code><code class="p">,</code> <code class="n">debug</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code></pre>&#13;
&#13;
<p>Gentlemen, start your engines:</p>&#13;
<pre>$ <strong>python flask1.py</strong>&#13;
 * Running on http://127.0.0.1:5000/&#13;
 * Restarting with reloader</pre>&#13;
</div></aside>&#13;
&#13;
<p>18.3&#13;
Add a <code>home()</code> function to handle requests for the home page.&#13;
Set it up to return the string <code>It's alive!</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794950428168">&#13;
<h5/>&#13;
<p>What should we call this one, <em>flask2.py</em>?</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">from</code> <code class="nn">flask</code> <code class="kn">import</code> <code class="n">Flask</code>&#13;
&#13;
<code class="n">app</code> <code class="o">=</code> <code class="n">Flask</code><code class="p">(</code><code class="nv-Magic">__name__</code><code class="p">)</code>&#13;
&#13;
<code class="nd">@app.route</code><code class="p">(</code><code class="s1">'/'</code><code class="p">)</code>&#13;
<code class="k">def</code> <code class="nf">home</code><code class="p">():</code>&#13;
    <code class="k">return</code> <code class="s2">"It's alive!"</code>&#13;
&#13;
<code class="n">app</code><code class="o">.</code><code class="n">run</code><code class="p">(</code><code class="n">debug</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code></pre>&#13;
&#13;
<p>Start the server:</p>&#13;
<pre>$ <strong>python flask2.py</strong>&#13;
 * Running on http://127.0.0.1:5000/&#13;
 * Restarting with reloader</pre>&#13;
&#13;
<p>Finally, access the home page via a browser,&#13;
command-line HTTP program such as&#13;
<code>curl</code> or <code>wget</code>, or even <code>telnet</code>:</p>&#13;
<pre>$ <strong>curl http://localhost:5000/</strong>&#13;
It's alive!</pre>&#13;
</div></aside>&#13;
&#13;
<p>18.4&#13;
Create a Jinja2 template file called <em>home.html</em>&#13;
with the following contents:</p>&#13;
&#13;
<pre data-type="programlisting">I'm of course referring to {{thing}},&#13;
which is {{height}} feet tall and {{color}}.</pre>&#13;
&#13;
<p>Make a directory called <em>templates</em>&#13;
and create the file <em>home.html</em> with the contents&#13;
just shown.&#13;
If your Flask server is still running from the previous examples,&#13;
it will detect the new content and restart itself.</p>&#13;
&#13;
<p>18.5&#13;
Modify your server’s <code>home()</code> function to&#13;
use the <em>home.html</em> template.&#13;
Provide it with three <code>GET</code> parameters:&#13;
<code>thing</code>, <code>height</code>, and <code>color</code>.</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794950356504">&#13;
<h5/>&#13;
<p>Here comes <em>flask3.py</em>:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">from</code> <code class="nn">flask</code> <code class="kn">import</code> <code class="n">Flask</code><code class="p">,</code> <code class="n">request</code><code class="p">,</code> <code class="n">render_template</code>&#13;
&#13;
<code class="n">app</code> <code class="o">=</code> <code class="n">Flask</code><code class="p">(</code><code class="nv-Magic">__name__</code><code class="p">)</code>&#13;
&#13;
<code class="nd">@app.route</code><code class="p">(</code><code class="s1">'/'</code><code class="p">)</code>&#13;
<code class="k">def</code> <code class="nf">home</code><code class="p">():</code>&#13;
    <code class="n">thing</code> <code class="o">=</code> <code class="n">request</code><code class="o">.</code><code class="n">values</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="s1">'thing'</code><code class="p">)</code>&#13;
    <code class="n">height</code> <code class="o">=</code> <code class="n">request</code><code class="o">.</code><code class="n">values</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="s1">'height'</code><code class="p">)</code>&#13;
    <code class="n">color</code> <code class="o">=</code> <code class="n">request</code><code class="o">.</code><code class="n">values</code><code class="o">.</code><code class="n">get</code><code class="p">(</code><code class="s1">'color'</code><code class="p">)</code>&#13;
    <code class="k">return</code> <code class="n">render_template</code><code class="p">(</code><code class="s1">'home.html'</code><code class="p">,</code>&#13;
        <code class="n">thing</code><code class="o">=</code><code class="n">thing</code><code class="p">,</code> <code class="n">height</code><code class="o">=</code><code class="n">height</code><code class="p">,</code> <code class="n">color</code><code class="o">=</code><code class="n">color</code><code class="p">)</code>&#13;
&#13;
<code class="n">app</code><code class="o">.</code><code class="n">run</code><code class="p">(</code><code class="n">debug</code><code class="o">=</code><code class="bp">True</code><code class="p">)</code></pre>&#13;
&#13;
<p>Go to this address in your web client:</p>&#13;
&#13;
<pre data-type="programlisting">http://localhost:5000/?thing=Octothorpe&amp;height=7&amp;color=green</pre>&#13;
&#13;
<p>You should see the following:</p>&#13;
&#13;
<pre data-type="programlisting">I'm of course referring to Octothorpe, which is 7 feet tall and green.</pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="19. Be a Pythonista" data-type="sect1"><div class="sect1" id="idm45794950447064">&#13;
<h1>19. Be a Pythonista</h1>&#13;
&#13;
<p>(Pythonistas don’t have homework today.)</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="20. Py Art" data-type="sect1"><div class="sect1" id="idm45794950185592">&#13;
<h1>20. Py Art</h1>&#13;
&#13;
<p>20.1&#13;
<a data-primary="graphics" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794950184024"/>Install <code>matplotlib</code>.&#13;
Draw a scatter diagram of these (x, y) pairs:&#13;
<code>( (0, 0), (3, 5), (6, 2), (9, 8), (14, 10) )</code>.</p>&#13;
&#13;
<p>20.2&#13;
Draw a line graph of the same data.</p>&#13;
&#13;
<p>20.3&#13;
Draw a plot (a line graph with markers) of the same data</p>&#13;
<aside data-type="sidebar" epub:type="sidebar"><div class="sidebar" id="idm45794950181000">&#13;
<h5/>&#13;
<p>This has all three as subplots:</p>&#13;
&#13;
<pre data-code-language="python" data-type="programlisting"><code class="kn">import</code> <code class="nn">matplotlib.pyplot</code> <code class="kn">as</code> <code class="nn">plt</code>&#13;
&#13;
<code class="n">x</code> <code class="o">=</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="mi">3</code><code class="p">,</code> <code class="mi">6</code><code class="p">,</code> <code class="mi">9</code><code class="p">,</code> <code class="mi">14</code><code class="p">)</code>&#13;
<code class="n">y</code> <code class="o">=</code> <code class="p">(</code><code class="mi">0</code><code class="p">,</code> <code class="mi">5</code><code class="p">,</code> <code class="mi">2</code><code class="p">,</code> <code class="mi">8</code><code class="p">,</code> <code class="mi">10</code><code class="p">)</code>&#13;
<code class="n">fig</code><code class="p">,</code> <code class="n">plots</code> <code class="o">=</code> <code class="n">plt</code><code class="o">.</code><code class="n">subplots</code><code class="p">(</code><code class="n">nrows</code><code class="o">=</code><code class="mi">1</code><code class="p">,</code> <code class="n">ncols</code><code class="o">=</code><code class="mi">3</code><code class="p">)</code>&#13;
&#13;
<code class="n">plots</code><code class="p">[</code><code class="mi">0</code><code class="p">]</code><code class="o">.</code><code class="n">scatter</code><code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">)</code>&#13;
<code class="n">plots</code><code class="p">[</code><code class="mi">1</code><code class="p">]</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">)</code>&#13;
<code class="n">plots</code><code class="p">[</code><code class="mi">2</code><code class="p">]</code><code class="o">.</code><code class="n">plot</code><code class="p">(</code><code class="n">x</code><code class="p">,</code> <code class="n">y</code><code class="p">,</code> <code class="s1">'o-'</code><code class="p">)</code>&#13;
&#13;
<code class="n">plt</code><code class="o">.</code><code class="n">show</code><code class="p">()</code></pre>&#13;
</div></aside>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="21. Py at Work" data-type="sect1"><div class="sect1" id="idm45794950177368">&#13;
<h1>21. Py at Work</h1>&#13;
&#13;
<p>21.1&#13;
<a data-primary="business applications" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794950052984"/>Install <code>geopandas</code> and run <a data-type="xref" href="ch21.html#geopandas_example">Example 21-1</a>.&#13;
Try modifying things like colors and marker sizes.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
<section data-pdf-bookmark="22. PySci" data-type="sect1"><div class="sect1" id="idm45794950050312">&#13;
<h1>22. PySci</h1>&#13;
&#13;
<p>22.1&#13;
<a data-primary="scientific applications" data-secondary="practice exercise answers" data-type="indexterm" id="idm45794950049016"/>Install Pandas. Get the CSV file in <a data-type="xref" href="ch16.html#villains_csv">Example 16-1</a>.&#13;
Run the program in <a data-type="xref" href="ch16.html#pandas_csv_example">Example 16-2</a>.&#13;
Experiment with some of the Pandas commands.</p>&#13;
</div></section>&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
&#13;
</div></section></body></html>