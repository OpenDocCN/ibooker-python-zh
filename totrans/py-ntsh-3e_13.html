<html><head></head><body>
<div id="sbo-rt-content"><section data-nutshell-tab="Time Operations" data-pdf-bookmark="Chapter 13. Time Operations" data-type="chapter" epub:type="chapter"><div class="chapter" id="time_operations">
<h1><span class="label">Chapter 13. </span>Time Operations</h1>
<p>A Python program can handle time in several ways. Time<a contenteditable="false" data-primary="intervals (time)" data-type="indexterm" id="idm44924509694864"/> <em>intervals</em> are floating-point numbers in units of seconds (a fraction of a second is the fractional part of the interval): all standard library functions accepting an argument that expresses a time interval in seconds accept a float as the value of that argument. <em>Instants<a contenteditable="false" data-primary="instants (time)" data-type="indexterm" id="idm44924509692992"/></em> in time are expressed in seconds since a reference instant, known as the<a contenteditable="false" data-primary="epochs" data-seealso="time operations" data-type="indexterm" id="idm44924509716320"/> <em>epoch</em>. (Although epochs vary per language and per platform, on all platforms, Python’s epoch is midnight, UTC, January 1, 1970.) Time instants often also need to be expressed as a mixture of units of measurement (e.g., years, months, days, hours, minutes, and seconds), particularly for I/O purposes. I/O, of course, also requires the ability to format times and dates into human-readable strings, and parse them back from string formats.</p>
<section data-pdf-bookmark="The time Module" data-type="sect1"><div class="sect1" id="the_time_module">
<h1>The time Module</h1>
<p>The<a contenteditable="false" data-primary="time operations" data-secondary="time module" data-type="indexterm" id="TOtmod13"/><a contenteditable="false" data-primary="time module" data-type="indexterm" id="timemod13"/><a contenteditable="false" data-primary="standard library modules" data-secondary="time" data-type="indexterm" id="SLMtime11"/> <span class="code">time</span> module is somewhat dependent on the underlying system’s C library, which sets the range of dates that the <span class="code">time</span> module can handle. On older Unix systems, the years 1970 and 2038 were typical cutoff points<sup><a data-type="noteref" href="ch13.xhtml#ch01fn110" id="ch01fn110-marker">1</a></sup> (a limitation avoided by using <span class="code">datetime</span>, discussed in the following section). Time instants are normally specified in<a contenteditable="false" data-primary="UTC (Universal Coordinated Time)" data-type="indexterm" id="idm44924509650768"/><a contenteditable="false" data-primary="Universal Coordinated Time (UTC)" data-type="indexterm" id="idm44924509649792"/> UTC (Coordinated Universal Time, once known as GMT, or Greenwich Mean Time). The <span class="code">time</span> module also supports local time zones and daylight savings time (DST), but only to the extent the underlying C system library does.<sup><a data-type="noteref" href="ch13.xhtml#ch01fn111" id="ch01fn111-marker">2</a></sup></p>
<p>As an alternative to seconds since the epoch, a time instant can be represented by a tuple of nine integers, called a<a contenteditable="false" data-primary="data types" data-secondary="tuples" data-type="indexterm" id="idm44924509645408"/><a contenteditable="false" data-primary="tuples" data-type="indexterm" id="idm44924509644192"/><a contenteditable="false" data-primary="timetuples" data-type="indexterm" id="idm44924509643216"/> <em>timetuple</em> (covered in <a data-type="xref" href="#tuple_form_of_time_representation">Table 13-1</a>.) All the items are integers: timetuples don’t keep track of fractions of a second. A timetuple is an instance of <span class="code">struct_time</span>. You can use it as a tuple; you can also, more usefully, access the items as the read-only attributes <span class="code"><em>x</em></span><span class="code">.tm_year</span>, <span class="code"><em>x</em></span><span class="code">.tm_mon</span>, and so on, with the attribute names listed in <a data-type="xref" href="#tuple_form_of_time_representation">Table 13-1</a>. Wherever a function requires a timetuple argument, you can pass an instance of <span class="code">struct_time</span> or any other sequence whose items are nine integers in the right ranges (all ranges in the table include both lower and upper bounds, both inclusive).</p>
<table class="border" id="tuple_form_of_time_representation">
<caption><span class="label">Table 13-1. </span>Tuple form of time representation</caption>
<thead>
<tr>
<th>Item</th>
<th>Meaning</th>
<th>Field name</th>
<th>Range</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="code">0</span></td>
<td>Year</td>
<td><span class="code">tm_year</span></td>
<td><span class="code">1970</span>–<span class="code">2038</span></td>
<td>0001–9999 on some platforms</td>
</tr>
<tr>
<td><span class="code">1</span></td>
<td>Month</td>
<td><span class="code">tm_mon</span></td>
<td><span class="code">1</span>–<span class="code">12</span></td>
<td><span class="code">1</span> is January; <span class="code">12</span> is December</td>
</tr>
<tr>
<td><span class="code">2</span></td>
<td>Day</td>
<td><span class="code">tm_mday</span></td>
<td><span class="code">1</span>–<span class="code">31</span></td>
<td> </td>
</tr>
<tr>
<td><span class="code">3</span></td>
<td>Hour</td>
<td><span class="code">tm_hour</span></td>
<td><span class="code">0</span>–<span class="code">23</span></td>
<td><span class="code">0</span> is midnight; <span class="code">12</span> is noon</td>
</tr>
<tr>
<td><span class="code">4</span></td>
<td>Minute</td>
<td><span class="code">tm_min</span></td>
<td><span class="code">0</span>–<span class="code">59</span></td>
<td> </td>
</tr>
<tr>
<td><span class="code">5</span></td>
<td>Second</td>
<td><span class="code">tm_sec</span></td>
<td><span class="code">0</span>–<span class="code">61</span></td>
<td><span class="code">60</span> and <span class="code">61</span> for leap seconds</td>
</tr>
<tr>
<td><span class="code">6</span></td>
<td>Weekday</td>
<td><span class="code">tm_wday</span></td>
<td><span class="code">0</span>–<span class="code">6</span></td>
<td><span class="code">0</span> is Monday; <span class="code">6</span> is Sunday</td>
</tr>
<tr>
<td><span class="code">7</span></td>
<td>Year day</td>
<td><span class="code">tm_yday</span></td>
<td><span class="code">1</span>–<span class="code">366</span></td>
<td>Day number within the year</td>
</tr>
<tr>
<td><span class="code">8</span></td>
<td>DST flag</td>
<td><span class="code">tm_isdst</span></td>
<td><span class="code">−1</span>–<span class="code">1</span></td>
<td><span class="code">−1</span> means the library determines DST</td>
</tr>
</tbody>
</table>
<p>To translate a time instant from a “seconds since the epoch” floating-point value into a timetuple, pass the floating-point value to a function (e.g., <span class="code">localtime</span>) that returns a timetuple with all nine items valid. When you convert in the other direction, <span class="code">mktime</span> ignores redundant items <span class="code">6</span> (<span class="code">tm_wday</span>) and <span class="code">7</span> (<span class="code">tm_yday</span>) of the tuple. In this case, you normally set item <span class="code">8</span> (<span class="code">tm_isdst</span>) to −1 so that <span class="code">mktime</span> itself determines whether to apply DST.</p>
<p><span class="code">time</span> supplies<a contenteditable="false" data-primary="asctime (time module)" data-type="indexterm" id="idm44924509575456"/> the functions and attributes listed in <a data-type="xref" href="#functions_and_attributes_of_the_time_mo">Table 13-2</a>.</p>
<table class="border" id="functions_and_attributes_of_the_time_mo">
<caption><span class="label">Table 13-2. </span>Functions and attributes of the <span class="code"><em>time</em></span> module</caption>
<tbody>
<tr>
<td><span class="code">asctime</span></td>
<td><span class="code">asctime([<em>tupletime</em>])</span><br/>
			Accepts a timetuple and returns a readable 24-character string, e.g., <span class="code">'Sun Jan 8 14:41:06</span> <span class="code">2017'</span>. Calling <span class="code">asctime()</span> without arguments is like calling <span class="code">asctime(time.localtime())</span> (formats current time in local time).</td>
</tr>
<tr>
<td><span class="code">ctime</span></td>
<td><span class="code">ctime([<em>secs</em>])</span><br/>
			Like <span class="code">asctime(localtime(<em>secs</em>))</span>, accepts an instant expressed in seconds since the epoch and returns a readable 24-character string form of that instant, in local time. Calling <span class="code">ctime()</span> without arguments is like calling <span class="code">asctime()</span> (formats current time in local time).</td>
</tr>
<tr>
<td><span class="code">gmtime</span></td>
<td><span class="code">gmtime([<em>secs</em>])</span><br/>
			Accepts an instant expressed in seconds since the epoch and returns a timetuple <span class="code"><em>t</em></span> with the UTC time (<span class="code"><em>t</em></span><span class="code">.tm_isdst</span> is always <span class="code">0</span>). Calling <span class="code">gmtime()</span> without arguments is like calling <span class="code">gmtime(time())</span> (returns the timetuple for the current time instant).</td>
</tr>
<tr>
<td><span class="code">localtime</span></td>
<td><span class="code">localtime([<em>secs</em>])</span><br/>
			Accepts an instant expressed in seconds since the epoch and returns a timetuple <span class="code"><em>t</em></span> with the local time (<span class="code"><em>t</em></span><span class="code">.tm_isdst</span> is <span class="code">0</span> or <span class="code">1</span>, depending on whether DST applies to instant <span class="code"><em>secs</em></span> by local rules). Calling <span class="code">localtime()</span> without arguments is like calling <span class="code">localtime(time())</span> (returns the timetuple for the current time instant).</td>
</tr>
<tr>
<td><span class="code">mktime</span></td>
<td><span class="code">mktime(<em>tupletime</em>)</span><br/>
			Accepts an instant expressed as a timetuple in local time and returns a floating-point value with the instant expressed in seconds since the epoch (only accepts the limited epoch dates between 1970–2038, not the extended range, even on 64-bit machines).<sup><a data-type="noteref" href="ch13.xhtml#ch01fn112" id="ch01fn112-marker">a</a></sup> The DST flag, the last item in <span class="code"><em>tupletime</em></span>, is meaningful: set it to <span class="code">0</span> to get standard time, to <span class="code">1</span> to get DST, or to <span class="code">−1</span> to let <span class="code">mktime</span> compute whether DST is in effect at the given instant.</td>
</tr>
<tr>
<td><span class="code">monotonic</span></td>
<td><span class="code">monotonic()</span><br/>
			Like<a contenteditable="false" data-primary="monotonic (time module)" data-type="indexterm" id="idm44924509531296"/> <span class="code">time()</span>, returns the current time instant, a <span class="code">float</span> with seconds since the epoch; however, the time value is guaranteed to never go backward between calls, even when the system clock is adjusted (e.g., due to leap seconds or at the moment of switching to or from DST).</td>
</tr>
<tr>
<td><span class="code">perf_counter</span></td>
<td><span class="code">perf_counter()</span><br/>
			For<a contenteditable="false" data-primary="perf_counter (time module)" data-type="indexterm" id="idm44924509526000"/> determining elapsed time between successive calls (like a stopwatch), <span class="code"> perf_counter</span> returns a time value in fractional seconds using the highest-resolution clock available to get accuracy for short durations. It is system-wide and <em>includes</em> time elapsed during <span class="code">sleep</span>. Use only the difference between successive calls, as there is no defined reference point.</td>
</tr>
<tr>
<td><span class="code">process_time</span></td>
<td><span class="code">process_time()</span><br/>
			Like<a contenteditable="false" data-primary="process_time (time module)" data-type="indexterm" id="idm44924509520176"/> <span class="code">perf_counter</span>; however, the returned time value is process-wide and <em>doesn’t</em> include time elapsed during <span class="code">sleep</span>. Use only the difference between successive calls, as there is no defined reference point.</td>
</tr>
<tr>
<td><span class="code">sleep</span></td>
<td><span class="code">sleep(<em>secs</em>)</span><br/>
			Suspends<a contenteditable="false" data-primary="sleep (time module)" data-type="indexterm" id="idm44924509514000"/> the calling thread for <span class="code"><em>secs</em></span> seconds. The calling thread may start executing again before <span class="code"><em>secs</em></span> seconds (when it’s the main thread and some signal wakes it up) or after a longer suspension (depending on system scheduling of processes and threads). You can call sleep with <span class="code"><em>secs</em></span> set to <span class="code">0</span> to offer other threads a chance to run, incurring no significant delay if the current thread is the only one ready to run.</td>
</tr>
<tr>
<td><span class="code">strftime</span></td>
<td><span class="code">strftime(<em>fmt</em>[,</span> <span class="code"><em>tupletime</em></span><span class="code">])</span><br/>
			Accepts<a contenteditable="false" data-primary="strftime (time module)" data-type="indexterm" id="idm44924509504784"/> an instant expressed as a timetuple in local time and returns a string representing the instant as specified by string <span class="code"><em>fmt</em></span>. If you omit <span class="code"><em>tupletime</em></span>, <span class="code">strftime</span> uses <span class="code">localtime(time())</span> (formats the current time instant). The syntax of <span class="code"><em>fmt</em></span> is similar to that covered in <a data-type="xref" href="ch09.xhtml#legacy_string_formatting_with_percent">“Legacy String Formatting with %”</a>, though the conversion characters are different, as shown in <a data-type="xref" href="#conversion_characters_for_strftime">Table 13-3</a>. Refer to the time instant specified by <span class="code"><em>tupletime</em></span>; the format can’t specify width and precision.<br/>
			For example, you can obtain dates just as formatted by <span class="code">asctime</span> (e.g., <span class="code">'Tue Dec 10 18:07:14 2002'</span>) with the format string <span class="code">'%a %b %d %H:%M:%S %Y'</span>.<br/>
			You can obtain dates compliant with RFC 822 (e.g., <span class="code">'Tue, 10 Dec 2002 18:07:14 EST'</span>) with the format string <span class="code">'%a, %d %b %Y %H:%M:%S %Z'</span>.<br/>
			These strings can also be used for <span class="code">datetime</span> formatting using the mechanisms discussed in <a data-type="xref" href="ch09.xhtml#formatting_of_user_coded_classes">“Formatting of User-Coded Classes”</a>, allowing you to equivalently write, for a <span class="code">datetime.datetime</span> object <span class="code">d</span>, either <span class="code">f'{d:%Y/%m/%d}</span>' or <span class="code">'{:%Y/%m/%d}'.format(d)</span>, both of which give a result such as ’2022/04/17’. For ISO 8601–format <span class="code">datetime</span>s, see the <span class="code">isoformat()</span> and <span class="code">fromisoformat()</span> methods covered in <a data-type="xref" href="#the_date_class">“The date Class”</a>.</td>
</tr>
<tr>
<td><span class="code">strptime</span></td>
<td><span class="code">strptime(<em>str</em>,</span> <span class="code"><em>fmt</em></span><span class="code">)</span><br/>
			Parses<a contenteditable="false" data-primary="strptime (time module)" data-type="indexterm" id="idm44924509480832"/> <span class="code"><em>str</em></span> according to format string <span class="code"><em>fmt</em></span> (a string such as <span class="code">'%a %b %d %H:%M:%S %Y'</span>, as covered in the discussion of <span class="code">strftime</span>) and returns the instant as a timetuple. If no time values are provided, defaults to midnight. If no date values are provided, defaults to January 1, 1900. For example:
			<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="nb">print</code><code class="p">(</code><code class="n">time</code><code class="o">.</code><code class="n">strptime</code><code class="p">(</code><code class="s2">"Sep 20, 2022"</code><code class="p">,</code> <code class="s1">'%b </code><code class="si">%d</code><code class="s1">, </code><code class="si">%Y</code><code class="s1">'</code><code class="p">))</code></pre>
<pre data-type="programlisting">
<strong>time.struct_time(tm_year=2022, tm_mon=9, tm_mday=20, 
tm_hour=0, tm_min=0, tm_sec=0, tm_wday=1, 
tm_yday=263, tm_isdst=-1)</strong></pre>
</td>
</tr>
<tr>
<td><span class="code">time</span></td>
<td><span class="code">time()</span><br/>
			Returns the current time instant, a <span class="code">float</span> with seconds since the epoch. On some (mostly older) platforms, the precision of this time is as low as one second. May return a lower value in a subsequent call if the system clock is adjusted backward between calls (e.g., due to leap seconds).</td>
</tr>
<tr>
<td><span class="code">timezone</span></td>
<td>The<a contenteditable="false" data-primary="timezone (time module)" data-type="indexterm" id="idm44924509450048"/> offset in seconds of the local time zone (without DST) from UTC (<span class="code">&lt;0</span> in the Americas; <span class="code">&gt;=0</span> in most of Europe, Asia, and Africa).</td>
</tr>
<tr>
<td><span class="code">tzname</span></td>
<td>A<a contenteditable="false" data-primary="tzname (time module)" data-type="indexterm" id="idm44924509445664"/> pair of locale-dependent strings, which are the names of the local time zone without and with DST, respectively.<a contenteditable="false" data-primary="" data-startref="TOtmod13" data-type="indexterm" id="idm44924509444272"/><a contenteditable="false" data-primary="" data-startref="timemod13" data-type="indexterm" id="idm44924509442896"/><a contenteditable="false" data-primary="" data-startref="SLMtime11" data-type="indexterm" id="idm44924509441520"/></td>
</tr>
</tbody>
<tbody><tr class="footnotes"><td colspan="2"><p data-type="footnote" id="ch01fn112"><sup><a href="ch13.xhtml#ch01fn112-marker">a</a></sup> <span class="code">mktime</span>’s result’s fractional part is always <span class="code">0</span>, since its timetuple argument does not account for fractions of a second.</p></td></tr></tbody></table>
<table class="border" id="conversion_characters_for_strftime">
<caption><span class="label">Table 13-3. </span>Conversion characters for <span class="code">strftime</span></caption>
<thead>
<tr>
<th>Type char</th>
<th>Meaning</th>
<th>Special notes</th>
</tr>
</thead>
<tbody>
<tr>
<td><span class="code">a</span></td>
<td>Weekday name, abbreviated</td>
<td>Depends on locale</td>
</tr>
<tr>
<td><span class="code">A</span></td>
<td>Weekday name, full</td>
<td>Depends on locale</td>
</tr>
<tr>
<td><span class="code">b</span></td>
<td>Month name, abbreviated</td>
<td>Depends on locale</td>
</tr>
<tr>
<td><span class="code">B</span></td>
<td>Month name, full</td>
<td>Depends on locale</td>
</tr>
<tr>
<td><span class="code">c</span></td>
<td>Complete date and time representation</td>
<td>Depends on locale</td>
</tr>
<tr>
<td><span class="code">d</span></td>
<td>Day of the month</td>
<td>Between 1 and 31</td>
</tr>
<tr>
<td><span class="code">f</span></td>
<td>Microsecond as decimal, zero-padded to six digits</td>
<td>One to six digits</td>
</tr>
<tr>
<td><span class="code">G</span></td>
<td>ISO 8601:2000 standard week-based year number</td>
<td> </td>
</tr>
<tr>
<td><span class="code">H</span></td>
<td>Hour (24-hour clock)</td>
<td>Between 0 and 23</td>
</tr>
<tr>
<td><span class="code">I</span></td>
<td>Hour (12-hour clock)</td>
<td>Between 1 and 12</td>
</tr>
<tr>
<td><span class="code">j</span></td>
<td>Day of the year</td>
<td>Between 1 and 366</td>
</tr>
<tr>
<td><span class="code">m</span></td>
<td>Month number</td>
<td>Between 1 and 12</td>
</tr>
<tr>
<td><span class="code">M</span></td>
<td>Minute number</td>
<td>Between 0 and 59</td>
</tr>
<tr>
<td><span class="code">p</span></td>
<td>A.M. or P.M. equivalent</td>
<td>Depends on locale</td>
</tr>
<tr>
<td><span class="code">S</span></td>
<td>Second number</td>
<td>Between 0 and 61</td>
</tr>
<tr>
<td><span class="code">u</span></td>
<td>Day of week</td>
<td>Monday is 1, up to 7</td>
</tr>
<tr>
<td><span class="code">U</span></td>
<td>Week number (Sunday first weekday)</td>
<td>Between 0 and 53</td>
</tr>
<tr>
<td><span class="code">V</span></td>
<td>ISO 8601:2000 standard week-based week number</td>
<td> </td>
</tr>
<tr>
<td><span class="code">w</span></td>
<td>Weekday number</td>
<td>0 is Sunday, up to 6</td>
</tr>
<tr>
<td><span class="code">W</span></td>
<td>Week number (Monday first weekday)</td>
<td>Between 0 and 53</td>
</tr>
<tr>
<td><span class="code">x</span></td>
<td>Complete date representation</td>
<td>Depends on locale</td>
</tr>
<tr>
<td><span class="code">X</span></td>
<td>Complete time representation</td>
<td>Depends on locale</td>
</tr>
<tr>
<td><span class="code">y</span></td>
<td>Year number within century</td>
<td>Between 0 and 99</td>
</tr>
<tr>
<td><span class="code">Y</span></td>
<td>Year number</td>
<td>1970 to 2038, or wider</td>
</tr>
<tr>
<td><span class="code">z</span></td>
<td>UTC offset as a string: ±HHMM[SS[.ffffff]]</td>
<td> </td>
</tr>
<tr>
<td><span class="code">Z</span></td>
<td>Name of time zone</td>
<td>Empty if no time zone exists</td>
</tr>
<tr>
<td><span class="code">%</span></td>
<td>A literal % character</td>
<td>Encoded as <span class="code">%%</span></td>
</tr>
</tbody>
</table>
</div></section>
<section data-pdf-bookmark="The datetime Module" data-type="sect1"><div class="sect1" id="the_datetime_module">
<h1>The datetime Module</h1>
<p><span class="code">datetime</span> provides<a contenteditable="false" data-primary="time operations" data-secondary="datetime module" data-type="indexterm" id="TOdatetime13"/><a contenteditable="false" data-primary="datetime module" data-type="indexterm" id="datetimemod13"/><a contenteditable="false" data-primary="standard library modules" data-secondary="datetime" data-type="indexterm" id="SLBdatetime13"/> classes for modeling date and time objects, which can be either<a contenteditable="false" data-primary="aware" data-type="indexterm" id="idm44924509350096"/> <em>aware</em> of<a contenteditable="false" data-primary="time zone" data-type="indexterm" id="idm44924509348416"/> time zones or <em>naive</em> (the default). The class <span class="code">tzinfo</span>, whose instances model a time zone, is abstract: the <span class="code">datetime</span> module supplies only one simple implementation, <span class="code">datetime.timezone</span> (for all the gory details, see the <a href="https://oreil.ly/8Bt8N">online docs</a>). The <span class="code">zoneinfo</span> module, covered in the following section, offers a richer concrete implementation of <span class="code">tzinfo</span>, which lets you easily create time zone-aware <span class="code">datetime</span> objects. All types in <span class="code">datetime</span> have immutable instances: attributes are read-only, instances can be keys in a <span class="code">dict</span> or items in a <span class="code">set</span>, and all functions and methods return new objects, never altering objects passed as arguments.</p>
<section data-pdf-bookmark="The date Class" data-type="sect2"><div class="sect2" id="the_date_class">
<h2>The date Class</h2>
<p>Instances<a contenteditable="false" data-primary="datetime module" data-secondary="date class" data-type="indexterm" id="idm44924509337568"/><a contenteditable="false" data-primary="date class (datetime module)" data-type="indexterm" id="dateclass13"/> of the <span class="code">date</span> class represent a date (no time of day in particular within that date) between <span class="code">date.min &lt;= d &lt;= date.max</span>, are always naive, and assume the Gregorian calendar was always in effect. <span class="code">date</span> instances have three read-only integer attributes: <span class="code"><em>year</em></span>, <span class="code"><em>month</em></span>, and <span class="code"><em>day</em></span>. The constructor for this class has the signature:</p>
<table class="border">
<tbody>
<tr>
<td><span class="code">date</span></td>
<td><span class="code"><strong>class</strong></span> <span class="code">date(<em>year, month, day</em>)</span><br/>
			Returns a date object for the given <span class="code"><em>year</em></span>, <span class="code"><em>month</em></span>, and <span class="code"><em>day</em></span> arguments, in the valid ranges <span class="code">1 &lt;=</span> <span class="code"><em>year</em></span> <span class="code">&lt;= 9999</span>, <span class="code">1 &lt;=</span> <span class="code"><em>month</em></span> <span class="code">&lt;= 12</span>, and <span class="code">1 &lt;=</span> <span class="code"><em>day</em></span> <span class="code">&lt;=</span> <span class="code"><em>n</em></span>, where <span class="code"><em>n</em></span> is the number of days for the given month and year. Raises <span class="code">ValueError</span> if invalid values are given.</td>
</tr>
</tbody>
</table>
<p>The <span class="code">date</span> class also supplies three class methods usable as alternative constructors, listed in <a data-type="xref" href="#alternative_datetime_constructor">Table 13-4</a>.</p>
<table class="border" id="alternative_datetime_constructor">
<caption><span class="label">Table 13-4. </span>Alternative <span class="code">date</span> constructors</caption>
<tbody>
<tr>
<td class="width-15"><span class="code">fromordinal</span></td>
<td><span class="code">date.fromordinal(<em>ordinal</em>)</span><br/>
			Returns a <span class="code">date</span> object corresponding to the <a href="https://oreil.ly/o_Li9">proleptic Gregorian ordinal</a> <span class="code"><em>ordinal</em></span>, where a value of <span class="code">1</span> corresponds to the first day of <span class="keep-together">year 1 CE</span>.</td>
</tr>
<tr>
<td><span class="code">fromtimestamp</span></td>
<td><span class="code">date.fromtimestamp(<em>timestamp</em>)</span><br/>
			Returns a <span class="code">date</span> object corresponding to the instant <span class="code"><em>timestamp</em></span> expressed in seconds since the epoch.</td>
</tr>
<tr>
<td><span class="code">today</span></td>
<td><span class="code">date.today()</span><br/>
			Returns<a contenteditable="false" data-primary="today (datetime.date class)" data-type="indexterm" id="idm44924509294384"/> a <span class="code">date</span> representing today’s date.</td>
</tr>
</tbody>
</table>
<p>Instances of the <span class="code">date</span> class support some arithmetic. The difference between <span class="code">date</span> instances is a<a contenteditable="false" data-primary="timedelta (datetime.datetime class)" data-type="indexterm" id="idm44924509289920"/> <span class="code">timedelta</span> instance; you can add or subtract a <span class="code">timedelta</span> to or from a <span class="code">date</span> instance to make another <span class="code">date</span> instance. You can also compare any two instances of the <span class="code">date</span> class (the later one is greater).</p>
<p class="pagebreak-before">An instance <span class="code"><em>d</em></span> of the class <span class="code">date</span> supplies the methods listed in <a data-type="xref" href="#methods_of_an_instance_d_of_class_date">Table 13-5</a>.</p>
<table class="border" id="methods_of_an_instance_d_of_class_date">
<caption><span class="label">Table 13-5. </span>Methods of an instance <span class="code">d</span> of class <span class="code">date</span></caption>
<tbody>
<tr>
<td class="width-15"><span class="code">ctime</span></td>
<td><span class="code"><em>d</em></span><span class="code">.ctime()</span><br/>
			Returns a string representing the date <span class="code"><em>d</em></span> in the same 24-character format as <span class="code">time.ctime</span> (with the time of day set to 00:00:00, midnight).</td>
</tr>
<tr>
<td><span class="code">isocalendar</span></td>
<td><span class="code"><em>d</em></span><span class="code">.isocalendar()</span><br/>
			Returns<a contenteditable="false" data-primary="isocalendar (datetime.date class)" data-type="indexterm" id="idm44924509270704"/> a tuple with three integers (ISO year, ISO week number, and ISO weekday). See the <a href="https://oreil.ly/e5yfG">ISO 8601 standard</a> for more details about the ISO (International Standards Organization) calendar.</td>
</tr>
<tr>
<td><span class="code">isoformat</span></td>
<td><span class="code"><em>d</em></span><span class="code">.isoformat()</span><br/>
			Returns<a contenteditable="false" data-primary="isoformat (datetime.date class)" data-type="indexterm" id="idm44924509265424"/> a string representing date <span class="code"><em>d</em></span> in the format <span class="code">'YYYY-MM-DD'</span>; same as <span class="code">str(<em>d</em>)</span>.</td>
</tr>
<tr>
<td><span class="code">isoweekday</span></td>
<td><span class="code"><em>d</em></span><span class="code">.isoweekday()</span><br/>
			Returns<a contenteditable="false" data-primary="isoweekday (datetime.date class)" data-type="indexterm" id="idm44924509258304"/> the day of the week of date <span class="code"><em>d</em></span> as an integer, <span class="code">1</span> for Monday through <span class="code">7</span> for Sunday; like <span class="code">d.weekday() + 1</span>.</td>
</tr>
<tr>
<td><span class="code">replace</span></td>
<td><span class="code"><em>d</em></span><span class="code">.replace(year=<strong>None</strong>, month=<strong>None</strong>, day=<strong>None</strong>)</span><br/>
			Returns<a contenteditable="false" data-primary="replace (datetime.date class)" data-type="indexterm" id="idm44924509249488"/> a new <span class="code">date</span> object, like <span class="code"><em>d</em></span> except for those attributes explicitly specified as arguments, which get replaced. For example:
			<pre data-code-language="python" data-type="programlisting">
<code class="n">date</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code class="n">y</code><code class="p">,</code><code class="n">z</code><code class="p">)</code><code class="o">.</code><code class="n">replace</code><code class="p">(</code><code class="n">month</code><code class="o">=</code><code class="n">m</code><code class="p">)</code> <code class="o">==</code> <code class="n">date</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code class="n">m</code><code class="p">,</code><code class="n">z</code><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">strftime</span></td>
<td><span class="code"><em>d</em></span><span class="code">.strftime(<em>fmt</em>)</span><br/>
			Returns a string representing date <span class="code"><em>d</em></span> as specified by string <span class="code"><em>fmt</em></span>, like:
			<pre data-code-language="python" data-type="programlisting">
<code class="n">time</code><code class="o">.</code><code class="n">strftime</code><code class="p">(</code><em><code class="n">fmt</code></em><code class="p">,</code><code> </code><em><code class="n">d</code></em><code class="o">.</code><code class="n">timetuple</code><code class="p">(</code><code class="p">)</code><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">timetuple</span></td>
<td><span class="code"><em>d</em></span><span class="code">.timetuple()</span><br/>
			Returns a timetuple corresponding to date <span class="code"><em>d</em></span> at time <span class="code">00:00:00</span> (midnight).</td>
</tr>
<tr>
<td><span class="code">toordinal</span></td>
<td><span class="code"><em>d</em></span><span class="code">.toordinal()</span><br/>
			Returns<a contenteditable="false" data-primary="toordinal (datetime.date class)" data-type="indexterm" id="idm44924509168464"/> the proleptic Gregorian ordinal for date <span class="code"><em>d</em></span>. For example:
			<pre data-code-language="python" data-type="programlisting">
<code class="n">date</code><code class="p">(</code><code class="mi">1</code><code class="p">,</code><code class="mi">1</code><code class="p">,</code><code class="mi">1</code><code class="p">)</code><code class="o">.</code><code class="n">toordinal</code><code class="p">()</code> <code class="o">==</code> <code class="mi">1</code></pre>
</td>
</tr>
<tr>
<td><span class="code">weekday</span></td>
<td><span class="code"><em>d</em></span><span class="code">.weekday()</span><br/>
			Returns<a contenteditable="false" data-primary="weekday (datetime.date class)" data-type="indexterm" id="idm44924509123424"/> the day of the week of date <span class="code"><em>d</em></span> as an integer, <span class="code">0</span> for Monday through <span class="code">6</span> for Sunday; like <span class="code">d.isoweekday() - 1</span>.<a contenteditable="false" data-primary="" data-startref="dateclass13" data-type="indexterm" id="idm44924509119248"/></td>
</tr>
</tbody>
</table>
</div></section>
<section data-pdf-bookmark="The time Class" data-type="sect2"><div class="sect2" id="the_time_class">
<h2>The time Class</h2>
<p>Instances<a contenteditable="false" data-primary="datetime module" data-secondary="time class" data-type="indexterm" id="idm44924509115744"/><a contenteditable="false" data-primary="time class (datetime module)" data-type="indexterm" id="idm44924509113952"/> of the <span class="code">time</span> class represent a time of day (of no particular date), may be naive or aware regarding<a contenteditable="false" data-primary="time zone" data-type="indexterm" id="timezone13"/> time zones, and always ignore leap seconds. They have five attributes: four read-only integers (<span class="code">hour</span>, <span class="code">minute</span>, <span class="code">second</span>, and <span class="code">microsecond</span>) and an optional read-only <span class="code">tzinfo</span> (<span class="code"><strong>None</strong></span> for naive instances). The constructor for the <span class="code">time</span> class has the signature:</p>
<table class="border">
<tbody>
<tr>
<td><span class="code">time</span></td>
<td><span class="code"><strong>class</strong></span> <span class="code">time(hour=0, minute=0, second=0, microsecond=0, tzinfo=<strong>None</strong>)</span><br/>
			Instances of the class <span class="code">time</span> do not support arithmetic. You can compare two instances of <span class="code">time</span> (the one that’s later in the day is greater), but only if they are either both aware or both naive.</td>
</tr>
</tbody>
</table>
<p>An instance <span class="code"><em>t</em></span> of the class <span class="code">time</span> supplies the methods listed in <a data-type="xref" href="#methods_of_an_instance_t_of_class_time">Table 13-6</a>.</p>
<table class="border" id="methods_of_an_instance_t_of_class_time">
<caption><span class="label">Table 13-6. </span>Methods of an instance <span class="code">t</span> of class <span class="code">time</span></caption>
<tbody>
<tr>
<td class="width-15"><span class="code">isoformat</span></td>
<td><span class="code"><em>t</em></span><span class="code">.isoformat()</span><br/>
			Returns<a contenteditable="false" data-primary="isoformat (datetime.time class)" data-type="indexterm" id="idm44924509077856"/> a string representing time <span class="code"><em>t</em></span> in the format <span class="code">'HH:MM:SS'</span>; same as <span class="code">str(<em>t</em>)</span>. If <span class="code"><em>t</em></span><span class="code">.microsecond != 0</span>, the resulting string is longer: <span class="code">'HH:MM:SS.mmmmmm'</span>. If <span class="code"><em>t</em></span> is aware, six more characters, <span class="code">'+HH:MM'</span>, are added at the end to represent the time zone’s offset from UTC. In other words, this formatting operation follows the <a href="https://oreil.ly/e5yfG">ISO 8601 standard</a>.</td>
</tr>
<tr>
<td><span class="code">replace</span></td>
<td><span class="code"><em>t</em></span><span class="code">.replace(hour=<strong>None</strong>, minute=<strong>None</strong>, second=<strong>None</strong>, microsecond=<strong>None</strong>[,</span> <span class="code"><em>tzinfo</em></span><span class="code">])</span><br/>
			Returns<a contenteditable="false" data-primary="replace (datetime.time class)" data-type="indexterm" id="idm44924509063248"/> a new <span class="code">time</span> object, like <span class="code"><em>t</em></span> except for those attributes explicitly specified as arguments, which get replaced. For example:
			<pre data-code-language="python" data-type="programlisting">
<code class="n">time</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code class="n">y</code><code class="p">,</code><code class="n">z</code><code class="p">)</code><code class="o">.</code><code class="n">replace</code><code class="p">(</code><code class="n">minute</code><code class="o">=</code><code class="n">m</code><code class="p">)</code> <code class="o">==</code> <code class="n">time</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code class="n">m</code><code class="p">,</code><code class="n">z</code><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">strftime</span></td>
<td><span class="code"><em>t</em></span><span class="code">.strftime(<em>fmt</em>)</span><br/>
			Returns a string representing time <span class="code"><em>t</em></span> as specified by the string <span class="code"><em>fmt</em></span>.</td>
</tr>
</tbody>
</table>
<p>An instance <span class="code"><em>t</em></span> of the class <span class="code">time</span> also supplies methods<a contenteditable="false" data-primary="dst (datetime.time class)" data-type="indexterm" id="idm44924509009152"/><a contenteditable="false" data-primary="tzname (datetime.time class)" data-type="indexterm" id="idm44924509008048"/><a contenteditable="false" data-primary="utcoffset (datetime.time class)" data-type="indexterm" id="idm44924509002112"/> <span class="code">dst</span>, <span class="code">tzname</span>, and <span class="code">utcoffset</span>, which accept no arguments and delegate to <span class="code"><em>t</em></span><span class="code">.tzinfo</span>, returning <span class="code"><strong>None</strong></span> when <span class="code"><em>t</em></span><span class="code">.tzinfo</span> is <span class="code"><strong>None</strong></span>.</p>
</div></section>
<section data-pdf-bookmark="The datetime Class" data-type="sect2"><div class="sect2" id="the_datetime_class">
<h2>The datetime Class</h2>
<p>Instances<a contenteditable="false" data-primary="datetime module" data-secondary="datetime class" data-type="indexterm" id="idm44924508992816"/><a contenteditable="false" data-primary="datetime class (datetime module)" data-type="indexterm" id="datetimecl13"/> of the <span class="code">datetime</span> class represent an instant (a date, with a specific time of day within that date), may be naive or aware of time zones, and always ignore leap seconds. <span class="code">datetime</span> extends <span class="code">date</span> and adds <span class="code">time</span>’s attributes; its instances have read-only integer attributes <span class="code">year</span>, <span class="code">month</span>, <span class="code">day</span>, <span class="code">hour</span>, <span class="code">minute</span>, <span class="code">second</span>, and <span class="code">microsecond</span>, and an optional <span class="code">tzinfo</span> attribute (<span class="code"><strong>None</strong></span> for naive instances). In addition, <span class="code">datetime</span> instances have a readonly <span class="code">fold</span> attribute to distinguish between ambiguous timestamps during a rollback of the clock (such as the “fall back” at the end of daylight savings time, which creates duplicate naive times between 1 A.M. and 2 A.M.). <span class="code">fold</span> has the value <span class="code">0</span> or <span class="code">1</span> <span class="code">0</span> corresponds to the time <em>before</em> the rollback; <span class="code">1</span> to the time <em>after</em> the rollback.</p>
<p>Instances of <span class="code">datetime</span> support some arithmetic: the difference between <span class="code">datetime</span> instances (both aware, or both naive) is a <span class="code">timedelta</span> instance, and you can add or subtract a <span class="code">timedelta</span> instance to or from a <span class="code">datetime</span> instance to construct another <span class="code">datetime</span> instance. You can compare two instances of the <span class="code">datetime</span> class (the later one is greater) as long as they’re both aware or both naive. The constructor for this class has the signature:</p>
<table class="border">
<tbody>
<tr>
<td class="width-15"><span class="code">datetime</span></td>
<td><span class="code"><strong>class</strong></span> <span class="code">datetime(<em>year</em>,</span> <span class="code"><em>month</em></span><span class="code">,</span> <span class="code"><em>day</em></span><span class="code">, hour=0, minute=0, second=0, microsecond=0, tzinfo=<strong>None</strong>, *, fold=0)</span><br/>
			Returns a <span class="code">datetime</span> object following similar constraints as the <span class="code">date</span> class constructor. <span class="code">fold</span> is an <span class="code">int</span> with the value <span class="code">0</span> or <span class="code">1</span>, as described previously.</td>
</tr>
</tbody>
</table>
<p><span class="code">datetime</span> also supplies some class methods usable as alternative constructors, covered in <a data-type="xref" href="#alternative_datetime_constructors">Table 13-7</a>.</p>
<table class="border" id="alternative_datetime_constructors">
<caption><span class="label">Table 13-7. </span>Alternative <span class="code">datetime</span> constructors</caption>
<tbody>
<tr>
<td class="width-15"><span class="code">combine</span></td>
<td><span class="code">datetime.combine(<em>date</em>,</span> <span class="code"><em>time</em></span><span class="code">)</span><br/>
			Returns<a contenteditable="false" data-primary="combine (datetime.datetime class)" data-type="indexterm" id="idm44924508947360"/> a <span class="code">datetime</span> object with the date attributes taken from <span class="code"><em>date</em></span> and the time attributes (including <span class="code">tzinfo</span>) taken from <span class="code"><em>time</em></span>. <span class="code">datetime.combine(<em>d, t</em>)</span> is like:
			<pre data-code-language="python" data-type="programlisting">
<code class="n">datetime</code><code class="p">(</code><code class="n">d</code><code class="o">.</code><code class="n">year</code><code class="p">,</code> <code class="n">d</code><code class="o">.</code><code class="n">month</code><code class="p">,</code> <code class="n">d</code><code class="o">.</code><code class="n">day</code><code class="p">,</code>
         <code class="n">t</code><code class="o">.</code><code class="n">hour</code><code class="p">,</code> <code class="n">t</code><code class="o">.</code><code class="n">minute</code><code class="p">,</code> <code class="n">t</code><code class="o">.</code><code class="n">second</code><code class="p">,</code>
         <code class="n">t</code><code class="o">.</code><code class="n">microsecond</code><code class="p">,</code> <code class="n">t</code><code class="o">.</code><code class="n">tzinfo</code><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">fromordinal</span></td>
<td><span class="code">datetime.fromordinal(<em>ordinal</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="fromordinal (datetime.datetime class)" data-type="indexterm" id="idm44924508905264"/> a <span class="code">datetime</span> object for the date given proleptic Gregorian ordinal <span class="code"><em>ordinal</em></span>, where a value of <span class="code">1</span> means the first day of year 1 CE, at midnight.</td>
</tr>
<tr>
<td><span class="code">fromt⁠i⁠m⁠e​s⁠t⁠a⁠mp</span></td>
<td><span class="code">datetime.fromtimestamp(<em>timestamp</em>, tz=<strong>None</strong>)</span><br/>
			Returns<a contenteditable="false" data-primary="fromtimestamp (datetime.datetime class)" data-type="indexterm" id="idm44924508898416"/> a <span class="code">datetime</span> object corresponding to the instant <span class="code"><em>timestamp</em></span> expressed in seconds since the epoch, in local time. When <span class="code">tz</span> is not <span class="code"><strong>None</strong></span>, returns an aware <span class="code">datetime</span> object with the given <span class="code">tzinfo</span> instance <span class="code">tz</span>.</td>
</tr>
<tr>
<td><span class="code">now</span></td>
<td><span class="code">datetime.now(tz=<strong>None</strong>)</span><br/>
			Returns<a contenteditable="false" data-primary="now (datetime.datetime class)" data-type="indexterm" id="idm44924508860160"/> a naive <span class="code">datetime</span> object for the current local date and time. When <span class="code">tz</span> is not <span class="code"><strong>None</strong></span>, returns an aware <span class="code">datetime</span> object with the given <span class="code">tzinfo</span> instance <span class="code">tz</span>.</td>
</tr>
<tr>
<td><span class="code">strptime</span></td>
<td><span class="code">datetime.strptime(<em>str</em>,</span> <span class="code"><em>fmt</em></span><span class="code">)</span><br/>
			Returns<a contenteditable="false" data-primary="strptime (datetime.datetime class)" data-type="indexterm" id="idm44924508850128"/> a <span class="code">datetime</span> representing <span class="code"><em>str</em></span> as specified by string <span class="code"><em>fmt</em></span>. When <span class="code">%z</span> is present in <span class="code"><em>fmt</em></span>, the resulting <span class="code">datetime</span> object is time zone–aware.</td>
</tr>
<tr>
<td><span class="code">today</span></td>
<td><span class="code">datetime.today()</span><br/>
			Returns<a contenteditable="false" data-primary="today (datetime.datetime class)" data-type="indexterm" id="idm44924508841728"/> a naive <span class="code">datetime</span> object representing the current local date and time; same as the <span class="code">now</span> class method but does not accept optional argument <span class="code"><em>tz</em></span>.</td>
</tr>
<tr>
<td><span class="code">utcf⁠r⁠o⁠m​t⁠i⁠m⁠estamp</span></td>
<td><span class="code">datetime.utcfromtimestamp(<em>timestamp</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="utcfromtimestamp (datetime.datetime class)" data-type="indexterm" id="idm44924508836096"/> a naive <span class="code">datetime</span> object corresponding to the instant <span class="code"><em>timestamp</em></span> expressed in seconds since the epoch, in UTC.</td>
</tr>
<tr>
<td><span class="code">utcnow</span></td>
<td><span class="code">datetime.utcnow()</span><br/>
			Returns<a contenteditable="false" data-primary="utcnow (datetime.datetime class)" data-type="indexterm" id="idm44924508830864"/> a naive <span class="code">datetime</span> object representing the current date and time, in UTC.</td>
</tr>
</tbody>
</table>
<p>An instance <span class="code"><em>d</em></span> of <span class="code">datetime</span> also supplies the methods listed in <a data-type="xref" href="#methods_of_an_instance_d_of_datetime">Table 13-8</a>.</p>
<table class="border" id="methods_of_an_instance_d_of_datetime">
<caption><span class="label">Table 13-8. </span>Methods of an instance <span class="code">d</span> of <span class="code">datetime</span></caption>
<tbody>
<tr>
<td class="width-15"><span class="code">astimezone</span></td>
<td><span class="code"><em>d</em></span><span class="code">.astimezone(<em>tz</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="astimezone (datetime.datetime class)" data-type="indexterm" id="idm44924508818512"/> a new aware <span class="code">datetime</span> object, like <span class="code"><em>d</em></span>, except that the date and time are converted along with the time zone to the one in <span class="code">tzinfo</span> object <span class="code"><em>tz</em></span>.<sup><a data-type="noteref" href="ch13.xhtml#ch01fn113" id="ch01fn113-marker">a</a></sup> <span class="code"><em>d</em></span> must be aware, to avoid potential bugs. Passing a naive <span class="code"><em>d</em></span> may lead to unexpected results.</td>
</tr>
<tr>
<td><span class="code">ctime</span></td>
<td><span class="code"><em>d</em></span><span class="code">.ctime()</span><br/>
			Returns<a contenteditable="false" data-primary="ctime (datetime.datetime class)" data-type="indexterm" id="idm44924508801824"/> a string representing date and time <span class="code"><em>d</em></span> in the same 24-character format as <span class="code">time.ctime</span>.</td>
</tr>
<tr>
<td><span class="code">date</span></td>
<td><span class="code"><em>d</em></span><span class="code">.date()</span><br/>
			Returns<a contenteditable="false" data-primary="date (datetime.datetime class)" data-type="indexterm" id="idm44924508795920"/> a date object representing the same date as <span class="code"><em>d</em></span>.</td>
</tr>
<tr>
<td><span class="code">isocalendar</span></td>
<td><span class="code"><em>d</em></span><span class="code">.isocalendar()</span><br/>
			Returns<a contenteditable="false" data-primary="isocalendar (datetime.datetime class)" data-type="indexterm" id="idm44924508790592"/> a tuple with three integers (ISO year, ISO week number, and ISO weekday) for <span class="code"><em>d</em></span>’s date.</td>
</tr>
<tr>
<td><span class="code">isoformat</span></td>
<td><span class="code"><em>d</em></span><span class="code">.isoformat(sep='T')</span><br/>
			Returns<a contenteditable="false" data-primary="isoformat (datetime.datetime class)" data-type="indexterm" id="idm44924508784944"/> a string representing <span class="code"><em>d</em></span> in the format <span class="code">'YYYY-MM-DDxHH:MM:SS'</span>, where <span class="code"><em>x</em></span> is the value of argument <span class="code">sep</span> (must be a string of length 1). If <span class="code"><em>d</em></span><span class="code">.microsecond != 0</span>, seven characters, <span class="code">'.mmmmmm'</span>, are added after the <span class="code">'SS'</span> part of the string. If <span class="code"><em>t</em></span> is aware, six more characters, <span class="code">'+HH:MM'</span>, are added at the end to represent the time zone’s offset from UTC. In other words, this formatting operation follows the ISO 8601 standard. <span class="code">str(<em>d</em>)</span> is the same as <span class="code"><em>d</em></span><span class="code">.isoformat(sep=' ')</span>.</td>
</tr>
<tr>
<td><span class="code">isoweekday</span></td>
<td><span class="code"><em>d</em></span><span class="code">.isoweekday()</span><br/>
			Returns<a contenteditable="false" data-primary="isoweekday (datetime.datetime class)" data-type="indexterm" id="idm44924508770480"/> the day of the week of <span class="code"><em>d</em></span>’s date as an integer, <span class="code">1</span> for Monday through <span class="code">7</span> for Sunday.</td>
</tr>
<tr>
<td><span class="code">replace</span></td>
<td><span class="code"><em>d</em></span><span class="code">.replace(year=<strong>None</strong>,</span> <span class="code">month=<strong>None</strong>,</span> <span class="code">day=<strong>None</strong>,</span> <span class="code">hour=<strong>None</strong>,</span> <span class="code">minute=<strong>None</strong>,</span> <span class="code">second=<strong>None</strong>,</span> <span class="code">microsecond=<strong>None</strong>,</span> <span class="code">tzinfo=<strong>None</strong>,*, fold=0)</span><br/>
			Returns<a contenteditable="false" data-primary="replace (datetime.datetime class)" data-type="indexterm" id="idm44924508755056"/> a new <span class="code">datetime</span> object, like <span class="code"><em>d</em></span> except for those attributes specified as arguments, which get replaced (but does <em>no</em> time zone conversion—use <span class="code">astimezone</span> if you want the time converted). You can also use <span class="code">replace</span> to create an aware <span class="code">datetime</span> object from a naive one. For example:
			<pre data-code-language="python" data-type="programlisting">
<em><code class="c1"># create datetime replacing just month with no</code></em><code class="c1"> </code><code>
</code><em><code class="c1"># other changes (== datetime(x,m,z))</code></em><code>
</code><code class="n">datetime</code><code class="p">(</code><code class="n">x</code><code class="p">,</code><code class="n">y</code><code class="p">,</code><code class="n">z</code><code class="p">)</code><code class="o">.</code><code class="n">replace</code><code class="p">(</code><code class="n">month</code><code class="o">=</code><code class="n">m</code><code class="p">)</code><code> </code><code>
</code><em><code class="c1"># create aware datetime from naive datetime.now()</code></em><code>
</code><em><code class="n">d</code></em><code> </code><code class="o">=</code><code> </code><code class="n">datetime</code><code class="o">.</code><code class="n">now</code><code class="p">(</code><code class="p">)</code><code class="o">.</code><code class="n">replace</code><code class="p">(</code><code class="n">tzinfo</code><code class="o">=</code><code class="n">ZoneInfo</code><code class="p">(</code><code>
</code><code>                    </code><code class="s2">"</code><code class="s2">US/Pacific</code><code class="s2">"</code><code class="p">)</code><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">strftime</span></td>
<td><span class="code"><em>d</em></span><span class="code">.strftime(<em>fmt</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="strftime (datetime.datetime class)" data-type="indexterm" id="idm44924508708832"/> a string representing <span class="code"><em>d</em></span> as specified by the format string <span class="code"><em>fmt</em></span>.</td>
</tr>
<tr>
<td><span class="code">time</span></td>
<td><span class="code"><em>d</em></span><span class="code">.time()</span><br/>
			Returns<a contenteditable="false" data-primary="time method (datetime.datetime class)" data-type="indexterm" id="idm44924508702816"/> a naive <span class="code">time</span> object representing the same time of day as <span class="code"><em>d</em></span>.</td>
</tr>
<tr>
<td><span class="code">timestamp</span></td>
<td><span class="code"><em>d</em></span><span class="code">.timestamp()</span><br/>
			Returns<a contenteditable="false" data-primary="timestamp (datetime.datetime class)" data-type="indexterm" id="idm44924508666896"/> a float with the seconds since the epoch. Naive instances are assumed to be in the local time zone.</td>
</tr>
<tr>
<td><span class="code">timetuple</span></td>
<td><span class="code"><em>d</em></span><span class="code">.timetuple()</span><br/>
			Returns<a contenteditable="false" data-primary="timetuple (datetime.datetime class)" data-type="indexterm" id="idm44924508662464"/> a timetuple corresponding to instant <span class="code"><em>d</em></span>.</td>
</tr>
<tr>
<td><span class="code">timetz</span></td>
<td><span class="code"><em>d</em></span><span class="code">.timetz()</span><br/>
			Returns<a contenteditable="false" data-primary="timetz (datetime.datetime class)" data-type="indexterm" id="idm44924508657072"/> a <span class="code">time</span> object representing the same time of day as <span class="code"><em>d</em></span>, with the same <span class="code">tzinfo</span>.</td>
</tr>
<tr>
<td><span class="code">toordinal</span></td>
<td><span class="code"><em>d</em></span><span class="code">.toordinal()</span><br/>
			Returns<a contenteditable="false" data-primary="toordinal (datetime.datetime class)" data-type="indexterm" id="idm44924508650400"/> the proleptic Gregorian ordinal for <span class="code"><em>d</em></span>’s date. For example:<br/>
<span class="code">datetime(1, 1, 1).toordinal() == 1</span></td>
</tr>
<tr>
<td><span class="code">utct⁠i⁠m⁠e​t⁠u⁠p⁠le</span></td>
<td><span class="code"><em>d</em></span><span class="code">.utctimetuple()</span><br/>
			Returns<a contenteditable="false" data-primary="utctimetuple (datetime.datetime class)" data-type="indexterm" id="idm44924508644544"/> a timetuple corresponding to instant <span class="code"><em>d</em></span>, normalized to UTC if <span class="code"><em>d</em></span> is aware.</td>
</tr>
<tr>
<td><span class="code">weekday</span></td>
<td><span class="code"><em>d</em></span><span class="code">.weekday()</span><br/>
			Returns<a contenteditable="false" data-primary="weekday (datetime.datetime class)" data-type="indexterm" id="idm44924508638304"/> the day of the week of <span class="code"><em>d</em></span>’s date as an integer, <span class="code">0</span> for Monday through <span class="code">6</span> for Sunday.</td>
</tr>
</tbody>
<tbody><tr class="footnotes"><td colspan="2"><p data-type="footnote" id="ch01fn113"><sup><a href="ch13.xhtml#ch01fn113-marker">a</a></sup> Note that <span class="code"><em>d</em></span><span class="code">.astimezone(<em>tz</em>)</span> is quite different from <span class="code"><em>d</em></span><span class="code">.replace(tzinfo=<em>tz</em>)</span>: <span class="code">replace</span> does no time zone conversion, but rather just copies all of <span class="code"><em>d</em></span>’s attributes except for <span class="code"><em>d</em></span><span class="code">.tzinfo</span>.</p></td></tr></tbody></table>
<p>An instance <span class="code"><em>d</em></span> of the class <span class="code">datetime</span> also supplies the methods <span class="code">dst</span>, <span class="code">tzname</span>, and <span class="code">utcoffset</span>, which accept no arguments and delegate to <span class="code"><em>d</em></span><span class="code">.tzinfo</span>, returning <span class="code"><strong>None</strong></span> when <span class="code"><em>d</em></span><span class="code">.tzinfo</span> is <span class="code"><strong>None</strong></span> (i.e., when <span class="code"><em>d</em></span> is naive).<a contenteditable="false" data-primary="" data-startref="datetimecl13" data-type="indexterm" id="idm44924508624960"/></p>
</div></section>
<section data-pdf-bookmark="The timedelta Class" data-type="sect2"><div class="sect2" id="the_timedelta_class">
<h2>The timedelta Class</h2>
<p>Instances<a contenteditable="false" data-primary="timedelta (datetime.datetime class)" data-type="indexterm" id="idm44924508621920"/><a contenteditable="false" data-primary="datetime module" data-secondary="timedelta class" data-type="indexterm" id="idm44924508620848"/> of the <span class="code">timedelta</span> class represent time intervals with three read-only integer attributes: <span class="code">days</span>, <span class="code">seconds</span>, and <span class="code">microseconds</span>. The constructor for this class has the signature:</p>
<table class="border">
<tbody>
<tr>
<td><span class="code">timedelta</span></td>
<td><span class="code">timedelta(days=0, seconds=0, microseconds=0, milliseconds=0, minutes=0, hours=0, weeks=0)</span><br/>
			Converts all units with the obvious factors (a week is 7 days, an hour is 3,600 seconds, and so on) and normalizes everything to the three integer attributes, ensuring that <span class="code">0 &lt;= seconds &lt; 24 * 60 * 60</span> and <span class="code">0 &lt;= microseconds &lt; 1000000</span>. For example:
			<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="nb">print</code><code class="p">(</code><code class="nb">repr</code><code class="p">(</code><code class="n">timedelta</code><code class="p">(</code><code class="n">minutes</code><code class="o">=</code><code class="mf">0.5</code><code class="p">)))</code></pre>
<pre data-type="programlisting">
<strong>datetime.timedelta(days=0, seconds=30)</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="nb">print</code><code class="p">(</code><code class="nb">repr</code><code class="p">(</code><code class="n">timedelta</code><code class="p">(</code><code class="n">minutes</code><code class="o">=-</code><code class="mf">0.5</code><code class="p">)))</code></pre>
<pre data-type="programlisting">
<strong>datetime.timedelta(days=-1, seconds=86370)</strong></pre>
			Instances of <span class="code">timedelta</span> support arithmetic: <span class="code">+</span> and <span class="code">-</span> between themselves and with instances of the classes <span class="code">date</span> and <span class="code">datetime</span>; <span class="code">*</span> with integers; <span class="code">/</span> with integers and <span class="code">timedelta</span> instances (floor division, true division, <span class="code">divmod</span>, <span class="code">%</span>). They also support comparisons between themselves.</td>
</tr>
</tbody>
</table>
<p>While <span class="code">timedelta</span> instances can be created using this constructor, they are more often created by subtracting two <span class="code">date</span>, <span class="code">time</span>, or <span class="code">datetime</span> instances, such that the resulting <span class="code">timedelta</span> represents an elapsed time period. An instance <span class="code"><em>td</em></span> of <span class="code">timedelta</span> supplies a method <span class="code"><em>td</em></span><span class="code">.total_seconds()</span> that returns a float representing the total seconds of a <span class="code">timedelta</span> instance.</p>
</div></section>
<section data-pdf-bookmark="The tzinfo Abstract Class" data-type="sect2"><div class="sect2" id="the_tzinfo_abstract_class">
<h2>The tzinfo Abstract Class</h2>
<p>The<a contenteditable="false" data-primary="datetime module" data-secondary="tzinfo abstract class" data-type="indexterm" id="idm44924508528960"/><a contenteditable="false" data-primary="tzinfo abstract class" data-type="indexterm" id="idm44924508527584"/> <span class="code">tzinfo</span> class defines the abstract class methods listed in <a data-type="xref" href="#methods_of_the_tzinfo_class">Table 13-9</a>, to support creation and usage of aware <span class="code">datetime</span> and <span class="code">time</span> objects.</p>
<table class="border" id="methods_of_the_tzinfo_class">
<caption><span class="label">Table 13-9. </span>Methods of the <span class="code">tzinfo</span> class</caption>
<tbody>
<tr>
<td><span class="code">dst</span></td>
<td><span class="code">dst(<em>dt</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="dst (tzinfo class)" data-type="indexterm" id="idm44924508518224"/> the daylight savings offset of a given <span class="code">datetime</span>, as a <span class="code">timedelta</span> object</td>
</tr>
<tr>
<td><span class="code">tzname</span></td>
<td><span class="code">tzname(<em>dt</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="tzname (tzinfo class)" data-type="indexterm" id="idm44924508512608"/> the abbreviation for the time zone of a given <span class="code">datetime</span></td>
</tr>
<tr>
<td><span class="code">utcoffset</span></td>
<td><span class="code">utcoffset(<em>dt</em>)</span><br/>
			Returns<a contenteditable="false" data-primary="utcoffset (tzinfo class)" data-type="indexterm" id="idm44924508507872"/> the offset from UTC of a given <span class="code">datetime</span>, as a <span class="code">timedelta</span> object</td>
</tr>
</tbody>
</table>
<p><span class="code">tzinfo</span> also defines a <span class="code">fromutc</span> abstract instance method, primarily for internal use by the <span class="code">datetime.astimezone</span> method.</p>
</div></section>
<section data-pdf-bookmark="The timezone Class" data-type="sect2"><div class="sect2" id="the_timezone_class">
<h2>The timezone Class</h2>
<p>The<a contenteditable="false" data-primary="datetime module" data-secondary="timezone class" data-type="indexterm" id="idm44924508500672"/><a contenteditable="false" data-primary="timezone class" data-type="indexterm" id="idm44924508498880"/> <span class="code">timezone</span> class is a concrete implementation of the <span class="code">tzinfo</span> class. You construct a <span class="code">timezone</span> instance using a <span class="code">timedelta</span> representing the time offset from UTC. <span class="code">timezone</span> supplies one class property, <span class="code">utc</span>, a <span class="code">timezone</span> representing the UTC time zone (equivalent to <span class="code">timezone(timedelta(0))</span>).<a contenteditable="false" data-primary="" data-startref="TOdatetime13" data-type="indexterm" id="idm44924508491856"/><a contenteditable="false" data-primary="" data-startref="datetimemod13" data-type="indexterm" id="idm44924508490448"/><a contenteditable="false" data-primary="" data-startref="SLBdatetime13" data-type="indexterm" id="idm44924508489072"/></p>
</div></section>
</div></section>
<section data-pdf-bookmark="The zoneinfo Module" data-type="sect1"><div class="sect1" id="the_zoneinfo_module">
<h1>The zoneinfo Module</h1>
<p><span class="version">3.9+</span> The <span class="code">zoneinfo</span><a contenteditable="false" data-primary="time operations" data-secondary="zoneinfo module" data-type="indexterm" id="idm44924508483968"/><a contenteditable="false" data-primary="zoneinfo module" data-type="indexterm" id="idm44924508482592"/><a contenteditable="false" data-primary="standard library modules" data-secondary="zoneinfo" data-type="indexterm" id="idm44924508481488"/> module is a concrete implementation of timezones for use with datetime’s <span class="code">tzinfo</span>.<sup><a data-type="noteref" href="ch13.xhtml#ch01fn114" id="ch01fn114-marker">3</a></sup> <span class="code">zoneinfo</span> uses the system’s time zone data by default, with <a href="https://oreil.ly/i1PF6"><span class="code">tzdata</span></a> as<a contenteditable="false" data-primary="tzdata" data-type="indexterm" id="idm44924508475280"/> a fallback. (On Windows, you may need to <span class="code"><strong>pip install tzdata</strong></span>; once installed, you don’t import <span class="code">tzdata</span> in your program—rather, <span class="code">zoneinfo</span> uses it automatically.)</p>
<p><span class="code">zoneinfo</span> provides one class: <span class="code">ZoneInfo</span>, a concrete implementation of the <span class="code">datetime.tzinfo</span> abstract class. You can assign it to <span class="code">tzinfo</span> during construction of an aware <span class="code">datetime</span> instance, or use it with the <span class="code">datetime.replace</span> or <span class="code">datetime.astimezone</span> methods. To construct a <span class="code">ZoneInfo</span>, use one of the defined IANA time zone names, such as <span class="code">"America/Los_Angeles"</span> or <span class="code">"Asia/Tokyo"</span>. You can get a list of these time zone names by calling <span class="code">zoneinfo.available_timezones()</span>. More details on each time zone (such as offset from UTC and daylight savings information) can be found <a href="https://oreil.ly/0u4KW">on Wikipedia</a>.</p>
<p>Here are some examples using <span class="code">ZoneInfo</span>. We’ll start by getting the current local date and time in California:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="kn">from</code></strong><code> </code><code class="nn">datetime</code><code> </code><strong><code class="kn">import</code></strong><code> </code><code class="n">datetime</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="kn">from</code></strong><code> </code><code class="nn">zoneinfo</code><code> </code><strong><code class="kn">import</code></strong><code> </code><code class="n">ZoneInfo</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">d</code><code class="o">=</code><code class="n">datetime</code><code class="o">.</code><code class="n">now</code><code class="p">(</code><code class="n">tz</code><code class="o">=</code><code class="n">ZoneInfo</code><code class="p">(</code><code class="s2">"</code><code class="s2">America/Los_Angeles</code><code class="s2">"</code><code class="p">)</code><code class="p">)</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">d</code></pre>
<pre data-type="programlisting">
<strong>datetime.datetime(2021,10,21,16,32,23,96782,tzinfo=zoneinfo.ZoneInfo(key
='America/Los_Angeles'))</strong></pre>
<p class="pagebreak-before">We can now update the time zone to a different one <em>without</em> changing other attributes (i.e., without converting the time to the new time zone):</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">dny</code><code class="o">=</code><code class="n">d</code><code class="o">.</code><code class="n">replace</code><code class="p">(</code><code class="n">tzinfo</code><code class="o">=</code><code class="n">ZoneInfo</code><code class="p">(</code><code class="s2">"America/New_York"</code><code class="p">))</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">dny</code></pre>
<pre data-type="programlisting">
<strong>datetime.datetime(2021,10,21,16,32,23,96782,tzinfo=zoneinfo.ZoneInfo(key
='America/New_York')) </strong></pre>
<p>Convert a <span class="code">datetime</span> instance to UTC:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">dutc</code><code class="o">=</code><code class="n">d</code><code class="o">.</code><code class="n">astimezone</code><code class="p">(</code><code class="n">tz</code><code class="o">=</code><code class="n">ZoneInfo</code><code class="p">(</code><code class="s2">"UTC"</code><code class="p">))</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">dutc</code></pre>
<pre data-type="programlisting">
<strong>datetime.datetime(2021,10,21,23,32,23,96782,tzinfo=zoneinfo.ZoneInfo(key
='UTC')) </strong></pre>
<p>Get an <em>aware</em> timestamp of the current time in UTC:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">daware</code><code class="o">=</code><code class="n">datetime</code><code class="o">.</code><code class="n">utcnow</code><code class="p">()</code><code class="o">.</code><code class="n">replace</code><code class="p">(</code><code class="n">tzinfo</code><code class="o">=</code><code class="n">ZoneInfo</code><code class="p">(</code><code class="s2">"UTC"</code><code class="p">))</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">daware</code></pre>
<pre data-type="programlisting">
<strong>datetime.datetime(2021,10,</strong><strong><em>21,23</em></strong><strong>,32,23,96782,tzinfo=zoneinfo.ZoneInfo(key</strong>
<strong>='UTC'))</strong></pre>
<p>Display the <span class="code">datetime</span> instance in a different time zone:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="n">dutc</code><code class="o">.</code><code class="n">astimezone</code><code class="p">(</code><code class="n">ZoneInfo</code><code class="p">(</code><code class="s2">"</code><code class="s2">Asia/Katmandu</code><code class="s2">"</code><code class="p">)</code><code class="p">)</code><code> </code><em><code class="c1"># offset +5h 45m</code></em></pre>
<pre data-type="programlisting">
<strong>datetime.datetime(2021,10,</strong><strong><em>22,5</em></strong><strong>,17,23,96782,tzinfo=zoneinfo.ZoneInfo(key</strong>
<strong>='Asia/Katmandu'))</strong> </pre>
<p>Get the local time zone:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">tz_local</code><code class="o">=</code><code class="n">datetime</code><code class="o">.</code><code class="n">now</code><code class="p">()</code><code class="o">.</code><code class="n">astimezone</code><code class="p">()</code><code class="o">.</code><code class="n">tzinfo</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">tz_local</code></pre>
<pre data-type="programlisting">
<strong>datetime.timezone(datetime.timedelta(days=-1, seconds=61200), 'Pacific</strong>
<strong>Daylight Time')</strong></pre>
<p>Convert the UTC <span class="code">datetime</span> instance back into the local time zone:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">dt_loc</code><code class="o">=</code><code class="n">dutc</code><code class="o">.</code><code class="n">astimezone</code><code class="p">(</code><code class="n">tz_local</code><code class="p">)</code>
<code class="o">&gt;&gt;&gt;</code> <code class="n">dt_loc</code></pre>
<pre data-type="programlisting">
<strong>datetime.datetime(2021, 10, 21, 16, 32, 23, 96782, tzinfo=datetime.time</strong>
<strong>(datetime.timedelta(days=-1, seconds=61200), 'Pacific Daylight Time'))</strong></pre>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">d</code><code class="o">==</code><code class="n">dt_local</code></pre>
<pre data-type="programlisting">
<strong>True</strong></pre>
<p>And<a contenteditable="false" data-primary="available_timezones (zoneinfo module)" data-type="indexterm" id="idm44924508160032"/> get a sorted list of all available time zones:</p>
<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;&gt;</code> <code class="n">tz_list</code><code class="o">=</code><code class="n">zoneinfo</code><code class="o">.</code><code class="n">available_timezones</code><code class="p">()</code>
<code class="o">&gt;&gt;&gt;</code> <code class="nb">sorted</code><code class="p">(</code><code class="n">tz_list</code><code class="p">)[</code><code class="mi">0</code><code class="p">],</code><code class="nb">sorted</code><code class="p">(</code><code class="n">tz_list</code><code class="p">)[</code><code class="o">-</code><code class="mi">1</code><code class="p">]</code></pre>
<pre data-type="programlisting">
<strong>('Africa/Abidjan', 'Zulu')</strong></pre>
<div data-type="tip">
<h1>Always Use the UTC Time Zone Internally</h1>
<p>The best way to program around the traps and pitfalls of time zones is to always use the UTC time zone internally, converting from other time zones on input, and use <span class="code">datetime.astimezone</span> only for display purposes.</p>
<p>This tip applies even if your application runs only in your own location, with no intention of ever using time data from other time zones. If your application runs continuously for days or weeks at a time, and the time zone configured for your system observes daylight savings time, you <em>will</em> run into time zone-related issues if you don’t work in UTC internally.<a contenteditable="false" data-primary="" data-startref="timezone13" data-type="indexterm" id="idm44924508109504"/></p>
</div>
</div></section>
<section data-pdf-bookmark="The dateutil Module" data-type="sect1"><div class="sect1" id="the_dateutil_module">
<h1>The dateutil Module</h1>
<p>The<a contenteditable="false" data-primary="time operations" data-secondary="dateutil module" data-type="indexterm" id="idm44924508106192"/><a contenteditable="false" data-primary="dateutil module" data-type="indexterm" id="idm44924508104784"/> third-party package <a href="https://oreil.ly/KKEf6"><span class="code">dateutil</span></a> (which you can install with <span class="code"><strong>pip install python-dateutil</strong></span>) offers modules to manipulate dates in many ways. <a data-type="xref" href="#dateutil_modules">Table 13-10</a> lists the main modules it provides, in addition to those for time zone–related operations (now best performed with <span class="code">zoneinfo</span>, discussed in the previous section).</p>
<table class="border" id="dateutil_modules">
<caption><span class="label">Table 13-10. </span><span class="code">dateutil</span> modules</caption>
<tbody>
<tr>
<td class="width-15"><span class="code">easter</span></td>
<td><span class="code">easter.easter(<em>year</em>)</span><br/>
			Returns the <span class="code">datetime.date</span> object for Easter of the given <span class="code"><em>year</em></span>. For example:
			<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="kn">from</code></strong><code> </code><code class="nn">dateutil</code><code> </code><strong><code class="kn">import</code></strong><code> </code><code class="n">easter</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="nb">print</code><code class="p">(</code><code class="n">easter</code><code class="o">.</code><code class="n">easter</code><code class="p">(</code><code class="mi">2023</code><code class="p">)</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>2023-04-09</strong></pre>
</td>
</tr>
<tr>
<td><span class="code">parser</span></td>
<td><span class="code">parser.parse(<em>s</em>)</span><br/>
			Returns the <span class="code">datetime.datetime</span> object denoted by string <span class="code"><em>s</em></span>, with very permissive (or “fuzzy”) parsing rules. For example:
			<pre data-code-language="python" data-type="programlisting">
<code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><strong><code class="kn">from</code></strong><code> </code><code class="nn">dateutil</code><code> </code><strong><code class="kn">import</code></strong><code> </code><code class="n">parser</code><code>
</code><code class="o">&gt;&gt;</code><code class="o">&gt;</code><code> </code><code class="nb">print</code><code class="p">(</code><code class="n">parser</code><code class="o">.</code><code class="n">parse</code><code class="p">(</code><code class="s1">'</code><code class="s1">Saturday, January 28,</code><code class="s1">'</code><code>
</code><code>                       </code><code class="s1">'</code><code class="s1"> 2006, at 11:15pm</code><code class="s1">'</code><code class="p">)</code><code class="p">)</code></pre>
<pre data-type="programlisting">
<strong>2006-01-28 23:15:00</strong></pre>
</td>
</tr>
<tr>
<td><span class="code">relativedelta</span></td>
<td><span class="code">relativedelta.relativedelta(...)</span><br/>
			Provides, among other things, an easy way to find “next Monday,” “last year,” etc. <span class="code">dateutil</span>’s <a href="https://oreil.ly/1zJqi">docs</a> offer detailed explanations of the rules defining the inevitably complicated behavior of <span class="code">relativedelta</span> instances.</td>
</tr>
<tr>
<td><span class="code">rrule</span></td>
<td><span class="code">rrule.rrule(<em>freq</em>, ...)</span><br/>
			Implements <a href="https://oreil.ly/Xs_NN">RFC 2445</a> (also known as the <span class="code">iCalendar</span> RFC), in all the glory of its 140+ pages. <span class="code">rrule</span> allows you to deal with recurring events, providing such methods as <span class="code">after</span>, <span class="code">before</span>, <span class="code">between</span>, and <span class="code">count</span>.</td>
</tr>
</tbody>
</table>
<p>See the <a href="https://oreil.ly/dmYej">documentation</a> for complete details on the <span class="code">dateutil</span> module’s rich <span class="keep-together">functionality</span>.</p>
</div></section>
<section data-pdf-bookmark="The sched Module" data-type="sect1"><div class="sect1" id="the_sched_module">
<h1>The sched Module</h1>
<p>The<a contenteditable="false" data-primary="time operations" data-secondary="sched module" data-type="indexterm" id="idm44924507960752"/><a contenteditable="false" data-primary="sched module" data-type="indexterm" id="idm44924507959376"/><a contenteditable="false" data-primary="standard library modules" data-secondary="sched" data-type="indexterm" id="idm44924507958240"/> <span class="code">sched</span> module implements an event scheduler, letting you easily deal with events that may be scheduled in either a “real” or a “simulated” time scale. This event scheduler is safe to use in single and multithreaded environments. <span class="code">sched</span> supplies a <span class="code">scheduler</span> class that takes two optional arguments, <span class="code">timefunc</span> and <span class="code">delayfunc</span>.</p>
<table class="border">
<tbody>
<tr>
<td><span class="code">scheduler</span></td>
<td><span class="code"><strong>class</strong></span> <span class="code">scheduler(timefunc=time.monotonic, delayfunc=time.sleep)</span><br/>
			The optional argument <span class="code">timefunc</span> must be callable without arguments to get the current time instant (in any unit of measure); for example, you can pass <span class="code">time.time</span>. The optional <span class="code">delayfunc</span> is callable with one argument (a time duration, in the same units as <span class="code">timefunc</span>) to delay the current thread for that time. <span class="code">scheduler</span> calls <span class="code">delayfunc(0)</span> after each event to give other threads a chance; this is compatible with <span class="code">time.sleep</span>. By taking functions as arguments, <span class="code">scheduler</span> lets you use whatever “simulated time” or “pseudotime” fits your application’s needs<sup><a data-type="noteref" href="ch13.xhtml#ch01fn115" id="ch01fn115-marker">a</a></sup>.<br/>
			If monotonic time (time that cannot go backward even if the system clock is adjusted backward between calls, e.g., due to leap seconds) is critical to your application, use the default <span class="code">time.monotonic</span> for your scheduler.</td>
</tr>
</tbody>
<tbody><tr class="footnotes"><td colspan="2"><p data-type="footnote" id="ch01fn115"><sup><a href="ch13.xhtml#ch01fn115-marker">a</a></sup> A great example of the <a href="https://oreil.ly/F8W_Z">dependency injection design pattern</a> for purposes not necessarily related to testing.</p></td></tr></tbody></table>
<p>A <span class="code">scheduler</span> instance <span class="code"><em>s</em></span> supplies the methods detailed in <a data-type="xref" href="#methods_of_an_instance_s_of_scheduler">Table 13-11</a>.</p>
<table class="border" id="methods_of_an_instance_s_of_scheduler">
<caption><span class="label">Table 13-11. </span>Methods of an instance <span class="code">s</span> of <span class="code">scheduler</span></caption>
<tbody>
<tr>
<td class="width-15"><span class="code">cancel</span></td>
<td><span class="code"><em>s</em></span><span class="code">.cancel(<em>event_token</em>)</span><br/>
			Removes an event from <span class="code"><em>s</em></span>’s queue. <span class="code"><em>event_token</em></span> must be the result of a previous call to <span class="code"><em>s</em></span><span class="code">.enter</span> or <span class="code"><em>s</em></span><span class="code">.enterabs</span>, and the event must not yet have happened; otherwise, <span class="code">cancel</span> raises <span class="code">RuntimeError</span>.</td>
</tr>
<tr>
<td><span class="code">empty</span></td>
<td><span class="code"><em>s</em></span><span class="code">.empty()</span><br/>
			Returns <span class="code"><strong>True</strong></span> when <span class="code"><em>s</em></span>’s queue is currently empty; otherwise, returns <span class="code"><strong>False</strong></span>.</td>
</tr>
<tr>
<td><span class="code">enter</span></td>
<td><span class="code"><em>s</em></span><span class="code">.enter(<em>delay</em>,</span> <span class="code"><em>priority</em></span><span class="code">,</span> <span class="code"><em>func</em></span><span class="code">, argument=()</span>, <span class="code">kwargs={})</span><br/>
			Like <span class="code">enterabs</span>, except that <span class="code"><em>delay</em></span> is a relative time (a positive difference forward from the current instant), while <span class="code">enterabs</span>’s argument <span class="code"><em>when</em></span> is an absolute time (a future instant). To schedule an event for <em>repeated</em> execution, use a little wrapper function; for example:
			<pre data-code-language="python" data-type="programlisting">
<strong><code class="k">def</code></strong><code> </code><code class="nf">enter_repeat</code><code class="p">(</code><code class="n">s</code><code class="p">,</code><code> </code><code class="n">first_delay</code><code class="p">,</code><code> </code><code class="n">period</code><code class="p">,</code><code> </code><code class="n">priority</code><code class="p">,</code><code>
</code><code>        </code><code class="n">func</code><code class="p">,</code><code> </code><code class="n">args</code><code class="p">)</code><code class="p">:</code><code>
</code><code>    </code><strong><code class="k">def</code></strong><code> </code><code class="nf">repeating_wrapper</code><code class="p">(</code><code class="p">)</code><code class="p">:</code><code>
</code><code>        </code><code class="n">s</code><code class="o">.</code><code class="n">enter</code><code class="p">(</code><code class="n">period</code><code class="p">,</code><code> </code><code class="n">priority</code><code class="p">,</code><code>
</code><code>                </code><code class="n">repeating_wrapper</code><code class="p">,</code><code> </code><code class="p">(</code><code class="p">)</code><code class="p">)</code><code>
</code><code>        </code><code class="n">func</code><code class="p">(</code><code class="o">*</code><code class="n">args</code><code class="p">)</code><code>
</code><code>    </code><code class="n">s</code><code class="o">.</code><code class="n">enter</code><code class="p">(</code><code class="n">first_delay</code><code class="p">,</code><code> </code><code class="n">priority</code><code class="p">,</code><code>
</code><code>        </code><code class="n">repeating_wrapper</code><code class="p">,</code><code> </code><code class="n">args</code><code class="p">)</code></pre>
</td>
</tr>
<tr>
<td><span class="code">enterabs</span></td>
<td><span class="code"><em>s</em></span><span class="code">.enterabs(<em>when</em>,</span> <span class="code"><em>priority</em></span><span class="code">,</span> <span class="code"><em>func</em></span><span class="code">, argument=(), kwargs={})</span><br/>
			Schedules a future event (a callback to <span class="code"><em>func</em></span><span class="code">(<em>args</em>,</span> <span class="code"><em>kwargs</em></span><span class="code">))</span> at time <span class="code"><em>when</em></span>. <span class="code"><em>when</em></span> is in the units used by the time functions of <span class="code"><em>s</em></span>. Should several events be scheduled for the same time, <span class="code"><em>s</em></span> executes them in increasing order of <span class="code"><em>priority</em></span>. <span class="code">enterabs</span> returns an event token <span class="code"><em>t</em></span>, which you may later pass to <span class="code"><em>s</em></span><span class="code">.cancel</span> to cancel this event.</td>
</tr>
<tr>
<td><span class="code">run</span></td>
<td><span class="code"><em>s</em></span><span class="code">.run(blocking=<strong>True</strong>)</span><br/>
			Runs scheduled events. If <span class="code">blocking</span> is <span class="code"><strong>True</strong></span>, <span class="code"><em>s</em></span><span class="code">.run</span> loops until <span class="code"><em>s</em></span><span class="code">.empty</span> returns <span class="code"><strong>True</strong></span>, using the <span class="code">delayfunc</span> passed on <span class="code"><em>s</em></span>’s initialization to wait for each scheduled event. If <span class="code">blocking</span> is <span class="code"><strong>False</strong></span>, executes any soon-to-expire events, then returns the next event’s deadline (if any). When a callback <span class="code"><em>func</em></span> raises an exception, <span class="code"><em>s</em></span> propagates it, but <span class="code"><em>s</em></span> keeps its own state, removing the event from the schedule. If a callback <span class="code"><em>func</em></span> runs longer than the time available before the next scheduled event, <span class="code"><em>s</em></span> falls behind but keeps executing scheduled events in order, never dropping any. Call <span class="code"><em>s</em></span><span class="code">.cancel</span> to drop an event explicitly if that event is no longer of interest.</td>
</tr>
</tbody>
</table>
</div></section>
<section data-pdf-bookmark="The calendar Module" data-type="sect1"><div class="sect1" id="the_calendar_module">
<h1>The calendar Module</h1>
<p>The<a contenteditable="false" data-primary="time operations" data-secondary="calendar module" data-type="indexterm" id="idm44924507783968"/><a contenteditable="false" data-primary="calendar module" data-type="indexterm" id="idm44924507782592"/><a contenteditable="false" data-primary="standard library modules" data-secondary="calendar" data-type="indexterm" id="idm44924507781456"/> <span class="code">calendar</span> module supplies calendar-related functions, including functions to print a text calendar for a given month or year. By default, <span class="code">calendar</span> takes Monday as the first day of the week and Sunday as the last one. To change this, call <span class="code">calendar.setfirstweekday</span>. <span class="code">calendar</span> handles years in module <span class="code">time</span>’s range, typically (at least) 1970 to 2038.</p>
<p>The <span class="code">calendar</span> module supplies the functions listed in <a data-type="xref" href="#functions_of_the_calendar_module">Table 13-12</a>.</p>
<table class="border" id="functions_of_the_calendar_module">
<caption><span class="label">Table 13-12. </span>Functions of the <span class="code">calendar</span> module</caption>
<tbody>
<tr>
<td class="width-20"><span class="code">calendar</span></td>
<td><span class="code">calendar(</span><span class="code"><em>year,</em></span> <span class="code">w=2, li=1, c=6)</span><br/>
			Returns a multiline string with a calendar for year <span class="code"><em>year</em></span> formatted into three columns separated by <span class="code">c</span> spaces. <span class="code">w</span> is the width in characters of each date; each line has length <span class="code">21*w+18+2*c</span>. <span class="code">li</span> is the number of lines for each week.</td>
</tr>
<tr>
<td><span class="code">firstweekday</span></td>
<td><span class="code">firstweekday()</span><br/>
			Returns the current setting for the weekday that starts each week. By default, when <span class="code">calendar</span> is first imported, this is <span class="code">0</span> (meaning Monday).</td>
</tr>
<tr>
<td><span class="code">isleap</span></td>
<td><span class="code">isleap(<em>year</em>)</span><br/>
			Returns <span class="code"><strong>True</strong></span> if <span class="code"><em>year</em></span> is a leap year; otherwise, returns <span class="code"><strong>False</strong></span>.</td>
</tr>
<tr>
<td><span class="code">leapdays</span></td>
<td><span class="code">leapdays(<em>y1</em>,</span> <span class="code"><em>y2</em></span><span class="code">)</span><br/>
			Returns the total number of leap days in the years within <span class="code">range(<em>y1</em>,</span> <span class="code"><em>y2</em></span><span class="code">)</span> (remember, this means that <span class="code"><em>y2</em></span> is excluded).</td>
</tr>
<tr>
<td><span class="code">month</span></td>
<td><span class="code">month(<em>year</em>,</span> <span class="code"><em>month</em></span><span class="code">, w=2, li=1)</span><br/>
			Returns a multiline string with a calendar for month <span class="code"><em>month</em></span> of year <span class="code"><em>year</em></span>, one line per week plus two header lines. <span class="code">w</span> is the width in characters of each date; each line has length <span class="code">7*w+6</span>. <span class="code">li</span> is the number of lines for each week.</td>
</tr>
<tr>
<td><span class="code">mo⁠n⁠t⁠h​c⁠a⁠l⁠endar</span></td>
<td><span class="code">monthcalendar(<em>year</em>,</span> <span class="code"><em>month</em></span><span class="code">)</span><br/>
			Returns a list of lists of <span class="code">int</span>s. Each sublist denotes a week. Days outside month <span class="code"><em>month</em></span> of year <span class="code"><em>year</em></span> are set to <span class="code">0</span>; days within the month are set to their day of month, <span class="code">1</span> and up.</td>
</tr>
<tr>
<td><span class="code">monthrange</span></td>
<td><span class="code">monthrange(<em>year</em>,</span> <span class="code"><em>month</em></span><span class="code">)</span><br/>
			Returns two integers. The first one is the code of the weekday for the first day of the month <span class="code"><em>month</em></span> in year <span class="code"><em>year</em></span>; the second one is the number of days in the month. Weekday codes are <span class="code">0</span> (Monday) to <span class="code">6</span> (Sunday); month numbers are <span class="code">1</span> to <span class="code">12</span>.</td>
</tr>
<tr>
<td><span class="code">prcal</span></td>
<td><span class="code">prcal(<em>year</em>, w=2, li=1, c=6)</span><br/>
			Like <span class="code">print(calendar.calendar(<em>year</em>,</span> <span class="code"><em>w</em></span><span class="code">,</span> <span class="code"><em>li</em></span><span class="code">,</span> <span class="code"><em>c</em></span><span class="code">))</span>.</td>
</tr>
<tr>
<td><span class="code">prmonth</span></td>
<td><span class="code">prmonth(<em>year</em>,</span> <span class="code"><em>month</em></span><span class="code">, w=2, li=1)</span><br/>
			Like <span class="code">print(calendar.month(<em>year</em>,</span> <span class="code"><em>month</em></span><span class="code">,</span> <span class="code"><em>w</em></span><span class="code">,</span> <span class="code"><em>li</em></span><span class="code">))</span>.</td>
</tr>
<tr>
<td><span class="code">setfirstweekday</span></td>
<td><span class="code">setfirstweekday(<em>weekday</em>)</span><br/>
			Sets the first day of each week to weekday code <span class="code"><em>weekday</em></span>. Weekday codes are <span class="code">0</span> (Monday) to <span class="code">6</span> (Sunday). <span class="code">calendar</span> supplies the attributes <span class="code">MONDAY</span>, <span class="code">TUESDAY</span>, <span class="code">WEDNESDAY</span>, <span class="code">THURSDAY</span>, <span class="code">FRIDAY</span>, <span class="code">SATURDAY</span>, and <span class="code">SUNDAY</span>, whose values are the integers <span class="code">0</span> to <span class="code">6</span>. Use these attributes when you mean weekdays (e.g., <span class="code">calendar.FRIDAY</span> instead of <span class="code">4</span>) to make your code clearer and more readable.</td>
</tr>
<tr>
<td><span class="code">timegm</span></td>
<td><span class="code">timegm(<em>tupletime</em>)</span><br/>
			Just like <span class="code">time.mktime</span>: accepts a time instant in timetuple form and returns that instant as a <span class="code">float</span> number of seconds since the epoch.</td>
</tr>
<tr>
<td><span class="code">weekday</span></td>
<td><span class="code">weekday(<em>year</em>,</span> <span class="code"><em>month</em></span><span class="code">,</span> <span class="code"><em>day</em></span><span class="code">)</span><br/>
			Returns the weekday code for the given date. Weekday codes are <span class="code">0</span> (Monday) to <span class="code">6</span> (Sunday); month numbers are <span class="code">1</span> (January) to <span class="code">12</span> (December).</td>
</tr>
</tbody>
</table>
<p><span class="code"><strong>python -m calendar</strong></span> offers a useful command-line interface to the module’s functionality: run <span class="code"><strong>python -m calendar -h</strong></span> to get a brief help message.</p>
</div></section>
<div data-type="footnotes"><p data-type="footnote" id="ch01fn110"><sup><a href="ch13.xhtml#ch01fn110-marker">1</a></sup> On older Unix systems, 1970-01-01 is the start of the epoch, and 2038-01-19 is when 32-bit time wraps back to the epoch. Most modern systems now use 64-bit time, and many <span class="code">time</span> methods can accept a year from 0001 to 9999, but some methods, or old systems (especially embedded ones), may still be limited.</p><p data-type="footnote" id="ch01fn111"><sup><a href="ch13.xhtml#ch01fn111-marker">2</a></sup> <span class="code">time</span> and <span class="code">datetime</span> don’t account for leap seconds, since their schedule is not known for the future.</p><p data-type="footnote" id="ch01fn114"><sup><a href="ch13.xhtml#ch01fn114-marker">3</a></sup> Pre-3.9, use instead the third-party module <a href="https://oreil.ly/65xFP"><span class="code">pytz</span></a>.</p></div></div></section></div></body></html>